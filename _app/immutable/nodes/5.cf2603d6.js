import{g as r_,e as wi,c as _d,b as a_,a as vd,s as o_,d as s_,f as l_,S as u_}from"../chunks/navigation.4bda2bca.js";import{g as Er,a as wp,m as Bu,b as sp,c as c_,d as Qn,e as p_}from"../chunks/config.2c5c324e.js";import{s as sr,f as Oe,g as Ne,h as Ge,d as oe,j as re,J as Zu,i as Me,K as Ku,H as ag,o as Ap,C as Ou,E as Nu,F as Uu,G as Vu,p as Ns,e as ri,w as Hu,L as h_,I as Kt,M as Ai,k as $e,N as Hr,O as Wr,u as Ae,v as tn,P as or,Q as as,l as Nt,m as Ut,n as Si,a as kt,c as Et,r as lo,R as Pp,y as Sp,A as f_,S as po,T as ho,x as Ah,D as d_,U as m_,V as _p}from"../chunks/scheduler.a2c9abeb.js";import{S as lr,i as ur,a as ct,g as Xr,t as _t,c as Yr,b as ui,d as ci,m as pi,e as hi,f as g_}from"../chunks/index.49c2d5c7.js";import{b as ni}from"../chunks/paths.994d535c.js";import{S as y_}from"../chunks/Section.985dde47.js";/* empty css                                                              */import{w as Pi,h as Fn}from"../chunks/singletons.c9d9ec02.js";function wh(l,p){const d={},h={},y={$$scope:1};let v=l.length;for(;v--;){const a=l[v],T=p[v];if(T){for(const S in a)S in T||(h[S]=1);for(const S in T)y[S]||(d[S]=T[S],y[S]=1);l[v]=T}else for(const S in a)y[S]=1}for(const a in h)a in d||(d[a]=void 0);return d}async function bd(l,p){return await(await p(wp.app_json_data+l+".json")).json()}async function __({params:l,fetch:p}){let d=l.code,h=await r_(wp.search_data,p),y={};h.forEach(S=>y[S.code]=S.name),h.forEach(S=>{S.typepl=Er[S.type].pl,S.typenm=Er[S.type].name,S.typestr=y[S.parent]&&S.parent==S.code?`View:  ${y[S.parent]}
        ${Er[S.parent_type].name}  `:y[S.parent]&&S.parent!=S.code?`${Er[S.type].name} `:""});let v=h.sort((S,D)=>S.name.localeCompare(D.name)),a=await bd("N92000002",p),T=await bd(d,p);return{search_data:v,place:T,ni:a}}const rb=Object.freeze(Object.defineProperty({__proto__:null,load:__},Symbol.toStringTag,{value:"Module"}));var v_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b_(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var x_={rgb2hsl:Wu,rgb2hsv:Cp,rgb2hwb:Xu,rgb2cmyk:Yu,rgb2keyword:Ju,rgb2xyz:Fh,rgb2lab:Oh,rgb2lch:w_,hsl2rgb:Mp,hsl2hsv:S_,hsl2hwb:k_,hsl2cmyk:E_,hsl2keyword:z_,hsv2rgb:Dp,hsv2hsl:T_,hsv2hwb:I_,hsv2cmyk:A_,hsv2keyword:P_,hwb2rgb:Qu,hwb2hsl:C_,hwb2hsv:M_,hwb2cmyk:D_,hwb2keyword:L_,cmyk2rgb:$u,cmyk2hsl:R_,cmyk2hsv:B_,cmyk2hwb:F_,cmyk2keyword:O_,keyword2rgb:Us,keyword2hsl:q_,keyword2hsv:j_,keyword2hwb:G_,keyword2cmyk:Z_,keyword2lab:K_,keyword2xyz:H_,xyz2rgb:og,xyz2lab:sg,xyz2lch:N_,lab2xyz:Nh,lab2rgb:lg,lab2lch:Uh,lch2lab:Vh,lch2xyz:U_,lch2rgb:V_};function Wu(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255,y=Math.min(p,d,h),v=Math.max(p,d,h),a=v-y,T,S,D;return v==y?T=0:p==v?T=(d-h)/a:d==v?T=2+(h-p)/a:h==v&&(T=4+(p-d)/a),T=Math.min(T*60,360),T<0&&(T+=360),D=(y+v)/2,v==y?S=0:D<=.5?S=a/(v+y):S=a/(2-v-y),[T,S*100,D*100]}function Cp(l){var p=l[0],d=l[1],h=l[2],y=Math.min(p,d,h),v=Math.max(p,d,h),a=v-y,T,S,D;return v==0?S=0:S=a/v*1e3/10,v==y?T=0:p==v?T=(d-h)/a:d==v?T=2+(h-p)/a:h==v&&(T=4+(p-d)/a),T=Math.min(T*60,360),T<0&&(T+=360),D=v/255*1e3/10,[T,S,D]}function Xu(l){var p=l[0],d=l[1],v=l[2],h=Wu(l)[0],y=1/255*Math.min(p,Math.min(d,v)),v=1-1/255*Math.max(p,Math.max(d,v));return[h,y*100,v*100]}function Yu(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255,y,v,a,T;return T=Math.min(1-p,1-d,1-h),y=(1-p-T)/(1-T)||0,v=(1-d-T)/(1-T)||0,a=(1-h-T)/(1-T)||0,[y*100,v*100,a*100,T*100]}function Ju(l){return ug[JSON.stringify(l)]}function Fh(l){var p=l[0]/255,d=l[1]/255,h=l[2]/255;p=p>.04045?Math.pow((p+.055)/1.055,2.4):p/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92;var y=p*.4124+d*.3576+h*.1805,v=p*.2126+d*.7152+h*.0722,a=p*.0193+d*.1192+h*.9505;return[y*100,v*100,a*100]}function Oh(l){var p=Fh(l),d=p[0],h=p[1],y=p[2],v,a,T;return d/=95.047,h/=100,y/=108.883,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,v=116*h-16,a=500*(d-h),T=200*(h-y),[v,a,T]}function w_(l){return Uh(Oh(l))}function Mp(l){var p=l[0]/360,d=l[1]/100,h=l[2]/100,y,v,a,T,S;if(d==0)return S=h*255,[S,S,S];h<.5?v=h*(1+d):v=h+d-h*d,y=2*h-v,T=[0,0,0];for(var D=0;D<3;D++)a=p+1/3*-(D-1),a<0&&a++,a>1&&a--,6*a<1?S=y+(v-y)*6*a:2*a<1?S=v:3*a<2?S=y+(v-y)*(2/3-a)*6:S=y,T[D]=S*255;return T}function S_(l){var p=l[0],d=l[1]/100,h=l[2]/100,y,v;return h===0?[0,0,0]:(h*=2,d*=h<=1?h:2-h,v=(h+d)/2,y=2*d/(h+d),[p,y*100,v*100])}function k_(l){return Xu(Mp(l))}function E_(l){return Yu(Mp(l))}function z_(l){return Ju(Mp(l))}function Dp(l){var p=l[0]/60,d=l[1]/100,S=l[2]/100,h=Math.floor(p)%6,y=p-Math.floor(p),v=255*S*(1-d),a=255*S*(1-d*y),T=255*S*(1-d*(1-y)),S=255*S;switch(h){case 0:return[S,T,v];case 1:return[a,S,v];case 2:return[v,S,T];case 3:return[v,a,S];case 4:return[T,v,S];case 5:return[S,v,a]}}function T_(l){var p=l[0],d=l[1]/100,h=l[2]/100,y,v;return v=(2-d)*h,y=d*h,y/=v<=1?v:2-v,y=y||0,v/=2,[p,y*100,v*100]}function I_(l){return Xu(Dp(l))}function A_(l){return Yu(Dp(l))}function P_(l){return Ju(Dp(l))}function Qu(l){var p=l[0]/360,d=l[1]/100,h=l[2]/100,y=d+h,v,a,T,S;switch(y>1&&(d/=y,h/=y),v=Math.floor(6*p),a=1-h,T=6*p-v,v&1&&(T=1-T),S=d+T*(a-d),v){default:case 6:case 0:r=a,g=S,b=d;break;case 1:r=S,g=a,b=d;break;case 2:r=d,g=a,b=S;break;case 3:r=d,g=S,b=a;break;case 4:r=S,g=d,b=a;break;case 5:r=a,g=d,b=S;break}return[r*255,g*255,b*255]}function C_(l){return Wu(Qu(l))}function M_(l){return Cp(Qu(l))}function D_(l){return Yu(Qu(l))}function L_(l){return Ju(Qu(l))}function $u(l){var p=l[0]/100,d=l[1]/100,h=l[2]/100,y=l[3]/100,v,a,T;return v=1-Math.min(1,p*(1-y)+y),a=1-Math.min(1,d*(1-y)+y),T=1-Math.min(1,h*(1-y)+y),[v*255,a*255,T*255]}function R_(l){return Wu($u(l))}function B_(l){return Cp($u(l))}function F_(l){return Xu($u(l))}function O_(l){return Ju($u(l))}function og(l){var p=l[0]/100,d=l[1]/100,h=l[2]/100,y,v,a;return y=p*3.2406+d*-1.5372+h*-.4986,v=p*-.9689+d*1.8758+h*.0415,a=p*.0557+d*-.204+h*1.057,y=y>.0031308?1.055*Math.pow(y,1/2.4)-.055:y=y*12.92,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v=v*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,y=Math.min(Math.max(0,y),1),v=Math.min(Math.max(0,v),1),a=Math.min(Math.max(0,a),1),[y*255,v*255,a*255]}function sg(l){var p=l[0],d=l[1],h=l[2],y,v,a;return p/=95.047,d/=100,h/=108.883,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,y=116*d-16,v=500*(p-d),a=200*(d-h),[y,v,a]}function N_(l){return Uh(sg(l))}function Nh(l){var p=l[0],d=l[1],h=l[2],y,v,a,T;return p<=8?(v=p*100/903.3,T=7.787*(v/100)+16/116):(v=100*Math.pow((p+16)/116,3),T=Math.pow(v/100,1/3)),y=y/95.047<=.008856?y=95.047*(d/500+T-16/116)/7.787:95.047*Math.pow(d/500+T,3),a=a/108.883<=.008859?a=108.883*(T-h/200-16/116)/7.787:108.883*Math.pow(T-h/200,3),[y,v,a]}function Uh(l){var p=l[0],d=l[1],h=l[2],y,v,a;return y=Math.atan2(h,d),v=y*360/2/Math.PI,v<0&&(v+=360),a=Math.sqrt(d*d+h*h),[p,a,v]}function lg(l){return og(Nh(l))}function Vh(l){var p=l[0],d=l[1],h=l[2],y,v,a;return a=h/360*2*Math.PI,y=d*Math.cos(a),v=d*Math.sin(a),[p,y,v]}function U_(l){return Nh(Vh(l))}function V_(l){return lg(Vh(l))}function Us(l){return Ph[l]}function q_(l){return Wu(Us(l))}function j_(l){return Cp(Us(l))}function G_(l){return Xu(Us(l))}function Z_(l){return Yu(Us(l))}function K_(l){return Oh(Us(l))}function H_(l){return Fh(Us(l))}var Ph={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ug={};for(var xd in Ph)ug[JSON.stringify(Ph[xd])]=xd;var Sh=x_,Rl=function(){return new ec};for(var Lu in Sh){Rl[Lu+"Raw"]=function(l){return function(p){return typeof p=="number"&&(p=Array.prototype.slice.call(arguments)),Sh[l](p)}}(Lu);var wd=/(\w+)2(\w+)/.exec(Lu),kh=wd[1],W_=wd[2];Rl[kh]=Rl[kh]||{},Rl[kh][W_]=Rl[Lu]=function(l){return function(p){typeof p=="number"&&(p=Array.prototype.slice.call(arguments));var d=Sh[l](p);if(typeof d=="string"||d===void 0)return d;for(var h=0;h<d.length;h++)d[h]=Math.round(d[h]);return d}}(Lu)}var ec=function(){this.convs={}};ec.prototype.routeSpace=function(l,p){var d=p[0];return d===void 0?this.getValues(l):(typeof d=="number"&&(d=Array.prototype.slice.call(p)),this.setValues(l,d))};ec.prototype.setValues=function(l,p){return this.space=l,this.convs={},this.convs[l]=p,this};ec.prototype.getValues=function(l){var p=this.convs[l];if(!p){var d=this.space,h=this.convs[d];p=Rl[d][l](h),this.convs[l]=p}return p};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(l){ec.prototype[l]=function(p){return this.routeSpace(l,arguments)}});var cg={exports:{}};(function(l,p){(function(d,h){l.exports=h()})(v_,function(){var d,h,y;function v(a,T){if(!d)d=T;else if(!h)h=T;else{var S="var sharedChunk = {}; ("+d+")(sharedChunk); ("+h+")(sharedChunk);",D={};d(D),y=T(D),typeof window<"u"&&(y.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}return v(["exports"],function(a){function T(e,t){return e(t={exports:{}},t.exports),t.exports}var S=D;function D(e,t,i,u){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=i,this.p2y=u}D.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},D.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},D.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},D.prototype.solveCurveX=function(e,t){var i,u,f,m,x;for(t===void 0&&(t=1e-6),f=e,x=0;x<8;x++){if(m=this.sampleCurveX(f)-e,Math.abs(m)<t)return f;var E=this.sampleCurveDerivativeX(f);if(Math.abs(E)<1e-6)break;f-=m/E}if((f=e)<(i=0))return i;if(f>(u=1))return u;for(;i<u;){if(m=this.sampleCurveX(f),Math.abs(m-e)<t)return f;e>m?i=f:u=f,f=.5*(u-i)+i}return f},D.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var P=O;function O(e,t){this.x=e,this.y=t}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),u=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=u,this},_rotateAround:function(e,t){var i=Math.cos(e),u=Math.sin(e),f=t.y+u*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-u*(this.y-t.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},O.convert=function(e){return e instanceof O?e:Array.isArray(e)?new O(e[0],e[1]):e};var R=typeof self<"u"?self:{},X=Math.pow(2,53)-1;function $(e,t,i,u){var f=new S(e,t,i,u);return function(m){return f.solve(m)}}var pe=$(.25,.1,.25,1);function le(e,t,i){return Math.min(i,Math.max(t,e))}function me(e,t,i){var u=i-t,f=((e-t)%u+u)%u+t;return f===t?i:f}function ve(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var u=0,f=t;u<f.length;u+=1){var m=f[u];for(var x in m)e[x]=m[x]}return e}var nt=1;function Ve(){return nt++}function Ue(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function tt(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Vt(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function qt(e,t){return e.indexOf(t,e.length-t.length)!==-1}function Ze(e,t,i){var u={};for(var f in e)u[f]=t.call(i||this,e[f],f,e);return u}function Xe(e,t,i){var u={};for(var f in e)t.call(i||this,e[f],f,e)&&(u[f]=e[f]);return u}function wt(e){return Array.isArray(e)?e.map(wt):typeof e=="object"&&e?Ze(e,wt):e}var jt={};function we(e){jt[e]||(typeof console<"u"&&console.warn(e),jt[e]=!0)}function qe(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function Be(e){for(var t=0,i=0,u=e.length,f=u-1,m=void 0,x=void 0;i<u;f=i++)t+=((x=e[f]).x-(m=e[i]).x)*(m.y+x.y);return t}function Ye(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ht(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,f,m,x){var E=m||x;return t[f]=!E||E.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var mt=null;function Mt(e){if(mt==null){var t=e.navigator?e.navigator.userAgent:null;mt=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return mt}function ki(e){try{var t=R[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Je,vt,vi,vn,$n=R.performance&&R.performance.now?R.performance.now.bind(R.performance):Date.now.bind(Date),zn=R.requestAnimationFrame||R.mozRequestAnimationFrame||R.webkitRequestAnimationFrame||R.msRequestAnimationFrame,Fi=R.cancelAnimationFrame||R.mozCancelAnimationFrame||R.webkitCancelAnimationFrame||R.msCancelAnimationFrame,zr={now:$n,frame:function(e){var t=zn(e);return{cancel:function(){return Fi(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=R.document.createElement("canvas"),u=i.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Je||(Je=R.document.createElement("a")),Je.href=e,Je.href},hardwareConcurrency:R.navigator&&R.navigator.hardwareConcurrency||4,get devicePixelRatio(){return R.devicePixelRatio},get prefersReducedMotion(){return!!R.matchMedia&&(vt==null&&(vt=R.matchMedia("(prefers-reduced-motion: reduce)")),vt.matches)}},bi={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Tn={supported:!1,testSupport:function(e){!Jr&&vn&&(bn?Xt(e):vi=e)}},Jr=!1,bn=!1;function Xt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,vn),e.isContextLost())return;Tn.supported=!0}catch{}e.deleteTexture(t),Jr=!0}R.document&&((vn=R.document.createElement("img")).onload=function(){vi&&Xt(vi),vi=null,bn=!0},vn.onerror=function(){Jr=!0,vi=null},vn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var cr="01",fi=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function qi(e){return e.indexOf("mapbox:")===0}fi.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",cr,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},fi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},fi.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},fi.prototype.normalizeStyleURL=function(e,t){if(!qi(e))return e;var i=ji(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},fi.prototype.normalizeGlyphsURL=function(e,t){if(!qi(e))return e;var i=ji(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},fi.prototype.normalizeSourceURL=function(e,t){if(!qi(e))return e;var i=ji(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},fi.prototype.normalizeSpriteURL=function(e,t,i,u){var f=ji(e);return qi(e)?(f.path="/styles/v1"+f.path+"/sprite"+t+i,this._makeAPIURL(f,this._customAccessToken||u)):(f.path+=""+t+i,er(f))},fi.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!qi(e))return e;var i=ji(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(zr.devicePixelRatio>=2||t===512?"@2x":"")+(Tn.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var u=this._customAccessToken||function(f){for(var m=0,x=f;m<x.length;m+=1){var E=x[m].match(/^access_token=(.*)$/);if(E)return E[1]}return null}(i.params)||bi.ACCESS_TOKEN;return bi.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,u)},fi.prototype.canonicalizeTileURL=function(e,t){var i=ji(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=i.path.replace("/v4/","");var f=i.params;return t&&(f=f.filter(function(m){return!m.match(/^access_token=/)})),f.length&&(u+="?"+f.join("&")),u},fi.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&qi(t),u=[],f=0,m=e.tiles||[];f<m.length;f+=1){var x=m[f];nn(x)?u.push(this.canonicalizeTileURL(x,i)):u.push(x)}return u},fi.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=ji(bi.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,e.protocol==="http"){var f=e.params.indexOf("secure");f>=0&&e.params.splice(f,1)}if(u.path!=="/"&&(e.path=""+u.path+e.path),!bi.REQUIRE_ACCESS_TOKEN)return er(e);if(!(t=t||bi.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(m){return m.indexOf("access_token")===-1}),e.params.push("access_token="+t),er(e)};var Dr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function nn(e){return Dr.test(e)}var yr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ji(e){var t=e.match(yr);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function er(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function xn(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(R.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var hn=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};hn.prototype.getStorageKey=function(e){var t,i=xn(bi.ACCESS_TOKEN);return t=i&&i.u?R.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,f){return String.fromCharCode(+("0x"+f))})):bi.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},hn.prototype.fetchEventData=function(){var e=ki("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var u=R.localStorage.getItem(t);u&&(this.eventData=JSON.parse(u));var f=R.localStorage.getItem(i);f&&(this.anonId=f)}catch{we("Unable to read from LocalStorage")}},hn.prototype.saveEventData=function(){var e=ki("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{R.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&R.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{we("Unable to write to LocalStorage")}},hn.prototype.processRequests=function(e){},hn.prototype.postEvent=function(e,t,i,u){var f=this;if(bi.EVENTS_URL){var m=ji(bi.EVENTS_URL);m.params.push("access_token="+(u||bi.ACCESS_TOKEN||""));var x={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:cr,userId:this.anonId},E=t?ve(x,t):x,I={url:er(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=di(I,function(A){f.pendingRequest=null,i(A),f.saveEventData(),f.processRequests(u)})}},hn.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var Gi,tr,Wi=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,u,f,m){this.skuToken=f,(bi.EVENTS_URL&&m||bi.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(x){return qi(x)||nn(x)}))&&this.queueRequest({id:u,timestamp:Date.now()},m)},t.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){var f=this.queue.shift(),m=f.id,x=f.timestamp;m&&this.success[m]||(this.anonId||this.fetchEventData(),tt(this.anonId)||(this.anonId=Ue()),this.postEvent(x,{skuToken:this.skuToken},function(E){E||m&&(u.success[m]=!0)},i))}},t}(hn),Tr=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,u){bi.EVENTS_URL&&bi.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(f){return qi(f)||nn(f)})&&this.queueRequest(Date.now(),u)},t.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var f=xn(bi.ACCESS_TOKEN),m=f?f.u:bi.ACCESS_TOKEN,x=m!==this.eventData.tokenU;tt(this.anonId)||(this.anonId=Ue(),x=!0);var E=this.queue.shift();if(this.eventData.lastSuccess){var I=new Date(this.eventData.lastSuccess),A=new Date(E),M=(E-this.eventData.lastSuccess)/864e5;x=x||M>=1||M<-1||I.getDate()!==A.getDate()}else x=!0;if(!x)return this.processRequests();this.postEvent(E,{"enabled.telemetry":!1},function(B){B||(u.eventData.lastSuccess=E,u.eventData.tokenU=m)},i)}},t}(hn)),ir=Tr.postTurnstileEvent.bind(Tr),jn=new Wi,Xi=jn.postMapLoadEvent.bind(jn),Lr=500,Rr=50;function fn(){R.caches&&!Gi&&(Gi=R.caches.open("mapbox-tiles"))}function ra(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Ir,Yi=1/0;function Qr(){return Ir==null&&(Ir=R.OffscreenCanvas&&new R.OffscreenCanvas(1,1).getContext("2d")&&typeof R.createImageBitmap=="function"),Ir}var Br={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Br);var In=function(e){function t(i,u,f){u===401&&nn(f)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=u,this.url=f,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),N=Ye()?function(){return self.worker&&self.worker.referrer}:function(){return(R.location.protocol==="blob:"?R.parent:R).location.href},st,dn,pr=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(N())&&!/^\w+:/.test(i))){if(R.fetch&&R.Request&&R.AbortController&&R.Request.prototype.hasOwnProperty("signal"))return function(u,f){var m,x=new R.AbortController,E=new R.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:N(),signal:x.signal}),I=!1,A=!1,M=(m=E.url).indexOf("sku=")>0&&nn(m);u.type==="json"&&E.headers.set("Accept","application/json");var B=function(G,Q,te){if(!A){if(G&&G.message!=="SecurityError"&&we(G),Q&&te)return V(Q);var he=Date.now();R.fetch(E).then(function(ae){if(ae.ok){var ye=M?ae.clone():null;return V(ae,ye,he)}return f(new In(ae.statusText,ae.status,u.url))}).catch(function(ae){ae.code!==20&&f(new Error(ae.message))})}},V=function(G,Q,te){(u.type==="arrayBuffer"?G.arrayBuffer():u.type==="json"?G.json():G.text()).then(function(he){A||(Q&&te&&function(ae,ye,xe){if(fn(),Gi){var Se={status:ye.status,statusText:ye.statusText,headers:new R.Headers};ye.headers.forEach(function(Ce,je){return Se.headers.set(je,Ce)});var Ee=ht(ye.headers.get("Cache-Control")||"");Ee["no-store"]||(Ee["max-age"]&&Se.headers.set("Expires",new Date(xe+1e3*Ee["max-age"]).toUTCString()),new Date(Se.headers.get("Expires")).getTime()-xe<42e4||function(Ce,je){if(tr===void 0)try{new Response(new ReadableStream),tr=!0}catch{tr=!1}tr?je(Ce.body):Ce.blob().then(je)}(ye,function(Ce){var je=new R.Response(Ce,Se);fn(),Gi&&Gi.then(function(et){return et.put(ra(ae.url),je)}).catch(function(et){return we(et.message)})}))}}(E,Q,te),I=!0,f(null,he,G.headers.get("Cache-Control"),G.headers.get("Expires")))}).catch(function(he){A||f(new Error(he.message))})};return M?function(G,Q){if(fn(),!Gi)return Q(null);var te=ra(G.url);Gi.then(function(he){he.match(te).then(function(ae){var ye=function(xe){if(!xe)return!1;var Se=new Date(xe.headers.get("Expires")||0),Ee=ht(xe.headers.get("Cache-Control")||"");return Se>Date.now()&&!Ee["no-cache"]}(ae);he.delete(te),ye&&he.put(te,ae.clone()),Q(null,ae,ye)}).catch(Q)}).catch(Q)}(E,B):B(null,null),{cancel:function(){A=!0,I||x.abort()}}}(e,t);if(Ye()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(u,f){var m=new R.XMLHttpRequest;for(var x in m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer"),u.headers)m.setRequestHeader(x,u.headers[x]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=function(){f(new Error(m.statusText))},m.onload=function(){if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){var E=m.response;if(u.type==="json")try{E=JSON.parse(m.response)}catch(I){return f(I)}f(null,E,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else f(new In(m.statusText,m.status,u.url))},m.send(u.body),{cancel:function(){return m.abort()}}}(e,t)},on=function(e,t){return pr(ve(e,{type:"arrayBuffer"}),t)},di=function(e,t){return pr(ve(e,{method:"POST"}),t)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";st=[],dn=0;var U=function(e,t){if(Tn.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),dn>=bi.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return st.push(i),i}dn++;var u=!1,f=function(){if(!u)for(u=!0,dn--;st.length&&dn<bi.MAX_PARALLEL_IMAGE_REQUESTS;){var x=st.shift();x.cancelled||(x.cancel=U(x.requestParameters,x.callback).cancel)}},m=on(e,function(x,E,I,A){f(),x?t(x):E&&(Qr()?function(M,B){var V=new R.Blob([new Uint8Array(M)],{type:"image/png"});R.createImageBitmap(V).then(function(G){B(null,G)}).catch(function(G){B(new Error("Could not load image because of "+G.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(E,t):function(M,B,V,G){var Q=new R.Image,te=R.URL;Q.onload=function(){B(null,Q),te.revokeObjectURL(Q.src),Q.onload=null,R.requestAnimationFrame(function(){Q.src=L})},Q.onerror=function(){return B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var he=new R.Blob([new Uint8Array(M)],{type:"image/png"});Q.cacheControl=V,Q.expires=G,Q.src=M.byteLength?te.createObjectURL(he):L}(E,t,I,A))});return{cancel:function(){m.cancel(),f()}}};function q(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function H(e,t,i){if(i&&i[e]){var u=i[e].indexOf(t);u!==-1&&i[e].splice(u,1)}}var Y=function(e,t){t===void 0&&(t={}),ve(this,t),this.type=e},ue=function(e){function t(i,u){u===void 0&&(u={}),e.call(this,"error",ve({error:i},u))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Y),fe=function(){};fe.prototype.on=function(e,t){return this._listeners=this._listeners||{},q(e,t,this._listeners),this},fe.prototype.off=function(e,t){return H(e,t,this._listeners),H(e,t,this._oneTimeListeners),this},fe.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},q(e,t,this._oneTimeListeners),this},fe.prototype.fire=function(e,t){typeof e=="string"&&(e=new Y(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var u=0,f=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];u<f.length;u+=1)f[u].call(this,e);for(var m=0,x=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];m<x.length;m+=1){var E=x[m];H(i,E,this._oneTimeListeners),E.call(this,e)}var I=this._eventedParent;I&&(ve(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(e))}else e instanceof ue&&console.error(e.error);return this},fe.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},fe.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var j={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ee=function(e,t,i,u){this.message=(e?e+": ":"")+i,u&&(this.identifier=u),t!=null&&t.__line__&&(this.line=t.__line__)};function ge(e){var t=e.value;return t?[new ee(e.key,t,"constants have been deprecated as of v8")]:[]}function De(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var u=0,f=t;u<f.length;u+=1){var m=f[u];for(var x in m)e[x]=m[x]}return e}function Fe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ze(e){if(Array.isArray(e))return e.map(ze);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=ze(e[i]);return t}return Fe(e)}var Re=function(e){function t(i,u){e.call(this,u),this.message=u,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),gt=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,u=t;i<u.length;i+=1){var f=u[i];this.bindings[f[0]]=f[1]}};gt.prototype.concat=function(e){return new gt(this,e)},gt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},gt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var lt={kind:"null"},Ie={kind:"number"},at={kind:"string"},Qe={kind:"boolean"},it={kind:"color"},Gt={kind:"object"},ot={kind:"value"},$t={kind:"collator"},Ei={kind:"formatted"},Ht={kind:"resolvedImage"};function oi(e,t){return{kind:"array",itemType:e,N:t}}function ei(e){if(e.kind==="array"){var t=ei(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var wn=[lt,Ie,at,Qe,it,Ei,Gt,oi(ot),Ht];function mi(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!mi(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,u=wn;i<u.length;i+=1)if(!mi(u[i],t))return null}}return"Expected "+ei(e)+" but found "+ei(t)+" instead."}function Oi(e,t){return t.some(function(i){return i.kind===e.kind})}function xi(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Jt=T(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(E){return(E=Math.round(E))<0?0:E>255?255:E}function f(E){return u(E[E.length-1]==="%"?parseFloat(E)/100*255:parseInt(E))}function m(E){return(I=E[E.length-1]==="%"?parseFloat(E)/100:parseFloat(E))<0?0:I>1?1:I;var I}function x(E,I,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?E+(I-E)*A*6:2*A<1?I:3*A<2?E+(I-E)*(2/3-A)*6:E}try{t.parseCSSColor=function(E){var I,A=E.replace(/ /g,"").toLowerCase();if(A in i)return i[A].slice();if(A[0]==="#")return A.length===4?(I=parseInt(A.substr(1),16))>=0&&I<=4095?[(3840&I)>>4|(3840&I)>>8,240&I|(240&I)>>4,15&I|(15&I)<<4,1]:null:A.length===7&&(I=parseInt(A.substr(1),16))>=0&&I<=16777215?[(16711680&I)>>16,(65280&I)>>8,255&I,1]:null;var M=A.indexOf("("),B=A.indexOf(")");if(M!==-1&&B+1===A.length){var V=A.substr(0,M),G=A.substr(M+1,B-(M+1)).split(","),Q=1;switch(V){case"rgba":if(G.length!==4)return null;Q=m(G.pop());case"rgb":return G.length!==3?null:[f(G[0]),f(G[1]),f(G[2]),Q];case"hsla":if(G.length!==4)return null;Q=m(G.pop());case"hsl":if(G.length!==3)return null;var te=(parseFloat(G[0])%360+360)%360/360,he=m(G[1]),ae=m(G[2]),ye=ae<=.5?ae*(he+1):ae+he-ae*he,xe=2*ae-ye;return[u(255*x(xe,ye,te+1/3)),u(255*x(xe,ye,te)),u(255*x(xe,ye,te-1/3)),Q];default:return null}}return null}}catch{}}).parseCSSColor,si=function(e,t,i,u){u===void 0&&(u=1),this.r=e,this.g=t,this.b=i,this.a=u};si.parse=function(e){if(e){if(e instanceof si)return e;if(typeof e=="string"){var t=Jt(e);if(t)return new si(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},si.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+u+")"},si.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},si.black=new si(0,0,0,1),si.white=new si(1,1,1,1),si.transparent=new si(0,0,0,0),si.red=new si(1,0,0,1);var An=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};An.prototype.compare=function(e,t){return this.collator.compare(e,t)},An.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var fa=function(e,t,i,u,f){this.text=e,this.image=t,this.scale=i,this.fontStack=u,this.textColor=f},sn=function(e){this.sections=e};sn.fromString=function(e){return new sn([new fa(e,null,null,null,null)])},sn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},sn.factory=function(e){return e instanceof sn?e:sn.fromString(e)},sn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},sn.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var u=i[t];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(f)}}return e};var On=function(e){this.name=e.name,this.available=e.available};function Ua(e,t,i,u){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,t,i,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof u=="number"?[e,t,i,u]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ba(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof si||e instanceof An||e instanceof sn||e instanceof On)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!ba(i[t]))return!1;return!0}if(typeof e=="object"){for(var u in e)if(!ba(e[u]))return!1;return!0}return!1}function Zi(e){if(e===null)return lt;if(typeof e=="string")return at;if(typeof e=="boolean")return Qe;if(typeof e=="number")return Ie;if(e instanceof si)return it;if(e instanceof An)return $t;if(e instanceof sn)return Ei;if(e instanceof On)return Ht;if(Array.isArray(e)){for(var t,i=e.length,u=0,f=e;u<f.length;u+=1){var m=Zi(f[u]);if(t){if(t===m)continue;t=ot;break}t=m}return oi(t||ot,i)}return Gt}function xa(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof si||e instanceof sn||e instanceof On?e.toString():JSON.stringify(e)}On.prototype.toString=function(){return this.name},On.fromString=function(e){return e?new On({name:e,available:!1}):null},On.prototype.serialize=function(){return["image",this.name]};var Pn=function(e,t){this.type=e,this.value=t};Pn.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!ba(e[1]))return t.error("invalid value");var i=e[1],u=Zi(i),f=t.expectedType;return u.kind!=="array"||u.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(u=f),new Pn(u,i)},Pn.prototype.evaluate=function(){return this.value},Pn.prototype.eachChild=function(){},Pn.prototype.outputDefined=function(){return!0},Pn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof si?["rgba"].concat(this.value.toArray()):this.value instanceof sn?this.value.serialize():this.value};var ln=function(e){this.name="ExpressionEvaluationError",this.message=e};ln.prototype.toJSON=function(){return this.message};var hr={string:at,number:Ie,boolean:Qe,object:Gt},Di=function(e,t){this.type=e,this.args=t};Di.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,u=1,f=e[0];if(f==="array"){var m,x;if(e.length>2){var E=e[1];if(typeof E!="string"||!(E in hr)||E==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);m=hr[E],u++}else m=ot;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);x=e[2],u++}i=oi(m,x)}else i=hr[f];for(var I=[];u<e.length;u++){var A=t.parse(e[u],u,ot);if(!A)return null;I.push(A)}return new Di(i,I)},Di.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!mi(this.type,Zi(i)))return i;if(t===this.args.length-1)throw new ln("Expected value to be of type "+ei(this.type)+", but found "+ei(Zi(i))+" instead.")}return null},Di.prototype.eachChild=function(e){this.args.forEach(e)},Di.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Di.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var u=e.N;(typeof u=="number"||this.args.length>1)&&t.push(u)}}return t.concat(this.args.map(function(f){return f.serialize()}))};var Fr=function(e){this.type=Ei,this.sections=e};Fr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var u=[],f=!1,m=1;m<=e.length-1;++m){var x=e[m];if(f&&typeof x=="object"&&!Array.isArray(x)){f=!1;var E=null;if(x["font-scale"]&&!(E=t.parse(x["font-scale"],1,Ie)))return null;var I=null;if(x["text-font"]&&!(I=t.parse(x["text-font"],1,oi(at))))return null;var A=null;if(x["text-color"]&&!(A=t.parse(x["text-color"],1,it)))return null;var M=u[u.length-1];M.scale=E,M.font=I,M.textColor=A}else{var B=t.parse(e[m],1,ot);if(!B)return null;var V=B.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,u.push({content:B,scale:null,font:null,textColor:null})}}return new Fr(u)},Fr.prototype.evaluate=function(e){return new sn(this.sections.map(function(t){var i=t.content.evaluate(e);return Zi(i)===Ht?new fa("",i,null,null,null):new fa(xa(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Fr.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var u=i[t];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},Fr.prototype.outputDefined=function(){return!1},Fr.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var u=i[t];e.push(u.content.serialize());var f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),e.push(f)}return e};var _r=function(e){this.type=Ht,this.input=e};_r.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,at);return i?new _r(i):t.error("No image name provided.")},_r.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=On.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},_r.prototype.eachChild=function(e){e(this.input)},_r.prototype.outputDefined=function(){return!1},_r.prototype.serialize=function(){return["image",this.input.serialize()]};var os={"to-boolean":Qe,"to-color":it,"to-number":Ie,"to-string":at},Cn=function(e,t){this.type=e,this.args=t};Cn.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var u=os[i],f=[],m=1;m<e.length;m++){var x=t.parse(e[m],m,ot);if(!x)return null;f.push(x)}return new Cn(u,f)},Cn.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var t,i,u=0,f=this.args;u<f.length;u+=1){if(i=null,(t=f[u].evaluate(e))instanceof si)return t;if(typeof t=="string"){var m=e.parseColor(t);if(m)return m}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Ua(t[0],t[1],t[2],t[3])))return new si(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ln(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var x=null,E=0,I=this.args;E<I.length;E+=1){if((x=I[E].evaluate(e))===null)return 0;var A=Number(x);if(!isNaN(A))return A}throw new ln("Could not convert "+JSON.stringify(x)+" to number.")}return this.type.kind==="formatted"?sn.fromString(xa(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?On.fromString(xa(this.args[0].evaluate(e))):xa(this.args[0].evaluate(e))},Cn.prototype.eachChild=function(e){this.args.forEach(e)},Cn.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Cn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Fr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new _r(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var wa=["Unknown","Point","LineString","Polygon"],Gn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Gn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Gn.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?wa[this.feature.type]:this.feature.type:null},Gn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Gn.prototype.canonicalID=function(){return this.canonical},Gn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Gn.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=si.parse(e)),t};var Mn=function(e,t,i,u){this.name=e,this.type=t,this._evaluate=i,this.args=u};Mn.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Mn.prototype.eachChild=function(e){this.args.forEach(e)},Mn.prototype.outputDefined=function(){return!1},Mn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Mn.parse=function(e,t){var i,u=e[0],f=Mn.definitions[u];if(!f)return t.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var m=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,E=x.filter(function(It){var pt=It[0];return!Array.isArray(pt)||pt.length===e.length-1}),I=null,A=0,M=E;A<M.length;A+=1){var B=M[A],V=B[0],G=B[1];I=new Ki(t.registry,t.path,null,t.scope);for(var Q=[],te=!1,he=1;he<e.length;he++){var ae=e[he],ye=Array.isArray(V)?V[he-1]:V.type,xe=I.parse(ae,1+Q.length,ye);if(!xe){te=!0;break}Q.push(xe)}if(!te)if(Array.isArray(V)&&V.length!==Q.length)I.error("Expected "+V.length+" arguments, but found "+Q.length+" instead.");else{for(var Se=0;Se<Q.length;Se++){var Ee=Array.isArray(V)?V[Se]:V.type,Ce=Q[Se];I.concat(Se+1).checkSubtype(Ee,Ce.type)}if(I.errors.length===0)return new Mn(u,m,G,Q)}}if(E.length===1)(i=t.errors).push.apply(i,I.errors);else{for(var je=(E.length?E:x).map(function(It){var pt;return pt=It[0],Array.isArray(pt)?"("+pt.map(ei).join(", ")+")":"("+ei(pt.type)+"...)"}).join(" | "),et=[],St=1;St<e.length;St++){var ut=t.parse(e[St],1+et.length);if(!ut)return null;et.push(ei(ut.type))}t.error("Expected arguments of type "+je+", but found ("+et.join(", ")+") instead.")}return null},Mn.register=function(e,t){for(var i in Mn.definitions=t,t)e[i]=Mn};var $r=function(e,t,i){this.type=$t,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function Zn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Sa(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function ss(e,t){var i=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(i*f*8192),Math.round(u*f*8192)]}function Ol(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function fo(e,t){for(var i,u,f,m,x,E,I,A=!1,M=0,B=t.length;M<B;M++)for(var V=t[M],G=0,Q=V.length;G<Q-1;G++){if((m=(i=e)[0]-(u=V[G])[0])*(I=i[1]-(f=V[G+1])[1])-(E=i[0]-f[0])*(x=i[1]-u[1])==0&&m*E<=0&&x*I<=0)return!1;Ol(e,V[G],V[G+1])&&(A=!A)}return A}function Nl(e,t){for(var i=0;i<t.length;i++)if(fo(e,t[i]))return!0;return!1}function No(e,t,i,u){var f=u[0]-i[0],m=u[1]-i[1],x=(e[0]-i[0])*m-f*(e[1]-i[1]),E=(t[0]-i[0])*m-f*(t[1]-i[1]);return x>0&&E<0||x<0&&E>0}function Ul(e,t,i){for(var u=0,f=i;u<f.length;u+=1)for(var m=f[u],x=0;x<m.length-1;++x)if((B=[(M=m[x+1])[0]-(A=m[x])[0],M[1]-A[1]])[0]*(V=[(I=t)[0]-(E=e)[0],I[1]-E[1]])[1]-B[1]*V[0]!=0&&No(E,I,A,M)&&No(A,M,E,I))return!0;var E,I,A,M,B,V;return!1}function Uo(e,t){for(var i=0;i<e.length;++i)if(!fo(e[i],t))return!1;for(var u=0;u<e.length-1;++u)if(Ul(e[u],e[u+1],t))return!1;return!0}function Vs(e,t){for(var i=0;i<t.length;i++)if(Uo(e,t[i]))return!0;return!1}function Va(e,t,i){for(var u=[],f=0;f<e.length;f++){for(var m=[],x=0;x<e[f].length;x++){var E=ss(e[f][x],i);Zn(t,E),m.push(E)}u.push(m)}return u}function ls(e,t,i){for(var u=[],f=0;f<e.length;f++){var m=Va(e[f],t,i);u.push(m)}return u}function mo(e,t,i,u){if(e[0]<i[0]||e[0]>i[2]){var f=.5*u,m=e[0]-i[0]>f?-u:i[0]-e[0]>f?u:0;m===0&&(m=e[0]-i[2]>f?-u:i[2]-e[0]>f?u:0),e[0]+=m}Zn(t,e)}function qs(e,t,i,u){for(var f=8192*Math.pow(2,u.z),m=[8192*u.x,8192*u.y],x=[],E=0,I=e;E<I.length;E+=1)for(var A=0,M=I[E];A<M.length;A+=1){var B=M[A],V=[B.x+m[0],B.y+m[1]];mo(V,t,i,f),x.push(V)}return x}function qa(e,t,i,u){for(var f,m=8192*Math.pow(2,u.z),x=[8192*u.x,8192*u.y],E=[],I=0,A=e;I<A.length;I+=1){for(var M=[],B=0,V=A[I];B<V.length;B+=1){var G=V[B],Q=[G.x+x[0],G.y+x[1]];Zn(t,Q),M.push(Q)}E.push(M)}if(t[2]-t[0]<=m/2){(f=t)[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var te=0,he=E;te<he.length;te+=1)for(var ae=0,ye=he[te];ae<ye.length;ae+=1)mo(ye[ae],t,i,m)}return E}$r.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var u=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Qe);if(!u)return null;var f=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Qe);if(!f)return null;var m=null;return i.locale&&!(m=t.parse(i.locale,1,at))?null:new $r(u,f,m)},$r.prototype.evaluate=function(e){return new An(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},$r.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},$r.prototype.outputDefined=function(){return!1},$r.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Or=function(e,t){this.type=Qe,this.geojson=e,this.geometries=t};function ka(e){if(e instanceof Mn&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Or)return!1;var t=!0;return e.eachChild(function(i){t&&!ka(i)&&(t=!1)}),t}function _e(e){if(e instanceof Mn&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!_e(i)&&(t=!1)}),t}function fr(e,t){if(e instanceof Mn&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(u){i&&!fr(u,t)&&(i=!1)}),i}Or.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(ba(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var u=0;u<i.features.length;++u){var f=i.features[u].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Or(i,i.features[u].geometry)}else if(i.type==="Feature"){var m=i.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Or(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Or(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Or.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],m=t.canonicalID();if(i.type==="Polygon"){var x=Va(i.coordinates,f,m),E=qs(t.geometry(),u,f,m);if(!Sa(u,f))return!1;for(var I=0,A=E;I<A.length;I+=1)if(!fo(A[I],x))return!1}if(i.type==="MultiPolygon"){var M=ls(i.coordinates,f,m),B=qs(t.geometry(),u,f,m);if(!Sa(u,f))return!1;for(var V=0,G=B;V<G.length;V+=1)if(!Nl(G[V],M))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var u=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],m=t.canonicalID();if(i.type==="Polygon"){var x=Va(i.coordinates,f,m),E=qa(t.geometry(),u,f,m);if(!Sa(u,f))return!1;for(var I=0,A=E;I<A.length;I+=1)if(!Uo(A[I],x))return!1}if(i.type==="MultiPolygon"){var M=ls(i.coordinates,f,m),B=qa(t.geometry(),u,f,m);if(!Sa(u,f))return!1;for(var V=0,G=B;V<G.length;V+=1)if(!Vs(G[V],M))return!1}return!0}(e,this.geometries)}return!1},Or.prototype.eachChild=function(){},Or.prototype.outputDefined=function(){return!0},Or.prototype.serialize=function(){return["within",this.geojson]};var Kn=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Kn.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Kn(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Kn.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Kn.prototype.eachChild=function(){},Kn.prototype.outputDefined=function(){return!1},Kn.prototype.serialize=function(){return["var",this.name]};var Ki=function(e,t,i,u,f){t===void 0&&(t=[]),u===void 0&&(u=new gt),f===void 0&&(f=[]),this.registry=e,this.path=t,this.key=t.map(function(m){return"["+m+"]"}).join(""),this.scope=u,this.errors=f,this.expectedType=i};function Ea(e,t){for(var i,u=e.length-1,f=0,m=u,x=0;f<=m;)if((i=e[x=Math.floor((f+m)/2)])<=t){if(x===u||t<e[x+1])return x;f=x+1}else{if(!(i>t))throw new ln("Input is not a number.");m=x-1}return 0}Ki.prototype.parse=function(e,t,i,u,f){return f===void 0&&(f={}),t?this.concat(t,i,u)._parse(e,f):this._parse(e,f)},Ki.prototype._parse=function(e,t){function i(A,M,B){return B==="assert"?new Di(M,[A]):B==="coerce"?new Cn(M,[A]):A}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if(typeof u!="string")return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var f=this.registry[u];if(f){var m=f.parse(e,this);if(!m)return null;if(this.expectedType){var x=this.expectedType,E=m.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||E.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(x,E))return null}else m=i(m,x,t.typeAnnotation||"coerce");else m=i(m,x,t.typeAnnotation||"assert")}if(!(m instanceof Pn)&&m.type.kind!=="resolvedImage"&&function A(M){if(M instanceof Kn)return A(M.boundExpression);if(M instanceof Mn&&M.name==="error"||M instanceof $r||M instanceof Or)return!1;var B=M instanceof Cn||M instanceof Di,V=!0;return M.eachChild(function(G){V=B?V&&A(G):V&&G instanceof Pn}),!!V&&ka(M)&&fr(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(m)){var I=new Gn;try{m=new Pn(m.type,m.evaluate(I))}catch(A){return this.error(A.message),null}}return m}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Ki.prototype.concat=function(e,t,i){var u=typeof e=="number"?this.path.concat(e):this.path,f=i?this.scope.concat(i):this.scope;return new Ki(this.registry,u,t||null,f,this.errors)},Ki.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var u=""+this.key+t.map(function(f){return"["+f+"]"}).join("");this.errors.push(new Re(u,e))},Ki.prototype.checkSubtype=function(e,t){var i=mi(e,t);return i&&this.error(i),i};var Nr=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var u=0,f=i;u<f.length;u+=1){var m=f[u],x=m[1];this.labels.push(m[0]),this.outputs.push(x)}};function Sn(e,t,i){return e*(1-i)+t*i}Nr.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Ie);if(!i)return null;var u=[],f=null;t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(var m=1;m<e.length;m+=2){var x=m===1?-1/0:e[m],E=e[m+1],I=m,A=m+1;if(typeof x!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(u.length&&u[u.length-1][0]>=x)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);var M=t.parse(E,A,f);if(!M)return null;f=f||M.type,u.push([x,M])}return new Nr(f,i,u)},Nr.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return i[0].evaluate(e);var f=t.length;return u>=t[f-1]?i[f-1].evaluate(e):i[Ea(t,u)].evaluate(e)},Nr.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Nr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Nr.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Vo=Object.freeze({__proto__:null,number:Sn,color:function(e,t,i){return new si(Sn(e.r,t.r,i),Sn(e.g,t.g,i),Sn(e.b,t.b,i),Sn(e.a,t.a,i))},array:function(e,t,i){return e.map(function(u,f){return Sn(u,t[f],i)})}}),ic=6/29*3*(6/29),Rp=Math.PI/180,Bp=180/Math.PI;function Vl(e){return e>.008856451679035631?Math.pow(e,1/3):e/ic+4/29}function ql(e){return e>6/29?e*e*e:ic*(e-4/29)}function jl(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Gl(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nc(e){var t=Gl(e.r),i=Gl(e.g),u=Gl(e.b),f=Vl((.4124564*t+.3575761*i+.1804375*u)/.95047),m=Vl((.2126729*t+.7151522*i+.072175*u)/1);return{l:116*m-16,a:500*(f-m),b:200*(m-Vl((.0193339*t+.119192*i+.9503041*u)/1.08883)),alpha:e.a}}function rc(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,u=isNaN(e.b)?t:t-e.b/200;return t=1*ql(t),i=.95047*ql(i),u=1.08883*ql(u),new si(jl(3.2404542*i-1.5371385*t-.4985314*u),jl(-.969266*i+1.8760108*t+.041556*u),jl(.0556434*i-.2040259*t+1.0572252*u),e.alpha)}function Fp(e,t,i){var u=t-e;return e+i*(u>180||u<-180?u-360*Math.round(u/360):u)}var us={forward:nc,reverse:rc,interpolate:function(e,t,i){return{l:Sn(e.l,t.l,i),a:Sn(e.a,t.a,i),b:Sn(e.b,t.b,i),alpha:Sn(e.alpha,t.alpha,i)}}},cs={forward:function(e){var t=nc(e),i=t.l,u=t.a,f=t.b,m=Math.atan2(f,u)*Bp;return{h:m<0?m+360:m,c:Math.sqrt(u*u+f*f),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Rp,i=e.c;return rc({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Fp(e.h,t.h,i),c:Sn(e.c,t.c,i),l:Sn(e.l,t.l,i),alpha:Sn(e.alpha,t.alpha,i)}}},ac=Object.freeze({__proto__:null,lab:us,hcl:cs}),nr=function(e,t,i,u,f){this.type=e,this.operator=t,this.interpolation=i,this.input=u,this.labels=[],this.outputs=[];for(var m=0,x=f;m<x.length;m+=1){var E=x[m],I=E[1];this.labels.push(E[0]),this.outputs.push(I)}};function Zl(e,t,i,u){var f=u-i,m=e-i;return f===0?0:t===1?m/f:(Math.pow(t,m)-1)/(Math.pow(t,f)-1)}nr.interpolationFactor=function(e,t,i,u){var f=0;if(e.name==="exponential")f=Zl(t,e.base,i,u);else if(e.name==="linear")f=Zl(t,1,i,u);else if(e.name==="cubic-bezier"){var m=e.controlPoints;f=new S(m[0],m[1],m[2],m[3]).solve(Zl(t,1,i,u))}return f},nr.parse=function(e,t){var i=e[0],u=e[1],f=e[2],m=e.slice(3);if(!Array.isArray(u)||u.length===0)return t.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){var x=u[1];if(typeof x!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:x}}else{if(u[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(u[0]),1,0);var E=u.slice(1);if(E.length!==4||E.some(function(he){return typeof he!="number"||he<0||he>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:E}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(f=t.parse(f,2,Ie)))return null;var I=[],A=null;i==="interpolate-hcl"||i==="interpolate-lab"?A=it:t.expectedType&&t.expectedType.kind!=="value"&&(A=t.expectedType);for(var M=0;M<m.length;M+=2){var B=m[M],V=m[M+1],G=M+3,Q=M+4;if(typeof B!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(I.length&&I[I.length-1][0]>=B)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);var te=t.parse(V,Q,A);if(!te)return null;A=A||te.type,I.push([B,te])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new nr(A,i,u,f,I):t.error("Type "+ei(A)+" is not interpolatable.")},nr.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return i[0].evaluate(e);var f=t.length;if(u>=t[f-1])return i[f-1].evaluate(e);var m=Ea(t,u),x=nr.interpolationFactor(this.interpolation,u,t[m],t[m+1]),E=i[m].evaluate(e),I=i[m+1].evaluate(e);return this.operator==="interpolate"?Vo[this.type.kind.toLowerCase()](E,I,x):this.operator==="interpolate-hcl"?cs.reverse(cs.interpolate(cs.forward(E),cs.forward(I),x)):us.reverse(us.interpolate(us.forward(E),us.forward(I),x))},nr.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},nr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},nr.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var ja=function(e,t){this.type=e,this.args=t};ja.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,u=t.expectedType;u&&u.kind!=="value"&&(i=u);for(var f=[],m=0,x=e.slice(1);m<x.length;m+=1){var E=t.parse(x[m],1+f.length,i,void 0,{typeAnnotation:"omit"});if(!E)return null;i=i||E.type,f.push(E)}var I=u&&f.some(function(A){return mi(u,A.type)});return new ja(I?ot:i,f)},ja.prototype.evaluate=function(e){for(var t,i=null,u=0,f=0,m=this.args;f<m.length&&(u++,(i=m[f].evaluate(e))&&i instanceof On&&!i.available&&(t||(t=i.name),i=null,u===this.args.length&&(i=t)),i===null);f+=1);return i},ja.prototype.eachChild=function(e){this.args.forEach(e)},ja.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ja.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ga=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Ga.prototype.evaluate=function(e){return this.result.evaluate(e)},Ga.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},Ga.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],u=1;u<e.length-1;u+=2){var f=e[u];if(typeof f!="string")return t.error("Expected string, but found "+typeof f+" instead.",u);if(/[^a-zA-Z0-9_]/.test(f))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);var m=t.parse(e[u+1],u+1);if(!m)return null;i.push([f,m])}var x=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return x?new Ga(i,x):null},Ga.prototype.outputDefined=function(){return this.result.outputDefined()},Ga.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var u=i[t];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var go=function(e,t,i){this.type=e,this.index=t,this.input=i};go.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ie),u=t.parse(e[2],2,oi(t.expectedType||ot));return i&&u?new go(u.type.itemType,i,u):null},go.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ln("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new ln("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new ln("Array index must be an integer, but found "+t+" instead.");return i[t]},go.prototype.eachChild=function(e){e(this.index),e(this.input)},go.prototype.outputDefined=function(){return!1},go.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var yo=function(e,t){this.type=Qe,this.needle=e,this.haystack=t};yo.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,ot),u=t.parse(e[2],2,ot);return i&&u?Oi(i.type,[Qe,at,Ie,lt,ot])?new yo(i,u):t.error("Expected first argument to be of type boolean, string, number or null, but found "+ei(i.type)+" instead"):null},yo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!xi(t,["boolean","string","number","null"]))throw new ln("Expected first argument to be of type boolean, string, number or null, but found "+ei(Zi(t))+" instead.");if(!xi(i,["string","array"]))throw new ln("Expected second argument to be of type array or string, but found "+ei(Zi(i))+" instead.");return i.indexOf(t)>=0},yo.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},yo.prototype.outputDefined=function(){return!0},yo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Za=function(e,t,i){this.type=Ie,this.needle=e,this.haystack=t,this.fromIndex=i};Za.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,ot),u=t.parse(e[2],2,ot);if(!i||!u)return null;if(!Oi(i.type,[Qe,at,Ie,lt,ot]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+ei(i.type)+" instead");if(e.length===4){var f=t.parse(e[3],3,Ie);return f?new Za(i,u,f):null}return new Za(i,u)},Za.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!xi(t,["boolean","string","number","null"]))throw new ln("Expected first argument to be of type boolean, string, number or null, but found "+ei(Zi(t))+" instead.");if(!xi(i,["string","array"]))throw new ln("Expected second argument to be of type array or string, but found "+ei(Zi(i))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return i.indexOf(t,u)}return i.indexOf(t)},Za.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Za.prototype.outputDefined=function(){return!1},Za.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var _o=function(e,t,i,u,f,m){this.inputType=e,this.type=t,this.input=i,this.cases=u,this.outputs=f,this.otherwise=m};_o.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,u;t.expectedType&&t.expectedType.kind!=="value"&&(u=t.expectedType);for(var f={},m=[],x=2;x<e.length-1;x+=2){var E=e[x],I=e[x+1];Array.isArray(E)||(E=[E]);var A=t.concat(x);if(E.length===0)return A.error("Expected at least one branch label.");for(var M=0,B=E;M<B.length;M+=1){var V=B[M];if(typeof V!="number"&&typeof V!="string")return A.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof V=="number"&&Math.floor(V)!==V)return A.error("Numeric branch labels must be integer values.");if(i){if(A.checkSubtype(i,Zi(V)))return null}else i=Zi(V);if(f[String(V)]!==void 0)return A.error("Branch labels must be unique.");f[String(V)]=m.length}var G=t.parse(I,x,u);if(!G)return null;u=u||G.type,m.push(G)}var Q=t.parse(e[1],1,ot);if(!Q)return null;var te=t.parse(e[e.length-1],e.length-1,u);return te?Q.type.kind!=="value"&&t.concat(1).checkSubtype(i,Q.type)?null:new _o(i,u,Q,f,m,te):null},_o.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Zi(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},_o.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},_o.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},_o.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],u={},f=0,m=Object.keys(this.cases).sort();f<m.length;f+=1){var x=m[f];(B=u[this.cases[x]])===void 0?(u[this.cases[x]]=i.length,i.push([this.cases[x],[x]])):i[B][1].push(x)}for(var E=function(G){return e.inputType.kind==="number"?Number(G):G},I=0,A=i;I<A.length;I+=1){var M=A[I],B=M[0],V=M[1];t.push(V.length===1?E(V[0]):V.map(E)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var vo=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};vo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var u=[],f=1;f<e.length-1;f+=2){var m=t.parse(e[f],f,Qe);if(!m)return null;var x=t.parse(e[f+1],f+1,i);if(!x)return null;u.push([m,x]),i=i||x.type}var E=t.parse(e[e.length-1],e.length-1,i);return E?new vo(i,u,E):null},vo.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var u=i[t],f=u[1];if(u[0].evaluate(e))return f.evaluate(e)}return this.otherwise.evaluate(e)},vo.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var u=i[t],f=u[1];e(u[0]),e(f)}e(this.otherwise)},vo.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},vo.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ka=function(e,t,i,u){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=u};function oc(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function sc(e,t,i,u){return u.compare(t,i)===0}function Ri(e,t,i){var u=e!=="=="&&e!=="!=";return function(){function f(m,x,E){this.type=Qe,this.lhs=m,this.rhs=x,this.collator=E,this.hasUntypedArgument=m.type.kind==="value"||x.type.kind==="value"}return f.parse=function(m,x){if(m.length!==3&&m.length!==4)return x.error("Expected two or three arguments.");var E=m[0],I=x.parse(m[1],1,ot);if(!I)return null;if(!oc(E,I.type))return x.concat(1).error('"'+E+`" comparisons are not supported for type '`+ei(I.type)+"'.");var A=x.parse(m[2],2,ot);if(!A)return null;if(!oc(E,A.type))return x.concat(2).error('"'+E+`" comparisons are not supported for type '`+ei(A.type)+"'.");if(I.type.kind!==A.type.kind&&I.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot compare types '"+ei(I.type)+"' and '"+ei(A.type)+"'.");u&&(I.type.kind==="value"&&A.type.kind!=="value"?I=new Di(A.type,[I]):I.type.kind!=="value"&&A.type.kind==="value"&&(A=new Di(I.type,[A])));var M=null;if(m.length===4){if(I.type.kind!=="string"&&A.type.kind!=="string"&&I.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(M=x.parse(m[3],3,$t)))return null}return new f(I,A,M)},f.prototype.evaluate=function(m){var x=this.lhs.evaluate(m),E=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){var I=Zi(x),A=Zi(E);if(I.kind!==A.kind||I.kind!=="string"&&I.kind!=="number")throw new ln('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+I.kind+", "+A.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var M=Zi(x),B=Zi(E);if(M.kind!=="string"||B.kind!=="string")return t(m,x,E)}return this.collator?i(m,x,E,this.collator.evaluate(m)):t(m,x,E)},f.prototype.eachChild=function(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)},f.prototype.outputDefined=function(){return!0},f.prototype.serialize=function(){var m=[e];return this.eachChild(function(x){m.push(x.serialize())}),m},f}()}Ka.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,ot),u=t.parse(e[2],2,Ie);if(!i||!u)return null;if(!Oi(i.type,[oi(ot),at,ot]))return t.error("Expected first argument to be of type array or string, but found "+ei(i.type)+" instead");if(e.length===4){var f=t.parse(e[3],3,Ie);return f?new Ka(i.type,i,u,f):null}return new Ka(i.type,i,u)},Ka.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!xi(t,["string","array"]))throw new ln("Expected first argument to be of type array or string, but found "+ei(Zi(t))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return t.slice(i,u)}return t.slice(i)},Ka.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Ka.prototype.outputDefined=function(){return!1},Ka.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Op=Ri("==",function(e,t,i){return t===i},sc),js=Ri("!=",function(e,t,i){return t!==i},function(e,t,i,u){return!sc(0,t,i,u)}),lc=Ri("<",function(e,t,i){return t<i},function(e,t,i,u){return u.compare(t,i)<0}),uc=Ri(">",function(e,t,i){return t>i},function(e,t,i,u){return u.compare(t,i)>0}),cc=Ri("<=",function(e,t,i){return t<=i},function(e,t,i,u){return u.compare(t,i)<=0}),pc=Ri(">=",function(e,t,i){return t>=i},function(e,t,i,u){return u.compare(t,i)>=0}),bo=function(e,t,i,u,f){this.type=at,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=u,this.maxFractionDigits=f};bo.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Ie);if(!i)return null;var u=e[2];if(typeof u!="object"||Array.isArray(u))return t.error("NumberFormat options argument must be an object.");var f=null;if(u.locale&&!(f=t.parse(u.locale,1,at)))return null;var m=null;if(u.currency&&!(m=t.parse(u.currency,1,at)))return null;var x=null;if(u["min-fraction-digits"]&&!(x=t.parse(u["min-fraction-digits"],1,Ie)))return null;var E=null;return u["max-fraction-digits"]&&!(E=t.parse(u["max-fraction-digits"],1,Ie))?null:new bo(i,f,m,x,E)},bo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},bo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},bo.prototype.outputDefined=function(){return!1},bo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Ha=function(e){this.type=Ie,this.input=e};Ha.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+ei(i.type)+" instead."):new Ha(i):null},Ha.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new ln("Expected value to be of type string or array, but found "+ei(Zi(t))+" instead.")},Ha.prototype.eachChild=function(e){e(this.input)},Ha.prototype.outputDefined=function(){return!1},Ha.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var xo={"==":Op,"!=":js,">":uc,"<":lc,">=":pc,"<=":cc,array:Di,at:go,boolean:Di,case:vo,coalesce:ja,collator:$r,format:Fr,image:_r,in:yo,"index-of":Za,interpolate:nr,"interpolate-hcl":nr,"interpolate-lab":nr,length:Ha,let:Ga,literal:Pn,match:_o,number:Di,"number-format":bo,object:Di,slice:Ka,step:Nr,string:Di,"to-boolean":Cn,"to-color":Cn,"to-number":Cn,"to-string":Cn,var:Kn,within:Or};function hc(e,t){var i=t[0],u=t[1],f=t[2],m=t[3];i=i.evaluate(e),u=u.evaluate(e),f=f.evaluate(e);var x=m?m.evaluate(e):1,E=Ua(i,u,f,x);if(E)throw new ln(E);return new si(i/255*x,u/255*x,f/255*x,x)}function fc(e,t){return e in t}function Kl(e,t){var i=t[e];return i===void 0?null:i}function wo(e){return{type:e}}function dc(e){return{result:"success",value:e}}function So(e){return{result:"error",value:e}}function ko(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function mc(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ps(e){return!!e.expression&&e.expression.interpolated}function Ni(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Gs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Np(e){return e}function qo(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function gc(e,t,i,u,f){return qo(typeof i===f?u[i]:void 0,e.default,t.default)}function Up(e,t,i){if(Ni(i)!=="number")return qo(e.default,t.default);var u=e.stops.length;if(u===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[u-1][0])return e.stops[u-1][1];var f=Ea(e.stops.map(function(m){return m[0]}),i);return e.stops[f][1]}function yc(e,t,i){var u=e.base!==void 0?e.base:1;if(Ni(i)!=="number")return qo(e.default,t.default);var f=e.stops.length;if(f===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[f-1][0])return e.stops[f-1][1];var m=Ea(e.stops.map(function(B){return B[0]}),i),x=function(B,V,G,Q){var te=Q-G,he=B-G;return te===0?0:V===1?he/te:(Math.pow(V,he)-1)/(Math.pow(V,te)-1)}(i,u,e.stops[m][0],e.stops[m+1][0]),E=e.stops[m][1],I=e.stops[m+1][1],A=Vo[t.type]||Np;if(e.colorSpace&&e.colorSpace!=="rgb"){var M=ac[e.colorSpace];A=function(B,V){return M.reverse(M.interpolate(M.forward(B),M.forward(V),x))}}return typeof E.evaluate=="function"?{evaluate:function(){for(var B=[],V=arguments.length;V--;)B[V]=arguments[V];var G=E.evaluate.apply(void 0,B),Q=I.evaluate.apply(void 0,B);if(G!==void 0&&Q!==void 0)return A(G,Q,x)}}:A(E,I,x)}function Zs(e,t,i){return t.type==="color"?i=si.parse(i):t.type==="formatted"?i=sn.fromString(i.toString()):t.type==="resolvedImage"?i=On.fromString(i.toString()):Ni(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),qo(i,e.default,t.default)}Mn.register(xo,{error:[{kind:"error"},[at],function(e,t){throw new ln(t[0].evaluate(e))}],typeof:[at,[ot],function(e,t){return ei(Zi(t[0].evaluate(e)))}],"to-rgba":[oi(Ie,4),[it],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[it,[Ie,Ie,Ie],hc],rgba:[it,[Ie,Ie,Ie,Ie],hc],has:{type:Qe,overloads:[[[at],function(e,t){return fc(t[0].evaluate(e),e.properties())}],[[at,Gt],function(e,t){var i=t[1];return fc(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:ot,overloads:[[[at],function(e,t){return Kl(t[0].evaluate(e),e.properties())}],[[at,Gt],function(e,t){var i=t[1];return Kl(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[ot,[at],function(e,t){return Kl(t[0].evaluate(e),e.featureState||{})}],properties:[Gt,[],function(e){return e.properties()}],"geometry-type":[at,[],function(e){return e.geometryType()}],id:[ot,[],function(e){return e.id()}],zoom:[Ie,[],function(e){return e.globals.zoom}],"heatmap-density":[Ie,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ie,[],function(e){return e.globals.lineProgress||0}],accumulated:[ot,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Ie,wo(Ie),function(e,t){for(var i=0,u=0,f=t;u<f.length;u+=1)i+=f[u].evaluate(e);return i}],"*":[Ie,wo(Ie),function(e,t){for(var i=1,u=0,f=t;u<f.length;u+=1)i*=f[u].evaluate(e);return i}],"-":{type:Ie,overloads:[[[Ie,Ie],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Ie],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ie,[Ie,Ie],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Ie,[Ie,Ie],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Ie,[],function(){return Math.LN2}],pi:[Ie,[],function(){return Math.PI}],e:[Ie,[],function(){return Math.E}],"^":[Ie,[Ie,Ie],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Ie,[Ie],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Ie,[Ie],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Ie,[Ie],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Ie,[Ie],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Ie,[Ie],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Ie,[Ie],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Ie,[Ie],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Ie,[Ie],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Ie,[Ie],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Ie,[Ie],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Ie,wo(Ie),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Ie,wo(Ie),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Ie,[Ie],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Ie,[Ie],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ie,[Ie],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Ie,[Ie],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Qe,[at,ot],function(e,t){var i=t[0],u=t[1];return e.properties()[i.value]===u.value}],"filter-id-==":[Qe,[ot],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Qe,[at],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Qe,[at,ot],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f<m}],"filter-id-<":[Qe,[ot],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u<f}],"filter->":[Qe,[at,ot],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f>m}],"filter-id->":[Qe,[ot],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u>f}],"filter-<=":[Qe,[at,ot],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[Qe,[ot],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u<=f}],"filter->=":[Qe,[at,ot],function(e,t){var i=t[0],u=t[1],f=e.properties()[i.value],m=u.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[Qe,[ot],function(e,t){var i=t[0],u=e.id(),f=i.value;return typeof u==typeof f&&u>=f}],"filter-has":[Qe,[ot],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Qe,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Qe,[oi(at)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Qe,[oi(ot)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Qe,[at,oi(ot)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Qe,[at,oi(ot)],function(e,t){var i=t[0],u=t[1];return function(f,m,x,E){for(;x<=E;){var I=x+E>>1;if(m[I]===f)return!0;m[I]>f?E=I-1:x=I+1}return!1}(e.properties()[i.value],u.value,0,u.value.length-1)}],all:{type:Qe,overloads:[[[Qe,Qe],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[wo(Qe),function(e,t){for(var i=0,u=t;i<u.length;i+=1)if(!u[i].evaluate(e))return!1;return!0}]]},any:{type:Qe,overloads:[[[Qe,Qe],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[wo(Qe),function(e,t){for(var i=0,u=t;i<u.length;i+=1)if(u[i].evaluate(e))return!0;return!1}]]},"!":[Qe,[Qe],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Qe,[at],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[at,[at],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[at,[at],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[at,wo(ot),function(e,t){return t.map(function(i){return xa(i.evaluate(e))}).join("")}],"resolved-locale":[at,[$t],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var jo=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Gn,this._defaultValue=t?function(i){return i.type==="color"&&Gs(i.default)?new si(0,0,0,0):i.type==="color"?si.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function hs(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in xo}function Ks(e,t){var i=new Ki(xo,[],t?function(f){var m={color:it,string:at,number:Ie,enum:at,boolean:Qe,formatted:Ei,resolvedImage:Ht};return f.type==="array"?oi(m[f.value]||ot,f.length):m[f.type]}(t):void 0),u=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?dc(new jo(u,t)):So(i.errors)}jo.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=u,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)},jo.prototype.evaluate=function(e,t,i,u,f,m){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=u,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m||null;try{var x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new ln("Expected value to be one of "+Object.keys(this._enumValues).map(function(E){return JSON.stringify(E)}).join(", ")+", but found "+JSON.stringify(x)+" instead.");return x}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}};var fs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!_e(t.expression)};fs.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,u,f,m)},fs.prototype.evaluate=function(e,t,i,u,f,m){return this._styleExpression.evaluate(e,t,i,u,f,m)};var Go=function(e,t,i,u){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!_e(t.expression),this.interpolationType=u};function _c(e,t){if((e=Ks(e,t)).result==="error")return e;var i=e.value.expression,u=ka(i);if(!u&&!ko(t))return So([new Re("","data expressions not supported")]);var f=fr(i,["zoom"]);if(!f&&!mc(t))return So([new Re("","zoom expressions not supported")]);var m=function x(E){var I=null;if(E instanceof Ga)I=x(E.result);else if(E instanceof ja)for(var A=0,M=E.args;A<M.length&&!(I=x(M[A]));A+=1);else(E instanceof Nr||E instanceof nr)&&E.input instanceof Mn&&E.input.name==="zoom"&&(I=E);return I instanceof Re||E.eachChild(function(B){var V=x(B);V instanceof Re?I=V:!I&&V?I=new Re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):I&&V&&I!==V&&(I=new Re("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),I}(i);return m||f?m instanceof Re?So([m]):m instanceof nr&&!ps(t)?So([new Re("",'"interpolate" expressions cannot be used with this property')]):dc(m?new Go(u?"camera":"composite",e.value,m.labels,m instanceof nr?m.interpolation:void 0):new fs(u?"constant":"source",e.value)):So([new Re("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Go.prototype.evaluateWithoutErrorHandling=function(e,t,i,u,f,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,u,f,m)},Go.prototype.evaluate=function(e,t,i,u,f,m){return this._styleExpression.evaluate(e,t,i,u,f,m)},Go.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?nr.interpolationFactor(this.interpolationType,e,t,i):0};var Zo=function(e,t){this._parameters=e,this._specification=t,De(this,function i(u,f){var m,x,E,I=f.type==="color",A=u.stops&&typeof u.stops[0][0]=="object",M=A||!(A||u.property!==void 0),B=u.type||(ps(f)?"exponential":"interval");if(I&&((u=De({},u)).stops&&(u.stops=u.stops.map(function(ut){return[ut[0],si.parse(ut[1])]})),u.default=si.parse(u.default?u.default:f.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!ac[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if(B==="exponential")m=yc;else if(B==="interval")m=Up;else if(B==="categorical"){m=gc,x=Object.create(null);for(var V=0,G=u.stops;V<G.length;V+=1){var Q=G[V];x[Q[0]]=Q[1]}E=typeof u.stops[0][0]}else{if(B!=="identity")throw new Error('Unknown function type "'+B+'"');m=Zs}if(A){for(var te={},he=[],ae=0;ae<u.stops.length;ae++){var ye=u.stops[ae],xe=ye[0].zoom;te[xe]===void 0&&(te[xe]={zoom:xe,type:u.type,property:u.property,default:u.default,stops:[]},he.push(xe)),te[xe].stops.push([ye[0].value,ye[1]])}for(var Se=[],Ee=0,Ce=he;Ee<Ce.length;Ee+=1){var je=Ce[Ee];Se.push([te[je].zoom,i(te[je],f)])}var et={name:"linear"};return{kind:"composite",interpolationType:et,interpolationFactor:nr.interpolationFactor.bind(void 0,et),zoomStops:Se.map(function(ut){return ut[0]}),evaluate:function(ut,It){var pt=ut.zoom;return yc({stops:Se,base:u.base},f,pt).evaluate(pt,It)}}}if(M){var St=B==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:St,interpolationFactor:nr.interpolationFactor.bind(void 0,St),zoomStops:u.stops.map(function(ut){return ut[0]}),evaluate:function(ut){return m(u,f,ut.zoom,x,E)}}}return{kind:"source",evaluate:function(ut,It){var pt=It&&It.properties?It.properties[u.property]:void 0;return pt===void 0?qo(u.default,f.default):m(u,f,pt,x,E)}}}(this._parameters,this._specification))};function da(e){var t=e.key,i=e.value,u=e.valueSpec||{},f=e.objectElementValidators||{},m=e.style,x=e.styleSpec,E=[],I=Ni(i);if(I!=="object")return[new ee(t,i,"object expected, "+I+" found")];for(var A in i){var M=A.split(".")[0],B=u[M]||u["*"],V=void 0;if(f[M])V=f[M];else if(u[M])V=li;else if(f["*"])V=f["*"];else{if(!u["*"]){E.push(new ee(t,i[A],'unknown property "'+A+'"'));continue}V=li}E=E.concat(V({key:(t&&t+".")+A,value:i[A],valueSpec:B,style:m,styleSpec:x,object:i,objectKey:A},i))}for(var G in u)f[G]||u[G].required&&u[G].default===void 0&&i[G]===void 0&&E.push(new ee(t,i,'missing required property "'+G+'"'));return E}function vc(e){var t=e.value,i=e.valueSpec,u=e.style,f=e.styleSpec,m=e.key,x=e.arrayElementValidator||li;if(Ni(t)!=="array")return[new ee(m,t,"array expected, "+Ni(t)+" found")];if(i.length&&t.length!==i.length)return[new ee(m,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new ee(m,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var E={type:i.value,values:i.values};f.$version<7&&(E.function=i.function),Ni(i.value)==="object"&&(E=i.value);for(var I=[],A=0;A<t.length;A++)I=I.concat(x({array:t,arrayIndex:A,value:t[A],valueSpec:E,style:u,styleSpec:f,key:m+"["+A+"]"}));return I}function bc(e){var t=e.key,i=e.value,u=e.valueSpec,f=Ni(i);return f==="number"&&i!=i&&(f="NaN"),f!=="number"?[new ee(t,i,"number expected, "+f+" found")]:"minimum"in u&&i<u.minimum?[new ee(t,i,i+" is less than the minimum value "+u.minimum)]:"maximum"in u&&i>u.maximum?[new ee(t,i,i+" is greater than the maximum value "+u.maximum)]:[]}function xc(e){var t,i,u,f=e.valueSpec,m=Fe(e.value.type),x={},E=m!=="categorical"&&e.value.property===void 0,I=!E,A=Ni(e.value.stops)==="array"&&Ni(e.value.stops[0])==="array"&&Ni(e.value.stops[0][0])==="object",M=da({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(G){if(m==="identity")return[new ee(G.key,G.value,'identity function may not have a "stops" property')];var Q=[],te=G.value;return Q=Q.concat(vc({key:G.key,value:te,valueSpec:G.valueSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:B})),Ni(te)==="array"&&te.length===0&&Q.push(new ee(G.key,te,"array must have at least one stop")),Q},default:function(G){return li({key:G.key,value:G.value,valueSpec:f,style:G.style,styleSpec:G.styleSpec})}}});return m==="identity"&&E&&M.push(new ee(e.key,e.value,'missing required property "property"')),m==="identity"||e.value.stops||M.push(new ee(e.key,e.value,'missing required property "stops"')),m==="exponential"&&e.valueSpec.expression&&!ps(e.valueSpec)&&M.push(new ee(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(I&&!ko(e.valueSpec)?M.push(new ee(e.key,e.value,"property functions not supported")):E&&!mc(e.valueSpec)&&M.push(new ee(e.key,e.value,"zoom functions not supported"))),m!=="categorical"&&!A||e.value.property!==void 0||M.push(new ee(e.key,e.value,'"property" property is required')),M;function B(G){var Q=[],te=G.value,he=G.key;if(Ni(te)!=="array")return[new ee(he,te,"array expected, "+Ni(te)+" found")];if(te.length!==2)return[new ee(he,te,"array length 2 expected, length "+te.length+" found")];if(A){if(Ni(te[0])!=="object")return[new ee(he,te,"object expected, "+Ni(te[0])+" found")];if(te[0].zoom===void 0)return[new ee(he,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new ee(he,te,"object stop key must have value")];if(u&&u>Fe(te[0].zoom))return[new ee(he,te[0].zoom,"stop zoom values must appear in ascending order")];Fe(te[0].zoom)!==u&&(u=Fe(te[0].zoom),i=void 0,x={}),Q=Q.concat(da({key:he+"[0]",value:te[0],valueSpec:{zoom:{}},style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:bc,value:V}}))}else Q=Q.concat(V({key:he+"[0]",value:te[0],valueSpec:{},style:G.style,styleSpec:G.styleSpec},te));return hs(ze(te[1]))?Q.concat([new ee(he+"[1]",te[1],"expressions are not allowed in function stops.")]):Q.concat(li({key:he+"[1]",value:te[1],valueSpec:f,style:G.style,styleSpec:G.styleSpec}))}function V(G,Q){var te=Ni(G.value),he=Fe(G.value),ae=G.value!==null?G.value:Q;if(t){if(te!==t)return[new ee(G.key,ae,te+" stop domain type must match previous stop domain type "+t)]}else t=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new ee(G.key,ae,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&m!=="categorical"){var ye="number expected, "+te+" found";return ko(f)&&m===void 0&&(ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ee(G.key,ae,ye)]}return m!=="categorical"||te!=="number"||isFinite(he)&&Math.floor(he)===he?m!=="categorical"&&te==="number"&&i!==void 0&&he<i?[new ee(G.key,ae,"stop domain values must appear in ascending order")]:(i=he,m==="categorical"&&he in x?[new ee(G.key,ae,"stop domain values must be unique")]:(x[he]=!0,[])):[new ee(G.key,ae,"integer expected, found "+he)]}}function Eo(e){var t=(e.expressionContext==="property"?_c:Ks)(ze(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(u){return new ee(""+e.key+u.key,e.value,u.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new ee(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!_e(i))return[new ee(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!_e(i))return[new ee(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!fr(i,["zoom","feature-state"]))return[new ee(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!ka(i))return[new ee(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ds(e){var t=e.key,i=e.value,u=e.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(Fe(i))===-1&&f.push(new ee(t,i,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(u.values).indexOf(Fe(i))===-1&&f.push(new ee(t,i,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(i)+" found")),f}function Hs(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var u=i[t];if(!Hs(u)&&typeof u!="boolean")return!1}return!0;default:return!0}}Zo.deserialize=function(e){return new Zo(e._parameters,e._specification)},Zo.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Hl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ws(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Hs(e)||(e=Xs(e));var t=Ks(e,Hl);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,u,f){return t.value.evaluate(i,u,{},f)},needGeometry:function i(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(var f=1;f<u.length;f++)if(i(u[f]))return!0;return!1}(e)}}function Vp(e,t){return e<t?-1:e>t?1:0}function Xs(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?Wl(e[1],e[2],"=="):i==="!="?Ys(Wl(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Wl(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(Xs))):i==="all"?["all"].concat(e.slice(1).map(Xs)):i==="none"?["all"].concat(e.slice(1).map(Xs).map(Ys)):i==="in"?wc(e[1],e.slice(2)):i==="!in"?Ys(wc(e[1],e.slice(2))):i==="has"?Sc(e[1]):i==="!has"?Ys(Sc(e[1])):i!=="within"||e}function Wl(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function wc(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Vp)]]:["filter-in-small",e,["literal",t]]}}function Sc(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Ys(e){return["!",e]}function Xl(e){return Hs(ze(e.value))?Eo(De({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var u=i.value,f=i.key;if(Ni(u)!=="array")return[new ee(f,u,"array expected, "+Ni(u)+" found")];var m,x=i.styleSpec,E=[];if(u.length<1)return[new ee(f,u,"filter array must have at least 1 element")];switch(E=E.concat(ds({key:f+"[0]",value:u[0],valueSpec:x.filter_operator,style:i.style,styleSpec:i.styleSpec})),Fe(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Fe(u[1])==="$type"&&E.push(new ee(f,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":u.length!==3&&E.push(new ee(f,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&(m=Ni(u[1]))!=="string"&&E.push(new ee(f+"[1]",u[1],"string expected, "+m+" found"));for(var I=2;I<u.length;I++)m=Ni(u[I]),Fe(u[1])==="$type"?E=E.concat(ds({key:f+"["+I+"]",value:u[I],valueSpec:x.geometry_type,style:i.style,styleSpec:i.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&E.push(new ee(f+"["+I+"]",u[I],"string, number, or boolean expected, "+m+" found"));break;case"any":case"all":case"none":for(var A=1;A<u.length;A++)E=E.concat(t({key:f+"["+A+"]",value:u[A],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":m=Ni(u[1]),u.length!==2?E.push(new ee(f,u,'filter array for "'+u[0]+'" operator must have 2 elements')):m!=="string"&&E.push(new ee(f+"[1]",u[1],"string expected, "+m+" found"));break;case"within":m=Ni(u[1]),u.length!==2?E.push(new ee(f,u,'filter array for "'+u[0]+'" operator must have 2 elements')):m!=="object"&&E.push(new ee(f+"[1]",u[1],"object expected, "+m+" found"))}return E}(e)}function Yl(e,t){var i=e.key,u=e.style,f=e.styleSpec,m=e.value,x=e.objectKey,E=f[t+"_"+e.layerType];if(!E)return[];var I=x.match(/^(.*)-transition$/);if(t==="paint"&&I&&E[I[1]]&&E[I[1]].transition)return li({key:i,value:m,valueSpec:f.transition,style:u,styleSpec:f});var A,M=e.valueSpec||E[x];if(!M)return[new ee(i,m,'unknown property "'+x+'"')];if(Ni(m)==="string"&&ko(M)&&!M.tokens&&(A=/^{([^}]+)}$/.exec(m)))return[new ee(i,m,'"'+x+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var B=[];return e.layerType==="symbol"&&(x==="text-field"&&u&&!u.glyphs&&B.push(new ee(i,m,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Gs(ze(m))&&Fe(m.type)==="identity"&&B.push(new ee(i,m,'"text-font" does not support identity functions'))),B.concat(li({key:e.key,value:m,valueSpec:M,style:u,styleSpec:f,expressionContext:"property",propertyType:t,propertyKey:x}))}function Jl(e){return Yl(e,"paint")}function ms(e){return Yl(e,"layout")}function kc(e){var t=[],i=e.value,u=e.key,f=e.style,m=e.styleSpec;i.type||i.ref||t.push(new ee(u,i,'either "type" or "ref" is required'));var x,E=Fe(i.type),I=Fe(i.ref);if(i.id)for(var A=Fe(i.id),M=0;M<e.arrayIndex;M++){var B=f.layers[M];Fe(B.id)===A&&t.push(new ee(u,i.id,'duplicate layer id "'+i.id+'", previously used at line '+B.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(Q){Q in i&&t.push(new ee(u,i[Q],'"'+Q+'" is prohibited for ref layers'))}),f.layers.forEach(function(Q){Fe(Q.id)===I&&(x=Q)}),x?x.ref?t.push(new ee(u,i.ref,"ref cannot reference another ref layer")):E=Fe(x.type):t.push(new ee(u,i.ref,'ref layer "'+I+'" not found'));else if(E!=="background")if(i.source){var V=f.sources&&f.sources[i.source],G=V&&Fe(V.type);V?G==="vector"&&E==="raster"?t.push(new ee(u,i.source,'layer "'+i.id+'" requires a raster source')):G==="raster"&&E!=="raster"?t.push(new ee(u,i.source,'layer "'+i.id+'" requires a vector source')):G!=="vector"||i["source-layer"]?G==="raster-dem"&&E!=="hillshade"?t.push(new ee(u,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!i.paint||!i.paint["line-gradient"]||G==="geojson"&&V.lineMetrics||t.push(new ee(u,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new ee(u,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new ee(u,i.source,'source "'+i.source+'" not found'))}else t.push(new ee(u,i,'missing required property "source"'));return t=t.concat(da({key:u,value:i,valueSpec:m.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return li({key:u+".type",value:i.type,valueSpec:m.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Xl,layout:function(Q){return da({layer:i,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{"*":function(te){return ms(De({layerType:E},te))}}})},paint:function(Q){return da({layer:i,key:Q.key,value:Q.value,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{"*":function(te){return Jl(De({layerType:E},te))}}})}}}))}function zo(e){var t=e.value,i=e.key,u=Ni(t);return u!=="string"?[new ee(i,t,"string expected, "+u+" found")]:[]}var Ji={promoteId:function(e){var t=e.key,i=e.value;if(Ni(i)==="string")return zo({key:t,value:i});var u=[];for(var f in i)u.push.apply(u,zo({key:t+"."+f,value:i[f]}));return u}};function Js(e){var t=e.value,i=e.key,u=e.styleSpec,f=e.style;if(!t.type)return[new ee(i,t,'"type" is required')];var m,x=Fe(t.type);switch(x){case"vector":case"raster":case"raster-dem":return da({key:i,value:t,valueSpec:u["source_"+x.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Ji});case"geojson":if(m=da({key:i,value:t,valueSpec:u.source_geojson,style:f,styleSpec:u,objectElementValidators:Ji}),t.cluster)for(var E in t.clusterProperties){var I=t.clusterProperties[E],A=I[0],M=typeof A=="string"?[A,["accumulated"],["get",E]]:A;m.push.apply(m,Eo({key:i+"."+E+".map",value:I[1],expressionContext:"cluster-map"})),m.push.apply(m,Eo({key:i+"."+E+".reduce",value:M,expressionContext:"cluster-reduce"}))}return m;case"video":return da({key:i,value:t,valueSpec:u.source_video,style:f,styleSpec:u});case"image":return da({key:i,value:t,valueSpec:u.source_image,style:f,styleSpec:u});case"canvas":return[new ee(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ds({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,styleSpec:u})}}function To(e){var t=e.value,i=e.styleSpec,u=i.light,f=e.style,m=[],x=Ni(t);if(t===void 0)return m;if(x!=="object")return m.concat([new ee("light",t,"object expected, "+x+" found")]);for(var E in t){var I=E.match(/^(.*)-transition$/);m=m.concat(I&&u[I[1]]&&u[I[1]].transition?li({key:E,value:t[E],valueSpec:i.transition,style:f,styleSpec:i}):u[E]?li({key:E,value:t[E],valueSpec:u[E],style:f,styleSpec:i}):[new ee(E,t[E],'unknown property "'+E+'"')])}return m}var Wa={"*":function(){return[]},array:vc,boolean:function(e){var t=e.value,i=e.key,u=Ni(t);return u!=="boolean"?[new ee(i,t,"boolean expected, "+u+" found")]:[]},number:bc,color:function(e){var t=e.key,i=e.value,u=Ni(i);return u!=="string"?[new ee(t,i,"color expected, "+u+" found")]:Jt(i)===null?[new ee(t,i,'color expected, "'+i+'" found')]:[]},constants:ge,enum:ds,filter:Xl,function:xc,layer:kc,object:da,source:Js,light:To,string:zo,formatted:function(e){return zo(e).length===0?[]:Eo(e)},resolvedImage:function(e){return zo(e).length===0?[]:Eo(e)}};function li(e){var t=e.value,i=e.valueSpec,u=e.styleSpec;return i.expression&&Gs(Fe(t))?xc(e):i.expression&&hs(ze(t))?Eo(e):i.type&&Wa[i.type]?Wa[i.type](e):da(De({},e,{valueSpec:i.type?u[i.type]:i}))}function Ui(e){var t=e.value,i=e.key,u=zo(e);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new ee(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new ee(i,t,'"glyphs" url must include a "{range}" token'))),u}function ea(e,t){t===void 0&&(t=j);var i=[];return i=i.concat(li({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ui,"*":function(){return[]}}})),e.constants&&(i=i.concat(ge({key:"constants",value:e.constants,style:e,styleSpec:t}))),gs(i)}function gs(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function Ko(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return gs(e.apply(this,t))}}ea.source=Ko(Js),ea.light=Ko(To),ea.layer=Ko(kc),ea.filter=Ko(Xl),ea.paintProperty=Ko(Jl),ea.layoutProperty=Ko(ms);var ys=ea,qp=ys.light,jp=ys.paintProperty,_s=ys.layoutProperty;function vs(e,t){var i=!1;if(t&&t.length)for(var u=0,f=t;u<f.length;u+=1)e.fire(new ue(new Error(f[u].message))),i=!0;return i}var Ma=Dn;function Dn(e,t,i){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var f=new Int32Array(this.arrayBuffer);e=f[0],this.d=(t=f[1])+2*(i=f[2]);for(var m=0;m<this.d*this.d;m++){var x=f[3+m],E=f[3+m+1];u.push(x===E?null:f.subarray(x,E))}var I=f[3+u.length+1];this.keys=f.subarray(f[3+u.length],I),this.bboxes=f.subarray(I),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var A=0;A<this.d*this.d;A++)u.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var M=i/t*e;this.min=-M,this.max=e+M}Dn.prototype.insert=function(e,t,i,u,f){this._forEachCell(t,i,u,f,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(f)},Dn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Dn.prototype._insertCell=function(e,t,i,u,f,m){this.cells[f].push(m)},Dn.prototype.query=function(e,t,i,u,f){var m=this.min,x=this.max;if(e<=m&&t<=m&&x<=i&&x<=u&&!f)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(e,t,i,u,this._queryCell,E,{},f),E},Dn.prototype._queryCell=function(e,t,i,u,f,m,x,E){var I=this.cells[f];if(I!==null)for(var A=this.keys,M=this.bboxes,B=0;B<I.length;B++){var V=I[B];if(x[V]===void 0){var G=4*V;(E?E(M[G+0],M[G+1],M[G+2],M[G+3]):e<=M[G+2]&&t<=M[G+3]&&i>=M[G+0]&&u>=M[G+1])?(x[V]=!0,m.push(A[V])):x[V]=!1}}},Dn.prototype._forEachCell=function(e,t,i,u,f,m,x,E){for(var I=this._convertToCellCoord(e),A=this._convertToCellCoord(t),M=this._convertToCellCoord(i),B=this._convertToCellCoord(u),V=I;V<=M;V++)for(var G=A;G<=B;G++){var Q=this.d*G+V;if((!E||E(this._convertFromCellCoord(V),this._convertFromCellCoord(G),this._convertFromCellCoord(V+1),this._convertFromCellCoord(G+1)))&&f.call(this,e,t,i,u,Q,m,x,E))return}},Dn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Dn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Dn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,u=0;u<this.cells.length;u++)i+=this.cells[u].length;var f=new Int32Array(t+i+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var m=t,x=0;x<e.length;x++){var E=e[x];f[3+x]=m,f.set(E,m),m+=E.length}return f[3+e.length]=m,f.set(this.keys,m),f[3+e.length+1]=m+=this.keys.length,f.set(this.bboxes,m),m+=this.bboxes.length,f.buffer};var bs=R.ImageData,Ec=R.ImageBitmap,kn={};function yt(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),kn[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Ur in yt("Object",Object),Ma.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Ma.deserialize=function(e){return new Ma(e.buffer)},yt("Grid",Ma),yt("Color",si),yt("Error",Error),yt("ResolvedImage",On),yt("StylePropertyFunction",Zo),yt("StyleExpression",jo,{omit:["_evaluator"]}),yt("ZoomDependentExpression",Go),yt("ZoomConstantExpression",fs),yt("CompoundExpression",Mn,{omit:["_evaluate"]}),xo)xo[Ur]._classRegistryKey||yt("Expression_"+Ur,xo[Ur]);function Qs(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Ho(e){return Ec&&e instanceof Ec}function ma(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Qs(e)||Ho(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof bs)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],f=0,m=e;f<m.length;f+=1)u.push(ma(m[f],t));return u}if(typeof e=="object"){var x=e.constructor,E=x._classRegistryKey;if(!E)throw new Error("can't serialize object of unregistered class");var I=x.serialize?x.serialize(e,t):{};if(!x.serialize){for(var A in e)if(e.hasOwnProperty(A)&&!(kn[E].omit.indexOf(A)>=0)){var M=e[A];I[A]=kn[E].shallow.indexOf(A)>=0?M:ma(M,t)}e instanceof Error&&(I.message=e.message)}if(I.$name)throw new Error("$name property is reserved for worker serialization logic.");return E!=="Object"&&(I.$name=E),I}throw new Error("can't serialize object of type "+typeof e)}function Vr(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Qs(e)||Ho(e)||ArrayBuffer.isView(e)||e instanceof bs)return e;if(Array.isArray(e))return e.map(Vr);if(typeof e=="object"){var t=e.$name||"Object",i=kn[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var u=Object.create(i.prototype),f=0,m=Object.keys(e);f<m.length;f+=1){var x=m[f];if(x!=="$name"){var E=e[x];u[x]=kn[t].shallow.indexOf(x)>=0?E:Vr(E)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var Ql=function(){this.first=!0};Ql.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var rt={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function $l(e){for(var t=0,i=e;t<i.length;t+=1)if($s(i[t].charCodeAt(0)))return!0;return!1}function $s(e){return!(e!==746&&e!==747&&(e<4352||!(rt["Bopomofo Extended"](e)||rt.Bopomofo(e)||rt["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||rt["CJK Compatibility Ideographs"](e)||rt["CJK Compatibility"](e)||rt["CJK Radicals Supplement"](e)||rt["CJK Strokes"](e)||!(!rt["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||rt["CJK Unified Ideographs Extension A"](e)||rt["CJK Unified Ideographs"](e)||rt["Enclosed CJK Letters and Months"](e)||rt["Hangul Compatibility Jamo"](e)||rt["Hangul Jamo Extended-A"](e)||rt["Hangul Jamo Extended-B"](e)||rt["Hangul Jamo"](e)||rt["Hangul Syllables"](e)||rt.Hiragana(e)||rt["Ideographic Description Characters"](e)||rt.Kanbun(e)||rt["Kangxi Radicals"](e)||rt["Katakana Phonetic Extensions"](e)||rt.Katakana(e)&&e!==12540||!(!rt["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!rt["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||rt["Unified Canadian Aboriginal Syllabics"](e)||rt["Unified Canadian Aboriginal Syllabics Extended"](e)||rt["Vertical Forms"](e)||rt["Yijing Hexagram Symbols"](e)||rt["Yi Syllables"](e)||rt["Yi Radicals"](e))))}function eu(e){return!($s(e)||function(t){return!!(rt["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||rt["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||rt["Letterlike Symbols"](t)||rt["Number Forms"](t)||rt["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||rt["Control Pictures"](t)&&t!==9251||rt["Optical Character Recognition"](t)||rt["Enclosed Alphanumerics"](t)||rt["Geometric Shapes"](t)||rt["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||rt["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||rt["CJK Symbols and Punctuation"](t)||rt.Katakana(t)||rt["Private Use Area"](t)||rt["CJK Compatibility Forms"](t)||rt["Small Form Variants"](t)||rt["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function aa(e){return e>=1424&&e<=2303||rt["Arabic Presentation Forms-A"](e)||rt["Arabic Presentation Forms-B"](e)}function qr(e,t){return!(!t&&aa(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||rt.Khmer(e))}function el(e){for(var t=0,i=e;t<i.length;t+=1)if(aa(i[t].charCodeAt(0)))return!0;return!1}var tl=null,jr="unavailable",Da=null,zc=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(jr="error"),tl&&tl(e)};function xs(){tu.fire(new Y("pluginStateChange",{pluginStatus:jr,pluginURL:Da}))}var tu=new fe,iu=function(){return jr},ga=function(){if(jr!=="deferred"||!Da)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");jr="loading",xs(),Da&&on({url:Da},function(e){e?zc(e):(jr="loaded",xs())})},ta={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return jr==="loaded"||ta.applyArabicShaping!=null},isLoading:function(){return jr==="loading"},setState:function(e){jr=e.pluginStatus,Da=e.pluginURL},isParsed:function(){return ta.applyArabicShaping!=null&&ta.processBidirectionalText!=null&&ta.processStyledBidirectionalText!=null},getPluginURL:function(){return Da}},ii=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ql,this.transition={})};ii.prototype.isSupportedScript=function(e){return function(t,i){for(var u=0,f=t;u<f.length;u+=1)if(!qr(f[u].charCodeAt(0),i))return!1;return!0}(e,ta.isLoaded())},ii.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ii.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var za=function(e,t){this.property=e,this.value=t,this.expression=function(i,u){if(Gs(i))return new Zo(i,u);if(hs(i)){var f=_c(i,u);if(f.result==="error")throw new Error(f.value.map(function(x){return x.key+": "+x.message}).join(", "));return f.value}var m=i;return typeof i=="string"&&u.type==="color"&&(m=si.parse(i)),{kind:"constant",evaluate:function(){return m}}}(t===void 0?e.specification.default:t,e.specification)};za.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},za.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var oa=function(e){this.property=e,this.value=new za(e,void 0)};oa.prototype.transitioned=function(e,t){return new Io(this.property,this.value,t,ve({},e.transition,this.transition),e.now)},oa.prototype.untransitioned=function(){return new Io(this.property,this.value,null,{},0)};var rr=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};rr.prototype.getValue=function(e){return wt(this._values[e].value.value)},rr.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new oa(this._values[e].property)),this._values[e].value=new za(this._values[e].property,t===null?void 0:wt(t))},rr.prototype.getTransition=function(e){return wt(this._values[e].transition)},rr.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new oa(this._values[e].property)),this._values[e].transition=wt(t)||void 0},rr.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t],f=this.getValue(u);f!==void 0&&(e[u]=f);var m=this.getTransition(u);m!==void 0&&(e[u+"-transition"]=m)}return e},rr.prototype.transitioned=function(e,t){for(var i=new Xa(this._properties),u=0,f=Object.keys(this._values);u<f.length;u+=1){var m=f[u];i._values[m]=this._values[m].transitioned(e,t._values[m])}return i},rr.prototype.untransitioned=function(){for(var e=new Xa(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t];e._values[u]=this._values[u].untransitioned()}return e};var Io=function(e,t,i,u,f){this.property=e,this.value=t,this.begin=f+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=i)};Io.prototype.possiblyEvaluate=function(e,t,i){var u=e.now||0,f=this.value.possiblyEvaluate(e,t,i),m=this.prior;if(m){if(u>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(u<this.begin)return m.possiblyEvaluate(e,t,i);var x=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,t,i),f,function(E){if(E<=0)return 0;if(E>=1)return 1;var I=E*E,A=I*E;return 4*(E<.5?A:3*(E-I)+A-.75)}(x))}return f};var Xa=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Xa.prototype.possiblyEvaluate=function(e,t,i){for(var u=new ws(this._properties),f=0,m=Object.keys(this._values);f<m.length;f+=1){var x=m[f];u._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return u},Xa.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var ya=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ya.prototype.getValue=function(e){return wt(this._values[e].value)},ya.prototype.setValue=function(e,t){this._values[e]=new za(this._values[e].property,t===null?void 0:wt(t))},ya.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var u=i[t],f=this.getValue(u);f!==void 0&&(e[u]=f)}return e},ya.prototype.possiblyEvaluate=function(e,t,i){for(var u=new ws(this._properties),f=0,m=Object.keys(this._values);f<m.length;f+=1){var x=m[f];u._values[x]=this._values[x].possiblyEvaluate(e,t,i)}return u};var vr=function(e,t,i){this.property=e,this.value=t,this.parameters=i};vr.prototype.isConstant=function(){return this.value.kind==="constant"},vr.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},vr.prototype.evaluate=function(e,t,i,u){return this.property.evaluate(this.value,this.parameters,e,t,i,u)};var ws=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};ws.prototype.get=function(e){return this._values[e]};var zt=function(e){this.specification=e};zt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},zt.prototype.interpolate=function(e,t,i){var u=Vo[this.specification.type];return u?u(e,t,i):e};var bt=function(e,t){this.specification=e,this.overrides=t};bt.prototype.possiblyEvaluate=function(e,t,i,u){return new vr(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,u)}:e.expression,t)},bt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new vr(this,{kind:"constant",value:void 0},e.parameters);var u=Vo[this.specification.type];return u?new vr(this,{kind:"constant",value:u(e.value.value,t.value.value,i)},e.parameters):e},bt.prototype.evaluate=function(e,t,i,u,f,m){return e.kind==="constant"?e.value:e.evaluate(t,i,u,f,m)};var il=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,u,f,m){if(i.value===void 0)return new vr(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){var x=i.expression.evaluate(u,null,{},f,m),E=i.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,I=this._calculate(E,E,E,u);return new vr(this,{kind:"constant",value:I},u)}if(i.expression.kind==="camera"){var A=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new vr(this,{kind:"constant",value:A},u)}return new vr(this,i.expression,u)},t.prototype.evaluate=function(i,u,f,m,x,E){if(i.kind==="source"){var I=i.evaluate(u,f,m,x,E);return this._calculate(I,I,I,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},f,m),i.evaluate({zoom:Math.floor(u.zoom)},f,m),i.evaluate({zoom:Math.floor(u.zoom)+1},f,m),u):i.value},t.prototype._calculate=function(i,u,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:f,to:u}},t.prototype.interpolate=function(i){return i},t}(bt),br=function(e){this.specification=e};br.prototype.possiblyEvaluate=function(e,t,i,u){if(e.value!==void 0){if(e.expression.kind==="constant"){var f=e.expression.evaluate(t,null,{},i,u);return this._calculate(f,f,f,t)}return this._calculate(e.expression.evaluate(new ii(Math.floor(t.zoom-1),t)),e.expression.evaluate(new ii(Math.floor(t.zoom),t)),e.expression.evaluate(new ii(Math.floor(t.zoom+1),t)),t)}},br.prototype._calculate=function(e,t,i,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},br.prototype.interpolate=function(e){return e};var _a=function(e){this.specification=e};_a.prototype.possiblyEvaluate=function(e,t,i,u){return!!e.expression.evaluate(t,null,{},i,u)},_a.prototype.interpolate=function(){return!1};var ar=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var u=this.defaultPropertyValues[t]=new za(i,void 0),f=this.defaultTransitionablePropertyValues[t]=new oa(i);this.defaultTransitioningPropertyValues[t]=f.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=u.possiblyEvaluate({})}};yt("DataDrivenProperty",bt),yt("DataConstantProperty",zt),yt("CrossFadedDataDrivenProperty",il),yt("CrossFadedProperty",br),yt("ColorRampProperty",_a);var Ta=function(e){function t(i,u){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new ya(u.layout)),u.paint)){for(var f in this._transitionablePaint=new rr(u.paint),i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(var m in i.layout)this.setLayoutProperty(m,i.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ws(u.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,u,f){f===void 0&&(f={}),u!=null&&this._validate(_s,"layers."+this.id+".layout."+i,i,u,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)},t.prototype.getPaintProperty=function(i){return qt(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,u,f){if(f===void 0&&(f={}),u!=null&&this._validate(jp,"layers."+this.id+".paint."+i,i,u,f))return!1;if(qt(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;var m=this._transitionablePaint._values[i],x=m.property.specification["property-type"]==="cross-faded-data-driven",E=m.value.isDataDriven(),I=m.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);var A=this._transitionablePaint._values[i].value;return A.isDataDriven()||E||x||this._handleOverridablePaintPropertyUpdate(i,I,A)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,u,f){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Xe(i,function(u,f){return!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length)})},t.prototype._validate=function(i,u,f,m,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&vs(this,i.call(ys,{key:u,layerType:this.type,objectKey:f,value:m,styleSpec:j,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var u=this.paint.get(i);if(u instanceof vr&&ko(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1},t}(fe),nu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},nl=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ci=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Hn(e,t){t===void 0&&(t=1);var i=0,u=0;return{members:e.map(function(f){var m=nu[f.type].BYTES_PER_ELEMENT,x=i=Tc(i,Math.max(t,m)),E=f.components||1;return u=Math.max(u,m),i+=m*E,{name:f.name,type:f.type,components:E,offset:x}}),size:Tc(i,Math.max(u,t)),alignment:t}}function Tc(e,t){return Math.ceil(e/t)*t}Ci.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Ci.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Ci.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ci.prototype.clear=function(){this.length=0},Ci.prototype.resize=function(e){this.reserve(e),this.length=e},Ci.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Ci.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ao=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.int16[m+0]=u,this.int16[m+1]=f,i},t}(Ci);Ao.prototype.bytesPerElement=4,yt("StructArrayLayout2i4",Ao);var ru=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=4*i;return this.int16[E+0]=u,this.int16[E+1]=f,this.int16[E+2]=m,this.int16[E+3]=x,i},t}(Ci);ru.prototype.bytesPerElement=8,yt("StructArrayLayout4i8",ru);var La=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var I=this.length;return this.resize(I+1),this.emplace(I,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,I){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=x,this.int16[A+4]=E,this.int16[A+5]=I,i},t}(Ci);La.prototype.bytesPerElement=12,yt("StructArrayLayout2i4i12",La);var Gr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var I=this.length;return this.resize(I+1),this.emplace(I,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,I){var A=4*i,M=8*i;return this.int16[A+0]=u,this.int16[A+1]=f,this.uint8[M+4]=m,this.uint8[M+5]=x,this.uint8[M+6]=E,this.uint8[M+7]=I,i},t}(Ci);Gr.prototype.bytesPerElement=8,yt("StructArrayLayout2i4ub8",Gr);var Wo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.float32[m+0]=u,this.float32[m+1]=f,i},t}(Ci);Wo.prototype.bytesPerElement=8,yt("StructArrayLayout2f8",Wo);var Ia=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,I,A,M,B){var V=this.length;return this.resize(V+1),this.emplace(V,i,u,f,m,x,E,I,A,M,B)},t.prototype.emplace=function(i,u,f,m,x,E,I,A,M,B,V){var G=10*i;return this.uint16[G+0]=u,this.uint16[G+1]=f,this.uint16[G+2]=m,this.uint16[G+3]=x,this.uint16[G+4]=E,this.uint16[G+5]=I,this.uint16[G+6]=A,this.uint16[G+7]=M,this.uint16[G+8]=B,this.uint16[G+9]=V,i},t}(Ci);Ia.prototype.bytesPerElement=20,yt("StructArrayLayout10ui20",Ia);var rl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,I,A,M,B,V,G){var Q=this.length;return this.resize(Q+1),this.emplace(Q,i,u,f,m,x,E,I,A,M,B,V,G)},t.prototype.emplace=function(i,u,f,m,x,E,I,A,M,B,V,G,Q){var te=12*i;return this.int16[te+0]=u,this.int16[te+1]=f,this.int16[te+2]=m,this.int16[te+3]=x,this.uint16[te+4]=E,this.uint16[te+5]=I,this.uint16[te+6]=A,this.uint16[te+7]=M,this.int16[te+8]=B,this.int16[te+9]=V,this.int16[te+10]=G,this.int16[te+11]=Q,i},t}(Ci);rl.prototype.bytesPerElement=24,yt("StructArrayLayout4i4ui4i24",rl);var Xo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.float32[x+0]=u,this.float32[x+1]=f,this.float32[x+2]=m,i},t}(Ci);Xo.prototype.bytesPerElement=12,yt("StructArrayLayout3f12",Xo);var Ss=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.uint32[1*i+0]=u,i},t}(Ci);Ss.prototype.bytesPerElement=4,yt("StructArrayLayout1ul4",Ss);var au=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,I,A,M){var B=this.length;return this.resize(B+1),this.emplace(B,i,u,f,m,x,E,I,A,M)},t.prototype.emplace=function(i,u,f,m,x,E,I,A,M,B){var V=10*i,G=5*i;return this.int16[V+0]=u,this.int16[V+1]=f,this.int16[V+2]=m,this.int16[V+3]=x,this.int16[V+4]=E,this.int16[V+5]=I,this.uint32[G+3]=A,this.uint16[V+8]=M,this.uint16[V+9]=B,i},t}(Ci);au.prototype.bytesPerElement=20,yt("StructArrayLayout6i1ul2ui20",au);var Yo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E){var I=this.length;return this.resize(I+1),this.emplace(I,i,u,f,m,x,E)},t.prototype.emplace=function(i,u,f,m,x,E,I){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=x,this.int16[A+4]=E,this.int16[A+5]=I,i},t}(Ci);Yo.prototype.bytesPerElement=12,yt("StructArrayLayout2i2i2i12",Yo);var Po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x){var E=this.length;return this.resize(E+1),this.emplace(E,i,u,f,m,x)},t.prototype.emplace=function(i,u,f,m,x,E){var I=4*i,A=8*i;return this.float32[I+0]=u,this.float32[I+1]=f,this.float32[I+2]=m,this.int16[A+6]=x,this.int16[A+7]=E,i},t}(Ci);Po.prototype.bytesPerElement=16,yt("StructArrayLayout2f1f2i16",Po);var ou=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=12*i,I=3*i;return this.uint8[E+0]=u,this.uint8[E+1]=f,this.float32[I+1]=m,this.float32[I+2]=x,i},t}(Ci);ou.prototype.bytesPerElement=12,yt("StructArrayLayout2ub2f12",ou);var Ya=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.uint16[x+0]=u,this.uint16[x+1]=f,this.uint16[x+2]=m,i},t}(Ci);Ya.prototype.bytesPerElement=6,yt("StructArrayLayout3ui6",Ya);var Ja=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,I,A,M,B,V,G,Q,te,he,ae,ye){var xe=this.length;return this.resize(xe+1),this.emplace(xe,i,u,f,m,x,E,I,A,M,B,V,G,Q,te,he,ae,ye)},t.prototype.emplace=function(i,u,f,m,x,E,I,A,M,B,V,G,Q,te,he,ae,ye,xe){var Se=24*i,Ee=12*i,Ce=48*i;return this.int16[Se+0]=u,this.int16[Se+1]=f,this.uint16[Se+2]=m,this.uint16[Se+3]=x,this.uint32[Ee+2]=E,this.uint32[Ee+3]=I,this.uint32[Ee+4]=A,this.uint16[Se+10]=M,this.uint16[Se+11]=B,this.uint16[Se+12]=V,this.float32[Ee+7]=G,this.float32[Ee+8]=Q,this.uint8[Ce+36]=te,this.uint8[Ce+37]=he,this.uint8[Ce+38]=ae,this.uint32[Ee+10]=ye,this.int16[Se+22]=xe,i},t}(Ci);Ja.prototype.bytesPerElement=48,yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ja);var al=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m,x,E,I,A,M,B,V,G,Q,te,he,ae,ye,xe,Se,Ee,Ce,je,et,St,ut,It,pt,Qt){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,i,u,f,m,x,E,I,A,M,B,V,G,Q,te,he,ae,ye,xe,Se,Ee,Ce,je,et,St,ut,It,pt,Qt)},t.prototype.emplace=function(i,u,f,m,x,E,I,A,M,B,V,G,Q,te,he,ae,ye,xe,Se,Ee,Ce,je,et,St,ut,It,pt,Qt,Lt){var xt=34*i,ti=17*i;return this.int16[xt+0]=u,this.int16[xt+1]=f,this.int16[xt+2]=m,this.int16[xt+3]=x,this.int16[xt+4]=E,this.int16[xt+5]=I,this.int16[xt+6]=A,this.int16[xt+7]=M,this.uint16[xt+8]=B,this.uint16[xt+9]=V,this.uint16[xt+10]=G,this.uint16[xt+11]=Q,this.uint16[xt+12]=te,this.uint16[xt+13]=he,this.uint16[xt+14]=ae,this.uint16[xt+15]=ye,this.uint16[xt+16]=xe,this.uint16[xt+17]=Se,this.uint16[xt+18]=Ee,this.uint16[xt+19]=Ce,this.uint16[xt+20]=je,this.uint16[xt+21]=et,this.uint16[xt+22]=St,this.uint32[ti+12]=ut,this.float32[ti+13]=It,this.float32[ti+14]=pt,this.float32[ti+15]=Qt,this.float32[ti+16]=Lt,i},t}(Ci);al.prototype.bytesPerElement=68,yt("StructArrayLayout8i15ui1ul4f68",al);var Qa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.float32[1*i+0]=u,i},t}(Ci);Qa.prototype.bytesPerElement=4,yt("StructArrayLayout1f4",Qa);var sa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=3*i;return this.int16[x+0]=u,this.int16[x+1]=f,this.int16[x+2]=m,i},t}(Ci);sa.prototype.bytesPerElement=6,yt("StructArrayLayout3i6",sa);var su=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,f)},t.prototype.emplace=function(i,u,f,m){var x=4*i;return this.uint32[2*i+0]=u,this.uint16[x+2]=f,this.uint16[x+3]=m,i},t}(Ci);su.prototype.bytesPerElement=8,yt("StructArrayLayout1ul2ui8",su);var ks=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u){var f=this.length;return this.resize(f+1),this.emplace(f,i,u)},t.prototype.emplace=function(i,u,f){var m=2*i;return this.uint16[m+0]=u,this.uint16[m+1]=f,i},t}(Ci);ks.prototype.bytesPerElement=4,yt("StructArrayLayout2ui4",ks);var lu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},t.prototype.emplace=function(i,u){return this.uint16[1*i+0]=u,i},t}(Ci);lu.prototype.bytesPerElement=2,yt("StructArrayLayout1ui2",lu);var ol=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,u,f,m){var x=this.length;return this.resize(x+1),this.emplace(x,i,u,f,m)},t.prototype.emplace=function(i,u,f,m,x){var E=4*i;return this.float32[E+0]=u,this.float32[E+1]=f,this.float32[E+2]=m,this.float32[E+3]=x,i},t}(Ci);ol.prototype.bytesPerElement=16,yt("StructArrayLayout4f16",ol);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new P(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(nl);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(au);yt("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(nl);o.prototype.size=48;var c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(Ja);yt("PlacedSymbolArray",c);var _=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(nl);_.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new _(this,i)},t}(al);yt("SymbolInstanceArray",w);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(Qa);yt("GlyphOffsetArray",k);var z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(sa);yt("SymbolLineVertexArray",z);var C=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(nl);C.prototype.size=8;var F=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new C(this,i)},t}(su);yt("FeatureIndexArray",F);var Z=Hn([{name:"a_pos",components:2,type:"Int16"}],4).members,K=function(e){e===void 0&&(e=[]),this.segments=e};function W(e,t){return 256*(e=le(Math.floor(e),0,255))+le(Math.floor(t),0,255)}K.prototype.prepareSegment=function(e,t,i,u){var f=this.segments[this.segments.length-1];return e>K.MAX_VERTEX_ARRAY_LENGTH&&we("Max vertices per segment is "+K.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!f||f.vertexLength+e>K.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==u)&&(f={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},u!==void 0&&(f.sortKey=u),this.segments.push(f)),f},K.prototype.get=function(){return this.segments},K.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var u in i.vaos)i.vaos[u].destroy()}},K.simpleSegment=function(e,t,i,u){return new K([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:u,vaos:{},sortKey:0}])},K.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yt("SegmentVector",K);var ne=Hn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ie=T(function(e){e.exports=function(t,i){var u,f,m,x,E,I,A,M;for(f=t.length-(u=3&t.length),m=i,E=3432918353,I=461845907,M=0;M<f;)A=255&t.charCodeAt(M)|(255&t.charCodeAt(++M))<<8|(255&t.charCodeAt(++M))<<16|(255&t.charCodeAt(++M))<<24,++M,m=27492+(65535&(x=5*(65535&(m=(m^=A=(65535&(A=(A=(65535&A)*E+(((A>>>16)*E&65535)<<16)&4294967295)<<15|A>>>17))*I+(((A>>>16)*I&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(A=0,u){case 3:A^=(255&t.charCodeAt(M+2))<<16;case 2:A^=(255&t.charCodeAt(M+1))<<8;case 1:m^=A=(65535&(A=(A=(65535&(A^=255&t.charCodeAt(M)))*E+(((A>>>16)*E&65535)<<16)&4294967295)<<15|A>>>17))*I+(((A>>>16)*I&65535)<<16)&4294967295}return m^=t.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}}),ce=T(function(e){e.exports=function(t,i){for(var u,f=t.length,m=i^f,x=0;f>=4;)u=1540483477*(65535&(u=255&t.charCodeAt(x)|(255&t.charCodeAt(++x))<<8|(255&t.charCodeAt(++x))<<16|(255&t.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:m^=(255&t.charCodeAt(x+2))<<16;case 2:m^=(255&t.charCodeAt(x+1))<<8;case 1:m=1540483477*(65535&(m^=255&t.charCodeAt(x)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}}),J=ie,se=ce;J.murmur3=ie,J.murmur2=se;var de=function(){this.ids=[],this.positions=[],this.indexed=!1};de.prototype.add=function(e,t,i,u){this.ids.push(Te(e)),this.positions.push(t,i,u)},de.prototype.getPositions=function(e){for(var t=Te(e),i=0,u=this.ids.length-1;i<u;){var f=i+u>>1;this.ids[f]>=t?u=f:i=f+1}for(var m=[];this.ids[i]===t;)m.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return m},de.serialize=function(e,t){var i=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function f(m,x,E,I){for(;E<I;){for(var A=m[E+I>>1],M=E-1,B=I+1;;){do M++;while(m[M]<A);do B--;while(m[B]>A);if(M>=B)break;ke(m,M,B),ke(x,3*M,3*B),ke(x,3*M+1,3*B+1),ke(x,3*M+2,3*B+2)}B-E<I-B?(f(m,x,E,B),E=B+1):(f(m,x,B+1,I),I=B)}}(i,u,0,i.length-1),t&&t.push(i.buffer,u.buffer),{ids:i,positions:u}},de.deserialize=function(e){var t=new de;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var be=Math.pow(2,53)-1;function Te(e){var t=+e;return!isNaN(t)&&t<=be?t:J(String(e))}function ke(e,t,i){var u=e[t];e[t]=e[i],e[i]=u}yt("FeaturePositionMap",de);var Pe=function(e,t){this.gl=e.gl,this.location=t},Le=function(e){function t(i,u){e.call(this,i,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Pe),We=function(e){function t(i,u){e.call(this,i,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Pe),He=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Pe),ft=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Pe),Tt=function(e){function t(i,u){e.call(this,i,u),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Pe),Ct=function(e){function t(i,u){e.call(this,i,u),this.current=si.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Pe),Pt=new Float32Array(16),yi=function(e){function t(i,u){e.call(this,i,u),this.current=Pt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var u=1;u<16;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Pe);function dt(e){return[W(255*e.r,255*e.g),W(255*e.b,255*e.a)]}var Ot=function(e,t,i){this.value=e,this.uniformNames=t.map(function(u){return"u_"+u}),this.type=i};Ot.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Ot.prototype.getBinding=function(e,t,i){return this.type==="color"?new Ct(e,t):new We(e,t)};var Yt=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Yt.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Yt.prototype.setUniform=function(e,t,i,u){var f=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;f&&e.set(f)},Yt.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new Tt(e,t):new We(e,t)};var Ft=function(e,t,i,u){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(f){return{name:"a_"+f,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new u};Ft.prototype.populatePaintArray=function(e,t,i,u,f){var m=this.paintVertexArray.length,x=this.expression.evaluate(new ii(0),t,{},u,[],f);this.paintVertexArray.resize(e),this._setPaintValue(m,e,x)},Ft.prototype.updatePaintArray=function(e,t,i,u){var f=this.expression.evaluate({zoom:0},i,u);this._setPaintValue(e,t,f)},Ft.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var u=dt(i),f=e;f<t;f++)this.paintVertexArray.emplace(f,u[0],u[1]);else{for(var m=e;m<t;m++)this.paintVertexArray.emplace(m,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Ft.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ft.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Bt=function(e,t,i,u,f,m){this.expression=e,this.uniformNames=t.map(function(x){return"u_"+x+"_t"}),this.type=i,this.useIntegerZoom=u,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=t.map(function(x){return{name:"a_"+x,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new m};Bt.prototype.populatePaintArray=function(e,t,i,u,f){var m=this.expression.evaluate(new ii(this.zoom),t,{},u,[],f),x=this.expression.evaluate(new ii(this.zoom+1),t,{},u,[],f),E=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(E,e,m,x)},Bt.prototype.updatePaintArray=function(e,t,i,u){var f=this.expression.evaluate({zoom:this.zoom},i,u),m=this.expression.evaluate({zoom:this.zoom+1},i,u);this._setPaintValue(e,t,f,m)},Bt.prototype._setPaintValue=function(e,t,i,u){if(this.type==="color")for(var f=dt(i),m=dt(u),x=e;x<t;x++)this.paintVertexArray.emplace(x,f[0],f[1],m[0],m[1]);else{for(var E=e;E<t;E++)this.paintVertexArray.emplace(E,i,u);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(u))}},Bt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Bt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Bt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,u=le(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(u)},Bt.prototype.getBinding=function(e,t,i){return new We(e,t)};var Wt=function(e,t,i,u,f,m){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=u,this.layerId=m,this.zoomInPaintVertexArray=new f,this.zoomOutPaintVertexArray=new f};Wt.prototype.populatePaintArray=function(e,t,i){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,t.patterns&&t.patterns[this.layerId],i)},Wt.prototype.updatePaintArray=function(e,t,i,u,f){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],f)},Wt.prototype._setPaintValues=function(e,t,i,u){if(u&&i){var f=u[i.min],m=u[i.mid],x=u[i.max];if(f&&m&&x)for(var E=e;E<t;E++)this.zoomInPaintVertexArray.emplace(E,m.tl[0],m.tl[1],m.br[0],m.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1],m.pixelRatio,f.pixelRatio),this.zoomOutPaintVertexArray.emplace(E,m.tl[0],m.tl[1],m.br[0],m.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],m.pixelRatio,x.pixelRatio)}},Wt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ne.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ne.members,this.expression.isStateDependent))},Wt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Rt=function(e,t,i){this.binders={},this._buffers=[];var u=[];for(var f in e.paint._values)if(i(f)){var m=e.paint.get(f);if(m instanceof vr&&ko(m.property.specification)){var x=Nn(f,e.type),E=m.value,I=m.property.specification.type,A=m.property.useIntegerZoom,M=m.property.specification["property-type"],B=M==="cross-faded"||M==="cross-faded-data-driven";if(E.kind==="constant")this.binders[f]=B?new Yt(E.value,x):new Ot(E.value,x,I),u.push("/u_"+f);else if(E.kind==="source"||B){var V=un(f,I,"source");this.binders[f]=B?new Wt(E,I,A,t,V,e.id):new Ft(E,x,I,V),u.push("/a_"+f)}else{var G=un(f,I,"composite");this.binders[f]=new Bt(E,x,I,A,t,G),u.push("/z_"+f)}}}this.cacheKey=u.sort().join("")};Rt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Ft||t instanceof Bt?t.maxValue:0},Rt.prototype.populatePaintArrays=function(e,t,i,u,f){for(var m in this.binders){var x=this.binders[m];(x instanceof Ft||x instanceof Bt||x instanceof Wt)&&x.populatePaintArray(e,t,i,u,f)}},Rt.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var u=this.binders[i];u instanceof Yt&&u.setConstantPatternPositions(e,t)}},Rt.prototype.updatePaintArrays=function(e,t,i,u,f){var m=!1;for(var x in e)for(var E=0,I=t.getPositions(x);E<I.length;E+=1){var A=I[E],M=i.feature(A.index);for(var B in this.binders){var V=this.binders[B];if((V instanceof Ft||V instanceof Bt||V instanceof Wt)&&V.expression.isStateDependent===!0){var G=u.paint.get(B);V.expression=G.value,V.updatePaintArray(A.start,A.end,M,e[x],f),m=!0}}}return m},Rt.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Ot||i instanceof Yt)&&e.push.apply(e,i.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},Rt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ft||i instanceof Bt)for(var u=0;u<i.paintVertexAttributes.length;u++)e.push(i.paintVertexAttributes[u].name);else if(i instanceof Wt)for(var f=0;f<ne.members.length;f++)e.push(ne.members[f].name)}return e},Rt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ot||i instanceof Yt||i instanceof Bt)for(var u=0,f=i.uniformNames;u<f.length;u+=1)e.push(f[u])}return e},Rt.prototype.getPaintVertexBuffers=function(){return this._buffers},Rt.prototype.getUniforms=function(e,t){var i=[];for(var u in this.binders){var f=this.binders[u];if(f instanceof Ot||f instanceof Yt||f instanceof Bt)for(var m=0,x=f.uniformNames;m<x.length;m+=1){var E=x[m];if(t[E]){var I=f.getBinding(e,t[E],E);i.push({name:E,property:u,binding:I})}}}return i},Rt.prototype.setUniforms=function(e,t,i,u){for(var f=0,m=t;f<m.length;f+=1){var x=m[f],E=x.name,I=x.property;this.binders[I].setUniform(x.binding,u,i.get(I),E)}},Rt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Wt){var u=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(i instanceof Ft||i instanceof Bt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Rt.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Ft||i instanceof Bt||i instanceof Wt)&&i.upload(e)}this.updatePaintBuffers()},Rt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Ft||t instanceof Bt||t instanceof Wt)&&t.destroy()}};var Dt=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var u=0,f=e;u<f.length;u+=1){var m=f[u];this.programConfigurations[m.id]=new Rt(m,t,i)}this.needsUpload=!1,this._featureMap=new de,this._bufferOffset=0};function Nn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function un(e,t,i){var u={color:{source:Wo,composite:ol},number:{source:Qa,composite:Wo}},f=function(m){return{"line-pattern":{source:Ia,composite:Ia},"fill-pattern":{source:Ia,composite:Ia},"fill-extrusion-pattern":{source:Ia,composite:Ia}}[m]}(e);return f&&f[i]||u[t][i]}Dt.prototype.populatePaintArrays=function(e,t,i,u,f,m){for(var x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,t,u,f,m);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Dt.prototype.updatePaintArrays=function(e,t,i,u){for(var f=0,m=i;f<m.length;f+=1){var x=m[f];this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,t,x,u)||this.needsUpload}},Dt.prototype.get=function(e){return this.programConfigurations[e]},Dt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Dt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},yt("ConstantBinder",Ot),yt("CrossFadedConstantBinder",Yt),yt("SourceExpressionBinder",Ft),yt("CrossFadedCompositeBinder",Wt),yt("CompositeExpressionBinder",Bt),yt("ProgramConfiguration",Rt,{omit:["_buffers"]}),yt("ProgramConfigurationSet",Dt);var dr=Math.pow(2,14)-1,Wn=-dr-1;function rn(e){for(var t=8192/e.extent,i=e.loadGeometry(),u=0;u<i.length;u++)for(var f=i[u],m=0;m<f.length;m++){var x=f[m],E=Math.round(x.x*t),I=Math.round(x.y*t);x.x=le(E,Wn,dr),x.y=le(I,Wn,dr),(E<x.x||E>x.x+1||I<x.y||I>x.y+1)&&we("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function mn(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?rn(e):[]}}function Zr(e,t,i,u,f){e.emplaceBack(2*t+(u+1)/2,2*i+(f+1)/2)}var xr=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ao,this.indexArray=new Ya,this.segments=new K,this.programConfigurations=new Dt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function $a(e,t){for(var i=0;i<e.length;i++)if(Aa(t,e[i]))return!0;for(var u=0;u<t.length;u++)if(Aa(e,t[u]))return!0;return!!Es(e,t)}function Ar(e,t,i){return!!Aa(e,t)||!!eo(t,e,i)}function va(e,t){if(e.length===1)return zs(t,e[0]);for(var i=0;i<t.length;i++)for(var u=t[i],f=0;f<u.length;f++)if(Aa(e,u[f]))return!0;for(var m=0;m<e.length;m++)if(zs(t,e[m]))return!0;for(var x=0;x<t.length;x++)if(Es(e,t[x]))return!0;return!1}function la(e,t,i){if(e.length>1){if(Es(e,t))return!0;for(var u=0;u<t.length;u++)if(eo(t[u],e,i))return!0}for(var f=0;f<e.length;f++)if(eo(e[f],t,i))return!0;return!1}function Es(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var u=e[i],f=e[i+1],m=0;m<t.length-1;m++)if(Jo(u,f,t[m],t[m+1]))return!0;return!1}function Jo(e,t,i,u){return qe(e,i,u)!==qe(t,i,u)&&qe(e,t,i)!==qe(e,t,u)}function eo(e,t,i){var u=i*i;if(t.length===1)return e.distSqr(t[0])<u;for(var f=1;f<t.length;f++)if(Qo(e,t[f-1],t[f])<u)return!0;return!1}function Qo(e,t,i){var u=t.distSqr(i);if(u===0)return e.distSqr(t);var f=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/u;return e.distSqr(f<0?t:f>1?i:i.sub(t)._mult(f)._add(t))}function zs(e,t){for(var i,u,f,m=!1,x=0;x<e.length;x++)for(var E=0,I=(i=e[x]).length-1;E<i.length;I=E++)(u=i[E]).y>t.y!=(f=i[I]).y>t.y&&t.x<(f.x-u.x)*(t.y-u.y)/(f.y-u.y)+u.x&&(m=!m);return m}function Aa(e,t){for(var i=!1,u=0,f=e.length-1;u<e.length;f=u++){var m=e[u],x=e[f];m.y>t.y!=x.y>t.y&&t.x<(x.x-m.x)*(t.y-m.y)/(x.y-m.y)+m.x&&(i=!i)}return i}function Ts(e,t,i){var u=i[0],f=i[2];if(e.x<u.x&&t.x<u.x||e.x>f.x&&t.x>f.x||e.y<u.y&&t.y<u.y||e.y>f.y&&t.y>f.y)return!1;var m=qe(e,t,i[0]);return m!==qe(e,t,i[1])||m!==qe(e,t,i[2])||m!==qe(e,t,i[3])}function Pa(e,t,i){var u=t.paint.get(e).value;return u.kind==="constant"?u.value:i.programConfigurations.get(t.id).getMaxValue(e)}function Un(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ra(e,t,i,u,f){if(!t[0]&&!t[1])return e;var m=P.convert(t)._mult(f);i==="viewport"&&m._rotate(-u);for(var x=[],E=0;E<e.length;E++)x.push(e[E].sub(m));return x}xr.prototype.populate=function(e,t,i){var u=this.layers[0],f=[],m=null;u.type==="circle"&&(m=u.layout.get("circle-sort-key"));for(var x=0,E=e;x<E.length;x+=1){var I=E[x],A=I.feature,M=I.id,B=I.index,V=I.sourceLayerIndex,G=this.layers[0]._featureFilter.needGeometry,Q=mn(A,G);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Q,i)){var te=m?m.evaluate(Q,{},i):void 0,he={id:M,properties:A.properties,type:A.type,sourceLayerIndex:V,index:B,geometry:G?Q.geometry:rn(A),patterns:{},sortKey:te};f.push(he)}}m&&f.sort(function(et,St){return et.sortKey-St.sortKey});for(var ae=0,ye=f;ae<ye.length;ae+=1){var xe=ye[ae],Se=xe.geometry,Ee=xe.index,Ce=xe.sourceLayerIndex,je=e[Ee].feature;this.addFeature(xe,Se,Ee,i),t.featureIndex.insert(je,Se,Ee,Ce,this.index)}},xr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},xr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},xr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xr.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Z),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},xr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xr.prototype.addFeature=function(e,t,i,u){for(var f=0,m=t;f<m.length;f+=1)for(var x=0,E=m[f];x<E.length;x+=1){var I=E[x],A=I.x,M=I.y;if(!(A<0||A>=8192||M<0||M>=8192)){var B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),V=B.vertexLength;Zr(this.layoutVertexArray,A,M,-1,-1),Zr(this.layoutVertexArray,A,M,1,-1),Zr(this.layoutVertexArray,A,M,1,1),Zr(this.layoutVertexArray,A,M,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),B.vertexLength+=4,B.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},u)},yt("CircleBucket",xr,{omit:["layers"]});var to=new ar({"circle-sort-key":new bt(j.layout_circle["circle-sort-key"])}),Co={paint:new ar({"circle-radius":new bt(j.paint_circle["circle-radius"]),"circle-color":new bt(j.paint_circle["circle-color"]),"circle-blur":new bt(j.paint_circle["circle-blur"]),"circle-opacity":new bt(j.paint_circle["circle-opacity"]),"circle-translate":new zt(j.paint_circle["circle-translate"]),"circle-translate-anchor":new zt(j.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new zt(j.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new zt(j.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new bt(j.paint_circle["circle-stroke-width"]),"circle-stroke-color":new bt(j.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new bt(j.paint_circle["circle-stroke-opacity"])}),layout:to},Ii=typeof Float32Array<"u"?Float32Array:Array;function ia(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Pr(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3],E=t[4],I=t[5],A=t[6],M=t[7],B=t[8],V=t[9],G=t[10],Q=t[11],te=t[12],he=t[13],ae=t[14],ye=t[15],xe=i[0],Se=i[1],Ee=i[2],Ce=i[3];return e[0]=xe*u+Se*E+Ee*B+Ce*te,e[1]=xe*f+Se*I+Ee*V+Ce*he,e[2]=xe*m+Se*A+Ee*G+Ce*ae,e[3]=xe*x+Se*M+Ee*Q+Ce*ye,e[4]=(xe=i[4])*u+(Se=i[5])*E+(Ee=i[6])*B+(Ce=i[7])*te,e[5]=xe*f+Se*I+Ee*V+Ce*he,e[6]=xe*m+Se*A+Ee*G+Ce*ae,e[7]=xe*x+Se*M+Ee*Q+Ce*ye,e[8]=(xe=i[8])*u+(Se=i[9])*E+(Ee=i[10])*B+(Ce=i[11])*te,e[9]=xe*f+Se*I+Ee*V+Ce*he,e[10]=xe*m+Se*A+Ee*G+Ce*ae,e[11]=xe*x+Se*M+Ee*Q+Ce*ye,e[12]=(xe=i[12])*u+(Se=i[13])*E+(Ee=i[14])*B+(Ce=i[15])*te,e[13]=xe*f+Se*I+Ee*V+Ce*he,e[14]=xe*m+Se*A+Ee*G+Ce*ae,e[15]=xe*x+Se*M+Ee*Q+Ce*ye,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var Mo,Gp=Pr;function sl(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3];return e[0]=i[0]*u+i[4]*f+i[8]*m+i[12]*x,e[1]=i[1]*u+i[5]*f+i[9]*m+i[13]*x,e[2]=i[2]*u+i[6]*f+i[10]*m+i[14]*x,e[3]=i[3]*u+i[7]*f+i[11]*m+i[15]*x,e}Mo=new Ii(3),Ii!=Float32Array&&(Mo[0]=0,Mo[1]=0,Mo[2]=0),function(){var e=new Ii(4);Ii!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var Zp=(function(){var e=new Ii(2);Ii!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,Co)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new xr(i)},t.prototype.queryRadius=function(i){var u=i;return Pa("circle-radius",this,u)+Pa("circle-stroke-width",this,u)+Un(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,I,A){for(var M=Ra(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,I),B=this.paint.get("circle-radius").evaluate(u,f)+this.paint.get("circle-stroke-width").evaluate(u,f),V=this.paint.get("circle-pitch-alignment")==="map",G=V?M:function(je,et){return je.map(function(St){return Is(St,et)})}(M,A),Q=V?B*I:B,te=0,he=m;te<he.length;te+=1)for(var ae=0,ye=he[te];ae<ye.length;ae+=1){var xe=ye[ae],Se=V?xe:Is(xe,A),Ee=Q,Ce=sl([],[xe.x,xe.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ee*=Ce[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ee*=E.cameraToCenterDistance/Ce[3]),Ar(G,Se,Ee))return!0}return!1},t}(Ta));function Is(e,t){var i=sl([],[e.x,e.y,0,1],t);return new P(i[0]/i[3],i[1]/i[3])}var Ic=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(xr);function $o(e,t,i,u){var f=t.width,m=t.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==f*m*i)throw new RangeError("mismatched image size")}else u=new Uint8Array(f*m*i);return e.width=f,e.height=m,e.data=u,e}function ll(e,t,i){var u=t.width,f=t.height;if(u!==e.width||f!==e.height){var m=$o({},{width:u,height:f},i);Kp(e,m,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,f)},i),e.width=u,e.height=f,e.data=m.data}}function Kp(e,t,i,u,f,m){if(f.width===0||f.height===0)return t;if(f.width>e.width||f.height>e.height||i.x>e.width-f.width||i.y>e.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||u.x>t.width-f.width||u.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");for(var x=e.data,E=t.data,I=0;I<f.height;I++)for(var A=((i.y+I)*e.width+i.x)*m,M=((u.y+I)*t.width+u.x)*m,B=0;B<f.width*m;B++)E[M+B]=x[A+B];return t}yt("HeatmapBucket",Ic,{omit:["layers"]});var As=function(e,t){$o(this,e,1,t)};As.prototype.resize=function(e){ll(this,e,1)},As.prototype.clone=function(){return new As({width:this.width,height:this.height},new Uint8Array(this.data))},As.copy=function(e,t,i,u,f){Kp(e,t,i,u,f,1)};var Kr=function(e,t){$o(this,e,4,t)};Kr.prototype.resize=function(e){ll(this,e,4)},Kr.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Kr.prototype.clone=function(){return new Kr({width:this.width,height:this.height},new Uint8Array(this.data))},Kr.copy=function(e,t,i,u,f){Kp(e,t,i,u,f,4)},yt("AlphaImage",As),yt("RGBAImage",Kr);var zg={paint:new ar({"heatmap-radius":new bt(j.paint_heatmap["heatmap-radius"]),"heatmap-weight":new bt(j.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new zt(j.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _a(j.paint_heatmap["heatmap-color"]),"heatmap-opacity":new zt(j.paint_heatmap["heatmap-opacity"])})};function Jh(e){var t={},i=e.resolution||256,u=e.clips?e.clips.length:1,f=e.image||new Kr({width:i,height:u}),m=function(Q,te,he){t[e.evaluationKey]=he;var ae=e.expression.evaluate(t);f.data[Q+te+0]=Math.floor(255*ae.r/ae.a),f.data[Q+te+1]=Math.floor(255*ae.g/ae.a),f.data[Q+te+2]=Math.floor(255*ae.b/ae.a),f.data[Q+te+3]=Math.floor(255*ae.a)};if(e.clips)for(var x=0,E=0;x<u;++x,E+=4*i)for(var I=0,A=0;I<i;I++,A+=4){var M=I/(i-1),B=e.clips[x];m(E,A,B.start*(1-M)+B.end*M)}else for(var V=0,G=0;V<i;V++,G+=4)m(0,G,V/(i-1));return f}var Tg=function(e){function t(i){e.call(this,i,zg),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Ic(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=Jh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(Ta),Ig={paint:new ar({"hillshade-illumination-direction":new zt(j.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new zt(j.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new zt(j.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new zt(j.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new zt(j.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new zt(j.paint_hillshade["hillshade-accent-color"])})},Ag=function(e){function t(i){e.call(this,i,Ig)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(Ta),Pg=Hn([{name:"a_pos",components:2,type:"Int16"}],4).members,Hp=Ac,Cg=Ac;function Ac(e,t,i){i=i||2;var u,f,m,x,E,I,A,M=t&&t.length,B=M?t[0]*i:e.length,V=Qh(e,0,B,i,!0),G=[];if(!V||V.next===V.prev)return G;if(M&&(V=function(te,he,ae,ye){var xe,Se,Ee,Ce=[];for(xe=0,Se=he.length;xe<Se;xe++)(Ee=Qh(te,he[xe]*ye,xe<Se-1?he[xe+1]*ye:te.length,ye,!1))===Ee.next&&(Ee.steiner=!0),Ce.push(Ng(Ee));for(Ce.sort(Bg),xe=0;xe<Ce.length;xe++)Fg(Ce[xe],ae),ae=es(ae,ae.next);return ae}(e,t,V,i)),e.length>80*i){u=m=e[0],f=x=e[1];for(var Q=i;Q<B;Q+=i)(E=e[Q])<u&&(u=E),(I=e[Q+1])<f&&(f=I),E>m&&(m=E),I>x&&(x=I);A=(A=Math.max(m-u,x-f))!==0?1/A:0}return uu(V,G,i,u,f,A),G}function Qh(e,t,i,u,f){var m,x;if(f===Yp(e,t,i,u)>0)for(m=t;m<i;m+=u)x=tf(m,e[m],e[m+1],x);else for(m=i-u;m>=t;m-=u)x=tf(m,e[m],e[m+1],x);return x&&Pc(x,x.next)&&(pu(x),x=x.next),x}function es(e,t){if(!e)return e;t||(t=e);var i,u=e;do if(i=!1,u.steiner||!Pc(u,u.next)&&Ln(u.prev,u,u.next)!==0)u=u.next;else{if(pu(u),(u=t=u.prev)===u.next)break;i=!0}while(i||u!==t);return t}function uu(e,t,i,u,f,m,x){if(e){!x&&m&&function(M,B,V,G){var Q=M;do Q.z===null&&(Q.z=Wp(Q.x,Q.y,B,V,G)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==M);Q.prevZ.nextZ=null,Q.prevZ=null,function(te){var he,ae,ye,xe,Se,Ee,Ce,je,et=1;do{for(ae=te,te=null,Se=null,Ee=0;ae;){for(Ee++,ye=ae,Ce=0,he=0;he<et&&(Ce++,ye=ye.nextZ);he++);for(je=et;Ce>0||je>0&&ye;)Ce!==0&&(je===0||!ye||ae.z<=ye.z)?(xe=ae,ae=ae.nextZ,Ce--):(xe=ye,ye=ye.nextZ,je--),Se?Se.nextZ=xe:te=xe,xe.prevZ=Se,Se=xe;ae=ye}Se.nextZ=null,et*=2}while(Ee>1)}(Q)}(e,u,f,m);for(var E,I,A=e;e.prev!==e.next;)if(E=e.prev,I=e.next,m?Dg(e,u,f,m):Mg(e))t.push(E.i/i),t.push(e.i/i),t.push(I.i/i),pu(e),e=I.next,A=I.next;else if((e=I)===A){x?x===1?uu(e=Lg(es(e),t,i),t,i,u,f,m,2):x===2&&Rg(e,t,i,u,f,m):uu(es(e),t,i,u,f,m,1);break}}}function Mg(e){var t=e.prev,i=e,u=e.next;if(Ln(t,i,u)>=0)return!1;for(var f=e.next.next;f!==e.prev;){if(ul(t.x,t.y,i.x,i.y,u.x,u.y,f.x,f.y)&&Ln(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Dg(e,t,i,u){var f=e.prev,m=e,x=e.next;if(Ln(f,m,x)>=0)return!1;for(var E=f.x>m.x?f.x>x.x?f.x:x.x:m.x>x.x?m.x:x.x,I=f.y>m.y?f.y>x.y?f.y:x.y:m.y>x.y?m.y:x.y,A=Wp(f.x<m.x?f.x<x.x?f.x:x.x:m.x<x.x?m.x:x.x,f.y<m.y?f.y<x.y?f.y:x.y:m.y<x.y?m.y:x.y,t,i,u),M=Wp(E,I,t,i,u),B=e.prevZ,V=e.nextZ;B&&B.z>=A&&V&&V.z<=M;){if(B!==e.prev&&B!==e.next&&ul(f.x,f.y,m.x,m.y,x.x,x.y,B.x,B.y)&&Ln(B.prev,B,B.next)>=0||(B=B.prevZ,V!==e.prev&&V!==e.next&&ul(f.x,f.y,m.x,m.y,x.x,x.y,V.x,V.y)&&Ln(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;B&&B.z>=A;){if(B!==e.prev&&B!==e.next&&ul(f.x,f.y,m.x,m.y,x.x,x.y,B.x,B.y)&&Ln(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;V&&V.z<=M;){if(V!==e.prev&&V!==e.next&&ul(f.x,f.y,m.x,m.y,x.x,x.y,V.x,V.y)&&Ln(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function Lg(e,t,i){var u=e;do{var f=u.prev,m=u.next.next;!Pc(f,m)&&$h(f,u,u.next,m)&&cu(f,m)&&cu(m,f)&&(t.push(f.i/i),t.push(u.i/i),t.push(m.i/i),pu(u),pu(u.next),u=e=m),u=u.next}while(u!==e);return es(u)}function Rg(e,t,i,u,f,m){var x=e;do{for(var E=x.next.next;E!==x.prev;){if(x.i!==E.i&&Ug(x,E)){var I=ef(x,E);return x=es(x,x.next),I=es(I,I.next),uu(x,t,i,u,f,m),void uu(I,t,i,u,f,m)}E=E.next}x=x.next}while(x!==e)}function Bg(e,t){return e.x-t.x}function Fg(e,t){if(t=function(u,f){var m,x=f,E=u.x,I=u.y,A=-1/0;do{if(I<=x.y&&I>=x.next.y&&x.next.y!==x.y){var M=x.x+(I-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(M<=E&&M>A){if(A=M,M===E){if(I===x.y)return x;if(I===x.next.y)return x.next}m=x.x<x.next.x?x:x.next}}x=x.next}while(x!==f);if(!m)return null;if(E===A)return m;var B,V=m,G=m.x,Q=m.y,te=1/0;x=m;do E>=x.x&&x.x>=G&&E!==x.x&&ul(I<Q?E:A,I,G,Q,I<Q?A:E,I,x.x,x.y)&&(B=Math.abs(I-x.y)/(E-x.x),cu(x,u)&&(B<te||B===te&&(x.x>m.x||x.x===m.x&&Og(m,x)))&&(m=x,te=B)),x=x.next;while(x!==V);return m}(e,t)){var i=ef(t,e);es(t,t.next),es(i,i.next)}}function Og(e,t){return Ln(e.prev,e,t.prev)<0&&Ln(t.next,e,e.next)<0}function Wp(e,t,i,u,f){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*f)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-u)*f)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ng(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function ul(e,t,i,u,f,m,x,E){return(f-x)*(t-E)-(e-x)*(m-E)>=0&&(e-x)*(u-E)-(i-x)*(t-E)>=0&&(i-x)*(m-E)-(f-x)*(u-E)>=0}function Ug(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,u){var f=i;do{if(f.i!==i.i&&f.next.i!==i.i&&f.i!==u.i&&f.next.i!==u.i&&$h(f,f.next,i,u))return!0;f=f.next}while(f!==i);return!1}(e,t)&&(cu(e,t)&&cu(t,e)&&function(i,u){var f=i,m=!1,x=(i.x+u.x)/2,E=(i.y+u.y)/2;do f.y>E!=f.next.y>E&&f.next.y!==f.y&&x<(f.next.x-f.x)*(E-f.y)/(f.next.y-f.y)+f.x&&(m=!m),f=f.next;while(f!==i);return m}(e,t)&&(Ln(e.prev,e,t.prev)||Ln(e,t.prev,t))||Pc(e,t)&&Ln(e.prev,e,e.next)>0&&Ln(t.prev,t,t.next)>0)}function Ln(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Pc(e,t){return e.x===t.x&&e.y===t.y}function $h(e,t,i,u){var f=Mc(Ln(e,t,i)),m=Mc(Ln(e,t,u)),x=Mc(Ln(i,u,e)),E=Mc(Ln(i,u,t));return f!==m&&x!==E||!(f!==0||!Cc(e,i,t))||!(m!==0||!Cc(e,u,t))||!(x!==0||!Cc(i,e,u))||!(E!==0||!Cc(i,t,u))}function Cc(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Mc(e){return e>0?1:e<0?-1:0}function cu(e,t){return Ln(e.prev,e,e.next)<0?Ln(e,t,e.next)>=0&&Ln(e,e.prev,t)>=0:Ln(e,t,e.prev)<0||Ln(e,e.next,t)<0}function ef(e,t){var i=new Xp(e.i,e.x,e.y),u=new Xp(t.i,t.x,t.y),f=e.next,m=t.prev;return e.next=t,t.prev=e,i.next=f,f.prev=i,u.next=i,i.prev=u,m.next=u,u.prev=m,u}function tf(e,t,i,u){var f=new Xp(e,t,i);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function pu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Xp(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yp(e,t,i,u){for(var f=0,m=t,x=i-u;m<i;m+=u)f+=(e[x]-e[m])*(e[m+1]+e[x+1]),x=m;return f}function Vg(e,t,i,u,f){(function m(x,E,I,A,M){for(;A>I;){if(A-I>600){var B=A-I+1,V=E-I+1,G=Math.log(B),Q=.5*Math.exp(2*G/3),te=.5*Math.sqrt(G*Q*(B-Q)/B)*(V-B/2<0?-1:1);m(x,E,Math.max(I,Math.floor(E-V*Q/B+te)),Math.min(A,Math.floor(E+(B-V)*Q/B+te)),M)}var he=x[E],ae=I,ye=A;for(hu(x,I,E),M(x[A],he)>0&&hu(x,I,A);ae<ye;){for(hu(x,ae,ye),ae++,ye--;M(x[ae],he)<0;)ae++;for(;M(x[ye],he)>0;)ye--}M(x[I],he)===0?hu(x,I,ye):hu(x,++ye,A),ye<=E&&(I=ye+1),E<=ye&&(A=ye-1)}})(e,t,i||0,u||e.length-1,f||qg)}function hu(e,t,i){var u=e[t];e[t]=e[i],e[i]=u}function qg(e,t){return e<t?-1:e>t?1:0}function Jp(e,t){var i=e.length;if(i<=1)return[e];for(var u,f,m=[],x=0;x<i;x++){var E=Be(e[x]);E!==0&&(e[x].area=Math.abs(E),f===void 0&&(f=E<0),f===E<0?(u&&m.push(u),u=[e[x]]):u.push(e[x]))}if(u&&m.push(u),t>1)for(var I=0;I<m.length;I++)m[I].length<=t||(Vg(m[I],t,1,m[I].length-1,jg),m[I]=m[I].slice(0,t));return m}function jg(e,t){return t.area-e.area}function Qp(e,t,i){for(var u=i.patternDependencies,f=!1,m=0,x=t;m<x.length;m+=1){var E=x[m].paint.get(e+"-pattern");E.isConstant()||(f=!0);var I=E.constantOr(null);I&&(f=!0,u[I.to]=!0,u[I.from]=!0)}return f}function $p(e,t,i,u,f){for(var m=f.patternDependencies,x=0,E=t;x<E.length;x+=1){var I=E[x],A=I.paint.get(e+"-pattern").value;if(A.kind!=="constant"){var M=A.evaluate({zoom:u-1},i,{},f.availableImages),B=A.evaluate({zoom:u},i,{},f.availableImages),V=A.evaluate({zoom:u+1},i,{},f.availableImages);B=B&&B.name?B.name:B,V=V&&V.name?V.name:V,m[M=M&&M.name?M.name:M]=!0,m[B]=!0,m[V]=!0,i.patterns[I.id]={min:M,mid:B,max:V}}}return i}Ac.deviation=function(e,t,i,u){var f=t&&t.length,m=Math.abs(Yp(e,0,f?t[0]*i:e.length,i));if(f)for(var x=0,E=t.length;x<E;x++)m-=Math.abs(Yp(e,t[x]*i,x<E-1?t[x+1]*i:e.length,i));var I=0;for(x=0;x<u.length;x+=3){var A=u[x]*i,M=u[x+1]*i,B=u[x+2]*i;I+=Math.abs((e[A]-e[B])*(e[M+1]-e[A+1])-(e[A]-e[M])*(e[B+1]-e[A+1]))}return m===0&&I===0?0:Math.abs((I-m)/m)},Ac.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},u=0,f=0;f<e.length;f++){for(var m=0;m<e[f].length;m++)for(var x=0;x<t;x++)i.vertices.push(e[f][m][x]);f>0&&i.holes.push(u+=e[f-1].length)}return i},Hp.default=Cg;var Ba=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ao,this.indexArray=new Ya,this.indexArray2=new ks,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new K,this.segments2=new K,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ba.prototype.populate=function(e,t,i){this.hasPattern=Qp("fill",this.layers,t);for(var u=this.layers[0].layout.get("fill-sort-key"),f=[],m=0,x=e;m<x.length;m+=1){var E=x[m],I=E.feature,A=E.id,M=E.index,B=E.sourceLayerIndex,V=this.layers[0]._featureFilter.needGeometry,G=mn(I,V);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),G,i)){var Q=u?u.evaluate(G,{},i,t.availableImages):void 0,te={id:A,properties:I.properties,type:I.type,sourceLayerIndex:B,index:M,geometry:V?G.geometry:rn(I),patterns:{},sortKey:Q};f.push(te)}}u&&f.sort(function(je,et){return je.sortKey-et.sortKey});for(var he=0,ae=f;he<ae.length;he+=1){var ye=ae[he],xe=ye.geometry,Se=ye.index,Ee=ye.sourceLayerIndex;if(this.hasPattern){var Ce=$p("fill",this.layers,ye,this.zoom,t);this.patternFeatures.push(Ce)}else this.addFeature(ye,xe,Se,i,{});t.featureIndex.insert(e[Se].feature,xe,Se,Ee,this.index)}},Ba.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ba.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.patternFeatures;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Ba.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ba.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ba.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Pg),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Ba.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ba.prototype.addFeature=function(e,t,i,u,f){for(var m=0,x=Jp(t,500);m<x.length;m+=1){for(var E=x[m],I=0,A=0,M=E;A<M.length;A+=1)I+=M[A].length;for(var B=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),V=B.vertexLength,G=[],Q=[],te=0,he=E;te<he.length;te+=1){var ae=he[te];if(ae.length!==0){ae!==E[0]&&Q.push(G.length/2);var ye=this.segments2.prepareSegment(ae.length,this.layoutVertexArray,this.indexArray2),xe=ye.vertexLength;this.layoutVertexArray.emplaceBack(ae[0].x,ae[0].y),this.indexArray2.emplaceBack(xe+ae.length-1,xe),G.push(ae[0].x),G.push(ae[0].y);for(var Se=1;Se<ae.length;Se++)this.layoutVertexArray.emplaceBack(ae[Se].x,ae[Se].y),this.indexArray2.emplaceBack(xe+Se-1,xe+Se),G.push(ae[Se].x),G.push(ae[Se].y);ye.vertexLength+=ae.length,ye.primitiveLength+=ae.length}}for(var Ee=Hp(G,Q),Ce=0;Ce<Ee.length;Ce+=3)this.indexArray.emplaceBack(V+Ee[Ce],V+Ee[Ce+1],V+Ee[Ce+2]);B.vertexLength+=I,B.primitiveLength+=Ee.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},yt("FillBucket",Ba,{omit:["layers","patternFeatures"]});var Gg=new ar({"fill-sort-key":new bt(j.layout_fill["fill-sort-key"])}),Zg={paint:new ar({"fill-antialias":new zt(j.paint_fill["fill-antialias"]),"fill-opacity":new bt(j.paint_fill["fill-opacity"]),"fill-color":new bt(j.paint_fill["fill-color"]),"fill-outline-color":new bt(j.paint_fill["fill-outline-color"]),"fill-translate":new zt(j.paint_fill["fill-translate"]),"fill-translate-anchor":new zt(j.paint_fill["fill-translate-anchor"]),"fill-pattern":new il(j.paint_fill["fill-pattern"])}),layout:Gg},Kg=function(e){function t(i){e.call(this,i,Zg)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u);var f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new Ba(i)},t.prototype.queryRadius=function(){return Un(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,I){return va(Ra(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,I),m)},t.prototype.isTileClipped=function(){return!0},t}(Ta),Hg=Hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,nf=cl;function cl(e,t,i,u,f){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=f,e.readFields(Wg,this,t)}function Wg(e,t,i){e==1?t.id=i.readVarint():e==2?function(u,f){for(var m=u.readVarint()+u.pos;u.pos<m;){var x=f._keys[u.readVarint()],E=f._values[u.readVarint()];f.properties[x]=E}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function Xg(e){for(var t,i,u=0,f=0,m=e.length,x=m-1;f<m;x=f++)u+=((i=e[x]).x-(t=e[f]).x)*(t.y+i.y);return u}cl.types=["Unknown","Point","LineString","Polygon"],cl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,u=1,f=0,m=0,x=0,E=[];e.pos<i;){if(f<=0){var I=e.readVarint();u=7&I,f=I>>3}if(f--,u===1||u===2)m+=e.readSVarint(),x+=e.readSVarint(),u===1&&(t&&E.push(t),t=[]),t.push(new P(m,x));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&E.push(t),E},cl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,u=0,f=0,m=0,x=1/0,E=-1/0,I=1/0,A=-1/0;e.pos<t;){if(u<=0){var M=e.readVarint();i=7&M,u=M>>3}if(u--,i===1||i===2)(f+=e.readSVarint())<x&&(x=f),f>E&&(E=f),(m+=e.readSVarint())<I&&(I=m),m>A&&(A=m);else if(i!==7)throw new Error("unknown command "+i)}return[x,I,E,A]},cl.prototype.toGeoJSON=function(e,t,i){var u,f,m=this.extent*Math.pow(2,i),x=this.extent*e,E=this.extent*t,I=this.loadGeometry(),A=cl.types[this.type];function M(G){for(var Q=0;Q<G.length;Q++){var te=G[Q];G[Q]=[360*(te.x+x)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+E)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(u=0;u<I.length;u++)B[u]=I[u][0];M(I=B);break;case 2:for(u=0;u<I.length;u++)M(I[u]);break;case 3:for(I=function(G){var Q=G.length;if(Q<=1)return[G];for(var te,he,ae=[],ye=0;ye<Q;ye++){var xe=Xg(G[ye]);xe!==0&&(he===void 0&&(he=xe<0),he===xe<0?(te&&ae.push(te),te=[G[ye]]):te.push(G[ye]))}return te&&ae.push(te),ae}(I),u=0;u<I.length;u++)for(f=0;f<I[u].length;f++)M(I[u][f])}I.length===1?I=I[0]:A="Multi"+A;var V={type:"Feature",geometry:{type:A,coordinates:I},properties:this.properties};return"id"in this&&(V.id=this.id),V};var rf=af;function af(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Yg,this,t),this.length=this._features.length}function Yg(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(u){for(var f=null,m=u.readVarint()+u.pos;u.pos<m;){var x=u.readVarint()>>3;f=x===1?u.readString():x===2?u.readFloat():x===3?u.readDouble():x===4?u.readVarint64():x===5?u.readVarint():x===6?u.readSVarint():x===7?u.readBoolean():null}return f}(i))}function Jg(e,t,i){if(e===3){var u=new rf(i,i.readVarint()+i.pos);u.length&&(t[u.name]=u)}}af.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new nf(this._pbf,t,this.extent,this._keys,this._values)};var pl={VectorTile:function(e,t){this.layers=e.readFields(Jg,{},t)},VectorTileFeature:nf,VectorTileLayer:rf},Qg=pl.VectorTileFeature.types,eh=Math.pow(2,13);function fu(e,t,i,u,f,m,x,E){e.emplaceBack(t,i,2*Math.floor(u*eh)+x,f*eh*2,m*eh*2,Math.round(E))}var Fa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new La,this.indexArray=new Ya,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new K,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function $g(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Fa.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=Qp("fill-extrusion",this.layers,t);for(var u=0,f=e;u<f.length;u+=1){var m=f[u],x=m.feature,E=m.id,I=m.index,A=m.sourceLayerIndex,M=this.layers[0]._featureFilter.needGeometry,B=mn(x,M);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),B,i)){var V={id:E,sourceLayerIndex:A,index:I,geometry:M?B.geometry:rn(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push($p("fill-extrusion",this.layers,V,this.zoom,t)):this.addFeature(V,V.geometry,I,i,{}),t.featureIndex.insert(x,V.geometry,I,A,this.index,!0)}}},Fa.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.features;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Fa.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Fa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fa.prototype.addFeature=function(e,t,i,u,f){for(var m=0,x=Jp(t,500);m<x.length;m+=1){for(var E=x[m],I=0,A=0,M=E;A<M.length;A+=1)I+=M[A].length;for(var B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),V=0,G=E;V<G.length;V+=1){var Q=G[V];if(Q.length!==0&&!((ti=Q).every(function(Zt){return Zt.x<0})||ti.every(function(Zt){return Zt.x>8192})||ti.every(function(Zt){return Zt.y<0})||ti.every(function(Zt){return Zt.y>8192})))for(var te=0,he=0;he<Q.length;he++){var ae=Q[he];if(he>=1){var ye=Q[he-1];if(!$g(ae,ye)){B.vertexLength+4>K.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var xe=ae.sub(ye)._perp()._unit(),Se=ye.dist(ae);te+Se>32768&&(te=0),fu(this.layoutVertexArray,ae.x,ae.y,xe.x,xe.y,0,0,te),fu(this.layoutVertexArray,ae.x,ae.y,xe.x,xe.y,0,1,te),fu(this.layoutVertexArray,ye.x,ye.y,xe.x,xe.y,0,0,te+=Se),fu(this.layoutVertexArray,ye.x,ye.y,xe.x,xe.y,0,1,te);var Ee=B.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+I>K.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),Qg[e.type]==="Polygon"){for(var Ce=[],je=[],et=B.vertexLength,St=0,ut=E;St<ut.length;St+=1){var It=ut[St];if(It.length!==0){It!==E[0]&&je.push(Ce.length/2);for(var pt=0;pt<It.length;pt++){var Qt=It[pt];fu(this.layoutVertexArray,Qt.x,Qt.y,0,0,1,1,0),Ce.push(Qt.x),Ce.push(Qt.y)}}}for(var Lt=Hp(Ce,je),xt=0;xt<Lt.length;xt+=3)this.indexArray.emplaceBack(et+Lt[xt],et+Lt[xt+2],et+Lt[xt+1]);B.primitiveLength+=Lt.length/3,B.vertexLength+=I}}var ti;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},yt("FillExtrusionBucket",Fa,{omit:["layers","features"]});var ey={paint:new ar({"fill-extrusion-opacity":new zt(j["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new bt(j["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new zt(j["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new zt(j["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new il(j["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new bt(j["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new bt(j["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new zt(j["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ty=function(e){function t(i){e.call(this,i,ey)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Fa(i)},t.prototype.queryRadius=function(){return Un(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,I,A){var M=Ra(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,I),B=this.paint.get("fill-extrusion-height").evaluate(u,f),V=this.paint.get("fill-extrusion-base").evaluate(u,f),G=function(te,he,ae,ye){for(var xe=[],Se=0,Ee=te;Se<Ee.length;Se+=1){var Ce=Ee[Se],je=[Ce.x,Ce.y,0,1];sl(je,je,he),xe.push(new P(je[0]/je[3],je[1]/je[3]))}return xe}(M,A),Q=function(te,he,ae,ye){for(var xe=[],Se=[],Ee=ye[8]*he,Ce=ye[9]*he,je=ye[10]*he,et=ye[11]*he,St=ye[8]*ae,ut=ye[9]*ae,It=ye[10]*ae,pt=ye[11]*ae,Qt=0,Lt=te;Qt<Lt.length;Qt+=1){for(var xt=[],ti=[],Zt=0,gi=Lt[Qt];Zt<gi.length;Zt+=1){var At=gi[Zt],zi=At.x,$i=At.y,cn=ye[0]*zi+ye[4]*$i+ye[12],an=ye[1]*zi+ye[5]*$i+ye[13],en=ye[2]*zi+ye[6]*$i+ye[14],pn=ye[3]*zi+ye[7]*$i+ye[15],Vn=en+je,qn=pn+et,Sr=cn+St,Yn=an+ut,kr=en+It,gn=pn+pt,Jn=new P((cn+Ee)/qn,(an+Ce)/qn);Jn.z=Vn/qn,xt.push(Jn);var ai=new P(Sr/gn,Yn/gn);ai.z=kr/gn,ti.push(ai)}xe.push(xt),Se.push(ti)}return[xe,Se]}(m,V,B,A);return function(te,he,ae){var ye=1/0;va(ae,he)&&(ye=of(ae,he[0]));for(var xe=0;xe<he.length;xe++)for(var Se=he[xe],Ee=te[xe],Ce=0;Ce<Se.length-1;Ce++){var je=Se[Ce],et=[je,Se[Ce+1],Ee[Ce+1],Ee[Ce],je];$a(ae,et)&&(ye=Math.min(ye,of(ae,et)))}return ye!==1/0&&ye}(Q[0],Q[1],G)},t}(Ta);function du(e,t){return e.x*t.x+e.y*t.y}function of(e,t){if(e.length===1){for(var i,u=0,f=t[u++];!i||f.equals(i);)if(!(i=t[u++]))return 1/0;for(;u<t.length;u++){var m=t[u],x=e[0],E=i.sub(f),I=m.sub(f),A=x.sub(f),M=du(E,E),B=du(E,I),V=du(I,I),G=du(A,E),Q=du(A,I),te=M*V-B*B,he=(V*G-B*Q)/te,ae=(M*Q-B*G)/te,ye=f.z*(1-he-ae)+i.z*he+m.z*ae;if(isFinite(ye))return ye}return 1/0}for(var xe=1/0,Se=0,Ee=t;Se<Ee.length;Se+=1)xe=Math.min(xe,Ee[Se].z);return xe}var iy=Hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ny=Hn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,ry=pl.VectorTileFeature.types,ay=Math.cos(Math.PI/180*37.5),sf=Math.pow(2,14)/.5,Cr=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new Gr,this.layoutVertexArray2=new Wo,this.indexArray=new Ya,this.programConfigurations=new Dt(e.layers,e.zoom),this.segments=new K,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Cr.prototype.populate=function(e,t,i){this.hasPattern=Qp("line",this.layers,t);for(var u=this.layers[0].layout.get("line-sort-key"),f=[],m=0,x=e;m<x.length;m+=1){var E=x[m],I=E.feature,A=E.id,M=E.index,B=E.sourceLayerIndex,V=this.layers[0]._featureFilter.needGeometry,G=mn(I,V);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),G,i)){var Q=u?u.evaluate(G,{},i):void 0,te={id:A,properties:I.properties,type:I.type,sourceLayerIndex:B,index:M,geometry:V?G.geometry:rn(I),patterns:{},sortKey:Q};f.push(te)}}u&&f.sort(function(je,et){return je.sortKey-et.sortKey});for(var he=0,ae=f;he<ae.length;he+=1){var ye=ae[he],xe=ye.geometry,Se=ye.index,Ee=ye.sourceLayerIndex;if(this.hasPattern){var Ce=$p("line",this.layers,ye,this.zoom,t);this.patternFeatures.push(Ce)}else this.addFeature(ye,xe,Se,i,{});t.featureIndex.insert(e[Se].feature,xe,Se,Ee,this.index)}},Cr.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Cr.prototype.addFeatures=function(e,t,i){for(var u=0,f=this.patternFeatures;u<f.length;u+=1){var m=f[u];this.addFeature(m,m.geometry,m.index,t,i)}},Cr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Cr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Cr.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ny)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,iy),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Cr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Cr.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Cr.prototype.addFeature=function(e,t,i,u,f){var m=this.layers[0].layout,x=m.get("line-join").evaluate(e,{}),E=m.get("line-cap"),I=m.get("line-miter-limit"),A=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var M=0,B=t;M<B.length;M+=1)this.addLine(B[M],e,x,E,I,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,f,u)},Cr.prototype.addLine=function(e,t,i,u,f,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var x=0;x<e.length-1;x++)this.totalDistance+=e[x].dist(e[x+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var E=ry[t.type]==="Polygon",I=e.length;I>=2&&e[I-1].equals(e[I-2]);)I--;for(var A=0;A<I-1&&e[A].equals(e[A+1]);)A++;if(!(I<(E?3:2))){i==="bevel"&&(f=1.05);var M,B=this.overscaling<=16?122880/(512*this.overscaling):0,V=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray),G=void 0,Q=void 0,te=void 0,he=void 0;this.e1=this.e2=-1,E&&(he=e[A].sub(M=e[I-2])._unit()._perp());for(var ae=A;ae<I;ae++)if(!(Q=ae===I-1?E?e[A+1]:void 0:e[ae+1])||!e[ae].equals(Q)){he&&(te=he),M&&(G=M),M=e[ae],he=Q?Q.sub(M)._unit()._perp():te;var ye=(te=te||he).add(he);ye.x===0&&ye.y===0||ye._unit();var xe=te.x*he.x+te.y*he.y,Se=ye.x*he.x+ye.y*he.y,Ee=Se!==0?1/Se:1/0,Ce=2*Math.sqrt(2-2*Se),je=Se<ay&&G&&Q,et=te.x*he.y-te.y*he.x>0;if(je&&ae>A){var St=M.dist(G);if(St>2*B){var ut=M.sub(M.sub(G)._mult(B/St)._round());this.updateDistance(G,ut),this.addCurrentVertex(ut,te,0,0,V),G=ut}}var It=G&&Q,pt=It?i:E?"butt":u;if(It&&pt==="round"&&(Ee<m?pt="miter":Ee<=2&&(pt="fakeround")),pt==="miter"&&Ee>f&&(pt="bevel"),pt==="bevel"&&(Ee>2&&(pt="flipbevel"),Ee<f&&(pt="miter")),G&&this.updateDistance(G,M),pt==="miter")ye._mult(Ee),this.addCurrentVertex(M,ye,0,0,V);else if(pt==="flipbevel"){if(Ee>100)ye=he.mult(-1);else{var Qt=Ee*te.add(he).mag()/te.sub(he).mag();ye._perp()._mult(Qt*(et?-1:1))}this.addCurrentVertex(M,ye,0,0,V),this.addCurrentVertex(M,ye.mult(-1),0,0,V)}else if(pt==="bevel"||pt==="fakeround"){var Lt=-Math.sqrt(Ee*Ee-1),xt=et?Lt:0,ti=et?0:Lt;if(G&&this.addCurrentVertex(M,te,xt,ti,V),pt==="fakeround")for(var Zt=Math.round(180*Ce/Math.PI/20),gi=1;gi<Zt;gi++){var At=gi/Zt;if(At!==.5){var zi=At-.5;At+=At*zi*(At-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*zi*zi+(.848013+xe*(.215638*xe-1.06021)))}var $i=he.sub(te)._mult(At)._add(te)._unit()._mult(et?-1:1);this.addHalfVertex(M,$i.x,$i.y,!1,et,0,V)}Q&&this.addCurrentVertex(M,he,-xt,-ti,V)}else if(pt==="butt")this.addCurrentVertex(M,ye,0,0,V);else if(pt==="square"){var cn=G?1:-1;this.addCurrentVertex(M,ye,cn,cn,V)}else pt==="round"&&(G&&(this.addCurrentVertex(M,te,0,0,V),this.addCurrentVertex(M,te,1,1,V,!0)),Q&&(this.addCurrentVertex(M,he,-1,-1,V,!0),this.addCurrentVertex(M,he,0,0,V)));if(je&&ae<I-1){var an=M.dist(Q);if(an>2*B){var en=M.add(Q.sub(M)._mult(B/an)._round());this.updateDistance(M,en),this.addCurrentVertex(en,he,0,0,V),M=en}}}}},Cr.prototype.addCurrentVertex=function(e,t,i,u,f,m){m===void 0&&(m=!1);var x=t.y*u-t.x,E=-t.y-t.x*u;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,m,!1,i,f),this.addHalfVertex(e,x,E,m,!0,-u,f),this.distance>sf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,u,f,m))},Cr.prototype.addHalfVertex=function(e,t,i,u,f,m,x){var E=.5*(this.lineClips?this.scaledDistance*(sf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(f?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(m===0?0:m<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var I=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,I),x.primitiveLength++),f?this.e2=I:this.e1=I},Cr.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Cr.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},yt("LineBucket",Cr,{omit:["layers","patternFeatures"]});var oy=new ar({"line-cap":new zt(j.layout_line["line-cap"]),"line-join":new bt(j.layout_line["line-join"]),"line-miter-limit":new zt(j.layout_line["line-miter-limit"]),"line-round-limit":new zt(j.layout_line["line-round-limit"]),"line-sort-key":new bt(j.layout_line["line-sort-key"])}),lf={paint:new ar({"line-opacity":new bt(j.paint_line["line-opacity"]),"line-color":new bt(j.paint_line["line-color"]),"line-translate":new zt(j.paint_line["line-translate"]),"line-translate-anchor":new zt(j.paint_line["line-translate-anchor"]),"line-width":new bt(j.paint_line["line-width"]),"line-gap-width":new bt(j.paint_line["line-gap-width"]),"line-offset":new bt(j.paint_line["line-offset"]),"line-blur":new bt(j.paint_line["line-blur"]),"line-dasharray":new br(j.paint_line["line-dasharray"]),"line-pattern":new il(j.paint_line["line-pattern"]),"line-gradient":new _a(j.paint_line["line-gradient"])}),layout:oy},uf=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,u){return u=new ii(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,i,u)},t.prototype.evaluate=function(i,u,f,m){return u=ve({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,i,u,f,m)},t}(bt))(lf.paint.properties["line-width"].specification);uf.useIntegerZoom=!0;var sy=function(e){function t(i){e.call(this,i,lf),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Nr,this.gradientVersion=(this.gradientVersion+1)%X)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u),this.paint._values["line-floorwidth"]=uf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new Cr(i)},t.prototype.queryRadius=function(i){var u=i,f=cf(Pa("line-width",this,u),Pa("line-gap-width",this,u)),m=Pa("line-offset",this,u);return f/2+Math.abs(m)+Un(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,u,f,m,x,E,I){var A=Ra(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,I),M=I/2*cf(this.paint.get("line-width").evaluate(u,f),this.paint.get("line-gap-width").evaluate(u,f)),B=this.paint.get("line-offset").evaluate(u,f);return B&&(m=function(V,G){for(var Q=[],te=new P(0,0),he=0;he<V.length;he++){for(var ae=V[he],ye=[],xe=0;xe<ae.length;xe++){var Se=ae[xe],Ee=ae[xe+1],Ce=xe===0?te:Se.sub(ae[xe-1])._unit()._perp(),je=xe===ae.length-1?te:Ee.sub(Se)._unit()._perp(),et=Ce._add(je)._unit();et._mult(1/(et.x*je.x+et.y*je.y)),ye.push(et._mult(G)._add(Se))}Q.push(ye)}return Q}(m,B*I)),function(V,G,Q){for(var te=0;te<G.length;te++){var he=G[te];if(V.length>=3){for(var ae=0;ae<he.length;ae++)if(Aa(V,he[ae]))return!0}if(la(V,he,Q))return!0}return!1}(A,m,M)},t.prototype.isTileClipped=function(){return!0},t}(Ta);function cf(e,t){return t>0?t+2*e:e}var ly=Hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uy=Hn([{name:"a_projected_pos",components:3,type:"Float32"}],4),cy=(Hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),pf=(Hn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),py=Hn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hy(e,t,i){return e.sections.forEach(function(u){u.text=function(f,m,x){var E=m.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?f=f.toLocaleUpperCase():E==="lowercase"&&(f=f.toLocaleLowerCase()),ta.applyArabicShaping&&(f=ta.applyArabicShaping(f)),f}(u.text,t,i)}),e}Hn([{name:"triangle",components:3,type:"Uint16"}]),Hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Hn([{type:"Float32",name:"offsetX"}]),Hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var mu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},hf=function(e,t,i,u,f){var m,x,E=8*f-u-1,I=(1<<E)-1,A=I>>1,M=-7,B=i?f-1:0,V=i?-1:1,G=e[t+B];for(B+=V,m=G&(1<<-M)-1,G>>=-M,M+=E;M>0;m=256*m+e[t+B],B+=V,M-=8);for(x=m&(1<<-M)-1,m>>=-M,M+=u;M>0;x=256*x+e[t+B],B+=V,M-=8);if(m===0)m=1-A;else{if(m===I)return x?NaN:1/0*(G?-1:1);x+=Math.pow(2,u),m-=A}return(G?-1:1)*x*Math.pow(2,m-u)},ff=function(e,t,i,u,f,m){var x,E,I,A=8*m-f-1,M=(1<<A)-1,B=M>>1,V=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=u?0:m-1,Q=u?1:-1,te=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(E=isNaN(t)?1:0,x=M):(x=Math.floor(Math.log(t)/Math.LN2),t*(I=Math.pow(2,-x))<1&&(x--,I*=2),(t+=x+B>=1?V/I:V*Math.pow(2,1-B))*I>=2&&(x++,I/=2),x+B>=M?(E=0,x=M):x+B>=1?(E=(t*I-1)*Math.pow(2,f),x+=B):(E=t*Math.pow(2,B-1)*Math.pow(2,f),x=0));f>=8;e[i+G]=255&E,G+=Q,E/=256,f-=8);for(x=x<<f|E,A+=f;A>0;e[i+G]=255&x,G+=Q,x/=256,A-=8);e[i+G-Q]|=128*te},Dc=Vi;function Vi(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Vi.Varint=0,Vi.Fixed64=1,Vi.Bytes=2,Vi.Fixed32=5;var df=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Do(e){return e.type===Vi.Bytes?e.readVarint()+e.pos:e.pos+1}function hl(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function mf(e,t,i){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(u);for(var f=i.pos-1;f>=e;f--)i.buf[f+u]=i.buf[f]}function fy(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function dy(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function my(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function gy(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function yy(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function _y(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function vy(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function by(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function xy(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Lc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function fl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function gf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function wy(e,t,i){e===1&&i.readMessage(Sy,t)}function Sy(e,t,i){if(e===3){var u=i.readMessage(ky,{}),f=u.width,m=u.height,x=u.left,E=u.top,I=u.advance;t.push({id:u.id,bitmap:new As({width:f+6,height:m+6},u.bitmap),metrics:{width:f,height:m,left:x,top:E,advance:I}})}}function ky(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function yf(e){for(var t=0,i=0,u=0,f=e;u<f.length;u+=1){var m=f[u];t+=m.w*m.h,i=Math.max(i,m.w)}e.sort(function(te,he){return he.h-te.h});for(var x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],E=0,I=0,A=0,M=e;A<M.length;A+=1)for(var B=M[A],V=x.length-1;V>=0;V--){var G=x[V];if(!(B.w>G.w||B.h>G.h)){if(B.x=G.x,B.y=G.y,I=Math.max(I,B.y+B.h),E=Math.max(E,B.x+B.w),B.w===G.w&&B.h===G.h){var Q=x.pop();V<x.length&&(x[V]=Q)}else B.h===G.h?(G.x+=B.w,G.w-=B.w):B.w===G.w?(G.y+=B.h,G.h-=B.h):(x.push({x:G.x+B.w,y:G.y,w:G.w-B.w,h:B.h}),G.y+=B.h,G.h-=B.h);break}}return{w:E,h:I,fill:t/(E*I)||0}}Vi.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var u=this.readVarint(),f=u>>3,m=this.pos;this.type=7&u,e(f,t,this),this.pos===m&&this.skip(u)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Lc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=gf(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Lc(this.buf,this.pos)+4294967296*Lc(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Lc(this.buf,this.pos)+4294967296*gf(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=hf(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=hf(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,u=this.buf;return t=127&(i=u[this.pos++]),i<128?t:(t|=(127&(i=u[this.pos++]))<<7,i<128?t:(t|=(127&(i=u[this.pos++]))<<14,i<128?t:(t|=(127&(i=u[this.pos++]))<<21,i<128?t:function(f,m,x){var E,I,A=x.buf;if(E=(112&(I=A[x.pos++]))>>4,I<128||(E|=(127&(I=A[x.pos++]))<<3,I<128)||(E|=(127&(I=A[x.pos++]))<<10,I<128)||(E|=(127&(I=A[x.pos++]))<<17,I<128)||(E|=(127&(I=A[x.pos++]))<<24,I<128)||(E|=(1&(I=A[x.pos++]))<<31,I<128))return hl(f,E,m);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&df?function(i,u,f){return df.decode(i.subarray(u,f))}(this.buf,t,e):function(i,u,f){for(var m="",x=u;x<f;){var E,I,A,M=i[x],B=null,V=M>239?4:M>223?3:M>191?2:1;if(x+V>f)break;V===1?M<128&&(B=M):V===2?(192&(E=i[x+1]))==128&&(B=(31&M)<<6|63&E)<=127&&(B=null):V===3?(I=i[x+2],(192&(E=i[x+1]))==128&&(192&I)==128&&((B=(15&M)<<12|(63&E)<<6|63&I)<=2047||B>=55296&&B<=57343)&&(B=null)):V===4&&(I=i[x+2],A=i[x+3],(192&(E=i[x+1]))==128&&(192&I)==128&&(192&A)==128&&((B=(15&M)<<18|(63&E)<<12|(63&I)<<6|63&A)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,V=1):B>65535&&(B-=65536,m+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),m+=String.fromCharCode(B),x+=V}return m}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Vi.Bytes)return e.push(this.readVarint(t));var i=Do(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Vi.Bytes)return e.push(this.readSVarint());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Vi.Bytes)return e.push(this.readBoolean());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Vi.Bytes)return e.push(this.readFloat());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Vi.Bytes)return e.push(this.readDouble());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Vi.Bytes)return e.push(this.readFixed32());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Vi.Bytes)return e.push(this.readSFixed32());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Vi.Bytes)return e.push(this.readFixed64());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Vi.Bytes)return e.push(this.readSFixed64());var t=Do(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Vi.Varint)for(;this.buf[this.pos++]>127;);else if(t===Vi.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Vi.Fixed32)this.pos+=4;else{if(t!==Vi.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),fl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),fl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),fl(this.buf,-1&e,this.pos),fl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),fl(this.buf,-1&e,this.pos),fl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var u,f;if(t>=0?(u=t%4294967296|0,f=t/4294967296|0):(f=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,f=f+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(m,x,E){E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,m>>>=7,E.buf[E.pos++]=127&m|128,E.buf[E.pos]=127&(m>>>=7)}(u,0,i),function(m,x){var E=(7&m)<<4;x.buf[x.pos++]|=E|((m>>>=3)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m|((m>>>=7)?128:0),m&&(x.buf[x.pos++]=127&m)))))}(f,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(u,f,m){for(var x,E,I=0;I<f.length;I++){if((x=f.charCodeAt(I))>55295&&x<57344){if(!E){x>56319||I+1===f.length?(u[m++]=239,u[m++]=191,u[m++]=189):E=x;continue}if(x<56320){u[m++]=239,u[m++]=191,u[m++]=189,E=x;continue}x=E-55296<<10|x-56320|65536,E=null}else E&&(u[m++]=239,u[m++]=191,u[m++]=189,E=null);x<128?u[m++]=x:(x<2048?u[m++]=x>>6|192:(x<65536?u[m++]=x>>12|224:(u[m++]=x>>18|240,u[m++]=x>>12&63|128),u[m++]=x>>6&63|128),u[m++]=63&x|128)}return m}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&mf(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),ff(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ff(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var u=this.pos-i;u>=128&&mf(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,t,i){this.writeTag(e,Vi.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,fy,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,dy,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,yy,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,my,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,gy,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,_y,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,vy,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,by,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,xy,t)},writeBytesField:function(e,t){this.writeTag(e,Vi.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Vi.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Vi.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Vi.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Vi.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Vi.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Vi.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Vi.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Vi.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Vi.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var Rc=function(e,t){var i=t.pixelRatio,u=t.version,f=t.stretchX,m=t.stretchY,x=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=f,this.stretchY=m,this.content=x,this.version=u},gu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};gu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},gu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},gu.tlbr.get=function(){return this.tl.concat(this.br)},gu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Rc.prototype,gu);var yu=function(e,t){var i={},u={};this.haveRenderCallbacks=[];var f=[];this.addImages(e,i,f),this.addImages(t,u,f);var m=yf(f),x=new Kr({width:m.w||1,height:m.h||1});for(var E in e){var I=e[E],A=i[E].paddedRect;Kr.copy(I.data,x,{x:0,y:0},{x:A.x+1,y:A.y+1},I.data)}for(var M in t){var B=t[M],V=u[M].paddedRect,G=V.x+1,Q=V.y+1,te=B.data.width,he=B.data.height;Kr.copy(B.data,x,{x:0,y:0},{x:G,y:Q},B.data),Kr.copy(B.data,x,{x:0,y:he-1},{x:G,y:Q-1},{width:te,height:1}),Kr.copy(B.data,x,{x:0,y:0},{x:G,y:Q+he},{width:te,height:1}),Kr.copy(B.data,x,{x:te-1,y:0},{x:G-1,y:Q},{width:1,height:he}),Kr.copy(B.data,x,{x:0,y:0},{x:G+te,y:Q},{width:1,height:he})}this.image=x,this.iconPositions=i,this.patternPositions=u};yu.prototype.addImages=function(e,t,i){for(var u in e){var f=e[u],m={x:0,y:0,w:f.data.width+2,h:f.data.height+2};i.push(m),t[u]=new Rc(m,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},yu.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},yu.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var u=e.tl;i.update(t.data,void 0,{x:u[0],y:u[1]})}},yt("ImagePosition",Rc),yt("ImageAtlas",yu);var ua={horizontal:1,vertical:2,horizontalOnly:3},dl=function(){this.scale=1,this.fontStack="",this.imageName=null};dl.forText=function(e,t){var i=new dl;return i.scale=e||1,i.fontStack=t,i},dl.forImage=function(e){var t=new dl;return t.imageName=e,t};var wr=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Bc(e,t,i,u,f,m,x,E,I,A,M,B,V,G,Q,te){var he,ae=wr.fromFeature(e,f);B===ua.vertical&&ae.verticalizePunctuation();var ye=ta.processBidirectionalText,xe=ta.processStyledBidirectionalText;if(ye&&ae.sections.length===1){he=[];for(var Se=0,Ee=ye(ae.toString(),th(ae,A,m,t,u,G,Q));Se<Ee.length;Se+=1){var Ce=Ee[Se],je=new wr;je.text=Ce,je.sections=ae.sections;for(var et=0;et<Ce.length;et++)je.sectionIndex.push(0);he.push(je)}}else if(xe){he=[];for(var St=0,ut=xe(ae.text,ae.sectionIndex,th(ae,A,m,t,u,G,Q));St<ut.length;St+=1){var It=ut[St],pt=new wr;pt.text=It[0],pt.sectionIndex=It[1],pt.sections=ae.sections,he.push(pt)}}else he=function(xt,ti){for(var Zt=[],gi=xt.text,At=0,zi=0,$i=ti;zi<$i.length;zi+=1){var cn=$i[zi];Zt.push(xt.substring(At,cn)),At=cn}return At<gi.length&&Zt.push(xt.substring(At,gi.length)),Zt}(ae,th(ae,A,m,t,u,G,Q));var Qt=[],Lt={positionedLines:Qt,text:ae.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(xt,ti,Zt,gi,At,zi,$i,cn,an,en,pn,Vn){for(var qn=0,Sr=-17,Yn=0,kr=0,gn=cn==="right"?1:cn==="left"?0:.5,Jn=0,ai=0,Bi=At;ai<Bi.length;ai+=1){var Mi=Bi[ai];Mi.trim();var _i=Mi.getMaxScale(),Mr=24*(_i-1),mr={positionedGlyphs:[],lineOffset:0};xt.positionedLines[Jn]=mr;var Hi=mr.positionedGlyphs,En=0;if(Mi.length()){for(var gr=0;gr<Mi.length();gr++){var Ti=Mi.getSection(gr),io=Mi.getSectionIndex(gr),ca=Mi.getCharCode(gr),no=0,yn=null,ro=null,Ca=null,wl=24,Ds=!(an===ua.horizontal||!pn&&!$s(ca)||pn&&(Fc[ca]||(Fo=ca,rt.Arabic(Fo)||rt["Arabic Supplement"](Fo)||rt["Arabic Extended-A"](Fo)||rt["Arabic Presentation Forms-A"](Fo)||rt["Arabic Presentation Forms-B"](Fo))));if(Ti.imageName){var Sl=gi[Ti.imageName];if(!Sl)continue;Ca=Ti.imageName,xt.iconsInText=xt.iconsInText||!0,ro=Sl.paddedRect;var Bo=Sl.displaySize;Ti.scale=24*Ti.scale/Vn,no=Mr+(24-Bo[1]*Ti.scale),wl=(yn={width:Bo[0],height:Bo[1],left:1,top:-3,advance:Ds?Bo[1]:Bo[0]}).advance;var kl=Ds?Bo[0]*Ti.scale-24*_i:Bo[1]*Ti.scale-24*_i;kl>0&&kl>En&&(En=kl)}else{var Kc=Zt[Ti.fontStack],El=Kc&&Kc[ca];if(El&&El.rect)ro=El.rect,yn=El.metrics;else{var bu=ti[Ti.fontStack],Hc=bu&&bu[ca];if(!Hc)continue;yn=Hc.metrics}no=24*(_i-Ti.scale)}Ds?(xt.verticalizable=!0,Hi.push({glyph:ca,imageName:Ca,x:qn,y:Sr+no,vertical:Ds,scale:Ti.scale,fontStack:Ti.fontStack,sectionIndex:io,metrics:yn,rect:ro}),qn+=wl*Ti.scale+en):(Hi.push({glyph:ca,imageName:Ca,x:qn,y:Sr+no,vertical:Ds,scale:Ti.scale,fontStack:Ti.fontStack,sectionIndex:io,metrics:yn,rect:ro}),qn+=yn.advance*Ti.scale+en)}Hi.length!==0&&(Yn=Math.max(qn-en,Yn),zy(Hi,0,Hi.length-1,gn,En)),qn=0;var Wc=zi*_i+En;mr.lineOffset=Math.max(En,Mr),Sr+=Wc,kr=Math.max(Wc,kr),++Jn}else Sr+=zi,++Jn}var Fo,xu=Sr- -17,zl=ih($i),is=zl.horizontalAlign,Tl=zl.verticalAlign;(function(Xc,Yc,wu,Su,Jc,ku,Eu,zu,Qc){var Il,$c=(Yc-wu)*Jc;Il=ku!==Eu?-zu*Su- -17:(-Su*Qc+.5)*Eu;for(var Al=0,Tu=Xc;Al<Tu.length;Al+=1)for(var Ls=0,Iu=Tu[Al].positionedGlyphs;Ls<Iu.length;Ls+=1){var Pl=Iu[Ls];Pl.x+=$c,Pl.y+=Il}})(xt.positionedLines,gn,is,Tl,Yn,kr,zi,xu,At.length),xt.top+=-Tl*xu,xt.bottom=xt.top+xu,xt.left+=-is*Yn,xt.right=xt.left+Yn}(Lt,t,i,u,he,x,E,I,B,A,V,te),!function(xt){for(var ti=0,Zt=xt;ti<Zt.length;ti+=1)if(Zt[ti].positionedGlyphs.length!==0)return!1;return!0}(Qt)&&Lt}wr.fromFeature=function(e,t){for(var i=new wr,u=0;u<e.sections.length;u++){var f=e.sections[u];f.image?i.addImageSection(f):i.addTextSection(f,t)}return i},wr.prototype.length=function(){return this.text.length},wr.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},wr.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},wr.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},wr.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var u=e.charCodeAt(i+1)||null,f=e.charCodeAt(i-1)||null;t+=u&&eu(u)&&!mu[e[i+1]]||f&&eu(f)&&!mu[e[i-1]]||!mu[e[i]]?e[i]:mu[e[i]]}return t}(this.text)},wr.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Fc[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,u=this.text.length-1;u>=0&&u>=e&&Fc[this.text.charCodeAt(u)];u--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},wr.prototype.substring=function(e,t){var i=new wr;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},wr.prototype.toString=function(){return this.text},wr.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},wr.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(dl.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(i)},wr.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(dl.forImage(t)),this.sectionIndex.push(this.sections.length-1)):we("Reached maximum number of images 6401")}else we("Can't add FormattedSection with an empty image.")},wr.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Fc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},na={};function _f(e,t,i,u,f,m){if(t.imageName){var x=u[t.imageName];return x?x.displaySize[0]*t.scale*24/m+f:0}var E=i[t.fontStack],I=E&&E[e];return I?I.metrics.advance*t.scale+f:0}function vf(e,t,i,u){var f=Math.pow(e-t,2);return u?e<t?f/2:2*f:f+Math.abs(i)*i}function Ey(e,t,i){var u=0;return e===10&&(u-=1e4),i&&(u+=150),e!==40&&e!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function bf(e,t,i,u,f,m){for(var x=null,E=vf(t,i,f,m),I=0,A=u;I<A.length;I+=1){var M=A[I],B=vf(t-M.x,i,f,m)+M.badness;B<=E&&(x=M,E=B)}return{index:e,x:t,priorBreak:x,badness:E}}function th(e,t,i,u,f,m,x){if(m!=="point")return[];if(!e)return[];for(var E,I=[],A=function(he,ae,ye,xe,Se,Ee){for(var Ce=0,je=0;je<he.length();je++){var et=he.getSection(je);Ce+=_f(he.getCharCode(je),et,xe,Se,ae,Ee)}return Ce/Math.max(1,Math.ceil(Ce/ye))}(e,t,i,u,f,x),M=e.text.indexOf("​")>=0,B=0,V=0;V<e.length();V++){var G=e.getSection(V),Q=e.getCharCode(V);if(Fc[Q]||(B+=_f(Q,G,u,f,t,x)),V<e.length()-1){var te=!((E=Q)<11904||!(rt["Bopomofo Extended"](E)||rt.Bopomofo(E)||rt["CJK Compatibility Forms"](E)||rt["CJK Compatibility Ideographs"](E)||rt["CJK Compatibility"](E)||rt["CJK Radicals Supplement"](E)||rt["CJK Strokes"](E)||rt["CJK Symbols and Punctuation"](E)||rt["CJK Unified Ideographs Extension A"](E)||rt["CJK Unified Ideographs"](E)||rt["Enclosed CJK Letters and Months"](E)||rt["Halfwidth and Fullwidth Forms"](E)||rt.Hiragana(E)||rt["Ideographic Description Characters"](E)||rt["Kangxi Radicals"](E)||rt["Katakana Phonetic Extensions"](E)||rt.Katakana(E)||rt["Vertical Forms"](E)||rt["Yi Radicals"](E)||rt["Yi Syllables"](E)));(na[Q]||te||G.imageName)&&I.push(bf(V+1,B,A,I,Ey(Q,e.getCharCode(V+1),te&&M),!1))}}return function he(ae){return ae?he(ae.priorBreak).concat(ae.index):[]}(bf(e.length(),B,A,I,0,!0))}function ih(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function zy(e,t,i,u,f){if(u||f)for(var m=e[i],x=(e[i].x+m.metrics.advance*m.scale)*u,E=t;E<=i;E++)e[E].x-=x,e[E].y+=f}function xf(e,t,i,u,f,m){var x,E=e.image;if(E.content){var I=E.content,A=E.pixelRatio||1;x=[I[0]/A,I[1]/A,E.displaySize[0]-I[2]/A,E.displaySize[1]-I[3]/A]}var M,B,V,G,Q=t.left*m,te=t.right*m;i==="width"||i==="both"?(G=f[0]+Q-u[3],B=f[0]+te+u[1]):B=(G=f[0]+(Q+te-E.displaySize[0])/2)+E.displaySize[0];var he=t.top*m,ae=t.bottom*m;return i==="height"||i==="both"?(M=f[1]+he-u[0],V=f[1]+ae+u[2]):V=(M=f[1]+(he+ae-E.displaySize[1])/2)+E.displaySize[1],{image:E,top:M,right:B,bottom:V,left:G,collisionPadding:x}}na[10]=!0,na[32]=!0,na[38]=!0,na[40]=!0,na[41]=!0,na[43]=!0,na[45]=!0,na[47]=!0,na[173]=!0,na[183]=!0,na[8203]=!0,na[8208]=!0,na[8211]=!0,na[8231]=!0;var ml=function(e){function t(i,u,f,m){e.call(this,i,u),this.angle=f,m!==void 0&&(this.segment=m)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(P);function nh(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new ii(e+1))};if(i.kind==="source")return{kind:"source"};for(var u=i.zoomStops,f=i.interpolationType,m=0;m<u.length&&u[m]<=e;)m++;for(var x=m=Math.max(0,m-1);x<u.length&&u[x]<e+1;)x++;x=Math.min(u.length-1,x);var E=u[m],I=u[x];return i.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:I,interpolationType:f}:{kind:"camera",minZoom:E,maxZoom:I,minSize:i.evaluate(new ii(E)),maxSize:i.evaluate(new ii(I)),interpolationType:f}}function wf(e,t,i){var u=t.uSize,f=i.lowerSize;return e.kind==="source"?f/128:e.kind==="composite"?Sn(f/128,i.upperSize/128,t.uSizeT):u}function Sf(e,t){var i=0,u=0;if(e.kind==="constant")u=e.layoutSize;else if(e.kind!=="source"){var f=e.interpolationType,m=f?le(nr.interpolationFactor(f,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?u=Sn(e.minSize,e.maxSize,m):i=m}return{uSizeT:i,uSize:u}}yt("Anchor",ml);var Ty=Object.freeze({__proto__:null,getSizeData:nh,evaluateSizeForFeature:wf,evaluateSizeForZoom:Sf,SIZE_PACK_FACTOR:128});function kf(e,t,i,u,f){if(t.segment===void 0)return!0;for(var m=t,x=t.segment+1,E=0;E>-i/2;){if(--x<0)return!1;E-=e[x].dist(m),m=e[x]}E+=e[x].dist(e[x+1]),x++;for(var I=[],A=0;E<i/2;){var M=e[x],B=e[x+1];if(!B)return!1;var V=e[x-1].angleTo(M)-M.angleTo(B);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:E,angleDelta:V}),A+=V;E-I[0].distance>u;)A-=I.shift().angleDelta;if(A>f)return!1;x++,E+=M.dist(B)}return!0}function Ef(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function zf(e,t,i){return e?.6*t*i:0}function Tf(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Iy(e,t,i,u,f,m){for(var x=zf(i,f,m),E=Tf(i,u)*m,I=0,A=Ef(e)/2,M=0;M<e.length-1;M++){var B=e[M],V=e[M+1],G=B.dist(V);if(I+G>A){var Q=(A-I)/G,te=Sn(B.x,V.x,Q),he=Sn(B.y,V.y,Q),ae=new ml(te,he,V.angleTo(B),M);return ae._round(),!x||kf(e,ae,E,x,t)?ae:void 0}I+=G}}function Ay(e,t,i,u,f,m,x,E,I){var A=zf(u,m,x),M=Tf(u,f),B=M*x,V=e[0].x===0||e[0].x===I||e[0].y===0||e[0].y===I;return t-B<t/4&&(t=B+t/4),function G(Q,te,he,ae,ye,xe,Se,Ee,Ce){for(var je=xe/2,et=Ef(Q),St=0,ut=te-he,It=[],pt=0;pt<Q.length-1;pt++){for(var Qt=Q[pt],Lt=Q[pt+1],xt=Qt.dist(Lt),ti=Lt.angleTo(Qt);ut+he<St+xt;){var Zt=((ut+=he)-St)/xt,gi=Sn(Qt.x,Lt.x,Zt),At=Sn(Qt.y,Lt.y,Zt);if(gi>=0&&gi<Ce&&At>=0&&At<Ce&&ut-je>=0&&ut+je<=et){var zi=new ml(gi,At,ti,pt);zi._round(),ae&&!kf(Q,zi,xe,ae,ye)||It.push(zi)}}St+=xt}return Ee||It.length||Se||(It=G(Q,St/2,he,ae,ye,xe,Se,!0,Ce)),It}(e,V?t/2*E%t:(M/2+2*m)*x*E%t,t,A,i,B,V,!1,I)}function If(e,t,i,u,f){for(var m=[],x=0;x<e.length;x++)for(var E=e[x],I=void 0,A=0;A<E.length-1;A++){var M=E[A],B=E[A+1];M.x<t&&B.x<t||(M.x<t?M=new P(t,M.y+(t-M.x)/(B.x-M.x)*(B.y-M.y))._round():B.x<t&&(B=new P(t,M.y+(t-M.x)/(B.x-M.x)*(B.y-M.y))._round()),M.y<i&&B.y<i||(M.y<i?M=new P(M.x+(i-M.y)/(B.y-M.y)*(B.x-M.x),i)._round():B.y<i&&(B=new P(M.x+(i-M.y)/(B.y-M.y)*(B.x-M.x),i)._round()),M.x>=u&&B.x>=u||(M.x>=u?M=new P(u,M.y+(u-M.x)/(B.x-M.x)*(B.y-M.y))._round():B.x>=u&&(B=new P(u,M.y+(u-M.x)/(B.x-M.x)*(B.y-M.y))._round()),M.y>=f&&B.y>=f||(M.y>=f?M=new P(M.x+(f-M.y)/(B.y-M.y)*(B.x-M.x),f)._round():B.y>=f&&(B=new P(M.x+(f-M.y)/(B.y-M.y)*(B.x-M.x),f)._round()),I&&M.equals(I[I.length-1])||m.push(I=[M]),I.push(B)))))}return m}function Af(e,t,i,u){var f=[],m=e.image,x=m.pixelRatio,E=m.paddedRect.w-2,I=m.paddedRect.h-2,A=e.right-e.left,M=e.bottom-e.top,B=m.stretchX||[[0,E]],V=m.stretchY||[[0,I]],G=function(gi,At){return gi+At[1]-At[0]},Q=B.reduce(G,0),te=V.reduce(G,0),he=E-Q,ae=I-te,ye=0,xe=Q,Se=0,Ee=te,Ce=0,je=he,et=0,St=ae;if(m.content&&u){var ut=m.content;ye=Oc(B,0,ut[0]),Se=Oc(V,0,ut[1]),xe=Oc(B,ut[0],ut[2]),Ee=Oc(V,ut[1],ut[3]),Ce=ut[0]-ye,et=ut[1]-Se,je=ut[2]-ut[0]-xe,St=ut[3]-ut[1]-Ee}var It=function(gi,At,zi,$i){var cn=Nc(gi.stretch-ye,xe,A,e.left),an=Uc(gi.fixed-Ce,je,gi.stretch,Q),en=Nc(At.stretch-Se,Ee,M,e.top),pn=Uc(At.fixed-et,St,At.stretch,te),Vn=Nc(zi.stretch-ye,xe,A,e.left),qn=Uc(zi.fixed-Ce,je,zi.stretch,Q),Sr=Nc($i.stretch-Se,Ee,M,e.top),Yn=Uc($i.fixed-et,St,$i.stretch,te),kr=new P(cn,en),gn=new P(Vn,en),Jn=new P(Vn,Sr),ai=new P(cn,Sr),Bi=new P(an/x,pn/x),Mi=new P(qn/x,Yn/x),_i=t*Math.PI/180;if(_i){var Mr=Math.sin(_i),mr=Math.cos(_i),Hi=[mr,-Mr,Mr,mr];kr._matMult(Hi),gn._matMult(Hi),ai._matMult(Hi),Jn._matMult(Hi)}var En=gi.stretch+gi.fixed,gr=At.stretch+At.fixed;return{tl:kr,tr:gn,bl:ai,br:Jn,tex:{x:m.paddedRect.x+1+En,y:m.paddedRect.y+1+gr,w:zi.stretch+zi.fixed-En,h:$i.stretch+$i.fixed-gr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bi,pixelOffsetBR:Mi,minFontScaleX:je/x/A,minFontScaleY:St/x/M,isSDF:i}};if(u&&(m.stretchX||m.stretchY))for(var pt=Pf(B,he,Q),Qt=Pf(V,ae,te),Lt=0;Lt<pt.length-1;Lt++)for(var xt=pt[Lt],ti=pt[Lt+1],Zt=0;Zt<Qt.length-1;Zt++)f.push(It(xt,Qt[Zt],ti,Qt[Zt+1]));else f.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:I+1}));return f}function Oc(e,t,i){for(var u=0,f=0,m=e;f<m.length;f+=1){var x=m[f];u+=Math.max(t,Math.min(i,x[1]))-Math.max(t,Math.min(i,x[0]))}return u}function Pf(e,t,i){for(var u=[{fixed:-1,stretch:0}],f=0,m=e;f<m.length;f+=1){var x=m[f],E=x[0],I=x[1],A=u[u.length-1];u.push({fixed:E-A.stretch,stretch:A.stretch}),u.push({fixed:E-A.stretch,stretch:A.stretch+(I-E)})}return u.push({fixed:t+1,stretch:i}),u}function Nc(e,t,i,u){return e/t*i+u}function Uc(e,t,i,u){return e-t*i/u}var Vc=function(e,t,i,u,f,m,x,E,I,A){if(this.boxStartIndex=e.length,I){var M=m.top,B=m.bottom,V=m.collisionPadding;V&&(M-=V[1],B+=V[3]);var G=B-M;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{var Q=m.top*x-E,te=m.bottom*x+E,he=m.left*x-E,ae=m.right*x+E,ye=m.collisionPadding;if(ye&&(he-=ye[0]*x,Q-=ye[1]*x,ae+=ye[2]*x,te+=ye[3]*x),A){var xe=new P(he,Q),Se=new P(ae,Q),Ee=new P(he,te),Ce=new P(ae,te),je=A*Math.PI/180;xe._rotate(je),Se._rotate(je),Ee._rotate(je),Ce._rotate(je),he=Math.min(xe.x,Se.x,Ee.x,Ce.x),ae=Math.max(xe.x,Se.x,Ee.x,Ce.x),Q=Math.min(xe.y,Se.y,Ee.y,Ce.y),te=Math.max(xe.y,Se.y,Ee.y,Ce.y)}e.emplaceBack(t.x,t.y,he,Q,ae,te,i,u,f)}this.boxEndIndex=e.length},gl=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Py),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Py(e,t){return e<t?-1:e>t?1:0}function Cy(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var u=1/0,f=1/0,m=-1/0,x=-1/0,E=e[0],I=0;I<E.length;I++){var A=E[I];(!I||A.x<u)&&(u=A.x),(!I||A.y<f)&&(f=A.y),(!I||A.x>m)&&(m=A.x),(!I||A.y>x)&&(x=A.y)}var M=Math.min(m-u,x-f),B=M/2,V=new gl([],My);if(M===0)return new P(u,f);for(var G=u;G<m;G+=M)for(var Q=f;Q<x;Q+=M)V.push(new yl(G+B,Q+B,B,e));for(var te=function(ye){for(var xe=0,Se=0,Ee=0,Ce=ye[0],je=0,et=Ce.length,St=et-1;je<et;St=je++){var ut=Ce[je],It=Ce[St],pt=ut.x*It.y-It.x*ut.y;Se+=(ut.x+It.x)*pt,Ee+=(ut.y+It.y)*pt,xe+=3*pt}return new yl(Se/xe,Ee/xe,0,ye)}(e),he=V.length;V.length;){var ae=V.pop();(ae.d>te.d||!te.d)&&(te=ae,i&&console.log("found best %d after %d probes",Math.round(1e4*ae.d)/1e4,he)),ae.max-te.d<=t||(V.push(new yl(ae.p.x-(B=ae.h/2),ae.p.y-B,B,e)),V.push(new yl(ae.p.x+B,ae.p.y-B,B,e)),V.push(new yl(ae.p.x-B,ae.p.y+B,B,e)),V.push(new yl(ae.p.x+B,ae.p.y+B,B,e)),he+=4)}return i&&(console.log("num probes: "+he),console.log("best distance: "+te.d)),te.p}function My(e,t){return t.max-e.max}function yl(e,t,i,u){this.p=new P(e,t),this.h=i,this.d=function(f,m){for(var x=!1,E=1/0,I=0;I<m.length;I++)for(var A=m[I],M=0,B=A.length,V=B-1;M<B;V=M++){var G=A[M],Q=A[V];G.y>f.y!=Q.y>f.y&&f.x<(Q.x-G.x)*(f.y-G.y)/(Q.y-G.y)+G.x&&(x=!x),E=Math.min(E,Qo(f,G,Q))}return(x?1:-1)*Math.sqrt(E)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}gl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},gl.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},gl.prototype.peek=function(){return this.data[0]},gl.prototype._up=function(e){for(var t=this.data,i=this.compare,u=t[e];e>0;){var f=e-1>>1,m=t[f];if(i(u,m)>=0)break;t[e]=m,e=f}t[e]=u},gl.prototype._down=function(e){for(var t=this.data,i=this.compare,u=this.length>>1,f=t[e];e<u;){var m=1+(e<<1),x=t[m],E=m+1;if(E<this.length&&i(t[E],x)<0&&(m=E,x=t[E]),i(x,f)>=0)break;t[e]=x,e=m}t[e]=f};var rh=Number.POSITIVE_INFINITY;function Cf(e,t){return t[1]!==rh?function(i,u,f){var m=0,x=0;switch(u=Math.abs(u),f=Math.abs(f),i){case"top-right":case"top-left":case"top":x=f-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-f}switch(i){case"top-right":case"bottom-right":case"right":m=-u;break;case"top-left":case"bottom-left":case"left":m=u}return[m,x]}(e,t[0],t[1]):function(i,u){var f=0,m=0;u<0&&(u=0);var x=u/Math.sqrt(2);switch(i){case"top-right":case"top-left":m=x-7;break;case"bottom-right":case"bottom-left":m=7-x;break;case"bottom":m=7-u;break;case"top":m=u-7}switch(i){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=u;break;case"right":f=-u}return[f,m]}(e,t[0])}function ah(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Mf(e,t,i,u,f,m,x,E,I,A,M,B,V,G,Q){var te=function(Se,Ee,Ce,je,et,St,ut,It){for(var pt=je.layout.get("text-rotate").evaluate(St,{})*Math.PI/180,Qt=[],Lt=0,xt=Ee.positionedLines;Lt<xt.length;Lt+=1)for(var ti=xt[Lt],Zt=0,gi=ti.positionedGlyphs;Zt<gi.length;Zt+=1){var At=gi[Zt];if(At.rect){var zi=At.rect||{},$i=4,cn=!0,an=1,en=0,pn=(et||It)&&At.vertical,Vn=At.metrics.advance*At.scale/2;if(It&&Ee.verticalizable&&(en=ti.lineOffset/2-(At.imageName?-(24-At.metrics.width*At.scale)/2:24*(At.scale-1))),At.imageName){var qn=ut[At.imageName];cn=qn.sdf,$i=1/(an=qn.pixelRatio)}var Sr=et?[At.x+Vn,At.y]:[0,0],Yn=et?[0,0]:[At.x+Vn+Ce[0],At.y+Ce[1]-en],kr=[0,0];pn&&(kr=Yn,Yn=[0,0]);var gn=(At.metrics.left-$i)*At.scale-Vn+Yn[0],Jn=(-At.metrics.top-$i)*At.scale+Yn[1],ai=gn+zi.w*At.scale/an,Bi=Jn+zi.h*At.scale/an,Mi=new P(gn,Jn),_i=new P(ai,Jn),Mr=new P(gn,Bi),mr=new P(ai,Bi);if(pn){var Hi=new P(-Vn,Vn- -17),En=-Math.PI/2,gr=12-Vn,Ti=new P(22-gr,-(At.imageName?gr:0)),io=new(Function.prototype.bind.apply(P,[null].concat(kr)));Mi._rotateAround(En,Hi)._add(Ti)._add(io),_i._rotateAround(En,Hi)._add(Ti)._add(io),Mr._rotateAround(En,Hi)._add(Ti)._add(io),mr._rotateAround(En,Hi)._add(Ti)._add(io)}if(pt){var ca=Math.sin(pt),no=Math.cos(pt),yn=[no,-ca,ca,no];Mi._matMult(yn),_i._matMult(yn),Mr._matMult(yn),mr._matMult(yn)}var ro=new P(0,0),Ca=new P(0,0);Qt.push({tl:Mi,tr:_i,bl:Mr,br:mr,tex:zi,writingMode:Ee.writingMode,glyphOffset:Sr,sectionIndex:At.sectionIndex,isSDF:cn,pixelOffsetTL:ro,pixelOffsetBR:Ca,minFontScaleX:0,minFontScaleY:0})}}return Qt}(0,i,E,f,m,x,u,e.allowVerticalPlacement),he=e.textSizeData,ae=null;he.kind==="source"?(ae=[128*f.layout.get("text-size").evaluate(x,{})])[0]>32640&&we(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):he.kind==="composite"&&((ae=[128*G.compositeTextSizes[0].evaluate(x,{},Q),128*G.compositeTextSizes[1].evaluate(x,{},Q)])[0]>32640||ae[1]>32640)&&we(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,te,ae,E,m,x,A,t,I.lineStartIndex,I.lineLength,V,Q);for(var ye=0,xe=M;ye<xe.length;ye+=1)B[xe[ye]]=e.text.placedSymbolArray.length-1;return 4*te.length}function Df(e){for(var t in e)return e[t];return null}function Dy(e,t,i,u){var f=e.compareText;if(t in f){for(var m=f[t],x=m.length-1;x>=0;x--)if(u.dist(m[x])<i)return!0}else f[t]=[];return f[t].push(u),!1}var Ly=pl.VectorTileFeature.types,Ry=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qc(e,t,i,u,f,m,x,E,I,A,M,B,V){var G=E?Math.min(32640,Math.round(E[0])):0,Q=E?Math.min(32640,Math.round(E[1])):0;e.emplaceBack(t,i,Math.round(32*u),Math.round(32*f),m,x,(G<<1)+(I?1:0),Q,16*A,16*M,256*B,256*V)}function oh(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function By(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(el(i[t].text))return!0;return!1}var _l=function(e){this.layoutVertexArray=new rl,this.indexArray=new Ya,this.programConfigurations=e,this.segments=new K,this.dynamicLayoutVertexArray=new Xo,this.opacityVertexArray=new Ss,this.placedSymbolArray=new c};_l.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},_l.prototype.upload=function(e,t,i,u){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ly.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,uy.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Ry,!0),this.opacityVertexBuffer.itemSize=1),(i||u)&&this.programConfigurations.upload(e))},_l.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},yt("SymbolBuffers",_l);var _u=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new K,this.collisionVertexArray=new ou};_u.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,cy.members,!0)},_u.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},yt("CollisionBuffers",_u);var Li=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(m){return m.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ia([]),this.placementViewportMatrix=ia([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nh(this.zoom,t["text-size"]),this.iconSizeData=nh(this.zoom,t["icon-size"]);var i=this.layers[0].layout,u=i.get("symbol-sort-key"),f=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(m){return ua[m]})),this.stateDependentLayerIds=this.layers.filter(function(m){return m.isStateDependent()}).map(function(m){return m.id}),this.sourceID=e.sourceID};Li.prototype.createArrays=function(){this.text=new _l(new Dt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new _l(new Dt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new k,this.lineVertexArray=new z,this.symbolInstances=new w},Li.prototype.calculateGlyphDependencies=function(e,t,i,u,f){for(var m=0;m<e.length;m++)if(t[e.charCodeAt(m)]=!0,(i||u)&&f){var x=mu[e.charAt(m)];x&&(t[x.charCodeAt(0)]=!0)}},Li.prototype.populate=function(e,t,i){var u=this.layers[0],f=u.layout,m=f.get("text-font"),x=f.get("text-field"),E=f.get("icon-image"),I=(x.value.kind!=="constant"||x.value.value instanceof sn&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),A=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,M=f.get("symbol-sort-key");if(this.features=[],I||A){for(var B=t.iconDependencies,V=t.glyphDependencies,G=t.availableImages,Q=new ii(this.zoom),te=0,he=e;te<he.length;te+=1){var ae=he[te],ye=ae.feature,xe=ae.id,Se=ae.index,Ee=ae.sourceLayerIndex,Ce=u._featureFilter.needGeometry,je=mn(ye,Ce);if(u._featureFilter.filter(Q,je,i)){Ce||(je.geometry=rn(ye));var et=void 0;if(I){var St=u.getValueAndResolveTokens("text-field",je,i,G),ut=sn.factory(St);By(ut)&&(this.hasRTLText=!0),(!this.hasRTLText||iu()==="unavailable"||this.hasRTLText&&ta.isParsed())&&(et=hy(ut,u,je))}var It=void 0;if(A){var pt=u.getValueAndResolveTokens("icon-image",je,i,G);It=pt instanceof On?pt:On.fromString(pt)}if(et||It){var Qt=this.sortFeaturesByKey?M.evaluate(je,{},i):void 0;if(this.features.push({id:xe,text:et,icon:It,index:Se,sourceLayerIndex:Ee,geometry:je.geometry,properties:ye.properties,type:Ly[ye.type],sortKey:Qt}),It&&(B[It.name]=!0),et){var Lt=m.evaluate(je,{},i).join(","),xt=f.get("text-rotation-alignment")==="map"&&f.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ua.vertical)>=0;for(var ti=0,Zt=et.sections;ti<Zt.length;ti+=1){var gi=Zt[ti];if(gi.image)B[gi.image.name]=!0;else{var At=$l(et.toString()),zi=gi.fontStack||Lt,$i=V[zi]=V[zi]||{};this.calculateGlyphDependencies(gi.text,$i,xt,this.allowVerticalPlacement,At)}}}}}}f.get("symbol-placement")==="line"&&(this.features=function(cn){var an={},en={},pn=[],Vn=0;function qn(Hi){pn.push(cn[Hi]),Vn++}function Sr(Hi,En,gr){var Ti=en[Hi];return delete en[Hi],en[En]=Ti,pn[Ti].geometry[0].pop(),pn[Ti].geometry[0]=pn[Ti].geometry[0].concat(gr[0]),Ti}function Yn(Hi,En,gr){var Ti=an[En];return delete an[En],an[Hi]=Ti,pn[Ti].geometry[0].shift(),pn[Ti].geometry[0]=gr[0].concat(pn[Ti].geometry[0]),Ti}function kr(Hi,En,gr){var Ti=gr?En[0][En[0].length-1]:En[0][0];return Hi+":"+Ti.x+":"+Ti.y}for(var gn=0;gn<cn.length;gn++){var Jn=cn[gn],ai=Jn.geometry,Bi=Jn.text?Jn.text.toString():null;if(Bi){var Mi=kr(Bi,ai),_i=kr(Bi,ai,!0);if(Mi in en&&_i in an&&en[Mi]!==an[_i]){var Mr=Yn(Mi,_i,ai),mr=Sr(Mi,_i,pn[Mr].geometry);delete an[Mi],delete en[_i],en[kr(Bi,pn[mr].geometry,!0)]=mr,pn[Mr].geometry=null}else Mi in en?Sr(Mi,_i,ai):_i in an?Yn(Mi,_i,ai):(qn(gn),an[Mi]=Vn-1,en[_i]=Vn-1)}else qn(gn)}return pn.filter(function(Hi){return Hi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(cn,an){return cn.sortKey-an.sortKey})}},Li.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},Li.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Li.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Li.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Li.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Li.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Li.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var u=e.dist(t[e.segment+1]),f=e.dist(t[e.segment]),m={},x=e.segment+1;x<t.length;x++)m[x]={x:t[x].x,y:t[x].y,tileUnitDistanceFromAnchor:u},x<t.length-1&&(u+=t[x+1].dist(t[x]));for(var E=e.segment||0;E>=0;E--)m[E]={x:t[E].x,y:t[E].y,tileUnitDistanceFromAnchor:f},E>0&&(f+=t[E-1].dist(t[E]));for(var I=0;I<t.length;I++){var A=m[I];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Li.prototype.addSymbols=function(e,t,i,u,f,m,x,E,I,A,M,B){for(var V=e.indexArray,G=e.layoutVertexArray,Q=e.segments.prepareSegment(4*t.length,G,V,this.canOverlap?m.sortKey:void 0),te=this.glyphOffsetArray.length,he=Q.vertexLength,ae=this.allowVerticalPlacement&&x===ua.vertical?Math.PI/2:0,ye=m.text&&m.text.sections,xe=0;xe<t.length;xe++){var Se=t[xe],Ee=Se.tl,Ce=Se.tr,je=Se.bl,et=Se.br,St=Se.tex,ut=Se.pixelOffsetTL,It=Se.pixelOffsetBR,pt=Se.minFontScaleX,Qt=Se.minFontScaleY,Lt=Se.glyphOffset,xt=Se.isSDF,ti=Se.sectionIndex,Zt=Q.vertexLength,gi=Lt[1];qc(G,E.x,E.y,Ee.x,gi+Ee.y,St.x,St.y,i,xt,ut.x,ut.y,pt,Qt),qc(G,E.x,E.y,Ce.x,gi+Ce.y,St.x+St.w,St.y,i,xt,It.x,ut.y,pt,Qt),qc(G,E.x,E.y,je.x,gi+je.y,St.x,St.y+St.h,i,xt,ut.x,It.y,pt,Qt),qc(G,E.x,E.y,et.x,gi+et.y,St.x+St.w,St.y+St.h,i,xt,It.x,It.y,pt,Qt),oh(e.dynamicLayoutVertexArray,E,ae),V.emplaceBack(Zt,Zt+1,Zt+2),V.emplaceBack(Zt+1,Zt+2,Zt+3),Q.vertexLength+=4,Q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lt[0]),xe!==t.length-1&&ti===t[xe+1].sectionIndex||e.programConfigurations.populatePaintArrays(G.length,m,m.index,{},B,ye&&ye[ti])}e.placedSymbolArray.emplaceBack(E.x,E.y,te,this.glyphOffsetArray.length-te,he,I,A,E.segment,i?i[0]:0,i?i[1]:0,u[0],u[1],x,0,!1,0,M)},Li.prototype._addCollisionDebugVertex=function(e,t,i,u,f,m){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,u,f,Math.round(m.x),Math.round(m.y))},Li.prototype.addCollisionDebugVertices=function(e,t,i,u,f,m,x){var E=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),I=E.vertexLength,A=f.layoutVertexArray,M=f.collisionVertexArray,B=x.anchorX,V=x.anchorY;this._addCollisionDebugVertex(A,M,m,B,V,new P(e,t)),this._addCollisionDebugVertex(A,M,m,B,V,new P(i,t)),this._addCollisionDebugVertex(A,M,m,B,V,new P(i,u)),this._addCollisionDebugVertex(A,M,m,B,V,new P(e,u)),E.vertexLength+=4;var G=f.indexArray;G.emplaceBack(I,I+1),G.emplaceBack(I+1,I+2),G.emplaceBack(I+2,I+3),G.emplaceBack(I+3,I),E.primitiveLength+=4},Li.prototype.addDebugCollisionBoxes=function(e,t,i,u){for(var f=e;f<t;f++){var m=this.collisionBoxArray.get(f);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,u?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,i)}},Li.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _u(Yo,pf.members,ks),this.iconCollisionBox=new _u(Yo,pf.members,ks);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Li.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,u,f,m,x,E,I){for(var A={},M=t;M<i;M++){var B=e.get(M);A.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.textFeatureIndex=B.featureIndex;break}for(var V=u;V<f;V++){var G=e.get(V);A.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},A.verticalTextFeatureIndex=G.featureIndex;break}for(var Q=m;Q<x;Q++){var te=e.get(Q);A.iconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},A.iconFeatureIndex=te.featureIndex;break}for(var he=E;he<I;he++){var ae=e.get(he);A.verticalIconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},A.verticalIconFeatureIndex=ae.featureIndex;break}return A},Li.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Li.prototype.hasTextData=function(){return this.text.segments.get().length>0},Li.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Li.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Li.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Li.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Li.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),u=i.vertexStartIndex+4*i.numGlyphs,f=i.vertexStartIndex;f<u;f+=4)e.indexArray.emplaceBack(f,f+1,f+2),e.indexArray.emplaceBack(f+1,f+2,f+3)},Li.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),u=[],f=[],m=[],x=0;x<this.symbolInstances.length;++x){m.push(x);var E=this.symbolInstances.get(x);u.push(0|Math.round(t*E.anchorX+i*E.anchorY)),f.push(E.featureIndex)}return m.sort(function(I,A){return u[I]-u[A]||f[A]-f[I]}),m},Li.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Li.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,u=this.symbolInstanceIndexes;i<u.length;i+=1){var f=this.symbolInstances.get(u[i]);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(function(m,x,E){m>=0&&E.indexOf(m)===x&&t.addIndicesForPlacedSymbol(t.text,m)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},yt("SymbolBucket",Li,{omit:["layers","collisionBoxArray","features","compareText"]}),Li.MAX_GLYPHS=65535,Li.addDynamicAttributes=oh;var Fy=new ar({"symbol-placement":new zt(j.layout_symbol["symbol-placement"]),"symbol-spacing":new zt(j.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new zt(j.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new bt(j.layout_symbol["symbol-sort-key"]),"symbol-z-order":new zt(j.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new zt(j.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new zt(j.layout_symbol["icon-ignore-placement"]),"icon-optional":new zt(j.layout_symbol["icon-optional"]),"icon-rotation-alignment":new zt(j.layout_symbol["icon-rotation-alignment"]),"icon-size":new bt(j.layout_symbol["icon-size"]),"icon-text-fit":new zt(j.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new zt(j.layout_symbol["icon-text-fit-padding"]),"icon-image":new bt(j.layout_symbol["icon-image"]),"icon-rotate":new bt(j.layout_symbol["icon-rotate"]),"icon-padding":new zt(j.layout_symbol["icon-padding"]),"icon-keep-upright":new zt(j.layout_symbol["icon-keep-upright"]),"icon-offset":new bt(j.layout_symbol["icon-offset"]),"icon-anchor":new bt(j.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new zt(j.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new zt(j.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new zt(j.layout_symbol["text-rotation-alignment"]),"text-field":new bt(j.layout_symbol["text-field"]),"text-font":new bt(j.layout_symbol["text-font"]),"text-size":new bt(j.layout_symbol["text-size"]),"text-max-width":new bt(j.layout_symbol["text-max-width"]),"text-line-height":new zt(j.layout_symbol["text-line-height"]),"text-letter-spacing":new bt(j.layout_symbol["text-letter-spacing"]),"text-justify":new bt(j.layout_symbol["text-justify"]),"text-radial-offset":new bt(j.layout_symbol["text-radial-offset"]),"text-variable-anchor":new zt(j.layout_symbol["text-variable-anchor"]),"text-anchor":new bt(j.layout_symbol["text-anchor"]),"text-max-angle":new zt(j.layout_symbol["text-max-angle"]),"text-writing-mode":new zt(j.layout_symbol["text-writing-mode"]),"text-rotate":new bt(j.layout_symbol["text-rotate"]),"text-padding":new zt(j.layout_symbol["text-padding"]),"text-keep-upright":new zt(j.layout_symbol["text-keep-upright"]),"text-transform":new bt(j.layout_symbol["text-transform"]),"text-offset":new bt(j.layout_symbol["text-offset"]),"text-allow-overlap":new zt(j.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new zt(j.layout_symbol["text-ignore-placement"]),"text-optional":new zt(j.layout_symbol["text-optional"])}),sh={paint:new ar({"icon-opacity":new bt(j.paint_symbol["icon-opacity"]),"icon-color":new bt(j.paint_symbol["icon-color"]),"icon-halo-color":new bt(j.paint_symbol["icon-halo-color"]),"icon-halo-width":new bt(j.paint_symbol["icon-halo-width"]),"icon-halo-blur":new bt(j.paint_symbol["icon-halo-blur"]),"icon-translate":new zt(j.paint_symbol["icon-translate"]),"icon-translate-anchor":new zt(j.paint_symbol["icon-translate-anchor"]),"text-opacity":new bt(j.paint_symbol["text-opacity"]),"text-color":new bt(j.paint_symbol["text-color"],{runtimeType:it,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new bt(j.paint_symbol["text-halo-color"]),"text-halo-width":new bt(j.paint_symbol["text-halo-width"]),"text-halo-blur":new bt(j.paint_symbol["text-halo-blur"]),"text-translate":new zt(j.paint_symbol["text-translate"]),"text-translate-anchor":new zt(j.paint_symbol["text-translate-anchor"])}),layout:Fy},vl=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:lt,this.defaultValue=e};vl.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},vl.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},vl.prototype.outputDefined=function(){return!1},vl.prototype.serialize=function(){return null},yt("FormatSectionOverride",vl,{omit:["defaultValue"]});var Oy=function(e){function t(i){e.call(this,i,sh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,u){if(e.prototype.recalculate.call(this,i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var f=this.layout.get("text-writing-mode");if(f){for(var m=[],x=0,E=f;x<E.length;x+=1){var I=E[x];m.indexOf(I)<0&&m.push(I)}this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,u,f,m){var x=this.layout.get(i).evaluate(u,{},f,m),E=this._unevaluatedLayout._values[i];return E.isDataDriven()||hs(E.value)||!x?x:function(I,A){return A.replace(/{([^{}]+)}/g,function(M,B){return B in I?String(I[B]):""})}(u.properties,x)},t.prototype.createBucket=function(i){return new Li(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,u=sh.paint.overridableProperties;i<u.length;i+=1){var f=u[i];if(t.hasPaintOverride(this.layout,f)){var m,x=this.paint.get(f),E=new vl(x),I=new jo(E,x.property.specification);m=x.value.kind==="constant"||x.value.kind==="source"?new fs("source",I):new Go("composite",I,x.value.zoomStops,x.value._interpolationType),this.paint._values[f]=new vr(x.property,m,x.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,u){var f=i.get("text-field"),m=sh.paint.properties[u],x=!1,E=function(M){for(var B=0,V=M;B<V.length;B+=1)if(m.overrides&&m.overrides.hasOverride(V[B]))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof sn)E(f.value.value.sections);else if(f.value.kind==="source"){var I=function(M){x||(M instanceof Pn&&Zi(M.value)===Ei?E(M.value.sections):M instanceof Fr?E(M.sections):M.eachChild(I))},A=f.value;A._styleExpression&&I(A._styleExpression.expression)}return x},t}(Ta),Ny={paint:new ar({"background-color":new zt(j.paint_background["background-color"]),"background-pattern":new br(j.paint_background["background-pattern"]),"background-opacity":new zt(j.paint_background["background-opacity"])})},Uy=function(e){function t(i){e.call(this,i,Ny)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ta),Vy={paint:new ar({"raster-opacity":new zt(j.paint_raster["raster-opacity"]),"raster-hue-rotate":new zt(j.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new zt(j.paint_raster["raster-brightness-min"]),"raster-brightness-max":new zt(j.paint_raster["raster-brightness-max"]),"raster-saturation":new zt(j.paint_raster["raster-saturation"]),"raster-contrast":new zt(j.paint_raster["raster-contrast"]),"raster-resampling":new zt(j.paint_raster["raster-resampling"]),"raster-fade-duration":new zt(j.paint_raster["raster-fade-duration"])})},qy=function(e){function t(i){e.call(this,i,Vy)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ta),jy=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(Ta),Gy={circle:Zp,heatmap:Tg,hillshade:Ag,fill:Kg,"fill-extrusion":ty,line:sy,symbol:Oy,background:Uy,raster:qy},Lf=R.HTMLImageElement,Rf=R.HTMLCanvasElement,Bf=R.HTMLVideoElement,Ff=R.ImageData,jc=R.ImageBitmap,Ps=function(e,t,i,u){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,u)};Ps.prototype.update=function(e,t,i){var u=e.width,f=e.height,m=!(this.size&&this.size[0]===u&&this.size[1]===f||i),x=this.context,E=x.gl;if(this.useMipmap=!!(t&&t.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!t||t.premultiply!==!1)),m)this.size=[u,f],e instanceof Lf||e instanceof Rf||e instanceof Bf||e instanceof Ff||jc&&e instanceof jc?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,e):E.texImage2D(E.TEXTURE_2D,0,this.format,u,f,0,this.format,E.UNSIGNED_BYTE,e.data);else{var I=i||{x:0,y:0},A=I.x,M=I.y;e instanceof Lf||e instanceof Rf||e instanceof Bf||e instanceof Ff||jc&&e instanceof jc?E.texSubImage2D(E.TEXTURE_2D,0,A,M,E.RGBA,E.UNSIGNED_BYTE,e):E.texSubImage2D(E.TEXTURE_2D,0,A,M,u,f,E.RGBA,E.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)},Ps.prototype.bind=function(e,t,i){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),i!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,t),this.wrap=t)},Ps.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ps.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var lh=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};lh.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},lh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var bl=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Vt(["receive","process"],this),this.invoker=new lh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ye()?e:R};function Of(e,t,i){var u=2*Math.PI*6378137/256/Math.pow(2,i);return[e*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}bl.prototype.send=function(e,t,i,u,f){var m=this;f===void 0&&(f=!1);var x=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[x]=i);var E=Mt(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:e,hasCallback:!!i,targetMapId:u,mustQueue:f,sourceMapId:this.mapId,data:ma(t,E)},E),{cancel:function(){i&&delete m.callbacks[x],m.target.postMessage({id:x,type:"<cancel>",targetMapId:u,sourceMapId:m.mapId})}}},bl.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var u=this.cancelCallbacks[i];delete this.cancelCallbacks[i],u&&u()}else Ye()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},bl.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},bl.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var u=this.callbacks[e];delete this.callbacks[e],u&&(t.error?u(Vr(t.error)):u(null,Vr(t.data)))}else{var f=!1,m=Mt(this.globalScope)?void 0:[],x=t.hasCallback?function(M,B){f=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:M?ma(M):null,data:ma(B,m)},m)}:function(M){f=!0},E=null,I=Vr(t.data);if(this.parent[t.type])E=this.parent[t.type](t.sourceMapId,I,x);else if(this.parent.getWorkerSource){var A=t.type.split(".");E=this.parent.getWorkerSource(t.sourceMapId,A[0],I.source)[A[1]](I,x)}else x(new Error("Could not find function "+t.type));!f&&E&&E.cancel&&(this.cancelCallbacks[e]=E.cancel)}},bl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Rn=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Rn.prototype.setNorthEast=function(e){return this._ne=e instanceof Qi?new Qi(e.lng,e.lat):Qi.convert(e),this},Rn.prototype.setSouthWest=function(e){return this._sw=e instanceof Qi?new Qi(e.lng,e.lat):Qi.convert(e),this},Rn.prototype.extend=function(e){var t,i,u=this._sw,f=this._ne;if(e instanceof Qi)t=e,i=e;else{if(!(e instanceof Rn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Rn.convert(e)):this.extend(Qi.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return u||f?(u.lng=Math.min(t.lng,u.lng),u.lat=Math.min(t.lat,u.lat),f.lng=Math.max(i.lng,f.lng),f.lat=Math.max(i.lat,f.lat)):(this._sw=new Qi(t.lng,t.lat),this._ne=new Qi(i.lng,i.lat)),this},Rn.prototype.getCenter=function(){return new Qi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Rn.prototype.getSouthWest=function(){return this._sw},Rn.prototype.getNorthEast=function(){return this._ne},Rn.prototype.getNorthWest=function(){return new Qi(this.getWest(),this.getNorth())},Rn.prototype.getSouthEast=function(){return new Qi(this.getEast(),this.getSouth())},Rn.prototype.getWest=function(){return this._sw.lng},Rn.prototype.getSouth=function(){return this._sw.lat},Rn.prototype.getEast=function(){return this._ne.lng},Rn.prototype.getNorth=function(){return this._ne.lat},Rn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Rn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Rn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Rn.prototype.contains=function(e){var t=Qi.convert(e),i=t.lng,u=t.lat,f=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&f},Rn.convert=function(e){return!e||e instanceof Rn?e:new Rn(e)};var Qi=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Qi.prototype.wrap=function(){return new Qi(me(this.lng,-180,180),this.lat)},Qi.prototype.toArray=function(){return[this.lng,this.lat]},Qi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Qi.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,u=e.lat*t,f=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(f,1))},Qi.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Rn(new Qi(this.lng-i,this.lat-t),new Qi(this.lng+i,this.lat+t))},Qi.convert=function(e){if(e instanceof Qi)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Qi(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Qi(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Nf=2*Math.PI*63710088e-1;function Uf(e){return Nf*Math.cos(e*Math.PI/180)}function Vf(e){return(180+e)/360}function qf(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function jf(e,t){return e/Uf(t)}function uh(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Cs=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};Cs.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Qi.convert(e);return new Cs(Vf(i.lng),qf(i.lat),jf(t,i.lat))},Cs.prototype.toLngLat=function(){return new Qi(360*this.x-180,uh(this.y))},Cs.prototype.toAltitude=function(){return this.z*Uf(uh(this.y))},Cs.prototype.meterInMercatorCoordinateUnits=function(){return 1/Nf*(e=uh(this.y),1/Math.cos(e*Math.PI/180));var e};var Ms=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=vu(0,e,e,t,i)};Ms.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Ms.prototype.url=function(e,t){var i,u,f,m,x,E=(u=this.y,f=this.z,m=Of(256*(i=this.x),256*(u=Math.pow(2,f)-u-1),f),x=Of(256*(i+1),256*(u+1),f),m[0]+","+m[1]+","+x[0]+","+x[1]),I=function(A,M,B){for(var V,G="",Q=A;Q>0;Q--)G+=(M&(V=1<<Q-1)?1:0)+(B&V?2:0);return G}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",I).replace("{bbox-epsg-3857}",E)},Ms.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new P(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Ms.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Gf=function(e,t){this.wrap=e,this.canonical=t,this.key=vu(e,t.z,t.z,t.x,t.y)},Bn=function(e,t,i,u,f){this.overscaledZ=e,this.wrap=t,this.canonical=new Ms(i,+u,+f),this.key=vu(t,e,i,u,f)};function vu(e,t,i,u,f){(e*=2)<0&&(e=-1*e-1);var m=1<<i;return(m*m*e+m*f+u).toString(36)+i.toString(36)+t.toString(36)}Bn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Bn.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Bn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bn(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Bn.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?vu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):vu(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Bn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Bn.prototype.children=function(e){if(this.overscaledZ>=e)return[new Bn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,u=2*this.canonical.y;return[new Bn(t,this.wrap,t,i,u),new Bn(t,this.wrap,t,i+1,u),new Bn(t,this.wrap,t,i,u+1),new Bn(t,this.wrap,t,i+1,u+1)]},Bn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Bn.prototype.wrapped=function(){return new Bn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Bn.prototype.unwrapTo=function(e){return new Bn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Bn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Bn.prototype.toUnwrapped=function(){return new Gf(this.wrap,this.canonical)},Bn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Bn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Cs(e.x-this.wrap,e.y))},yt("CanonicalTileID",Ms),yt("OverscaledTileID",Bn,{omit:["posMatrix"]});var Lo=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return we('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var u=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var f=0;f<u;f++)this.data[this._idx(-1,f)]=this.data[this._idx(0,f)],this.data[this._idx(u,f)]=this.data[this._idx(u-1,f)],this.data[this._idx(f,-1)]=this.data[this._idx(f,0)],this.data[this._idx(f,u)]=this.data[this._idx(f,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};Lo.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),u=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[u],i[u+1],i[u+2])},Lo.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Lo.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Lo.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Lo.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Lo.prototype.getPixels=function(){return new Kr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Lo.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=t*this.dim,f=t*this.dim+this.dim,m=i*this.dim,x=i*this.dim+this.dim;switch(t){case-1:u=f-1;break;case 1:f=u+1}switch(i){case-1:m=x-1;break;case 1:x=m+1}for(var E=-t*this.dim,I=-i*this.dim,A=m;A<x;A++)for(var M=u;M<f;M++)this.data[this._idx(M,A)]=e.data[this._idx(M+E,A+I)]},yt("DEMData",Lo);var Gc=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Gc.prototype.encode=function(e){return this._stringToNumber[e]},Gc.prototype.decode=function(e){return this._numberToString[e]};var Zc=function(e,t,i,u,f){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=u,this.properties=e.properties,this.id=f},ch={geometry:{configurable:!0}};ch.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ch.geometry.set=function(e){this._geometry=e},Zc.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Zc.prototype,ch);var xl=function(){this.state={},this.stateChanges={},this.deletedStates={}};xl.prototype.updateState=function(e,t,i){var u=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},ve(this.stateChanges[e][u],i),this.deletedStates[e]===null)for(var f in this.deletedStates[e]={},this.state[e])f!==u&&(this.deletedStates[e][f]=null);else if(this.deletedStates[e]&&this.deletedStates[e][u]===null)for(var m in this.deletedStates[e][u]={},this.state[e][u])i[m]||(this.deletedStates[e][u][m]=null);else for(var x in i)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][x]===null&&delete this.deletedStates[e][u][x]},xl.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var u=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(i in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][i]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},xl.prototype.getState=function(e,t){var i=String(t),u=ve({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var f=this.deletedStates[e][t];if(f===null)return{};for(var m in f)delete u[m]}return u},xl.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},xl.prototype.coalesceChanges=function(e,t){var i={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var f={};for(var m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),ve(this.state[u][m],this.stateChanges[u][m]),f[m]=this.state[u][m];i[u]=f}for(var x in this.deletedStates){this.state[x]=this.state[x]||{};var E={};if(this.deletedStates[x]===null)for(var I in this.state[x])E[I]={},this.state[x][I]={};else for(var A in this.deletedStates[x]){if(this.deletedStates[x][A]===null)this.state[x][A]={};else for(var M=0,B=Object.keys(this.deletedStates[x][A]);M<B.length;M+=1)delete this.state[x][A][B[M]];E[A]=this.state[x][A]}i[x]=i[x]||{},ve(i[x],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var V in e)e[V].setFeatureState(i,t)};var Ro=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ma(8192,16,0),this.grid3D=new Ma(8192,16,0),this.featureIndexArray=new F,this.promoteId=t};function Zf(e,t,i,u,f){return Ze(e,function(m,x){var E=t instanceof ws?t.get(x):null;return E&&E.evaluate?E.evaluate(i,u,f):E})}function Kf(e){for(var t=1/0,i=1/0,u=-1/0,f=-1/0,m=0,x=e;m<x.length;m+=1){var E=x[m];t=Math.min(t,E.x),i=Math.min(i,E.y),u=Math.max(u,E.x),f=Math.max(f,E.y)}return{minX:t,minY:i,maxX:u,maxY:f}}function Zy(e,t){return t-e}Ro.prototype.insert=function(e,t,i,u,f,m){var x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,u,f);for(var E=m?this.grid3D:this.grid,I=0;I<t.length;I++){for(var A=t[I],M=[1/0,1/0,-1/0,-1/0],B=0;B<A.length;B++){var V=A[B];M[0]=Math.min(M[0],V.x),M[1]=Math.min(M[1],V.y),M[2]=Math.max(M[2],V.x),M[3]=Math.max(M[3],V.y)}M[0]<8192&&M[1]<8192&&M[2]>=0&&M[3]>=0&&E.insert(x,M[0],M[1],M[2],M[3])}},Ro.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new pl.VectorTile(new Dc(this.rawTileData)).layers,this.sourceLayerCoder=new Gc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ro.prototype.query=function(e,t,i,u){var f=this;this.loadVTLayers();for(var m=e.params||{},x=8192/e.tileSize/e.scale,E=Ws(m.filter),I=e.queryGeometry,A=e.queryPadding*x,M=Kf(I),B=this.grid.query(M.minX-A,M.minY-A,M.maxX+A,M.maxY+A),V=Kf(e.cameraQueryGeometry),G=this.grid3D.query(V.minX-A,V.minY-A,V.maxX+A,V.maxY+A,function(Se,Ee,Ce,je){return function(et,St,ut,It,pt){for(var Qt=0,Lt=et;Qt<Lt.length;Qt+=1){var xt=Lt[Qt];if(St<=xt.x&&ut<=xt.y&&It>=xt.x&&pt>=xt.y)return!0}var ti=[new P(St,ut),new P(St,pt),new P(It,pt),new P(It,ut)];if(et.length>2){for(var Zt=0,gi=ti;Zt<gi.length;Zt+=1)if(Aa(et,gi[Zt]))return!0}for(var At=0;At<et.length-1;At++)if(Ts(et[At],et[At+1],ti))return!0;return!1}(e.cameraQueryGeometry,Se-A,Ee-A,Ce+A,je+A)}),Q=0,te=G;Q<te.length;Q+=1)B.push(te[Q]);B.sort(Zy);for(var he,ae={},ye=function(Se){var Ee=B[Se];if(Ee!==he){he=Ee;var Ce=f.featureIndexArray.get(Ee),je=null;f.loadMatchingFeature(ae,Ce.bucketIndex,Ce.sourceLayerIndex,Ce.featureIndex,E,m.layers,m.availableImages,t,i,u,function(et,St,ut){return je||(je=rn(et)),St.queryIntersectsFeature(I,et,ut,je,f.z,e.transform,x,e.pixelPosMatrix)})}},xe=0;xe<B.length;xe++)ye(xe);return ae},Ro.prototype.loadMatchingFeature=function(e,t,i,u,f,m,x,E,I,A,M){var B=this.bucketLayerIDs[t];if(!m||function(et,St){for(var ut=0;ut<et.length;ut++)if(St.indexOf(et[ut])>=0)return!0;return!1}(m,B)){var V=this.sourceLayerCoder.decode(i),G=this.vtLayers[V].feature(u);if(f.needGeometry){var Q=mn(G,!0);if(!f.filter(new ii(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!f.filter(new ii(this.tileID.overscaledZ),G))return;for(var te=this.getId(G,V),he=0;he<B.length;he++){var ae=B[he];if(!(m&&m.indexOf(ae)<0)){var ye=E[ae];if(ye){var xe={};te!==void 0&&A&&(xe=A.getState(ye.sourceLayer||"_geojsonTileLayer",te));var Se=ve({},I[ae]);Se.paint=Zf(Se.paint,ye.paint,G,xe,x),Se.layout=Zf(Se.layout,ye.layout,G,xe,x);var Ee=!M||M(G,ye,xe);if(Ee){var Ce=new Zc(G,this.z,this.x,this.y,te);Ce.layer=Se;var je=e[ae];je===void 0&&(je=e[ae]=[]),je.push({featureIndex:u,feature:Ce,intersectionZ:Ee})}}}}}},Ro.prototype.lookupSymbolFeatures=function(e,t,i,u,f,m,x,E){var I={};this.loadVTLayers();for(var A=Ws(f),M=0,B=e;M<B.length;M+=1)this.loadMatchingFeature(I,i,u,B[M],A,m,x,E,t);return I},Ro.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var u=0,f=i[t];u<f.length;u+=1)if(e===f[u])return!0;return!1},Ro.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},yt("FeatureIndex",Ro,{omit:["rawTileData","sourceLayerCoder"]});var Xn=function(e,t){this.tileID=e,this.uid=Ve(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Xn.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<zr.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Xn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Xn.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(A,M){var B={};if(!M)return B;for(var V=function(){var te=Q[G],he=te.layerIds.map(function(xe){return M.getLayer(xe)}).filter(Boolean);if(he.length!==0){te.layers=he,te.stateDependentLayerIds&&(te.stateDependentLayers=te.stateDependentLayerIds.map(function(xe){return he.filter(function(Se){return Se.id===xe})[0]}));for(var ae=0,ye=he;ae<ye.length;ae+=1)B[ye[ae].id]=te}},G=0,Q=A;G<Q.length;G+=1)V();return B}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var f=this.buckets[u];if(f instanceof Li){if(this.hasSymbolBuckets=!0,!i)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var m in this.buckets){var x=this.buckets[m];if(x instanceof Li&&x.hasRTLText){this.hasRTLText=!0,ta.isLoading()||ta.isLoaded()||iu()!=="deferred"||ga();break}}for(var E in this.queryPadding=0,this.buckets){var I=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(E).queryRadius(I))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Xn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Xn.prototype.getBucket=function(e){return this.buckets[e.id]},Xn.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ps(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ps(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},Xn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Xn.prototype.queryRenderedFeatures=function(e,t,i,u,f,m,x,E,I,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:f,scale:m,tileSize:this.tileSize,pixelPosMatrix:A,transform:E,params:x,queryPadding:this.queryPadding*I},e,t,i):{}},Xn.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var u=i.loadVTLayers(),f=t?t.sourceLayer:"",m=u._geojsonTileLayer||u[f];if(m)for(var x=Ws(t&&t.filter),E=this.tileID.canonical,I=E.z,A=E.x,M=E.y,B={z:I,x:A,y:M},V=0;V<m.length;V++){var G=m.feature(V);if(x.needGeometry){var Q=mn(G,!0);if(!x.filter(new ii(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!x.filter(new ii(this.tileID.overscaledZ),G))continue;var te=i.getId(G,f),he=new Zc(G,I,A,M,te);he.tile=B,e.push(he)}}},Xn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Xn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Xn.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=ht(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),f=!1;if(this.expirationTime>u)f=!1;else if(t)if(this.expirationTime<t)f=!0;else{var m=this.expirationTime-t;m?this.expirationTime=u+Math.max(m,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Xn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Xn.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(t.style.hasLayer(u)){var f=this.buckets[u],m=f.layers[0].sourceLayer||"_geojsonTileLayer",x=i[m],E=e[m];if(x&&E&&Object.keys(E).length!==0){f.update(E,x,this.imageAtlas&&this.imageAtlas.patternPositions||{});var I=t&&t.style&&t.style.getLayer(u);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(f)))}}}},Xn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Xn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<zr.now()},Xn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Xn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=zr.now()+e},Xn.prototype.setDependencies=function(e,t){for(var i={},u=0,f=t;u<f.length;u+=1)i[f[u]]=!0;this.dependencies[e]=i},Xn.prototype.hasDependency=function(e,t){for(var i=0,u=e;i<u.length;i+=1){var f=this.dependencies[u[i]];if(f){for(var m=0,x=t;m<x.length;m+=1)if(f[x[m]])return!0}}return!1};var ts=R.performance,Hf=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},ts.mark(this._marks.start)};Hf.prototype.finish=function(){ts.mark(this._marks.end);var e=ts.getEntriesByName(this._marks.measure);return e.length===0&&(ts.measure(this._marks.measure,this._marks.start,this._marks.end),e=ts.getEntriesByName(this._marks.measure),ts.clearMarks(this._marks.start),ts.clearMarks(this._marks.end),ts.clearMeasures(this._marks.measure)),e},a.Actor=bl,a.AlphaImage=As,a.CanonicalTileID=Ms,a.CollisionBoxArray=s,a.Color=si,a.DEMData=Lo,a.DataConstantProperty=zt,a.DictionaryCoder=Gc,a.EXTENT=8192,a.ErrorEvent=ue,a.EvaluationParameters=ii,a.Event=Y,a.Evented=fe,a.FeatureIndex=Ro,a.FillBucket=Ba,a.FillExtrusionBucket=Fa,a.ImageAtlas=yu,a.ImagePosition=Rc,a.LineBucket=Cr,a.LngLat=Qi,a.LngLatBounds=Rn,a.MercatorCoordinate=Cs,a.ONE_EM=24,a.OverscaledTileID=Bn,a.Point=P,a.Point$1=P,a.Properties=ar,a.Protobuf=Dc,a.RGBAImage=Kr,a.RequestManager=fi,a.RequestPerformance=Hf,a.ResourceType=Br,a.SegmentVector=K,a.SourceFeatureState=xl,a.StructArrayLayout1ui2=lu,a.StructArrayLayout2f1f2i16=Po,a.StructArrayLayout2i4=Ao,a.StructArrayLayout3ui6=Ya,a.StructArrayLayout4i8=ru,a.SymbolBucket=Li,a.Texture=Ps,a.Tile=Xn,a.Transitionable=rr,a.Uniform1f=We,a.Uniform1i=Le,a.Uniform2f=He,a.Uniform3f=ft,a.Uniform4f=Tt,a.UniformColor=Ct,a.UniformMatrix4f=yi,a.UnwrappedTileID=Gf,a.ValidationError=ee,a.WritingMode=ua,a.ZoomHistory=Ql,a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},a.addDynamicAttributes=oh,a.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var u=e.length,f=new Array(e.length),m=null;e.forEach(function(x,E){t(x,function(I,A){I&&(m=I),f[E]=A,--u==0&&i(m,f)})})},a.bezier=$,a.bindAll=Vt,a.browser=zr,a.cacheEntryPossiblyAdded=function(e){++Yi>Rr&&(e.getActor().send("enforceCacheSizeLimit",Lr),Yi=0)},a.clamp=le,a.clearTileCache=function(e){var t=R.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},a.clipLine=If,a.clone=function(e){var t=new Ii(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.clone$1=wt,a.clone$2=function(e){var t=new Ii(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.collisionCircleLayout=py,a.config=bi,a.create=function(){var e=new Ii(16);return Ii!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},a.create$1=function(){var e=new Ii(9);return Ii!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},a.create$2=function(){var e=new Ii(4);return Ii!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},a.createCommonjsModule=T,a.createExpression=Ks,a.createLayout=Hn,a.createStyleLayer=function(e){return e.type==="custom"?new jy(e):new Gy[e.type](e)},a.cross=function(e,t,i){var u=t[0],f=t[1],m=t[2],x=i[0],E=i[1],I=i[2];return e[0]=f*I-m*E,e[1]=m*x-u*I,e[2]=u*E-f*x,e},a.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],i[u]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var f in t)if(!e(t[f],i[f]))return!1;return!0}return t===i},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.ease=pe,a.emitValidationErrors=vs,a.endsWith=qt,a.enforceCacheSizeLimit=function(e){fn(),Gi&&Gi.then(function(t){t.keys().then(function(i){for(var u=0;u<i.length-e;u++)t.delete(i[u])})})},a.evaluateSizeForFeature=wf,a.evaluateSizeForZoom=Sf,a.evaluateVariableOffset=Cf,a.evented=tu,a.extend=ve,a.featureFilter=Ws,a.filterObject=Xe,a.fromRotation=function(e,t){var i=Math.sin(t),u=Math.cos(t);return e[0]=u,e[1]=i,e[2]=0,e[3]=-i,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.getAnchorAlignment=ih,a.getAnchorJustification=ah,a.getArrayBuffer=on,a.getImage=U,a.getJSON=function(e,t){return pr(ve(e,{type:"json"}),t)},a.getRTLTextPluginStatus=iu,a.getReferrer=N,a.getVideo=function(e,t){var i,u,f=R.document.createElement("video");f.muted=!0,f.onloadstart=function(){t(null,f)};for(var m=0;m<e.length;m++){var x=R.document.createElement("source");i=e[m],u=void 0,(u=R.document.createElement("a")).href=i,(u.protocol!==R.document.location.protocol||u.host!==R.document.location.host)&&(f.crossOrigin="Anonymous"),x.src=e[m],f.appendChild(x)}return{cancel:function(){}}},a.identity=ia,a.invert=function(e,t){var i=t[0],u=t[1],f=t[2],m=t[3],x=t[4],E=t[5],I=t[6],A=t[7],M=t[8],B=t[9],V=t[10],G=t[11],Q=t[12],te=t[13],he=t[14],ae=t[15],ye=i*E-u*x,xe=i*I-f*x,Se=i*A-m*x,Ee=u*I-f*E,Ce=u*A-m*E,je=f*A-m*I,et=M*te-B*Q,St=M*he-V*Q,ut=M*ae-G*Q,It=B*he-V*te,pt=B*ae-G*te,Qt=V*ae-G*he,Lt=ye*Qt-xe*pt+Se*It+Ee*ut-Ce*St+je*et;return Lt?(e[0]=(E*Qt-I*pt+A*It)*(Lt=1/Lt),e[1]=(f*pt-u*Qt-m*It)*Lt,e[2]=(te*je-he*Ce+ae*Ee)*Lt,e[3]=(V*Ce-B*je-G*Ee)*Lt,e[4]=(I*ut-x*Qt-A*St)*Lt,e[5]=(i*Qt-f*ut+m*St)*Lt,e[6]=(he*Se-Q*je-ae*xe)*Lt,e[7]=(M*je-V*Se+G*xe)*Lt,e[8]=(x*pt-E*ut+A*et)*Lt,e[9]=(u*ut-i*pt-m*et)*Lt,e[10]=(Q*Ce-te*Se+ae*ye)*Lt,e[11]=(B*Se-M*Ce-G*ye)*Lt,e[12]=(E*St-x*It-I*et)*Lt,e[13]=(i*It-u*St+f*et)*Lt,e[14]=(te*xe-Q*Ee-he*ye)*Lt,e[15]=(M*Ee-B*xe+V*ye)*Lt,e):null},a.isChar=rt,a.isMapboxURL=qi,a.keysDifference=function(e,t){var i=[];for(var u in e)u in t||i.push(u);return i},a.makeRequest=pr,a.mapObject=Ze,a.mercatorXfromLng=Vf,a.mercatorYfromLat=qf,a.mercatorZfromAltitude=jf,a.mul=Gp,a.multiply=Pr,a.mvt=pl,a.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},a.normalize=function(e,t){var i=t[0],u=t[1],f=t[2],m=i*i+u*u+f*f;return m>0&&(m=1/Math.sqrt(m)),e[0]=t[0]*m,e[1]=t[1]*m,e[2]=t[2]*m,e},a.number=Sn,a.offscreenCanvasSupported=Qr,a.ortho=function(e,t,i,u,f,m,x){var E=1/(t-i),I=1/(u-f),A=1/(m-x);return e[0]=-2*E,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*I,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*A,e[11]=0,e[12]=(t+i)*E,e[13]=(f+u)*I,e[14]=(x+m)*A,e[15]=1,e},a.parseGlyphPBF=function(e){return new Dc(e).readFields(wy,[])},a.pbf=Dc,a.performSymbolLayout=function(e,t,i,u,f,m,x){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var E=e.layers[0].layout,I=e.layers[0]._unevaluatedLayout._values,A={};if(e.textSizeData.kind==="composite"){var M=e.textSizeData,B=M.maxZoom;A.compositeTextSizes=[I["text-size"].possiblyEvaluate(new ii(M.minZoom),x),I["text-size"].possiblyEvaluate(new ii(B),x)]}if(e.iconSizeData.kind==="composite"){var V=e.iconSizeData,G=V.maxZoom;A.compositeIconSizes=[I["icon-size"].possiblyEvaluate(new ii(V.minZoom),x),I["icon-size"].possiblyEvaluate(new ii(G),x)]}A.layoutTextSize=I["text-size"].possiblyEvaluate(new ii(e.zoom+1),x),A.layoutIconSize=I["icon-size"].possiblyEvaluate(new ii(e.zoom+1),x),A.textMaxSize=I["text-size"].possiblyEvaluate(new ii(18));for(var Q=24*E.get("text-line-height"),te=E.get("text-rotation-alignment")==="map"&&E.get("symbol-placement")!=="point",he=E.get("text-keep-upright"),ae=E.get("text-size"),ye=function(){var Ee=Se[xe],Ce=E.get("text-font").evaluate(Ee,{},x).join(","),je=ae.evaluate(Ee,{},x),et=A.layoutTextSize.evaluate(Ee,{},x),St=A.layoutIconSize.evaluate(Ee,{},x),ut={horizontal:{},vertical:void 0},It=Ee.text,pt=[0,0];if(It){var Qt=It.toString(),Lt=24*E.get("text-letter-spacing").evaluate(Ee,{},x),xt=function(ai){for(var Bi=0,Mi=ai;Bi<Mi.length;Bi+=1)if(_i=Mi[Bi].charCodeAt(0),rt.Arabic(_i)||rt["Arabic Supplement"](_i)||rt["Arabic Extended-A"](_i)||rt["Arabic Presentation Forms-A"](_i)||rt["Arabic Presentation Forms-B"](_i))return!1;var _i;return!0}(Qt)?Lt:0,ti=E.get("text-anchor").evaluate(Ee,{},x),Zt=E.get("text-variable-anchor");if(!Zt){var gi=E.get("text-radial-offset").evaluate(Ee,{},x);pt=gi?Cf(ti,[24*gi,rh]):E.get("text-offset").evaluate(Ee,{},x).map(function(ai){return 24*ai})}var At=te?"center":E.get("text-justify").evaluate(Ee,{},x),zi=E.get("symbol-placement"),$i=zi==="point"?24*E.get("text-max-width").evaluate(Ee,{},x):0,cn=function(){e.allowVerticalPlacement&&$l(Qt)&&(ut.vertical=Bc(It,t,i,f,Ce,$i,Q,ti,"left",xt,pt,ua.vertical,!0,zi,et,je))};if(!te&&Zt){for(var an=At==="auto"?Zt.map(function(ai){return ah(ai)}):[At],en=!1,pn=0;pn<an.length;pn++){var Vn=an[pn];if(!ut.horizontal[Vn])if(en)ut.horizontal[Vn]=ut.horizontal[0];else{var qn=Bc(It,t,i,f,Ce,$i,Q,"center",Vn,xt,pt,ua.horizontal,!1,zi,et,je);qn&&(ut.horizontal[Vn]=qn,en=qn.positionedLines.length===1)}}cn()}else{At==="auto"&&(At=ah(ti));var Sr=Bc(It,t,i,f,Ce,$i,Q,ti,At,xt,pt,ua.horizontal,!1,zi,et,je);Sr&&(ut.horizontal[At]=Sr),cn(),$l(Qt)&&te&&he&&(ut.vertical=Bc(It,t,i,f,Ce,$i,Q,ti,At,xt,pt,ua.vertical,!1,zi,et,je))}}var Yn=void 0,kr=!1;if(Ee.icon&&Ee.icon.name){var gn=u[Ee.icon.name];gn&&(Yn=function(ai,Bi,Mi){var _i=ih(Mi),Mr=Bi[0]-ai.displaySize[0]*_i.horizontalAlign,mr=Bi[1]-ai.displaySize[1]*_i.verticalAlign;return{image:ai,top:mr,bottom:mr+ai.displaySize[1],left:Mr,right:Mr+ai.displaySize[0]}}(f[Ee.icon.name],E.get("icon-offset").evaluate(Ee,{},x),E.get("icon-anchor").evaluate(Ee,{},x)),kr=gn.sdf,e.sdfIcons===void 0?e.sdfIcons=gn.sdf:e.sdfIcons!==gn.sdf&&we("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gn.pixelRatio!==e.pixelRatio||E.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Jn=Df(ut.horizontal)||ut.vertical;e.iconsInText=!!Jn&&Jn.iconsInText,(Jn||Yn)&&function(ai,Bi,Mi,_i,Mr,mr,Hi,En,gr,Ti,io){var ca=mr.textMaxSize.evaluate(Bi,{});ca===void 0&&(ca=Hi);var no,yn=ai.layers[0].layout,ro=yn.get("icon-offset").evaluate(Bi,{},io),Ca=Df(Mi.horizontal),wl=Hi/24,Ds=ai.tilePixelRatio*wl,Sl=ai.tilePixelRatio*ca/24,Bo=ai.tilePixelRatio*En,kl=ai.tilePixelRatio*yn.get("symbol-spacing"),Kc=yn.get("text-padding")*ai.tilePixelRatio,El=yn.get("icon-padding")*ai.tilePixelRatio,bu=yn.get("text-max-angle")/180*Math.PI,Hc=yn.get("text-rotation-alignment")==="map"&&yn.get("symbol-placement")!=="point",Wc=yn.get("icon-rotation-alignment")==="map"&&yn.get("symbol-placement")!=="point",Fo=yn.get("symbol-placement"),xu=kl/2,zl=yn.get("icon-text-fit");_i&&zl!=="none"&&(ai.allowVerticalPlacement&&Mi.vertical&&(no=xf(_i,Mi.vertical,zl,yn.get("icon-text-fit-padding"),ro,wl)),Ca&&(_i=xf(_i,Ca,zl,yn.get("icon-text-fit-padding"),ro,wl)));var is=function(Ky,Au){Au.x<0||Au.x>=8192||Au.y<0||Au.y>=8192||function(_n,Oa,Hy,ns,dh,Yf,ep,ao,tp,Pu,ip,np,mh,Jf,Cu,Qf,$f,ed,td,id,pa,rp,nd,oo,Wy){var rd,Rs,Cl,Ml,Dl,Ll=_n.addToLineVertexArray(Oa,Hy),ad=0,od=0,sd=0,ld=0,gh=-1,yh=-1,Oo={},ud=J(""),_h=0,vh=0;if(ao._unevaluatedLayout.getValue("text-radial-offset")===void 0?(_h=(rd=ao.layout.get("text-offset").evaluate(pa,{},oo).map(function(Du){return 24*Du}))[0],vh=rd[1]):(_h=24*ao.layout.get("text-radial-offset").evaluate(pa,{},oo),vh=rh),_n.allowVerticalPlacement&&ns.vertical){var cd=ao.layout.get("text-rotate").evaluate(pa,{},oo)+90;Ml=new Vc(tp,Oa,Pu,ip,np,ns.vertical,mh,Jf,Cu,cd),ep&&(Dl=new Vc(tp,Oa,Pu,ip,np,ep,$f,ed,Cu,cd))}if(dh){var bh=ao.layout.get("icon-rotate").evaluate(pa,{}),pd=ao.layout.get("icon-text-fit")!=="none",hd=Af(dh,bh,nd,pd),xh=ep?Af(ep,bh,nd,pd):void 0;Cl=new Vc(tp,Oa,Pu,ip,np,dh,$f,ed,!1,bh),ad=4*hd.length;var fd=_n.iconSizeData,Mu=null;fd.kind==="source"?(Mu=[128*ao.layout.get("icon-size").evaluate(pa,{})])[0]>32640&&we(_n.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):fd.kind==="composite"&&((Mu=[128*rp.compositeIconSizes[0].evaluate(pa,{},oo),128*rp.compositeIconSizes[1].evaluate(pa,{},oo)])[0]>32640||Mu[1]>32640)&&we(_n.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),_n.addSymbols(_n.icon,hd,Mu,id,td,pa,!1,Oa,Ll.lineStartIndex,Ll.lineLength,-1,oo),gh=_n.icon.placedSymbolArray.length-1,xh&&(od=4*xh.length,_n.addSymbols(_n.icon,xh,Mu,id,td,pa,ua.vertical,Oa,Ll.lineStartIndex,Ll.lineLength,-1,oo),yh=_n.icon.placedSymbolArray.length-1)}for(var dd in ns.horizontal){var ap=ns.horizontal[dd];if(!Rs){ud=J(ap.text);var Xy=ao.layout.get("text-rotate").evaluate(pa,{},oo);Rs=new Vc(tp,Oa,Pu,ip,np,ap,mh,Jf,Cu,Xy)}var md=ap.positionedLines.length===1;if(sd+=Mf(_n,Oa,ap,Yf,ao,Cu,pa,Qf,Ll,ns.vertical?ua.horizontal:ua.horizontalOnly,md?Object.keys(ns.horizontal):[dd],Oo,gh,rp,oo),md)break}ns.vertical&&(ld+=Mf(_n,Oa,ns.vertical,Yf,ao,Cu,pa,Qf,Ll,ua.vertical,["vertical"],Oo,yh,rp,oo));var Yy=Rs?Rs.boxStartIndex:_n.collisionBoxArray.length,Jy=Rs?Rs.boxEndIndex:_n.collisionBoxArray.length,Qy=Ml?Ml.boxStartIndex:_n.collisionBoxArray.length,$y=Ml?Ml.boxEndIndex:_n.collisionBoxArray.length,e_=Cl?Cl.boxStartIndex:_n.collisionBoxArray.length,t_=Cl?Cl.boxEndIndex:_n.collisionBoxArray.length,i_=Dl?Dl.boxStartIndex:_n.collisionBoxArray.length,n_=Dl?Dl.boxEndIndex:_n.collisionBoxArray.length,so=-1,op=function(Du,yd){return Du&&Du.circleDiameter?Math.max(Du.circleDiameter,yd):yd};so=op(Rs,so),so=op(Ml,so),so=op(Cl,so);var gd=(so=op(Dl,so))>-1?1:0;gd&&(so*=Wy/24),_n.glyphOffsetArray.length>=Li.MAX_GLYPHS&&we("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pa.sortKey!==void 0&&_n.addToSortKeyRanges(_n.symbolInstances.length,pa.sortKey),_n.symbolInstances.emplaceBack(Oa.x,Oa.y,Oo.right>=0?Oo.right:-1,Oo.center>=0?Oo.center:-1,Oo.left>=0?Oo.left:-1,Oo.vertical||-1,gh,yh,ud,Yy,Jy,Qy,$y,e_,t_,i_,n_,Pu,sd,ld,ad,od,gd,0,mh,_h,vh,so)}(ai,Au,Ky,Mi,_i,Mr,no,ai.layers[0],ai.collisionBoxArray,Bi.index,Bi.sourceLayerIndex,ai.index,Ds,Kc,Hc,gr,Bo,El,Wc,ro,Bi,mr,Ti,io,Hi)};if(Fo==="line")for(var Tl=0,Xc=If(Bi.geometry,0,0,8192,8192);Tl<Xc.length;Tl+=1)for(var Yc=Xc[Tl],wu=0,Su=Ay(Yc,kl,bu,Mi.vertical||Ca,_i,24,Sl,ai.overscaling,8192);wu<Su.length;wu+=1){var Jc=Su[wu];Ca&&Dy(ai,Ca.text,xu,Jc)||is(Yc,Jc)}else if(Fo==="line-center")for(var ku=0,Eu=Bi.geometry;ku<Eu.length;ku+=1){var zu=Eu[ku];if(zu.length>1){var Qc=Iy(zu,bu,Mi.vertical||Ca,_i,24,Sl);Qc&&is(zu,Qc)}}else if(Bi.type==="Polygon")for(var Il=0,$c=Jp(Bi.geometry,0);Il<$c.length;Il+=1){var Al=$c[Il],Tu=Cy(Al,16);is(Al[0],new ml(Tu.x,Tu.y,0))}else if(Bi.type==="LineString")for(var Ls=0,Iu=Bi.geometry;Ls<Iu.length;Ls+=1){var Pl=Iu[Ls];is(Pl,new ml(Pl[0].x,Pl[0].y,0))}else if(Bi.type==="Point")for(var ph=0,Wf=Bi.geometry;ph<Wf.length;ph+=1)for(var hh=0,Xf=Wf[ph];hh<Xf.length;hh+=1){var fh=Xf[hh];is([fh],new ml(fh.x,fh.y,0))}}(e,Ee,ut,Yn,u,A,et,St,pt,kr,x)},xe=0,Se=e.features;xe<Se.length;xe+=1)ye();m&&e.generateCollisionDebugBuffers()},a.perspective=function(e,t,i,u,f){var m,x=1/Math.tan(t/2);return e[0]=x/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,f!=null&&f!==1/0?(e[10]=(f+u)*(m=1/(u-f)),e[14]=2*f*u*m):(e[10]=-1,e[14]=-2*u),e},a.pick=function(e,t){for(var i={},u=0;u<t.length;u++){var f=t[u];f in e&&(i[f]=e[f])}return i},a.plugin=ta,a.polygonIntersectsPolygon=$a,a.postMapLoadEvent=Xi,a.postTurnstileEvent=ir,a.potpack=yf,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=yt,a.registerForPluginStateChange=function(e){return e({pluginStatus:jr,pluginURL:Da}),tu.on("pluginStateChange",e),e},a.renderColorRamp=Jh,a.rotate=function(e,t,i){var u=t[0],f=t[1],m=t[2],x=t[3],E=Math.sin(i),I=Math.cos(i);return e[0]=u*I+m*E,e[1]=f*I+x*E,e[2]=u*-E+m*I,e[3]=f*-E+x*I,e},a.rotateX=function(e,t,i){var u=Math.sin(i),f=Math.cos(i),m=t[4],x=t[5],E=t[6],I=t[7],A=t[8],M=t[9],B=t[10],V=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=m*f+A*u,e[5]=x*f+M*u,e[6]=E*f+B*u,e[7]=I*f+V*u,e[8]=A*f-m*u,e[9]=M*f-x*u,e[10]=B*f-E*u,e[11]=V*f-I*u,e},a.rotateZ=function(e,t,i){var u=Math.sin(i),f=Math.cos(i),m=t[0],x=t[1],E=t[2],I=t[3],A=t[4],M=t[5],B=t[6],V=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=m*f+A*u,e[1]=x*f+M*u,e[2]=E*f+B*u,e[3]=I*f+V*u,e[4]=A*f-m*u,e[5]=M*f-x*u,e[6]=B*f-E*u,e[7]=V*f-I*u,e},a.scale=function(e,t,i){var u=i[0],f=i[1],m=i[2];return e[0]=t[0]*u,e[1]=t[1]*u,e[2]=t[2]*u,e[3]=t[3]*u,e[4]=t[4]*f,e[5]=t[5]*f,e[6]=t[6]*f,e[7]=t[7]*f,e[8]=t[8]*m,e[9]=t[9]*m,e[10]=t[10]*m,e[11]=t[11]*m,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},a.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},a.setCacheLimits=function(e,t){Lr=e,Rr=t},a.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),jr==="deferred"||jr==="loading"||jr==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Da=zr.resolveURL(e),jr="deferred",tl=t,xs(),i||ga()},a.sphericalToCartesian=function(e){var t=e[0],i=e[1],u=e[2];return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(u),y:t*Math.sin(i)*Math.sin(u),z:t*Math.cos(u)}},a.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},a.styleSpec=j,a.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},a.symbolSize=Ty,a.transformMat3=function(e,t,i){var u=t[0],f=t[1],m=t[2];return e[0]=u*i[0]+f*i[3]+m*i[6],e[1]=u*i[1]+f*i[4]+m*i[7],e[2]=u*i[2]+f*i[5]+m*i[8],e},a.transformMat4=sl,a.translate=function(e,t,i){var u,f,m,x,E,I,A,M,B,V,G,Q,te=i[0],he=i[1],ae=i[2];return t===e?(e[12]=t[0]*te+t[4]*he+t[8]*ae+t[12],e[13]=t[1]*te+t[5]*he+t[9]*ae+t[13],e[14]=t[2]*te+t[6]*he+t[10]*ae+t[14],e[15]=t[3]*te+t[7]*he+t[11]*ae+t[15]):(f=t[1],m=t[2],x=t[3],E=t[4],I=t[5],A=t[6],M=t[7],B=t[8],V=t[9],G=t[10],Q=t[11],e[0]=u=t[0],e[1]=f,e[2]=m,e[3]=x,e[4]=E,e[5]=I,e[6]=A,e[7]=M,e[8]=B,e[9]=V,e[10]=G,e[11]=Q,e[12]=u*te+E*he+B*ae+t[12],e[13]=f*te+I*he+V*ae+t[13],e[14]=m*te+A*he+G*ae+t[14],e[15]=x*te+M*he+Q*ae+t[15]),e},a.triggerPluginCompletionEvent=zc,a.uniqueId=Ve,a.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},a.validateLight=qp,a.validateStyle=ys,a.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},a.vectorTile=pl,a.version="1.13.2",a.warnOnce=we,a.webpSupported=Tn,a.window=R,a.wrap=me}),v(["./shared"],function(a){function T(L){var U=typeof L;if(U==="number"||U==="boolean"||U==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var q="[",H=0,Y=L;H<Y.length;H+=1)q+=T(Y[H])+",";return q+"]"}for(var ue=Object.keys(L).sort(),fe="{",j=0;j<ue.length;j++)fe+=JSON.stringify(ue[j])+":"+T(L[ue[j]])+",";return fe+"}"}function S(L){for(var U="",q=0,H=a.refProperties;q<H.length;q+=1)U+="/"+T(L[H[q]]);return U}var D=function(L){this.keyCache={},L&&this.replace(L)};D.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},D.prototype.update=function(L,U){for(var q=this,H=0,Y=L;H<Y.length;H+=1){var ue=Y[H];this._layerConfigs[ue.id]=ue;var fe=this._layers[ue.id]=a.createStyleLayer(ue);fe._featureFilter=a.featureFilter(fe.filter),this.keyCache[ue.id]&&delete this.keyCache[ue.id]}for(var j=0,ee=U;j<ee.length;j+=1){var ge=ee[j];delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge]}this.familiesBySource={};for(var De=0,Fe=function(Qe,it){for(var Gt={},ot=0;ot<Qe.length;ot++){var $t=it&&it[Qe[ot].id]||S(Qe[ot]);it&&(it[Qe[ot].id]=$t);var Ei=Gt[$t];Ei||(Ei=Gt[$t]=[]),Ei.push(Qe[ot])}var Ht=[];for(var oi in Gt)Ht.push(Gt[oi]);return Ht}(a.values(this._layerConfigs),this.keyCache);De<Fe.length;De+=1){var ze=Fe[De].map(function(Qe){return q._layers[Qe.id]}),Re=ze[0];if(Re.visibility!=="none"){var gt=Re.source||"",lt=this.familiesBySource[gt];lt||(lt=this.familiesBySource[gt]={});var Ie=Re.sourceLayer||"_geojsonTileLayer",at=lt[Ie];at||(at=lt[Ie]=[]),at.push(ze)}}};var P=function(L){var U={},q=[];for(var H in L){var Y=L[H],ue=U[H]={};for(var fe in Y){var j=Y[+fe];if(j&&j.bitmap.width!==0&&j.bitmap.height!==0){var ee={x:0,y:0,w:j.bitmap.width+2,h:j.bitmap.height+2};q.push(ee),ue[fe]={rect:ee,metrics:j.metrics}}}}var ge=a.potpack(q),De=new a.AlphaImage({width:ge.w||1,height:ge.h||1});for(var Fe in L){var ze=L[Fe];for(var Re in ze){var gt=ze[+Re];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var lt=U[Fe][Re].rect;a.AlphaImage.copy(gt.bitmap,De,{x:0,y:0},{x:lt.x+1,y:lt.y+1},gt.bitmap)}}}this.image=De,this.positions=U};a.register("GlyphAtlas",P);var O=function(L){this.tileID=new a.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function R(L,U,q){for(var H=new a.EvaluationParameters(U),Y=0,ue=L;Y<ue.length;Y+=1)ue[Y].recalculate(H,q)}function X(L,U){var q=a.getArrayBuffer(L.request,function(H,Y,ue,fe){H?U(H):Y&&U(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Y)),rawData:Y,cacheControl:ue,expires:fe})});return function(){q.cancel(),U()}}O.prototype.parse=function(L,U,q,H,Y){var ue=this;this.status="parsing",this.data=L,this.collisionBoxArray=new a.CollisionBoxArray;var fe=new a.DictionaryCoder(Object.keys(L.layers).sort()),j=new a.FeatureIndex(this.tileID,this.promoteId);j.bucketLayerIDs=[];var ee,ge,De,Fe,ze={},Re={featureIndex:j,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:q},gt=U.familiesBySource[this.source];for(var lt in gt){var Ie=L.layers[lt];if(Ie){Ie.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+lt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var at=fe.encode(lt),Qe=[],it=0;it<Ie.length;it++){var Gt=Ie.feature(it),ot=j.getId(Gt,lt);Qe.push({feature:Gt,id:ot,index:it,sourceLayerIndex:at})}for(var $t=0,Ei=gt[lt];$t<Ei.length;$t+=1){var Ht=Ei[$t],oi=Ht[0];oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(R(Ht,this.zoom,q),(ze[oi.id]=oi.createBucket({index:j.bucketLayerIDs.length,layers:Ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:at,sourceID:this.source})).populate(Qe,Re,this.tileID.canonical),j.bucketLayerIDs.push(Ht.map(function(xi){return xi.id})))}}}var ei=a.mapObject(Re.glyphDependencies,function(xi){return Object.keys(xi).map(Number)});Object.keys(ei).length?H.send("getGlyphs",{uid:this.uid,stacks:ei},function(xi,Jt){ee||(ee=xi,ge=Jt,Oi.call(ue))}):ge={};var wn=Object.keys(Re.iconDependencies);wn.length?H.send("getImages",{icons:wn,source:this.source,tileID:this.tileID,type:"icons"},function(xi,Jt){ee||(ee=xi,De=Jt,Oi.call(ue))}):De={};var mi=Object.keys(Re.patternDependencies);function Oi(){if(ee)return Y(ee);if(ge&&De&&Fe){var xi=new P(ge),Jt=new a.ImageAtlas(De,Fe);for(var si in ze){var An=ze[si];An instanceof a.SymbolBucket?(R(An.layers,this.zoom,q),a.performSymbolLayout(An,ge,xi.positions,De,Jt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):An.hasPattern&&(An instanceof a.LineBucket||An instanceof a.FillBucket||An instanceof a.FillExtrusionBucket)&&(R(An.layers,this.zoom,q),An.addFeatures(Re,this.tileID.canonical,Jt.patternPositions))}this.status="done",Y(null,{buckets:a.values(ze).filter(function(fa){return!fa.isEmpty()}),featureIndex:j,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xi.image,imageAtlas:Jt,glyphMap:this.returnDependencies?ge:null,iconMap:this.returnDependencies?De:null,glyphPositions:this.returnDependencies?xi.positions:null})}}mi.length?H.send("getImages",{icons:mi,source:this.source,tileID:this.tileID,type:"patterns"},function(xi,Jt){ee||(ee=xi,Fe=Jt,Oi.call(ue))}):Fe={},Oi.call(this)};var $=function(L,U,q,H){this.actor=L,this.layerIndex=U,this.availableImages=q,this.loadVectorData=H||X,this.loading={},this.loaded={}};$.prototype.loadTile=function(L,U){var q=this,H=L.uid;this.loading||(this.loading={});var Y=!!(L&&L.request&&L.request.collectResourceTiming)&&new a.RequestPerformance(L.request),ue=this.loading[H]=new O(L);ue.abort=this.loadVectorData(L,function(fe,j){if(delete q.loading[H],fe||!j)return ue.status="done",q.loaded[H]=ue,U(fe);var ee=j.rawData,ge={};j.expires&&(ge.expires=j.expires),j.cacheControl&&(ge.cacheControl=j.cacheControl);var De={};if(Y){var Fe=Y.finish();Fe&&(De.resourceTiming=JSON.parse(JSON.stringify(Fe)))}ue.vectorTile=j.vectorTile,ue.parse(j.vectorTile,q.layerIndex,q.availableImages,q.actor,function(ze,Re){if(ze||!Re)return U(ze);U(null,a.extend({rawTileData:ee.slice(0)},Re,ge,De))}),q.loaded=q.loaded||{},q.loaded[H]=ue})},$.prototype.reloadTile=function(L,U){var q=this,H=this.loaded,Y=L.uid,ue=this;if(H&&H[Y]){var fe=H[Y];fe.showCollisionBoxes=L.showCollisionBoxes;var j=function(ee,ge){var De=fe.reloadCallback;De&&(delete fe.reloadCallback,fe.parse(fe.vectorTile,ue.layerIndex,q.availableImages,ue.actor,De)),U(ee,ge)};fe.status==="parsing"?fe.reloadCallback=j:fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,j):j())}},$.prototype.abortTile=function(L,U){var q=this.loading,H=L.uid;q&&q[H]&&q[H].abort&&(q[H].abort(),delete q[H]),U()},$.prototype.removeTile=function(L,U){var q=this.loaded,H=L.uid;q&&q[H]&&delete q[H],U()};var pe=a.window.ImageBitmap,le=function(){this.loaded={}};function me(L,U){if(L.length!==0){ve(L[0],U);for(var q=1;q<L.length;q++)ve(L[q],!U)}}function ve(L,U){for(var q=0,H=0,Y=L.length,ue=Y-1;H<Y;ue=H++)q+=(L[H][0]-L[ue][0])*(L[ue][1]+L[H][1]);q>=0!=!!U&&L.reverse()}le.prototype.loadTile=function(L,U){var q=L.uid,H=L.encoding,Y=L.rawImageData,ue=pe&&Y instanceof pe?this.getImageData(Y):Y,fe=new a.DEMData(q,ue,H);this.loaded=this.loaded||{},this.loaded[q]=fe,U(null,fe)},le.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var U=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:U.width,height:U.height},U.data)},le.prototype.removeTile=function(L){var U=this.loaded,q=L.uid;U&&U[q]&&delete U[q]};var nt=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ve=function(L){this._feature=L,this.extent=a.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};Ve.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],U=0,q=this._feature.geometry;U<q.length;U+=1){var H=q[U];L.push([new a.Point$1(H[0],H[1])])}return L}for(var Y=[],ue=0,fe=this._feature.geometry;ue<fe.length;ue+=1){for(var j=[],ee=0,ge=fe[ue];ee<ge.length;ee+=1){var De=ge[ee];j.push(new a.Point$1(De[0],De[1]))}Y.push(j)}return Y},Ve.prototype.toGeoJSON=function(L,U,q){return nt.call(this,L,U,q)};var Ue=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=L.length,this._features=L};Ue.prototype.feature=function(L){return new Ve(this._features[L])};var tt=a.vectorTile.VectorTileFeature,Vt=qt;function qt(L,U){this.options=U||{},this.features=L,this.length=L.length}function Ze(L,U){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=U||4096}qt.prototype.feature=function(L){return new Ze(this.features[L],this.options.extent)},Ze.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var U=0;U<L.length;U++){for(var q=L[U],H=[],Y=0;Y<q.length;Y++)H.push(new a.Point$1(q[Y][0],q[Y][1]));this.geometry.push(H)}return this.geometry},Ze.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,U=1/0,q=-1/0,H=1/0,Y=-1/0,ue=0;ue<L.length;ue++)for(var fe=L[ue],j=0;j<fe.length;j++){var ee=fe[j];U=Math.min(U,ee.x),q=Math.max(q,ee.x),H=Math.min(H,ee.y),Y=Math.max(Y,ee.y)}return[U,H,q,Y]},Ze.prototype.toGeoJSON=tt.prototype.toGeoJSON;var Xe=jt,wt=Vt;function jt(L){var U=new a.pbf;return function(q,H){for(var Y in q.layers)H.writeMessage(3,we,q.layers[Y])}(L,U),U.finish()}function we(L,U){var q;U.writeVarintField(15,L.version||1),U.writeStringField(1,L.name||""),U.writeVarintField(5,L.extent||4096);var H={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<L.length;q++)H.feature=L.feature(q),U.writeMessage(2,qe,H);var Y=H.keys;for(q=0;q<Y.length;q++)U.writeStringField(3,Y[q]);var ue=H.values;for(q=0;q<ue.length;q++)U.writeMessage(4,Mt,ue[q])}function qe(L,U){var q=L.feature;q.id!==void 0&&U.writeVarintField(1,q.id),U.writeMessage(2,Be,L),U.writeVarintField(3,q.type),U.writeMessage(4,mt,q)}function Be(L,U){var q=L.feature,H=L.keys,Y=L.values,ue=L.keycache,fe=L.valuecache;for(var j in q.properties){var ee=ue[j];ee===void 0&&(H.push(j),ue[j]=ee=H.length-1),U.writeVarint(ee);var ge=q.properties[j],De=typeof ge;De!=="string"&&De!=="boolean"&&De!=="number"&&(ge=JSON.stringify(ge));var Fe=De+":"+ge,ze=fe[Fe];ze===void 0&&(Y.push(ge),fe[Fe]=ze=Y.length-1),U.writeVarint(ze)}}function Ye(L,U){return(U<<3)+(7&L)}function ht(L){return L<<1^L>>31}function mt(L,U){for(var q=L.loadGeometry(),H=L.type,Y=0,ue=0,fe=q.length,j=0;j<fe;j++){var ee=q[j],ge=1;H===1&&(ge=ee.length),U.writeVarint(Ye(1,ge));for(var De=H===3?ee.length-1:ee.length,Fe=0;Fe<De;Fe++){Fe===1&&H!==1&&U.writeVarint(Ye(2,De-1));var ze=ee[Fe].x-Y,Re=ee[Fe].y-ue;U.writeVarint(ht(ze)),U.writeVarint(ht(Re)),Y+=ze,ue+=Re}H===3&&U.writeVarint(Ye(7,1))}}function Mt(L,U){var q=typeof L;q==="string"?U.writeStringField(1,L):q==="boolean"?U.writeBooleanField(7,L):q==="number"&&(L%1!=0?U.writeDoubleField(3,L):L<0?U.writeSVarintField(6,L):U.writeVarintField(5,L))}function ki(L,U,q,H){Je(L,q,H),Je(U,2*q,2*H),Je(U,2*q+1,2*H+1)}function Je(L,U,q){var H=L[U];L[U]=L[q],L[q]=H}function vt(L,U,q,H){var Y=L-q,ue=U-H;return Y*Y+ue*ue}Xe.fromVectorTileJs=jt,Xe.fromGeojsonVt=function(L,U){U=U||{};var q={};for(var H in L)q[H]=new Vt(L[H].features,U),q[H].name=H,q[H].version=U.version,q[H].extent=U.extent;return jt({layers:q})},Xe.GeoJSONWrapper=wt;var vi=function(L){return L[0]},vn=function(L){return L[1]},$n=function(L,U,q,H,Y){U===void 0&&(U=vi),q===void 0&&(q=vn),H===void 0&&(H=64),Y===void 0&&(Y=Float64Array),this.nodeSize=H,this.points=L;for(var ue=L.length<65536?Uint16Array:Uint32Array,fe=this.ids=new ue(L.length),j=this.coords=new Y(2*L.length),ee=0;ee<L.length;ee++)fe[ee]=ee,j[2*ee]=U(L[ee]),j[2*ee+1]=q(L[ee]);(function ge(De,Fe,ze,Re,gt,lt){if(!(gt-Re<=ze)){var Ie=Re+gt>>1;(function at(Qe,it,Gt,ot,$t,Ei){for(;$t>ot;){if($t-ot>600){var Ht=$t-ot+1,oi=Gt-ot+1,ei=Math.log(Ht),wn=.5*Math.exp(2*ei/3),mi=.5*Math.sqrt(ei*wn*(Ht-wn)/Ht)*(oi-Ht/2<0?-1:1);at(Qe,it,Gt,Math.max(ot,Math.floor(Gt-oi*wn/Ht+mi)),Math.min($t,Math.floor(Gt+(Ht-oi)*wn/Ht+mi)),Ei)}var Oi=it[2*Gt+Ei],xi=ot,Jt=$t;for(ki(Qe,it,ot,Gt),it[2*$t+Ei]>Oi&&ki(Qe,it,ot,$t);xi<Jt;){for(ki(Qe,it,xi,Jt),xi++,Jt--;it[2*xi+Ei]<Oi;)xi++;for(;it[2*Jt+Ei]>Oi;)Jt--}it[2*ot+Ei]===Oi?ki(Qe,it,ot,Jt):ki(Qe,it,++Jt,$t),Jt<=Gt&&(ot=Jt+1),Gt<=Jt&&($t=Jt-1)}})(De,Fe,Ie,Re,gt,lt%2),ge(De,Fe,ze,Re,Ie-1,lt+1),ge(De,Fe,ze,Ie+1,gt,lt+1)}})(fe,j,H,0,fe.length-1,0)};$n.prototype.range=function(L,U,q,H){return function(Y,ue,fe,j,ee,ge,De){for(var Fe,ze,Re=[0,Y.length-1,0],gt=[];Re.length;){var lt=Re.pop(),Ie=Re.pop(),at=Re.pop();if(Ie-at<=De)for(var Qe=at;Qe<=Ie;Qe++)ze=ue[2*Qe+1],(Fe=ue[2*Qe])>=fe&&Fe<=ee&&ze>=j&&ze<=ge&&gt.push(Y[Qe]);else{var it=Math.floor((at+Ie)/2);ze=ue[2*it+1],(Fe=ue[2*it])>=fe&&Fe<=ee&&ze>=j&&ze<=ge&&gt.push(Y[it]);var Gt=(lt+1)%2;(lt===0?fe<=Fe:j<=ze)&&(Re.push(at),Re.push(it-1),Re.push(Gt)),(lt===0?ee>=Fe:ge>=ze)&&(Re.push(it+1),Re.push(Ie),Re.push(Gt))}}return gt}(this.ids,this.coords,L,U,q,H,this.nodeSize)},$n.prototype.within=function(L,U,q){return function(H,Y,ue,fe,j,ee){for(var ge=[0,H.length-1,0],De=[],Fe=j*j;ge.length;){var ze=ge.pop(),Re=ge.pop(),gt=ge.pop();if(Re-gt<=ee)for(var lt=gt;lt<=Re;lt++)vt(Y[2*lt],Y[2*lt+1],ue,fe)<=Fe&&De.push(H[lt]);else{var Ie=Math.floor((gt+Re)/2),at=Y[2*Ie],Qe=Y[2*Ie+1];vt(at,Qe,ue,fe)<=Fe&&De.push(H[Ie]);var it=(ze+1)%2;(ze===0?ue-j<=at:fe-j<=Qe)&&(ge.push(gt),ge.push(Ie-1),ge.push(it)),(ze===0?ue+j>=at:fe+j>=Qe)&&(ge.push(Ie+1),ge.push(Re),ge.push(it))}}return De}(this.ids,this.coords,L,U,q,this.nodeSize)};var zn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},Fi=function(L){this.options=cr(Object.create(zn),L),this.trees=new Array(this.options.maxZoom+1)};function zr(L,U,q,H,Y){return{x:L,y:U,zoom:1/0,id:q,parentId:-1,numPoints:H,properties:Y}}function bi(L,U){var q=L.geometry.coordinates,H=q[1];return{x:bn(q[0]),y:Xt(H),zoom:1/0,index:U,parentId:-1}}function Tn(L){return{type:"Feature",id:L.id,properties:Jr(L),geometry:{type:"Point",coordinates:[(H=L.x,360*(H-.5)),(U=L.y,q=(180-360*U)*Math.PI/180,360*Math.atan(Math.exp(q))/Math.PI-90)]}};var U,q,H}function Jr(L){var U=L.numPoints,q=U>=1e4?Math.round(U/1e3)+"k":U>=1e3?Math.round(U/100)/10+"k":U;return cr(cr({},L.properties),{cluster:!0,cluster_id:L.id,point_count:U,point_count_abbreviated:q})}function bn(L){return L/360+.5}function Xt(L){var U=Math.sin(L*Math.PI/180),q=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return q<0?0:q>1?1:q}function cr(L,U){for(var q in U)L[q]=U[q];return L}function fi(L){return L.x}function qi(L){return L.y}function Dr(L,U,q,H,Y,ue){var fe=Y-q,j=ue-H;if(fe!==0||j!==0){var ee=((L-q)*fe+(U-H)*j)/(fe*fe+j*j);ee>1?(q=Y,H=ue):ee>0&&(q+=fe*ee,H+=j*ee)}return(fe=L-q)*fe+(j=U-H)*j}function nn(L,U,q,H){var Y={id:L===void 0?null:L,type:U,geometry:q,tags:H,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ue){var fe=ue.geometry,j=ue.type;if(j==="Point"||j==="MultiPoint"||j==="LineString")yr(ue,fe);else if(j==="Polygon"||j==="MultiLineString")for(var ee=0;ee<fe.length;ee++)yr(ue,fe[ee]);else if(j==="MultiPolygon")for(ee=0;ee<fe.length;ee++)for(var ge=0;ge<fe[ee].length;ge++)yr(ue,fe[ee][ge])}(Y),Y}function yr(L,U){for(var q=0;q<U.length;q+=3)L.minX=Math.min(L.minX,U[q]),L.minY=Math.min(L.minY,U[q+1]),L.maxX=Math.max(L.maxX,U[q]),L.maxY=Math.max(L.maxY,U[q+1])}function ji(L,U,q,H){if(U.geometry){var Y=U.geometry.coordinates,ue=U.geometry.type,fe=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),j=[],ee=U.id;if(q.promoteId?ee=U.properties[q.promoteId]:q.generateId&&(ee=H||0),ue==="Point")er(Y,j);else if(ue==="MultiPoint")for(var ge=0;ge<Y.length;ge++)er(Y[ge],j);else if(ue==="LineString")xn(Y,j,fe,!1);else if(ue==="MultiLineString"){if(q.lineMetrics){for(ge=0;ge<Y.length;ge++)xn(Y[ge],j=[],fe,!1),L.push(nn(ee,"LineString",j,U.properties));return}hn(Y,j,fe,!1)}else if(ue==="Polygon")hn(Y,j,fe,!0);else{if(ue!=="MultiPolygon"){if(ue==="GeometryCollection"){for(ge=0;ge<U.geometry.geometries.length;ge++)ji(L,{id:ee,geometry:U.geometry.geometries[ge],properties:U.properties},q,H);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ge=0;ge<Y.length;ge++){var De=[];hn(Y[ge],De,fe,!0),j.push(De)}}L.push(nn(ee,ue,j,U.properties))}}function er(L,U){U.push(Gi(L[0])),U.push(tr(L[1])),U.push(0)}function xn(L,U,q,H){for(var Y,ue,fe=0,j=0;j<L.length;j++){var ee=Gi(L[j][0]),ge=tr(L[j][1]);U.push(ee),U.push(ge),U.push(0),j>0&&(fe+=H?(Y*ge-ee*ue)/2:Math.sqrt(Math.pow(ee-Y,2)+Math.pow(ge-ue,2))),Y=ee,ue=ge}var De=U.length-3;U[2]=1,function Fe(ze,Re,gt,lt){for(var Ie,at=lt,Qe=gt-Re>>1,it=gt-Re,Gt=ze[Re],ot=ze[Re+1],$t=ze[gt],Ei=ze[gt+1],Ht=Re+3;Ht<gt;Ht+=3){var oi=Dr(ze[Ht],ze[Ht+1],Gt,ot,$t,Ei);if(oi>at)Ie=Ht,at=oi;else if(oi===at){var ei=Math.abs(Ht-Qe);ei<it&&(Ie=Ht,it=ei)}}at>lt&&(Ie-Re>3&&Fe(ze,Re,Ie,lt),ze[Ie+2]=at,gt-Ie>3&&Fe(ze,Ie,gt,lt))}(U,0,De,q),U[De+2]=1,U.size=Math.abs(fe),U.start=0,U.end=U.size}function hn(L,U,q,H){for(var Y=0;Y<L.length;Y++){var ue=[];xn(L[Y],ue,q,H),U.push(ue)}}function Gi(L){return L/360+.5}function tr(L){var U=Math.sin(L*Math.PI/180),q=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return q<0?0:q>1?1:q}function Wi(L,U,q,H,Y,ue,fe,j){if(H/=U,ue>=(q/=U)&&fe<H)return L;if(fe<q||ue>=H)return null;for(var ee=[],ge=0;ge<L.length;ge++){var De=L[ge],Fe=De.geometry,ze=De.type,Re=Y===0?De.minX:De.minY,gt=Y===0?De.maxX:De.maxY;if(Re>=q&&gt<H)ee.push(De);else if(!(gt<q||Re>=H)){var lt=[];if(ze==="Point"||ze==="MultiPoint")Tr(Fe,lt,q,H,Y);else if(ze==="LineString")ir(Fe,lt,q,H,Y,!1,j.lineMetrics);else if(ze==="MultiLineString")Xi(Fe,lt,q,H,Y,!1);else if(ze==="Polygon")Xi(Fe,lt,q,H,Y,!0);else if(ze==="MultiPolygon")for(var Ie=0;Ie<Fe.length;Ie++){var at=[];Xi(Fe[Ie],at,q,H,Y,!0),at.length&&lt.push(at)}if(lt.length){if(j.lineMetrics&&ze==="LineString"){for(Ie=0;Ie<lt.length;Ie++)ee.push(nn(De.id,ze,lt[Ie],De.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(lt.length===1?(ze="LineString",lt=lt[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=lt.length===3?"Point":"MultiPoint"),ee.push(nn(De.id,ze,lt,De.tags))}}}return ee.length?ee:null}function Tr(L,U,q,H,Y){for(var ue=0;ue<L.length;ue+=3){var fe=L[ue+Y];fe>=q&&fe<=H&&(U.push(L[ue]),U.push(L[ue+1]),U.push(L[ue+2]))}}function ir(L,U,q,H,Y,ue,fe){for(var j,ee,ge=jn(L),De=Y===0?Rr:fn,Fe=L.start,ze=0;ze<L.length-3;ze+=3){var Re=L[ze],gt=L[ze+1],lt=L[ze+2],Ie=L[ze+3],at=L[ze+4],Qe=Y===0?Re:gt,it=Y===0?Ie:at,Gt=!1;fe&&(j=Math.sqrt(Math.pow(Re-Ie,2)+Math.pow(gt-at,2))),Qe<q?it>q&&(ee=De(ge,Re,gt,Ie,at,q),fe&&(ge.start=Fe+j*ee)):Qe>H?it<H&&(ee=De(ge,Re,gt,Ie,at,H),fe&&(ge.start=Fe+j*ee)):Lr(ge,Re,gt,lt),it<q&&Qe>=q&&(ee=De(ge,Re,gt,Ie,at,q),Gt=!0),it>H&&Qe<=H&&(ee=De(ge,Re,gt,Ie,at,H),Gt=!0),!ue&&Gt&&(fe&&(ge.end=Fe+j*ee),U.push(ge),ge=jn(L)),fe&&(Fe+=j)}var ot=L.length-3;Re=L[ot],gt=L[ot+1],lt=L[ot+2],(Qe=Y===0?Re:gt)>=q&&Qe<=H&&Lr(ge,Re,gt,lt),ot=ge.length-3,ue&&ot>=3&&(ge[ot]!==ge[0]||ge[ot+1]!==ge[1])&&Lr(ge,ge[0],ge[1],ge[2]),ge.length&&U.push(ge)}function jn(L){var U=[];return U.size=L.size,U.start=L.start,U.end=L.end,U}function Xi(L,U,q,H,Y,ue){for(var fe=0;fe<L.length;fe++)ir(L[fe],U,q,H,Y,ue,!1)}function Lr(L,U,q,H){L.push(U),L.push(q),L.push(H)}function Rr(L,U,q,H,Y,ue){var fe=(ue-U)/(H-U);return L.push(ue),L.push(q+(Y-q)*fe),L.push(1),fe}function fn(L,U,q,H,Y,ue){var fe=(ue-q)/(Y-q);return L.push(U+(H-U)*fe),L.push(ue),L.push(1),fe}function ra(L,U){for(var q=[],H=0;H<L.length;H++){var Y,ue=L[H],fe=ue.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")Y=Ir(ue.geometry,U);else if(fe==="MultiLineString"||fe==="Polygon"){Y=[];for(var j=0;j<ue.geometry.length;j++)Y.push(Ir(ue.geometry[j],U))}else if(fe==="MultiPolygon")for(Y=[],j=0;j<ue.geometry.length;j++){for(var ee=[],ge=0;ge<ue.geometry[j].length;ge++)ee.push(Ir(ue.geometry[j][ge],U));Y.push(ee)}q.push(nn(ue.id,fe,Y,ue.tags))}return q}function Ir(L,U){var q=[];q.size=L.size,L.start!==void 0&&(q.start=L.start,q.end=L.end);for(var H=0;H<L.length;H+=3)q.push(L[H]+U,L[H+1],L[H+2]);return q}function Yi(L,U){if(L.transformed)return L;var q,H,Y,ue=1<<L.z,fe=L.x,j=L.y;for(q=0;q<L.features.length;q++){var ee=L.features[q],ge=ee.geometry,De=ee.type;if(ee.geometry=[],De===1)for(H=0;H<ge.length;H+=2)ee.geometry.push(Qr(ge[H],ge[H+1],U,ue,fe,j));else for(H=0;H<ge.length;H++){var Fe=[];for(Y=0;Y<ge[H].length;Y+=2)Fe.push(Qr(ge[H][Y],ge[H][Y+1],U,ue,fe,j));ee.geometry.push(Fe)}}return L.transformed=!0,L}function Qr(L,U,q,H,Y,ue){return[Math.round(q*(L*H-Y)),Math.round(q*(U*H-ue))]}function Br(L,U,q,H,Y){for(var ue=U===Y.maxZoom?0:Y.tolerance/((1<<U)*Y.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:H,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},j=0;j<L.length;j++){fe.numFeatures++,In(fe,L[j],ue,Y);var ee=L[j].minX,ge=L[j].minY,De=L[j].maxX,Fe=L[j].maxY;ee<fe.minX&&(fe.minX=ee),ge<fe.minY&&(fe.minY=ge),De>fe.maxX&&(fe.maxX=De),Fe>fe.maxY&&(fe.maxY=Fe)}return fe}function In(L,U,q,H){var Y=U.geometry,ue=U.type,fe=[];if(ue==="Point"||ue==="MultiPoint")for(var j=0;j<Y.length;j+=3)fe.push(Y[j]),fe.push(Y[j+1]),L.numPoints++,L.numSimplified++;else if(ue==="LineString")N(fe,Y,L,q,!1,!1);else if(ue==="MultiLineString"||ue==="Polygon")for(j=0;j<Y.length;j++)N(fe,Y[j],L,q,ue==="Polygon",j===0);else if(ue==="MultiPolygon")for(var ee=0;ee<Y.length;ee++){var ge=Y[ee];for(j=0;j<ge.length;j++)N(fe,ge[j],L,q,!0,j===0)}if(fe.length){var De=U.tags||null;if(ue==="LineString"&&H.lineMetrics){for(var Fe in De={},U.tags)De[Fe]=U.tags[Fe];De.mapbox_clip_start=Y.start/Y.size,De.mapbox_clip_end=Y.end/Y.size}var ze={geometry:fe,type:ue==="Polygon"||ue==="MultiPolygon"?3:ue==="LineString"||ue==="MultiLineString"?2:1,tags:De};U.id!==null&&(ze.id=U.id),L.features.push(ze)}}function N(L,U,q,H,Y,ue){var fe=H*H;if(H>0&&U.size<(Y?fe:H))q.numPoints+=U.length/3;else{for(var j=[],ee=0;ee<U.length;ee+=3)(H===0||U[ee+2]>fe)&&(q.numSimplified++,j.push(U[ee]),j.push(U[ee+1])),q.numPoints++;Y&&function(ge,De){for(var Fe=0,ze=0,Re=ge.length,gt=Re-2;ze<Re;gt=ze,ze+=2)Fe+=(ge[ze]-ge[gt])*(ge[ze+1]+ge[gt+1]);if(Fe>0===De)for(ze=0,Re=ge.length;ze<Re/2;ze+=2){var lt=ge[ze],Ie=ge[ze+1];ge[ze]=ge[Re-2-ze],ge[ze+1]=ge[Re-1-ze],ge[Re-2-ze]=lt,ge[Re-1-ze]=Ie}}(j,ue),L.push(j)}}function st(L,U){var q=(U=this.options=function(Y,ue){for(var fe in ue)Y[fe]=ue[fe];return Y}(Object.create(this.options),U)).debug;if(q&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var H=function(Y,ue){var fe=[];if(Y.type==="FeatureCollection")for(var j=0;j<Y.features.length;j++)ji(fe,Y.features[j],ue,j);else ji(fe,Y.type==="Feature"?Y:{geometry:Y},ue);return fe}(L,U);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(H=function(Y,ue){var fe=ue.buffer/ue.extent,j=Y,ee=Wi(Y,1,-1-fe,fe,0,-1,2,ue),ge=Wi(Y,1,1-fe,2+fe,0,-1,2,ue);return(ee||ge)&&(j=Wi(Y,1,-fe,1+fe,0,-1,2,ue)||[],ee&&(j=ra(ee,1).concat(j)),ge&&(j=j.concat(ra(ge,-1)))),j}(H,U)).length&&this.splitTile(H,0,0,0),q&&(H.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function dn(L,U,q){return 32*((1<<L)*q+U)+L}function pr(L,U){var q=L.tileID.canonical;if(!this._geoJSONIndex)return U(null,null);var H=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!H)return U(null,null);var Y=new Ue(H.features),ue=Xe(Y);ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),U(null,{vectorTile:Y,rawData:ue.buffer})}Fi.prototype.load=function(L){var U=this.options,q=U.log,H=U.minZoom,Y=U.maxZoom,ue=U.nodeSize;q&&console.time("total time");var fe="prepare "+L.length+" points";q&&console.time(fe),this.points=L;for(var j=[],ee=0;ee<L.length;ee++)L[ee].geometry&&j.push(bi(L[ee],ee));this.trees[Y+1]=new $n(j,fi,qi,ue,Float32Array),q&&console.timeEnd(fe);for(var ge=Y;ge>=H;ge--){var De=+Date.now();j=this._cluster(j,ge),this.trees[ge]=new $n(j,fi,qi,ue,Float32Array),q&&console.log("z%d: %d clusters in %dms",ge,j.length,+Date.now()-De)}return q&&console.timeEnd("total time"),this},Fi.prototype.getClusters=function(L,U){var q=((L[0]+180)%360+360)%360-180,H=Math.max(-90,Math.min(90,L[1])),Y=L[2]===180?180:((L[2]+180)%360+360)%360-180,ue=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)q=-180,Y=180;else if(q>Y){var fe=this.getClusters([q,H,180,ue],U),j=this.getClusters([-180,H,Y,ue],U);return fe.concat(j)}for(var ee=this.trees[this._limitZoom(U)],ge=[],De=0,Fe=ee.range(bn(q),Xt(ue),bn(Y),Xt(H));De<Fe.length;De+=1){var ze=ee.points[Fe[De]];ge.push(ze.numPoints?Tn(ze):this.points[ze.index])}return ge},Fi.prototype.getChildren=function(L){var U=this._getOriginId(L),q=this._getOriginZoom(L),H="No cluster with the specified id.",Y=this.trees[q];if(!Y)throw new Error(H);var ue=Y.points[U];if(!ue)throw new Error(H);for(var fe=this.options.radius/(this.options.extent*Math.pow(2,q-1)),j=[],ee=0,ge=Y.within(ue.x,ue.y,fe);ee<ge.length;ee+=1){var De=Y.points[ge[ee]];De.parentId===L&&j.push(De.numPoints?Tn(De):this.points[De.index])}if(j.length===0)throw new Error(H);return j},Fi.prototype.getLeaves=function(L,U,q){var H=[];return this._appendLeaves(H,L,U=U||10,q=q||0,0),H},Fi.prototype.getTile=function(L,U,q){var H=this.trees[this._limitZoom(L)],Y=Math.pow(2,L),ue=this.options,fe=ue.radius/ue.extent,j=(q-fe)/Y,ee=(q+1+fe)/Y,ge={features:[]};return this._addTileFeatures(H.range((U-fe)/Y,j,(U+1+fe)/Y,ee),H.points,U,q,Y,ge),U===0&&this._addTileFeatures(H.range(1-fe/Y,j,1,ee),H.points,Y,q,Y,ge),U===Y-1&&this._addTileFeatures(H.range(0,j,fe/Y,ee),H.points,-1,q,Y,ge),ge.features.length?ge:null},Fi.prototype.getClusterExpansionZoom=function(L){for(var U=this._getOriginZoom(L)-1;U<=this.options.maxZoom;){var q=this.getChildren(L);if(U++,q.length!==1)break;L=q[0].properties.cluster_id}return U},Fi.prototype._appendLeaves=function(L,U,q,H,Y){for(var ue=0,fe=this.getChildren(U);ue<fe.length;ue+=1){var j=fe[ue],ee=j.properties;if(ee&&ee.cluster?Y+ee.point_count<=H?Y+=ee.point_count:Y=this._appendLeaves(L,ee.cluster_id,q,H,Y):Y<H?Y++:L.push(j),L.length===q)break}return Y},Fi.prototype._addTileFeatures=function(L,U,q,H,Y,ue){for(var fe=0,j=L;fe<j.length;fe+=1){var ee=U[j[fe]],ge=ee.numPoints,De={type:1,geometry:[[Math.round(this.options.extent*(ee.x*Y-q)),Math.round(this.options.extent*(ee.y*Y-H))]],tags:ge?Jr(ee):this.points[ee.index].properties},Fe=void 0;ge?Fe=ee.id:this.options.generateId?Fe=ee.index:this.points[ee.index].id&&(Fe=this.points[ee.index].id),Fe!==void 0&&(De.id=Fe),ue.features.push(De)}},Fi.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},Fi.prototype._cluster=function(L,U){for(var q=[],H=this.options,Y=H.reduce,ue=H.minPoints,fe=H.radius/(H.extent*Math.pow(2,U)),j=0;j<L.length;j++){var ee=L[j];if(!(ee.zoom<=U)){ee.zoom=U;for(var ge=this.trees[U+1],De=ge.within(ee.x,ee.y,fe),Fe=ee.numPoints||1,ze=Fe,Re=0,gt=De;Re<gt.length;Re+=1){var lt=ge.points[gt[Re]];lt.zoom>U&&(ze+=lt.numPoints||1)}if(ze>=ue){for(var Ie=ee.x*Fe,at=ee.y*Fe,Qe=Y&&Fe>1?this._map(ee,!0):null,it=(j<<5)+(U+1)+this.points.length,Gt=0,ot=De;Gt<ot.length;Gt+=1){var $t=ge.points[ot[Gt]];if(!($t.zoom<=U)){$t.zoom=U;var Ei=$t.numPoints||1;Ie+=$t.x*Ei,at+=$t.y*Ei,$t.parentId=it,Y&&(Qe||(Qe=this._map(ee,!0)),Y(Qe,this._map($t)))}}ee.parentId=it,q.push(zr(Ie/ze,at/ze,it,ze,Qe))}else if(q.push(ee),ze>1)for(var Ht=0,oi=De;Ht<oi.length;Ht+=1){var ei=ge.points[oi[Ht]];ei.zoom<=U||(ei.zoom=U,q.push(ei))}}}return q},Fi.prototype._getOriginId=function(L){return L-this.points.length>>5},Fi.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},Fi.prototype._map=function(L,U){if(L.numPoints)return U?cr({},L.properties):L.properties;var q=this.points[L.index].properties,H=this.options.map(q);return U&&H===q?cr({},H):H},st.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},st.prototype.splitTile=function(L,U,q,H,Y,ue,fe){for(var j=[L,U,q,H],ee=this.options,ge=ee.debug;j.length;){H=j.pop(),q=j.pop(),U=j.pop(),L=j.pop();var De=1<<U,Fe=dn(U,q,H),ze=this.tiles[Fe];if(!ze&&(ge>1&&console.time("creation"),ze=this.tiles[Fe]=Br(L,U,q,H,ee),this.tileCoords.push({z:U,x:q,y:H}),ge)){ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,q,H,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));var Re="z"+U;this.stats[Re]=(this.stats[Re]||0)+1,this.total++}if(ze.source=L,Y){if(U===ee.maxZoom||U===Y)continue;var gt=1<<Y-U;if(q!==Math.floor(ue/gt)||H!==Math.floor(fe/gt))continue}else if(U===ee.indexMaxZoom||ze.numPoints<=ee.indexMaxPoints)continue;if(ze.source=null,L.length!==0){ge>1&&console.time("clipping");var lt,Ie,at,Qe,it,Gt,ot=.5*ee.buffer/ee.extent,$t=.5-ot,Ei=.5+ot,Ht=1+ot;lt=Ie=at=Qe=null,it=Wi(L,De,q-ot,q+Ei,0,ze.minX,ze.maxX,ee),Gt=Wi(L,De,q+$t,q+Ht,0,ze.minX,ze.maxX,ee),L=null,it&&(lt=Wi(it,De,H-ot,H+Ei,1,ze.minY,ze.maxY,ee),Ie=Wi(it,De,H+$t,H+Ht,1,ze.minY,ze.maxY,ee),it=null),Gt&&(at=Wi(Gt,De,H-ot,H+Ei,1,ze.minY,ze.maxY,ee),Qe=Wi(Gt,De,H+$t,H+Ht,1,ze.minY,ze.maxY,ee),Gt=null),ge>1&&console.timeEnd("clipping"),j.push(lt||[],U+1,2*q,2*H),j.push(Ie||[],U+1,2*q,2*H+1),j.push(at||[],U+1,2*q+1,2*H),j.push(Qe||[],U+1,2*q+1,2*H+1)}}},st.prototype.getTile=function(L,U,q){var H=this.options,Y=H.extent,ue=H.debug;if(L<0||L>24)return null;var fe=1<<L,j=dn(L,U=(U%fe+fe)%fe,q);if(this.tiles[j])return Yi(this.tiles[j],Y);ue>1&&console.log("drilling down to z%d-%d-%d",L,U,q);for(var ee,ge=L,De=U,Fe=q;!ee&&ge>0;)ge--,De=Math.floor(De/2),Fe=Math.floor(Fe/2),ee=this.tiles[dn(ge,De,Fe)];return ee&&ee.source?(ue>1&&console.log("found parent tile z%d-%d-%d",ge,De,Fe),ue>1&&console.time("drilling down"),this.splitTile(ee.source,ge,De,Fe,L,U,q),ue>1&&console.timeEnd("drilling down"),this.tiles[j]?Yi(this.tiles[j],Y):null):null};var on=function(L){function U(q,H,Y,ue){L.call(this,q,H,Y,pr),ue&&(this.loadGeoJSON=ue)}return L&&(U.__proto__=L),(U.prototype=Object.create(L&&L.prototype)).constructor=U,U.prototype.loadData=function(q,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=H,this._pendingLoadDataParams=q,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},U.prototype._loadData=function(){var q=this;if(this._pendingCallback&&this._pendingLoadDataParams){var H=this._pendingCallback,Y=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ue=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.RequestPerformance(Y.request);this.loadGeoJSON(Y,function(fe,j){if(fe||!j)return H(fe);if(typeof j!="object")return H(new Error("Input data given to '"+Y.source+"' is not a valid GeoJSON object."));(function ze(Re,gt){var lt,Ie=Re&&Re.type;if(Ie==="FeatureCollection")for(lt=0;lt<Re.features.length;lt++)ze(Re.features[lt],gt);else if(Ie==="GeometryCollection")for(lt=0;lt<Re.geometries.length;lt++)ze(Re.geometries[lt],gt);else if(Ie==="Feature")ze(Re.geometry,gt);else if(Ie==="Polygon")me(Re.coordinates,gt);else if(Ie==="MultiPolygon")for(lt=0;lt<Re.coordinates.length;lt++)me(Re.coordinates[lt],gt);return Re})(j,!0);try{if(Y.filter){var ee=a.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ee.result==="error")throw new Error(ee.value.map(function(ze){return ze.key+": "+ze.message}).join(", "));var ge=j.features.filter(function(ze){return ee.value.evaluate({zoom:0},ze)});j={type:"FeatureCollection",features:ge}}q._geoJSONIndex=Y.cluster?new Fi(function(ze){var Re=ze.superclusterOptions,gt=ze.clusterProperties;if(!gt||!Re)return Re;for(var lt={},Ie={},at={accumulated:null,zoom:0},Qe={properties:null},it=Object.keys(gt),Gt=0,ot=it;Gt<ot.length;Gt+=1){var $t=ot[Gt],Ei=gt[$t],Ht=Ei[0],oi=a.createExpression(Ei[1]),ei=a.createExpression(typeof Ht=="string"?[Ht,["accumulated"],["get",$t]]:Ht);lt[$t]=oi.value,Ie[$t]=ei.value}return Re.map=function(wn){Qe.properties=wn;for(var mi={},Oi=0,xi=it;Oi<xi.length;Oi+=1){var Jt=xi[Oi];mi[Jt]=lt[Jt].evaluate(at,Qe)}return mi},Re.reduce=function(wn,mi){Qe.properties=mi;for(var Oi=0,xi=it;Oi<xi.length;Oi+=1){var Jt=xi[Oi];at.accumulated=wn[Jt],wn[Jt]=Ie[Jt].evaluate(at,Qe)}},Re}(Y)).load(j.features):function(ze,Re){return new st(ze,Re)}(j,Y.geojsonVtOptions)}catch(ze){return H(ze)}q.loaded={};var De={};if(ue){var Fe=ue.finish();Fe&&(De.resourceTiming={},De.resourceTiming[Y.source]=JSON.parse(JSON.stringify(Fe)))}H(null,De)})}},U.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},U.prototype.reloadTile=function(q,H){var Y=this.loaded;return Y&&Y[q.uid]?L.prototype.reloadTile.call(this,q,H):this.loadTile(q,H)},U.prototype.loadGeoJSON=function(q,H){if(q.request)a.getJSON(q.request,H);else{if(typeof q.data!="string")return H(new Error("Input data given to '"+q.source+"' is not a valid GeoJSON object."));try{return H(null,JSON.parse(q.data))}catch{return H(new Error("Input data given to '"+q.source+"' is not a valid GeoJSON object."))}}},U.prototype.removeSource=function(q,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),H()},U.prototype.getClusterExpansionZoom=function(q,H){try{H(null,this._geoJSONIndex.getClusterExpansionZoom(q.clusterId))}catch(Y){H(Y)}},U.prototype.getClusterChildren=function(q,H){try{H(null,this._geoJSONIndex.getChildren(q.clusterId))}catch(Y){H(Y)}},U.prototype.getClusterLeaves=function(q,H){try{H(null,this._geoJSONIndex.getLeaves(q.clusterId,q.limit,q.offset))}catch(Y){H(Y)}},U}($),di=function(L){var U=this;this.self=L,this.actor=new a.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:$,geojson:on},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(q,H){if(U.workerSourceTypes[q])throw new Error('Worker source with name "'+q+'" already registered.');U.workerSourceTypes[q]=H},this.self.registerRTLTextPlugin=function(q){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=q.applyArabicShaping,a.plugin.processBidirectionalText=q.processBidirectionalText,a.plugin.processStyledBidirectionalText=q.processStyledBidirectionalText}};return di.prototype.setReferrer=function(L,U){this.referrer=U},di.prototype.setImages=function(L,U,q){for(var H in this.availableImages[L]=U,this.workerSources[L]){var Y=this.workerSources[L][H];for(var ue in Y)Y[ue].availableImages=U}q()},di.prototype.setLayers=function(L,U,q){this.getLayerIndex(L).replace(U),q()},di.prototype.updateLayers=function(L,U,q){this.getLayerIndex(L).update(U.layers,U.removedIds),q()},di.prototype.loadTile=function(L,U,q){this.getWorkerSource(L,U.type,U.source).loadTile(U,q)},di.prototype.loadDEMTile=function(L,U,q){this.getDEMWorkerSource(L,U.source).loadTile(U,q)},di.prototype.reloadTile=function(L,U,q){this.getWorkerSource(L,U.type,U.source).reloadTile(U,q)},di.prototype.abortTile=function(L,U,q){this.getWorkerSource(L,U.type,U.source).abortTile(U,q)},di.prototype.removeTile=function(L,U,q){this.getWorkerSource(L,U.type,U.source).removeTile(U,q)},di.prototype.removeDEMTile=function(L,U){this.getDEMWorkerSource(L,U.source).removeTile(U)},di.prototype.removeSource=function(L,U,q){if(this.workerSources[L]&&this.workerSources[L][U.type]&&this.workerSources[L][U.type][U.source]){var H=this.workerSources[L][U.type][U.source];delete this.workerSources[L][U.type][U.source],H.removeSource!==void 0?H.removeSource(U,q):q()}},di.prototype.loadWorkerSource=function(L,U,q){try{this.self.importScripts(U.url),q()}catch(H){q(H.toString())}},di.prototype.syncRTLPluginState=function(L,U,q){try{a.plugin.setState(U);var H=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&H!=null){this.self.importScripts(H);var Y=a.plugin.isParsed();q(Y?void 0:new Error("RTL Text Plugin failed to import scripts from "+H),Y)}}catch(ue){q(ue.toString())}},di.prototype.getAvailableImages=function(L){var U=this.availableImages[L];return U||(U=[]),U},di.prototype.getLayerIndex=function(L){var U=this.layerIndexes[L];return U||(U=this.layerIndexes[L]=new D),U},di.prototype.getWorkerSource=function(L,U,q){var H=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][U]||(this.workerSources[L][U]={}),this.workerSources[L][U][q]||(this.workerSources[L][U][q]=new this.workerSourceTypes[U]({send:function(Y,ue,fe){H.actor.send(Y,ue,fe,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][U][q]},di.prototype.getDEMWorkerSource=function(L,U){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][U]||(this.demWorkerSources[L][U]=new le),this.demWorkerSources[L][U]},di.prototype.enforceCacheSizeLimit=function(L,U){a.enforceCacheSizeLimit(U)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new di(self)),di}),v(["./shared"],function(a){var T=a.createCommonjsModule(function(n){function s(_){return!o(_)}function o(_){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,z,C=new Blob([""],{type:"text/javascript"}),F=URL.createObjectURL(C);try{z=new Worker(F),k=!0}catch{k=!1}return z&&z.terminate(),URL.revokeObjectURL(F),k}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var k=document.createElement("canvas");k.width=k.height=1;var z=k.getContext("2d");if(!z)return!1;var C=z.getImageData(0,0,1,1);return C&&C.width===k.width}()?(c[w=_&&_.failIfMajorPerformanceCaveat]===void 0&&(c[w]=function(k){var z=function(F){var Z=document.createElement("canvas"),K=Object.create(s.webGLContextAttributes);return K.failIfMajorPerformanceCaveat=F,Z.probablySupportsContext?Z.probablySupportsContext("webgl",K)||Z.probablySupportsContext("experimental-webgl",K):Z.supportsContext?Z.supportsContext("webgl",K)||Z.supportsContext("experimental-webgl",K):Z.getContext("webgl",K)||Z.getContext("experimental-webgl",K)}(k);if(!z)return!1;var C=z.createShader(z.VERTEX_SHADER);return!(!C||z.isContextLost())&&(z.shaderSource(C,"void main() {}"),z.compileShader(C),z.getShaderParameter(C,z.COMPILE_STATUS)===!0)}(w)),c[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),S={create:function(n,s,o){var c=a.window.document.createElement(n);return s!==void 0&&(c.className=s),o&&o.appendChild(c),c},createNS:function(n,s){return a.window.document.createElementNS(n,s)}},D=a.window.document&&a.window.document.documentElement.style;function P(n){if(!D)return n[0];for(var s=0;s<n.length;s++)if(n[s]in D)return n[s];return n[0]}var O,R=P(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);S.disableDrag=function(){D&&R&&(O=D[R],D[R]="none")},S.enableDrag=function(){D&&R&&(D[R]=O)};var X=P(["transform","WebkitTransform"]);S.setTransform=function(n,s){n.style[X]=s};var $=!1;try{var pe=Object.defineProperty({},"passive",{get:function(){$=!0}});a.window.addEventListener("test",pe,pe),a.window.removeEventListener("test",pe,pe)}catch{$=!1}S.addEventListener=function(n,s,o,c){c===void 0&&(c={}),n.addEventListener(s,o,"passive"in c&&$?c:c.capture)},S.removeEventListener=function(n,s,o,c){c===void 0&&(c={}),n.removeEventListener(s,o,"passive"in c&&$?c:c.capture)};var le=function(n){n.preventDefault(),n.stopPropagation(),a.window.removeEventListener("click",le,!0)};function me(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}S.suppressClick=function(){a.window.addEventListener("click",le,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",le,!0)},0)},S.mousePos=function(n,s){var o=n.getBoundingClientRect();return new a.Point(s.clientX-o.left-n.clientLeft,s.clientY-o.top-n.clientTop)},S.touchPos=function(n,s){for(var o=n.getBoundingClientRect(),c=[],_=0;_<s.length;_++)c.push(new a.Point(s[_].clientX-o.left-n.clientLeft,s[_].clientY-o.top-n.clientTop));return c},S.mouseButton=function(n){return a.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},S.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var ve=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var c=0,_=this.requestors;c<_.length;c+=1){var w=_[c];this._notify(w.ids,w.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,c){this._validate(o,c)&&(this.images[o]=c)},s.prototype._validate=function(o,c){var _=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),_=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),_=!1),this._validateContent(c.content,c)||(this.fire(new a.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),_=!1),_},s.prototype._validateStretch=function(o,c){if(!o)return!0;for(var _=0,w=0,k=o;w<k.length;w+=1){var z=k[w];if(z[0]<_||z[1]<z[0]||c<z[1])return!1;_=z[1]}return!0},s.prototype._validateContent=function(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,c){c.version=this.images[o].version+1,this.images[o]=c,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,c){var _=!0;if(!this.isLoaded())for(var w=0,k=o;w<k.length;w+=1)this.images[k[w]]||(_=!1);this.isLoaded()||_?this._notify(o,c):this.requestors.push({ids:o,callback:c})},s.prototype._notify=function(o,c){for(var _={},w=0,k=o;w<k.length;w+=1){var z=k[w];this.images[z]||this.fire(new a.Event("styleimagemissing",{id:z}));var C=this.images[z];C?_[z]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:a.warnOnce('Image "'+z+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,_)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var c=this.patterns[o],_=this.getImage(o);if(!_)return null;if(c&&c.position.version===_.version)return c.position;if(c)c.position.version=_.version;else{var w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},k=new a.ImagePosition(w,_);this.patterns[o]={bin:w,position:k}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(o,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var c in this.patterns)o.push(this.patterns[c].bin);var _=a.potpack(o),w=_.w,k=_.h,z=this.atlasImage;for(var C in z.resize({width:w||1,height:k||1}),this.patterns){var F=this.patterns[C].bin,Z=F.x+1,K=F.y+1,W=this.images[C].data,ne=W.width,ie=W.height;a.RGBAImage.copy(W,z,{x:0,y:0},{x:Z,y:K},{width:ne,height:ie}),a.RGBAImage.copy(W,z,{x:0,y:ie-1},{x:Z,y:K-1},{width:ne,height:1}),a.RGBAImage.copy(W,z,{x:0,y:0},{x:Z,y:K+ie},{width:ne,height:1}),a.RGBAImage.copy(W,z,{x:ne-1,y:0},{x:Z-1,y:K},{width:1,height:ie}),a.RGBAImage.copy(W,z,{x:0,y:0},{x:Z+ne,y:K},{width:1,height:ie})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var c=0,_=o;c<_.length;c+=1){var w=_[c];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var k=this.images[w];me(k)&&this.updateImage(w,k)}}},s}(a.Evented),nt=tt,Ve=tt,Ue=1e20;function tt(n,s,o,c,_,w){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=_||"sans-serif",this.fontWeight=w||"normal",this.radius=o||8;var k=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=k,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.d=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Int16Array(k),this.middle=Math.round(k/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Vt(n,s,o,c,_,w,k){for(var z=0;z<s;z++){for(var C=0;C<o;C++)c[C]=n[C*s+z];for(qt(c,_,w,k,o),C=0;C<o;C++)n[C*s+z]=_[C]}for(C=0;C<o;C++){for(z=0;z<s;z++)c[z]=n[C*s+z];for(qt(c,_,w,k,s),z=0;z<s;z++)n[C*s+z]=Math.sqrt(_[z])}}function qt(n,s,o,c,_){o[0]=0,c[0]=-Ue,c[1]=+Ue;for(var w=1,k=0;w<_;w++){for(var z=(n[w]+w*w-(n[o[k]]+o[k]*o[k]))/(2*w-2*o[k]);z<=c[k];)k--,z=(n[w]+w*w-(n[o[k]]+o[k]*o[k]))/(2*w-2*o[k]);o[++k]=w,c[k]=z,c[k+1]=+Ue}for(w=0,k=0;w<_;w++){for(;c[k+1]<w;)k++;s[w]=(w-o[k])*(w-o[k])+n[o[k]]}}tt.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var _=s.data[4*c+3]/255;this.gridOuter[c]=_===1?0:_===0?Ue:Math.pow(Math.max(0,.5-_),2),this.gridInner[c]=_===1?Ue:_===0?0:Math.pow(Math.max(0,_-.5),2)}for(Vt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Vt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)o[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return o},nt.default=Ve;var Ze=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};Ze.prototype.setURL=function(n){this.url=n},Ze.prototype.getGlyphs=function(n,s){var o=this,c=[];for(var _ in n)for(var w=0,k=n[_];w<k.length;w+=1)c.push({stack:_,id:k[w]});a.asyncAll(c,function(z,C){var F=z.stack,Z=z.id,K=o.entries[F];K||(K=o.entries[F]={glyphs:{},requests:{},ranges:{}});var W=K.glyphs[Z];if(W===void 0){if(W=o._tinySDF(K,F,Z))return K.glyphs[Z]=W,void C(null,{stack:F,id:Z,glyph:W});var ne=Math.floor(Z/256);if(256*ne>65535)C(new Error("glyphs > 65535 not supported"));else if(K.ranges[ne])C(null,{stack:F,id:Z,glyph:W});else{var ie=K.requests[ne];ie||(ie=K.requests[ne]=[],Ze.loadGlyphRange(F,ne,o.url,o.requestManager,function(ce,J){if(J){for(var se in J)o._doesCharSupportLocalGlyph(+se)||(K.glyphs[+se]=J[+se]);K.ranges[ne]=!0}for(var de=0,be=ie;de<be.length;de+=1)(0,be[de])(ce,J);delete K.requests[ne]})),ie.push(function(ce,J){ce?C(ce):J&&C(null,{stack:F,id:Z,glyph:J[Z]||null})})}}else C(null,{stack:F,id:Z,glyph:W})},function(z,C){if(z)s(z);else if(C){for(var F={},Z=0,K=C;Z<K.length;Z+=1){var W=K[Z],ne=W.stack,ie=W.id,ce=W.glyph;(F[ne]||(F[ne]={}))[ie]=ce&&{id:ce.id,bitmap:ce.bitmap.clone(),metrics:ce.metrics}}s(null,F)}})},Ze.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](n)||a.isChar["Hangul Syllables"](n)||a.isChar.Hiragana(n)||a.isChar.Katakana(n))},Ze.prototype._tinySDF=function(n,s,o){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(o)){var _=n.tinySDF;if(!_){var w="400";/bold/i.test(s)?w="900":/medium/i.test(s)?w="500":/light/i.test(s)&&(w="200"),_=n.tinySDF=new Ze.TinySDF(24,3,8,.25,c,w)}return{id:o,bitmap:new a.AlphaImage({width:30,height:30},_.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ze.loadGlyphRange=function(n,s,o,c,_){var w=256*s,k=w+255,z=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",w+"-"+k),a.ResourceType.Glyphs);a.getArrayBuffer(z,function(C,F){if(C)_(C);else if(F){for(var Z={},K=0,W=a.parseGlyphPBF(F);K<W.length;K+=1){var ne=W[K];Z[ne.id]=ne}_(null,Z)}})},Ze.TinySDF=nt;var Xe=function(){this.specification=a.styleSpec.light.position};Xe.prototype.possiblyEvaluate=function(n,s){return a.sphericalToCartesian(n.expression.evaluate(s))},Xe.prototype.interpolate=function(n,s,o){return{x:a.number(n.x,s.x,o),y:a.number(n.y,s.y,o),z:a.number(n.z,s.z,o)}};var wt=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Xe,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),jt=function(n){function s(o){n.call(this),this._transitionable=new a.Transitionable(wt),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,c){if(c===void 0&&(c={}),!this._validate(a.validateLight,o,c))for(var _ in o){var w=o[_];a.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,c,_){return(!_||_.validate!==!1)&&a.emitValidationErrors(this,o.call(a.validateStyle,a.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},s}(a.Evented),we=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};we.prototype.getDash=function(n,s){var o=n.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(n,s)),this.dashEntry[o]},we.prototype.getDashRanges=function(n,s,o){var c=[],_=n.length%2==1?-n[n.length-1]*o:0,w=n[0]*o,k=!0;c.push({left:_,right:w,isDash:k,zeroLength:n[0]===0});for(var z=n[0],C=1;C<n.length;C++){var F=n[C];c.push({left:_=z*o,right:w=(z+=F)*o,isDash:k=!k,zeroLength:F===0})}return c},we.prototype.addRoundDash=function(n,s,o){for(var c=s/2,_=-o;_<=o;_++)for(var w=this.width*(this.nextRow+o+_),k=0,z=n[k],C=0;C<this.width;C++){C/z.right>1&&(z=n[++k]);var F=Math.abs(C-z.left),Z=Math.abs(C-z.right),K=Math.min(F,Z),W=void 0,ne=_/o*(c+1);if(z.isDash){var ie=c-Math.abs(ne);W=Math.sqrt(K*K+ie*ie)}else W=c-Math.sqrt(K*K+ne*ne);this.data[w+C]=Math.max(0,Math.min(255,W+128))}},we.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var o=n[s],c=n[s+1];o.zeroLength?n.splice(s,1):c&&c.isDash===o.isDash&&(c.left=o.left,n.splice(s,1))}var _=n[0],w=n[n.length-1];_.isDash===w.isDash&&(_.left=w.left-this.width,w.right=_.right+this.width);for(var k=this.width*this.nextRow,z=0,C=n[z],F=0;F<this.width;F++){F/C.right>1&&(C=n[++z]);var Z=Math.abs(F-C.left),K=Math.abs(F-C.right),W=Math.min(Z,K);this.data[k+F]=Math.max(0,Math.min(255,(C.isDash?W:-W)+128))}},we.prototype.addDash=function(n,s){var o=s?7:0,c=2*o+1;if(this.nextRow+c>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var _=0,w=0;w<n.length;w++)_+=n[w];if(_!==0){var k=this.width/_,z=this.getDashRanges(n,this.width,k);s?this.addRoundDash(z,k,o):this.addRegularDash(z)}var C={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:_};return this.nextRow+=c,this.dirty=!0,C},we.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var qe=function n(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var c=this.workerPool.acquire(this.id),_=0;_<c.length;_++){var w=new n.Actor(c[_],o,this.id);w.name="Worker "+_,this.actors.push(w)}};function Be(n,s,o){var c=function(_,w){if(_)return o(_);if(w){var k=a.pick(a.extend(w,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(k.vectorLayers=w.vector_layers,k.vectorLayerIds=k.vectorLayers.map(function(z){return z.id})),k.tiles=s.canonicalizeTileset(k,n.url),o(null,k)}};return n.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),a.ResourceType.Source),c):a.browser.frame(function(){return c(null,n)})}qe.prototype.broadcast=function(n,s,o){a.asyncAll(this.actors,function(c,_){c.send(n,s,_)},o=o||function(){})},qe.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},qe.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},qe.Actor=a.Actor;var Ye=function(n,s,o){this.bounds=a.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=o||24};Ye.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},Ye.prototype.contains=function(n){var s=Math.pow(2,n.z),o=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*s),_=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*s),w=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=o&&n.x<_&&n.y>=c&&n.y<w};var ht=function(n){function s(o,c,_,w){if(n.call(this),this.id=o,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(c,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,function(c,_){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):_&&(a.extend(o,_),_.bounds&&(o.tileBounds=new Ye(_.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(_.tiles,o.map._requestManager._customAccessToken),a.postMapLoadEvent(_.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var c=this;return this.setSourceProperty(function(){c._options.tiles=o}),this},s.prototype.setUrl=function(o){var c=this;return this.setSourceProperty(function(){c.url=o,c._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.loadTile=function(o,c){var _=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(_,a.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function k(z,C){return delete o.request,o.aborted?c(null):z&&z.status!==404?c(z):(C&&C.resourceTiming&&(o.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&o.setExpiryData(C),o.loadVectorData(C,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",w,k.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",w,k.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(a.Evented),mt=function(n){function s(o,c,_,w){n.call(this),this.id=o,this.dispatcher=_,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},c),a.extend(this,a.pick(c,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,function(c,_){o._tileJSONRequest=null,o._loaded=!0,c?o.fire(new a.ErrorEvent(c)):_&&(a.extend(o,_),_.bounds&&(o.tileBounds=new Ye(_.bounds,o.minzoom,o.maxzoom)),a.postTurnstileEvent(_.tiles),a.postMapLoadEvent(_.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return a.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,c){var _=this,w=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=a.getImage(this.map._requestManager.transformRequest(w,a.ResourceType.Tile),function(k,z){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(k)o.state="errored",c(k);else if(z){_.map._refreshExpiredTiles&&o.setExpiryData(z),delete z.cacheControl,delete z.expires;var C=_.map.painter.context,F=C.gl;o.texture=_.map.painter.getTileTexture(z.width),o.texture?o.texture.update(z,{useMipmap:!0}):(o.texture=new a.Texture(C,z,F.RGBA,{useMipmap:!0}),o.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&F.texParameterf(F.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),o.state="loaded",a.cacheEntryPossiblyAdded(_.dispatcher),c(null)}})},s.prototype.abortTile=function(o,c){o.request&&(o.request.cancel(),delete o.request),c()},s.prototype.unloadTile=function(o,c){o.texture&&this.map.painter.saveTileTexture(o.texture),c()},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Mt=function(n){function s(o,c,_,w){n.call(this,o,c,_,w),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,c){var _=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(k,z){k&&(o.state="errored",c(k)),z&&(o.dem=z,o.needsHillshadePrepare=!0,o.state="loaded",c(null))}o.request=a.getImage(this.map._requestManager.transformRequest(_,a.ResourceType.Tile),(function(k,z){if(delete o.request,o.aborted)o.state="unloaded",c(null);else if(k)o.state="errored",c(k);else if(z){this.map._refreshExpiredTiles&&o.setExpiryData(z),delete z.cacheControl,delete z.expires;var C=a.window.ImageBitmap&&z instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?z:a.browser.getImageData(z,1),F={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:C,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",F,w.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var c=o.canonical,_=Math.pow(2,c.z),w=(c.x-1+_)%_,k=c.x===0?o.wrap-1:o.wrap,z=(c.x+1+_)%_,C=c.x+1===_?o.wrap+1:o.wrap,F={};return F[new a.OverscaledTileID(o.overscaledZ,k,c.z,w,c.y).key]={backfilled:!1},F[new a.OverscaledTileID(o.overscaledZ,C,c.z,z,c.y).key]={backfilled:!1},c.y>0&&(F[new a.OverscaledTileID(o.overscaledZ,k,c.z,w,c.y-1).key]={backfilled:!1},F[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},F[new a.OverscaledTileID(o.overscaledZ,C,c.z,z,c.y-1).key]={backfilled:!1}),c.y+1<_&&(F[new a.OverscaledTileID(o.overscaledZ,k,c.z,w,c.y+1).key]={backfilled:!1},F[new a.OverscaledTileID(o.overscaledZ,o.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},F[new a.OverscaledTileID(o.overscaledZ,C,c.z,z,c.y+1).key]={backfilled:!1}),F},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(mt),ki=function(n){function s(o,c,_,w){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=_.getActor(),this.setEventedParent(w),this._data=c.data,this._options=a.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var k=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*k,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*k,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.EXTENT,radius:(c.clusterRadius||50)*k,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)o.fire(new a.ErrorEvent(c));else{var _={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(_.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new a.Event("data",_))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var c=this;return this._data=o,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(_){if(_)c.fire(new a.ErrorEvent(_));else{var w={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(w.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new a.Event("data",w))}}),this},s.prototype.getClusterExpansionZoom=function(o,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},c),this},s.prototype.getClusterChildren=function(o,c){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},c),this},s.prototype.getClusterLeaves=function(o,c,_,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:c,offset:_},w),this},s.prototype._updateWorkerData=function(o){var c=this;this._loaded=!1;var _=a.extend({},this.workerOptions),w=this._data;typeof w=="string"?(_.request=this.map._requestManager.transformRequest(a.browser.resolveURL(w),a.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(w),this.actor.send(this.type+".loadData",_,function(k,z){c._removed||z&&z.abandoned||(c._loaded=!0,z&&z.resourceTiming&&z.resourceTiming[c.id]&&(c._resourceTiming=z.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:_.source},null),o(k))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,c){var _=this,w=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(w,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(k,z){return delete o.request,o.unloadVectorData(),o.aborted?c(null):k?c(k):(o.loadVectorData(z,_.map.painter,w==="reloadTile"),c(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(a.Evented),Je=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),vt=function(n){function s(o,c,_,w){n.call(this),this.id=o,this.dispatcher=_,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(o,c){var _=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(w,k){_._loaded=!0,w?_.fire(new a.ErrorEvent(w)):k&&(_.image=k,o&&(_.coordinates=o),c&&c(),_._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var c=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var c=this;this.coordinates=o;var _=o.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(k){for(var z=1/0,C=1/0,F=-1/0,Z=-1/0,K=0,W=k;K<W.length;K+=1){var ne=W[K];z=Math.min(z,ne.x),C=Math.min(C,ne.y),F=Math.max(F,ne.x),Z=Math.max(Z,ne.y)}var ie=Math.max(F-z,Z-C),ce=Math.max(0,Math.floor(-Math.log(ie)/Math.LN2)),J=Math.pow(2,ce);return new a.CanonicalTileID(ce,Math.floor((z+F)/2*J),Math.floor((C+Z)/2*J))}(_),this.minzoom=this.maxzoom=this.tileID.z;var w=_.map(function(k){return c.tileID.getTilePoint(k)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,c=o.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.loadTile=function(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(a.Evented),vi=function(n){function s(o,c,_,w){n.call(this,o,c,_,w),this.roundZoom=!0,this.type="video",this.options=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var c=this.options;this.urls=[];for(var _=0,w=c.urls;_<w.length;_+=1)this.urls.push(this.map._requestManager.transformRequest(w[_],a.ResourceType.Source).url);a.getVideo(this.urls,function(k,z){o._loaded=!0,k?o.fire(new a.ErrorEvent(k)):z&&(o.video=z,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var c=this.video.seekable;o<c.start(0)||o>c.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,c=o.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(o,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[_];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(vt),vn=function(n){function s(o,c,_,w){n.call(this,o,c,_,w),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(k){return!Array.isArray(k)||k.length!==2||k.some(function(z){return typeof z!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,_=c.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(c,this.canvas,_.RGBA,{premultiply:!0}),this.tiles){var k=this.tiles[w];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,c=[this.canvas.width,this.canvas.height];o<c.length;o+=1){var _=c[o];if(isNaN(_)||_<=0)return!0}return!1},s}(vt),$n={vector:ht,raster:mt,"raster-dem":Mt,geojson:ki,video:vi,image:vt,canvas:vn};function zn(n,s){var o=a.identity([]);return a.translate(o,o,[1,1,0]),a.scale(o,o,[.5*n.width,.5*n.height,1]),a.multiply(o,o,n.calculatePosMatrix(s.toUnwrapped()))}function Fi(n,s,o,c,_,w){var k=function(ce,J,se){if(ce)for(var de=0,be=ce;de<be.length;de+=1){var Te=J[be[de]];if(Te&&Te.source===se&&Te.type==="fill-extrusion")return!0}else for(var ke in J){var Pe=J[ke];if(Pe.source===se&&Pe.type==="fill-extrusion")return!0}return!1}(_&&_.layers,s,n.id),z=w.maxPitchScaleFactor(),C=n.tilesIn(c,z,k);C.sort(zr);for(var F=[],Z=0,K=C;Z<K.length;Z+=1){var W=K[Z];F.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(s,o,n._state,W.queryGeometry,W.cameraQueryGeometry,W.scale,_,w,z,zn(n.transform,W.tileID))})}var ne=function(ce){for(var J={},se={},de=0,be=ce;de<be.length;de+=1){var Te=be[de],ke=Te.queryResults,Pe=Te.wrappedTileID,Le=se[Pe]=se[Pe]||{};for(var We in ke)for(var He=ke[We],ft=Le[We]=Le[We]||{},Tt=J[We]=J[We]||[],Ct=0,Pt=He;Ct<Pt.length;Ct+=1){var yi=Pt[Ct];ft[yi.featureIndex]||(ft[yi.featureIndex]=!0,Tt.push(yi))}}return J}(F);for(var ie in ne)ne[ie].forEach(function(ce){var J=ce.feature,se=n.getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=se});return ne}function zr(n,s){var o=n.tileID,c=s.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}var bi=function(n,s){this.max=n,this.onRemove=s,this.reset()};bi.prototype.reset=function(){for(var n in this.data)for(var s=0,o=this.data[n];s<o.length;s+=1){var c=o[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},bi.prototype.add=function(n,s,o){var c=this,_=n.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);var w={value:s,timeout:void 0};if(o!==void 0&&(w.timeout=setTimeout(function(){c.remove(n,w)},o)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){var k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this},bi.prototype.has=function(n){return n.wrapped().key in this.data},bi.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},bi.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},bi.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},bi.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},bi.prototype.remove=function(n,s){if(!this.has(n))return this;var o=n.wrapped().key,c=s===void 0?0:this.data[o].indexOf(s),_=this.data[o][c];return this.data[o].splice(c,1),_.timeout&&clearTimeout(_.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(_.value),this.order.splice(this.order.indexOf(o),1),this},bi.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},bi.prototype.filter=function(n){var s=[];for(var o in this.data)for(var c=0,_=this.data[o];c<_.length;c+=1){var w=_[c];n(w.value)||s.push(w)}for(var k=0,z=s;k<z.length;k+=1){var C=z[k];this.remove(C.value.tileID,C)}};var Tn=function(n,s,o){this.context=n;var c=n.gl;this.buffer=c.createBuffer(),this.dynamicDraw=!!o,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Tn.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Tn.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},Tn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Jr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},bn=function(n,s,o,c){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=n;var _=n.gl;this.buffer=_.createBuffer(),n.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};bn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},bn.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},bn.prototype.enableAttributes=function(n,s){for(var o=0;o<this.attributes.length;o++){var c=s.attributes[this.attributes[o].name];c!==void 0&&n.enableVertexAttribArray(c)}},bn.prototype.setVertexAttribPointers=function(n,s,o){for(var c=0;c<this.attributes.length;c++){var _=this.attributes[c],w=s.attributes[_.name];w!==void 0&&n.vertexAttribPointer(w,_.components,n[Jr[_.type]],!1,this.itemSize,_.offset+this.itemSize*(o||0))}},bn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Xt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Xt.prototype.get=function(){return this.current},Xt.prototype.set=function(n){},Xt.prototype.getDefault=function(){return this.default},Xt.prototype.setDefault=function(){this.set(this.default)};var cr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Xt),fi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(Xt),qi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(Xt),Dr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Xt),nn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(Xt),yr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(Xt),ji=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(Xt),er=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(Xt),xn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(Xt),hn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Xt),Gi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(Xt),tr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(Xt),Wi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}},s}(Xt),Tr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(Xt),ir=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return a.Color.transparent},s.prototype.set=function(o){var c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(Xt),jn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(Xt),Xi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}},s}(Xt),Lr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(Xt),Rr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(Xt),fn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(Xt),ra=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(Xt),Ir=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(Xt),Yi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(Xt),Qr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Xt),Br=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(Xt),In=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(Xt),N=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(Xt),st=function(n){function s(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(Xt),dn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(Xt),pr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(Xt),on=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(Xt),di=function(n){function s(o,c){n.call(this,o),this.context=o,this.parent=c}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(Xt),L=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(di),U=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(di),q=function(n,s,o,c){this.context=n,this.width=s,this.height=o;var _=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new L(n,_),c&&(this.depthAttachment=new U(n,_))};q.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}n.deleteFramebuffer(this.framebuffer)};var H=function(n,s,o){this.func=n,this.mask=s,this.range=o};H.ReadOnly=!1,H.ReadWrite=!0,H.disabled=new H(519,H.ReadOnly,[0,1]);var Y=function(n,s,o,c,_,w){this.test=n,this.ref=s,this.mask=o,this.fail=c,this.depthFail=_,this.pass=w};Y.disabled=new Y({func:519,mask:0},0,0,7680,7680,7680);var ue=function(n,s,o){this.blendFunction=n,this.blendColor=s,this.mask=o};ue.disabled=new ue(ue.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),ue.unblended=new ue(ue.Replace,a.Color.transparent,[!0,!0,!0,!0]),ue.alphaBlended=new ue([1,771],a.Color.transparent,[!0,!0,!0,!0]);var fe=function(n,s,o){this.enable=n,this.mode=s,this.frontFace=o};fe.disabled=new fe(!1,1029,2305),fe.backCCW=new fe(!0,1029,2305);var j=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new cr(this),this.clearDepth=new fi(this),this.clearStencil=new qi(this),this.colorMask=new Dr(this),this.depthMask=new nn(this),this.stencilMask=new yr(this),this.stencilFunc=new ji(this),this.stencilOp=new er(this),this.stencilTest=new xn(this),this.depthRange=new hn(this),this.depthTest=new Gi(this),this.depthFunc=new tr(this),this.blend=new Wi(this),this.blendFunc=new Tr(this),this.blendColor=new ir(this),this.blendEquation=new jn(this),this.cullFace=new Xi(this),this.cullFaceSide=new Lr(this),this.frontFace=new Rr(this),this.program=new fn(this),this.activeTexture=new ra(this),this.viewport=new Ir(this),this.bindFramebuffer=new Yi(this),this.bindRenderbuffer=new Qr(this),this.bindTexture=new Br(this),this.bindVertexBuffer=new In(this),this.bindElementBuffer=new N(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new st(this),this.pixelStoreUnpack=new dn(this),this.pixelStoreUnpackPremultiplyAlpha=new pr(this),this.pixelStoreUnpackFlipY=new on(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};j.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},j.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},j.prototype.createIndexBuffer=function(n,s){return new Tn(this,n,s)},j.prototype.createVertexBuffer=function(n,s,o){return new bn(this,n,s,o)},j.prototype.createRenderbuffer=function(n,s,o){var c=this.gl,_=c.createRenderbuffer();return this.bindRenderbuffer.set(_),c.renderbufferStorage(c.RENDERBUFFER,n,s,o),this.bindRenderbuffer.set(null),_},j.prototype.createFramebuffer=function(n,s,o){return new q(this,n,s,o)},j.prototype.clear=function(n){var s=n.color,o=n.depth,c=this.gl,_=0;s&&(_|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(_|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c.clear(_)},j.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},j.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},j.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},j.prototype.setColorMode=function(n){a.deepEqual(n.blendFunction,ue.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},j.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ee=function(n){function s(o,c,_){var w=this;n.call(this),this.id=o,this.dispatcher=_,this.on("data",function(k){k.dataType==="source"&&k.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(k,z,C,F){var Z=new $n[z.type](k,z,C,F);if(Z.id!==k)throw new Error("Expected Source id to be "+k+" instead of "+Z.id);return a.bindAll(["load","abort","unload","serialize","prepare"],Z),Z}(o,c,_,this),this._tiles={},this._cache=new bi(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var c=this._tiles[o];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,c){return this._source.loadTile(o,c)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var _=this._tiles[c];_.upload(o),_.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return a.values(this._tiles).map(function(o){return o.tileID}).sort(ge).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var c=this,_=[];for(var w in this._tiles)this._isIdRenderable(w,o)&&_.push(this._tiles[w]);return o?_.sort(function(k,z){var C=k.tileID,F=z.tileID,Z=new a.Point(C.canonical.x,C.canonical.y)._rotate(c.transform.angle),K=new a.Point(F.canonical.x,F.canonical.y)._rotate(c.transform.angle);return C.overscaledZ-F.overscaledZ||K.y-Z.y||K.x-Z.x}).map(function(k){return k.tileID.key}):_.map(function(k){return k.tileID}).sort(ge).map(function(k){return k.key})},s.prototype.hasRenderableParent=function(o){var c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(o,c){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,c){var _=this._tiles[o];_&&(_.state!=="loading"&&(_.state=c),this._loadTile(_,this._tileLoaded.bind(this,_,o,c)))},s.prototype._tileLoaded=function(o,c,_,w){if(w)return o.state="errored",void(w.status!==404?this._source.fire(new a.ErrorEvent(w,{tile:o})):this.update(this.transform));o.timeAdded=a.browser.now(),_==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var c=this.getRenderableIds(),_=0;_<c.length;_++){var w=c[_];if(o.neighboringTiles&&o.neighboringTiles[w]){var k=this.getTileByID(w);z(o,k),z(k,o)}}function z(C,F){C.needsHillshadePrepare=!0;var Z=F.tileID.canonical.x-C.tileID.canonical.x,K=F.tileID.canonical.y-C.tileID.canonical.y,W=Math.pow(2,C.tileID.canonical.z),ne=F.tileID.key;Z===0&&K===0||Math.abs(K)>1||(Math.abs(Z)>1&&(Math.abs(Z+W)===1?Z+=W:Math.abs(Z-W)===1&&(Z-=W)),F.dem&&C.dem&&(C.dem.backfillBorder(F.dem,Z,K),C.neighboringTiles&&C.neighboringTiles[ne]&&(C.neighboringTiles[ne].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,c,_,w){for(var k in this._tiles){var z=this._tiles[k];if(!(w[k]||!z.hasData()||z.tileID.overscaledZ<=c||z.tileID.overscaledZ>_)){for(var C=z.tileID;z&&z.tileID.overscaledZ>c+1;){var F=z.tileID.scaledTo(z.tileID.overscaledZ-1);(z=this._tiles[F.key])&&z.hasData()&&(C=F)}for(var Z=C;Z.overscaledZ>c;)if(o[(Z=Z.scaledTo(Z.overscaledZ-1)).key]){w[C.key]=C;break}}}},s.prototype.findLoadedParent=function(o,c){if(o.key in this._loadedParentTiles){var _=this._loadedParentTiles[o.key];return _&&_.tileID.overscaledZ>=c?_:null}for(var w=o.overscaledZ-1;w>=c;w--){var k=o.scaledTo(w),z=this._getLoadedTile(k);if(z)return z}},s.prototype._getLoadedTile=function(o){var c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var c=Math.ceil(o.width/this._source.tileSize)+1,_=Math.ceil(o.height/this._source.tileSize)+1,w=Math.floor(c*_*5),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(k)},s.prototype.handleWrapJump=function(o){var c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){var _={};for(var w in this._tiles){var k=this._tiles[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),_[k.tileID.key]=k}for(var z in this._tiles=_,this._timers)clearTimeout(this._timers[z]),delete this._timers[z];for(var C in this._tiles)this._setTileReloadTimer(C,this._tiles[C])}},s.prototype.update=function(o){var c=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var _;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?_=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Le){return new a.OverscaledTileID(Le.canonical.z,Le.wrap,Le.canonical.z,Le.canonical.x,Le.canonical.y)}):(_=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(_=_.filter(function(Le){return c._source.hasTile(Le)}))):_=[];var w=o.coveringZoomLevel(this._source),k=Math.max(w-s.maxOverzooming,this._source.minzoom),z=Math.max(w+s.maxUnderzooming,this._source.minzoom),C=this._updateRetainedTiles(_,w);if(De(this._source.type)){for(var F={},Z={},K=0,W=Object.keys(C);K<W.length;K+=1){var ne=W[K],ie=C[ne],ce=this._tiles[ne];if(ce&&!(ce.fadeEndTime&&ce.fadeEndTime<=a.browser.now())){var J=this.findLoadedParent(ie,k);J&&(this._addTile(J.tileID),F[J.tileID.key]=J.tileID),Z[ne]=ie}}for(var se in this._retainLoadedChildren(Z,w,z,C),F)C[se]||(this._coveredTiles[se]=!0,C[se]=F[se])}for(var de in C)this._tiles[de].clearFadeHold();for(var be=0,Te=a.keysDifference(this._tiles,C);be<Te.length;be+=1){var ke=Te[be],Pe=this._tiles[ke];Pe.hasSymbolBuckets&&!Pe.holdingForFade()?Pe.setHoldDuration(this.map._fadeDuration):Pe.hasSymbolBuckets&&!Pe.symbolFadeFinished()||this._removeTile(ke)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,c){for(var _={},w={},k=Math.max(c-s.maxOverzooming,this._source.minzoom),z=Math.max(c+s.maxUnderzooming,this._source.minzoom),C={},F=0,Z=o;F<Z.length;F+=1){var K=Z[F],W=this._addTile(K);_[K.key]=K,W.hasData()||c<this._source.maxzoom&&(C[K.key]=K)}this._retainLoadedChildren(C,c,z,_);for(var ne=0,ie=o;ne<ie.length;ne+=1){var ce=ie[ne],J=this._tiles[ce.key];if(!J.hasData()){if(c+1>this._source.maxzoom){var se=ce.children(this._source.maxzoom)[0],de=this.getTile(se);if(de&&de.hasData()){_[se.key]=se;continue}}else{var be=ce.children(this._source.maxzoom);if(_[be[0].key]&&_[be[1].key]&&_[be[2].key]&&_[be[3].key])continue}for(var Te=J.wasRequested(),ke=ce.overscaledZ-1;ke>=k;--ke){var Pe=ce.scaledTo(ke);if(w[Pe.key]||(w[Pe.key]=!0,!(J=this.getTile(Pe))&&Te&&(J=this._addTile(Pe)),J&&(_[Pe.key]=Pe,Te=J.wasRequested(),J.hasData())))break}}}return _},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var c=[],_=void 0,w=this._tiles[o].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){_=this._loadedParentTiles[w.key];break}c.push(w.key);var k=w.scaledTo(w.overscaledZ-1);if(_=this._getLoadedTile(k))break;w=k}for(var z=0,C=c;z<C.length;z+=1)this._loadedParentTiles[C[z]]=_}},s.prototype._addTile=function(o){var c=this._tiles[o.key];if(c)return c;(c=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));var _=!!c;return _||(c=new a.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))),c?(c.uses++,this._tiles[o.key]=c,_||this._source.fire(new a.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(o,c){var _=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var w=c.getExpiryTimeout();w&&(this._timers[o]=setTimeout(function(){_._reloadTile(o,"expired"),delete _._timers[o]},w))},s.prototype._removeTile=function(o){var c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,c,_){var w=this,k=[],z=this.transform;if(!z)return k;for(var C=_?z.getCameraQueryGeometry(o):o,F=o.map(function(ke){return z.pointCoordinate(ke)}),Z=C.map(function(ke){return z.pointCoordinate(ke)}),K=this.getIds(),W=1/0,ne=1/0,ie=-1/0,ce=-1/0,J=0,se=Z;J<se.length;J+=1){var de=se[J];W=Math.min(W,de.x),ne=Math.min(ne,de.y),ie=Math.max(ie,de.x),ce=Math.max(ce,de.y)}for(var be=function(ke){var Pe=w._tiles[K[ke]];if(!Pe.holdingForFade()){var Le=Pe.tileID,We=Math.pow(2,z.zoom-Pe.tileID.overscaledZ),He=c*Pe.queryPadding*a.EXTENT/Pe.tileSize/We,ft=[Le.getTilePoint(new a.MercatorCoordinate(W,ne)),Le.getTilePoint(new a.MercatorCoordinate(ie,ce))];if(ft[0].x-He<a.EXTENT&&ft[0].y-He<a.EXTENT&&ft[1].x+He>=0&&ft[1].y+He>=0){var Tt=F.map(function(Pt){return Le.getTilePoint(Pt)}),Ct=Z.map(function(Pt){return Le.getTilePoint(Pt)});k.push({tile:Pe,tileID:Le,queryGeometry:Tt,cameraQueryGeometry:Ct,scale:We})}}},Te=0;Te<K.length;Te++)be(Te);return k},s.prototype.getVisibleCoordinates=function(o){for(var c=this,_=this.getRenderableIds(o).map(function(C){return c._tiles[C].tileID}),w=0,k=_;w<k.length;w+=1){var z=k[w];z.posMatrix=this.transform.calculatePosMatrix(z.toUnwrapped())}return _},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(De(this._source.type))for(var o in this._tiles){var c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=a.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,c,_){this._state.updateState(o=o||"_geojsonTileLayer",c,_)},s.prototype.removeFeatureState=function(o,c,_){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,_)},s.prototype.getFeatureState=function(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(o,c,_){var w=this._tiles[o];w&&w.setDependencies(c,_)},s.prototype.reloadTilesForDependencies=function(o,c){for(var _ in this._tiles)this._tiles[_].hasDependency(o,c)&&this._reloadTile(_,"reloading");this._cache.filter(function(w){return!w.hasDependency(o,c)})},s}(a.Evented);function ge(n,s){var o=Math.abs(2*n.wrap)-+(n.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||c-o||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function De(n){return n==="raster"||n==="image"||n==="video"}function Fe(){return new a.window.Worker(ol.workerUrl)}ee.maxOverzooming=10,ee.maxUnderzooming=3;var ze="mapboxgl_preloaded_worker_pool",Re=function(){this.active={}};Re.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<Re.workerCount;)this.workers.push(new Fe);return this.active[n]=!0,this.workers.slice()},Re.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Re.prototype.isPreloaded=function(){return!!this.active[ze]},Re.prototype.numActive=function(){return Object.keys(this.active).length};var gt,lt=Math.floor(a.browser.hardwareConcurrency/2);function Ie(){return gt||(gt=new Re),gt}function at(n,s){var o={};for(var c in n)c!=="ref"&&(o[c]=n[c]);return a.refProperties.forEach(function(_){_ in s&&(o[_]=s[_])}),o}function Qe(n){n=n.slice();for(var s=Object.create(null),o=0;o<n.length;o++)s[n[o].id]=n[o];for(var c=0;c<n.length;c++)"ref"in n[c]&&(n[c]=at(n[c],s[n[c].ref]));return n}Re.workerCount=Math.max(Math.min(lt,6),1);var it={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Gt(n,s,o){o.push({command:it.addSource,args:[n,s[n]]})}function ot(n,s,o){s.push({command:it.removeSource,args:[n]}),o[n]=!0}function $t(n,s,o,c){ot(n,o,c),Gt(n,s,o)}function Ei(n,s,o){var c;for(c in n[o])if(n[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;for(c in s[o])if(s[o].hasOwnProperty(c)&&c!=="data"&&!a.deepEqual(n[o][c],s[o][c]))return!1;return!0}function Ht(n,s,o,c,_,w){var k;for(k in s=s||{},n=n||{})n.hasOwnProperty(k)&&(a.deepEqual(n[k],s[k])||o.push({command:w,args:[c,k,s[k],_]}));for(k in s)s.hasOwnProperty(k)&&!n.hasOwnProperty(k)&&(a.deepEqual(n[k],s[k])||o.push({command:w,args:[c,k,s[k],_]}))}function oi(n){return n.id}function ei(n,s){return n[s.id]=s,n}var wn=function(n,s){this.reset(n,s)};wn.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},wn.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=a.clamp(n,0,1);for(var s=1,o=this._distances[s],c=n*this.paddedLength+this.padding;o<c&&s<this._distances.length;)o=this._distances[++s];var _=s-1,w=this._distances[_],k=o-w,z=k>0?(c-w)/k:0;return this.points[_].mult(1-z).add(this.points[s].mult(z))};var mi=function(n,s,o){var c=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(s/o);for(var w=0;w<this.xCellCount*this.yCellCount;w++)c.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Oi(n,s,o,c,_){var w=a.create();return s?(a.scale(w,w,[1/_,1/_,1]),o||a.rotateZ(w,w,c.angle)):a.multiply(w,c.labelPlaneMatrix,n),w}function xi(n,s,o,c,_){if(s){var w=a.clone(n);return a.scale(w,w,[_,_,1]),o||a.rotateZ(w,w,-c.angle),w}return c.glCoordMatrix}function Jt(n,s){var o=[n.x,n.y,0,1];ln(o,o,s);var c=o[3];return{point:new a.Point(o[0]/c,o[1]/c),signedDistanceFromCamera:c}}function si(n,s){return .5+n/s*.5}function An(n,s){var o=n[0]/n[3],c=n[1]/n[3];return o>=-s[0]&&o<=s[0]&&c>=-s[1]&&c<=s[1]}function fa(n,s,o,c,_,w,k,z){var C=c?n.textSizeData:n.iconSizeData,F=a.evaluateSizeForZoom(C,o.transform.zoom),Z=[256/o.width*2+1,256/o.height*2+1],K=c?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;K.clear();for(var W=n.lineVertexArray,ne=c?n.text.placedSymbolArray:n.icon.placedSymbolArray,ie=o.transform.width/o.transform.height,ce=!1,J=0;J<ne.length;J++){var se=ne.get(J);if(se.hidden||se.writingMode===a.WritingMode.vertical&&!ce)Pn(se.numGlyphs,K);else{ce=!1;var de=[se.anchorX,se.anchorY,0,1];if(a.transformMat4(de,de,s),An(de,Z)){var be=si(o.transform.cameraToCenterDistance,de[3]),Te=a.evaluateSizeForFeature(C,F,se),ke=k?Te/be:Te*be,Pe=new a.Point(se.anchorX,se.anchorY),Le=Jt(Pe,_).point,We={},He=Ua(se,ke,!1,z,s,_,w,n.glyphOffsetArray,W,K,Le,Pe,We,ie);ce=He.useVertical,(He.notEnoughRoom||ce||He.needsFlipping&&Ua(se,ke,!0,z,s,_,w,n.glyphOffsetArray,W,K,Le,Pe,We,ie).notEnoughRoom)&&Pn(se.numGlyphs,K)}else Pn(se.numGlyphs,K)}}c?n.text.dynamicLayoutVertexBuffer.updateData(K):n.icon.dynamicLayoutVertexBuffer.updateData(K)}function sn(n,s,o,c,_,w,k,z,C,F,Z){var K=z.glyphStartIndex+z.numGlyphs,W=z.lineStartIndex,ne=z.lineStartIndex+z.lineLength,ie=s.getoffsetX(z.glyphStartIndex),ce=s.getoffsetX(K-1),J=Zi(n*ie,o,c,_,w,k,z.segment,W,ne,C,F,Z);if(!J)return null;var se=Zi(n*ce,o,c,_,w,k,z.segment,W,ne,C,F,Z);return se?{first:J,last:se}:null}function On(n,s,o,c){return n===a.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*c?{useVertical:!0}:(n===a.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function Ua(n,s,o,c,_,w,k,z,C,F,Z,K,W,ne){var ie,ce=s/24,J=n.lineOffsetX*ce,se=n.lineOffsetY*ce;if(n.numGlyphs>1){var de=n.glyphStartIndex+n.numGlyphs,be=n.lineStartIndex,Te=n.lineStartIndex+n.lineLength,ke=sn(ce,z,J,se,o,Z,K,n,C,w,W);if(!ke)return{notEnoughRoom:!0};var Pe=Jt(ke.first.point,k).point,Le=Jt(ke.last.point,k).point;if(c&&!o){var We=On(n.writingMode,Pe,Le,ne);if(We)return We}ie=[ke.first];for(var He=n.glyphStartIndex+1;He<de-1;He++)ie.push(Zi(ce*z.getoffsetX(He),J,se,o,Z,K,n.segment,be,Te,C,w,W));ie.push(ke.last)}else{if(c&&!o){var ft=Jt(K,_).point,Tt=n.lineStartIndex+n.segment+1,Ct=new a.Point(C.getx(Tt),C.gety(Tt)),Pt=Jt(Ct,_),yi=Pt.signedDistanceFromCamera>0?Pt.point:ba(K,Ct,ft,1,_),dt=On(n.writingMode,ft,yi,ne);if(dt)return dt}var Ot=Zi(ce*z.getoffsetX(n.glyphStartIndex),J,se,o,Z,K,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,C,w,W);if(!Ot)return{notEnoughRoom:!0};ie=[Ot]}for(var Yt=0,Ft=ie;Yt<Ft.length;Yt+=1){var Bt=Ft[Yt];a.addDynamicAttributes(F,Bt.point,Bt.angle)}return{}}function ba(n,s,o,c,_){var w=Jt(n.add(n.sub(s)._unit()),_).point,k=o.sub(w);return o.add(k._mult(c/k.mag()))}function Zi(n,s,o,c,_,w,k,z,C,F,Z,K){var W=c?n-s:n+s,ne=W>0?1:-1,ie=0;c&&(ne*=-1,ie=Math.PI),ne<0&&(ie+=Math.PI);for(var ce=ne>0?z+k:z+k+1,J=_,se=_,de=0,be=0,Te=Math.abs(W),ke=[];de+be<=Te;){if((ce+=ne)<z||ce>=C)return null;if(se=J,ke.push(J),(J=K[ce])===void 0){var Pe=new a.Point(F.getx(ce),F.gety(ce)),Le=Jt(Pe,Z);if(Le.signedDistanceFromCamera>0)J=K[ce]=Le.point;else{var We=ce-ne;J=ba(de===0?w:new a.Point(F.getx(We),F.gety(We)),Pe,se,Te-de+1,Z)}}de+=be,be=se.dist(J)}var He=(Te-de)/be,ft=J.sub(se),Tt=ft.mult(He)._add(se);Tt._add(ft._unit()._perp()._mult(o*ne));var Ct=ie+Math.atan2(J.y-se.y,J.x-se.x);return ke.push(Tt),{point:Tt,angle:Ct,path:ke}}mi.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},mi.prototype.insert=function(n,s,o,c,_){this._forEachCell(s,o,c,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(_)},mi.prototype.insertCircle=function(n,s,o,c){this._forEachCell(s-c,o-c,s+c,o+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(o),this.circles.push(c)},mi.prototype._insertBoxCell=function(n,s,o,c,_,w){this.boxCells[_].push(w)},mi.prototype._insertCircleCell=function(n,s,o,c,_,w){this.circleCells[_].push(w)},mi.prototype._query=function(n,s,o,c,_,w){if(o<0||n>this.width||c<0||s>this.height)return!_&&[];var k=[];if(n<=0&&s<=0&&this.width<=o&&this.height<=c){if(_)return!0;for(var z=0;z<this.boxKeys.length;z++)k.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(var C=0;C<this.circleKeys.length;C++){var F=this.circles[3*C],Z=this.circles[3*C+1],K=this.circles[3*C+2];k.push({key:this.circleKeys[C],x1:F-K,y1:Z-K,x2:F+K,y2:Z+K})}return w?k.filter(w):k}return this._forEachCell(n,s,o,c,this._queryCell,k,{hitTest:_,seenUids:{box:{},circle:{}}},w),_?k.length>0:k},mi.prototype._queryCircle=function(n,s,o,c,_){var w=n-o,k=n+o,z=s-o,C=s+o;if(k<0||w>this.width||C<0||z>this.height)return!c&&[];var F=[];return this._forEachCell(w,z,k,C,this._queryCellCircle,F,{hitTest:c,circle:{x:n,y:s,radius:o},seenUids:{box:{},circle:{}}},_),c?F.length>0:F},mi.prototype.query=function(n,s,o,c,_){return this._query(n,s,o,c,!1,_)},mi.prototype.hitTest=function(n,s,o,c,_){return this._query(n,s,o,c,!0,_)},mi.prototype.hitTestCircle=function(n,s,o,c){return this._queryCircle(n,s,o,!0,c)},mi.prototype._queryCell=function(n,s,o,c,_,w,k,z){var C=k.seenUids,F=this.boxCells[_];if(F!==null)for(var Z=this.bboxes,K=0,W=F;K<W.length;K+=1){var ne=W[K];if(!C.box[ne]){C.box[ne]=!0;var ie=4*ne;if(n<=Z[ie+2]&&s<=Z[ie+3]&&o>=Z[ie+0]&&c>=Z[ie+1]&&(!z||z(this.boxKeys[ne]))){if(k.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[ne],x1:Z[ie],y1:Z[ie+1],x2:Z[ie+2],y2:Z[ie+3]})}}}var ce=this.circleCells[_];if(ce!==null)for(var J=this.circles,se=0,de=ce;se<de.length;se+=1){var be=de[se];if(!C.circle[be]){C.circle[be]=!0;var Te=3*be;if(this._circleAndRectCollide(J[Te],J[Te+1],J[Te+2],n,s,o,c)&&(!z||z(this.circleKeys[be]))){if(k.hitTest)return w.push(!0),!0;var ke=J[Te],Pe=J[Te+1],Le=J[Te+2];w.push({key:this.circleKeys[be],x1:ke-Le,y1:Pe-Le,x2:ke+Le,y2:Pe+Le})}}}},mi.prototype._queryCellCircle=function(n,s,o,c,_,w,k,z){var C=k.circle,F=k.seenUids,Z=this.boxCells[_];if(Z!==null)for(var K=this.bboxes,W=0,ne=Z;W<ne.length;W+=1){var ie=ne[W];if(!F.box[ie]){F.box[ie]=!0;var ce=4*ie;if(this._circleAndRectCollide(C.x,C.y,C.radius,K[ce+0],K[ce+1],K[ce+2],K[ce+3])&&(!z||z(this.boxKeys[ie])))return w.push(!0),!0}}var J=this.circleCells[_];if(J!==null)for(var se=this.circles,de=0,be=J;de<be.length;de+=1){var Te=be[de];if(!F.circle[Te]){F.circle[Te]=!0;var ke=3*Te;if(this._circlesCollide(se[ke],se[ke+1],se[ke+2],C.x,C.y,C.radius)&&(!z||z(this.circleKeys[Te])))return w.push(!0),!0}}},mi.prototype._forEachCell=function(n,s,o,c,_,w,k,z){for(var C=this._convertToXCellCoord(n),F=this._convertToYCellCoord(s),Z=this._convertToXCellCoord(o),K=this._convertToYCellCoord(c),W=C;W<=Z;W++)for(var ne=F;ne<=K;ne++)if(_.call(this,n,s,o,c,this.xCellCount*ne+W,w,k,z))return},mi.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},mi.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},mi.prototype._circlesCollide=function(n,s,o,c,_,w){var k=c-n,z=_-s,C=o+w;return C*C>k*k+z*z},mi.prototype._circleAndRectCollide=function(n,s,o,c,_,w,k){var z=(w-c)/2,C=Math.abs(n-(c+z));if(C>z+o)return!1;var F=(k-_)/2,Z=Math.abs(s-(_+F));if(Z>F+o)return!1;if(C<=z||Z<=F)return!0;var K=C-z,W=Z-F;return K*K+W*W<=o*o};var xa=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pn(n,s){for(var o=0;o<n;o++){var c=s.length;s.resize(c+4),s.float32.set(xa,3*c)}}function ln(n,s,o){var c=s[0],_=s[1];return n[0]=o[0]*c+o[4]*_+o[12],n[1]=o[1]*c+o[5]*_+o[13],n[3]=o[3]*c+o[7]*_+o[15],n}var hr=function(n,s,o){s===void 0&&(s=new mi(n.width+200,n.height+200,25)),o===void 0&&(o=new mi(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function Di(n,s,o){return s*(a.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}hr.prototype.placeCollisionBox=function(n,s,o,c,_){var w=this.projectAndGetPerspectiveRatio(c,n.anchorPointX,n.anchorPointY),k=o*w.perspectiveRatio,z=n.x1*k+w.point.x,C=n.y1*k+w.point.y,F=n.x2*k+w.point.x,Z=n.y2*k+w.point.y;return!this.isInsideGrid(z,C,F,Z)||!s&&this.grid.hitTest(z,C,F,Z,_)?{box:[],offscreen:!1}:{box:[z,C,F,Z],offscreen:this.isOffscreen(z,C,F,Z)}},hr.prototype.placeCollisionCircles=function(n,s,o,c,_,w,k,z,C,F,Z,K,W){var ne=[],ie=new a.Point(s.anchorX,s.anchorY),ce=Jt(ie,w),J=si(this.transform.cameraToCenterDistance,ce.signedDistanceFromCamera),se=(F?_/J:_*J)/a.ONE_EM,de=Jt(ie,k).point,be=sn(se,c,s.lineOffsetX*se,s.lineOffsetY*se,!1,de,ie,s,o,k,{}),Te=!1,ke=!1,Pe=!0;if(be){for(var Le=.5*K*J+W,We=new a.Point(-100,-100),He=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),ft=new wn,Tt=be.first,Ct=be.last,Pt=[],yi=Tt.path.length-1;yi>=1;yi--)Pt.push(Tt.path[yi]);for(var dt=1;dt<Ct.path.length;dt++)Pt.push(Ct.path[dt]);var Ot=2.5*Le;if(z){var Yt=Pt.map(function(la){return Jt(la,z)});Pt=Yt.some(function(la){return la.signedDistanceFromCamera<=0})?[]:Yt.map(function(la){return la.point})}var Ft=[];if(Pt.length>0){for(var Bt=Pt[0].clone(),Wt=Pt[0].clone(),Rt=1;Rt<Pt.length;Rt++)Bt.x=Math.min(Bt.x,Pt[Rt].x),Bt.y=Math.min(Bt.y,Pt[Rt].y),Wt.x=Math.max(Wt.x,Pt[Rt].x),Wt.y=Math.max(Wt.y,Pt[Rt].y);Ft=Bt.x>=We.x&&Wt.x<=He.x&&Bt.y>=We.y&&Wt.y<=He.y?[Pt]:Wt.x<We.x||Bt.x>He.x||Wt.y<We.y||Bt.y>He.y?[]:a.clipLine([Pt],We.x,We.y,He.x,He.y)}for(var Dt=0,Nn=Ft;Dt<Nn.length;Dt+=1){var un;ft.reset(Nn[Dt],.25*Le),un=ft.length<=.5*Le?1:Math.ceil(ft.paddedLength/Ot)+1;for(var dr=0;dr<un;dr++){var Wn=dr/Math.max(un-1,1),rn=ft.lerp(Wn),mn=rn.x+100,Zr=rn.y+100;ne.push(mn,Zr,Le,0);var xr=mn-Le,$a=Zr-Le,Ar=mn+Le,va=Zr+Le;if(Pe=Pe&&this.isOffscreen(xr,$a,Ar,va),ke=ke||this.isInsideGrid(xr,$a,Ar,va),!n&&this.grid.hitTestCircle(mn,Zr,Le,Z)&&(Te=!0,!C))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!C&&Te||!ke?[]:ne,offscreen:Pe,collisionDetected:Te}},hr.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,c=1/0,_=-1/0,w=-1/0,k=0,z=n;k<z.length;k+=1){var C=z[k],F=new a.Point(C.x+100,C.y+100);o=Math.min(o,F.x),c=Math.min(c,F.y),_=Math.max(_,F.x),w=Math.max(w,F.y),s.push(F)}for(var Z={},K={},W=0,ne=this.grid.query(o,c,_,w).concat(this.ignoredGrid.query(o,c,_,w));W<ne.length;W+=1){var ie=ne[W],ce=ie.key;if(Z[ce.bucketInstanceId]===void 0&&(Z[ce.bucketInstanceId]={}),!Z[ce.bucketInstanceId][ce.featureIndex]){var J=[new a.Point(ie.x1,ie.y1),new a.Point(ie.x2,ie.y1),new a.Point(ie.x2,ie.y2),new a.Point(ie.x1,ie.y2)];a.polygonIntersectsPolygon(s,J)&&(Z[ce.bucketInstanceId][ce.featureIndex]=!0,K[ce.bucketInstanceId]===void 0&&(K[ce.bucketInstanceId]=[]),K[ce.bucketInstanceId].push(ce.featureIndex))}}return K},hr.prototype.insertCollisionBox=function(n,s,o,c,_){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:c,collisionGroupID:_},n[0],n[1],n[2],n[3])},hr.prototype.insertCollisionCircles=function(n,s,o,c,_){for(var w=s?this.ignoredGrid:this.grid,k={bucketInstanceId:o,featureIndex:c,collisionGroupID:_},z=0;z<n.length;z+=4)w.insertCircle(k,n[z],n[z+1],n[z+2])},hr.prototype.projectAndGetPerspectiveRatio=function(n,s,o){var c=[s,o,0,1];return ln(c,c,n),{point:new a.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},hr.prototype.isOffscreen=function(n,s,o,c){return o<100||n>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},hr.prototype.isInsideGrid=function(n,s,o,c){return o>=0&&n<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},hr.prototype.getViewportMatrix=function(){var n=a.identity([]);return a.translate(n,n,[-100,-100,0]),n};var Fr=function(n,s,o,c){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):c&&o?1:0,this.placed=o};Fr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var _r=function(n,s,o,c,_){this.text=new Fr(n?n.text:null,s,o,_),this.icon=new Fr(n?n.icon:null,s,c,_)};_r.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var os=function(n,s,o){this.text=n,this.icon=s,this.skipFade=o},Cn=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},wa=function(n,s,o,c,_){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=c,this.tileID=_},Gn=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function Mn(n,s,o,c,_){var w=a.getAnchorAlignment(n),k=-(w.horizontalAlign-.5)*s,z=-(w.verticalAlign-.5)*o,C=a.evaluateVariableOffset(n,c);return new a.Point(k+C[0]*_,z+C[1]*_)}function $r(n,s,o,c,_,w){var k=n.x1,z=n.x2,C=n.y1,F=n.y2,Z=n.anchorPointX,K=n.anchorPointY,W=new a.Point(s,o);return c&&W._rotate(_?w:-w),{x1:k+W.x,y1:C+W.y,x2:z+W.x,y2:F+W.y,anchorPointX:Z,anchorPointY:K}}Gn.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[n]};var Zn=function(n,s,o,c){this.transform=n.clone(),this.collisionIndex=new hr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Gn(o),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function Sa(n,s,o,c,_){n.emplaceBack(s?1:0,o?1:0,c||0,_||0),n.emplaceBack(s?1:0,o?1:0,c||0,_||0),n.emplaceBack(s?1:0,o?1:0,c||0,_||0),n.emplaceBack(s?1:0,o?1:0,c||0,_||0)}Zn.prototype.getBucketParts=function(n,s,o,c){var _=o.getBucket(s),w=o.latestFeatureIndex;if(_&&w&&s.id===_.layerIds[0]){var k=o.collisionBoxArray,z=_.layers[0].layout,C=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),F=o.tileSize/a.EXTENT,Z=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),K=z.get("text-pitch-alignment")==="map",W=z.get("text-rotation-alignment")==="map",ne=Di(o,1,this.transform.zoom),ie=Oi(Z,K,W,this.transform,ne),ce=null;if(K){var J=xi(Z,K,W,this.transform,ne);ce=a.multiply([],this.transform.labelPlaneMatrix,J)}this.retainedQueryData[_.bucketInstanceId]=new wa(_.bucketInstanceId,w,_.sourceLayerIndex,_.index,o.tileID);var se={bucket:_,layout:z,posMatrix:Z,textLabelPlaneMatrix:ie,labelToScreenMatrix:ce,scale:C,textPixelRatio:F,holdingForFade:o.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(c)for(var de=0,be=_.sortKeyRanges;de<be.length;de+=1){var Te=be[de];n.push({sortKey:Te.sortKey,symbolInstanceStart:Te.symbolInstanceStart,symbolInstanceEnd:Te.symbolInstanceEnd,parameters:se})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:se})}},Zn.prototype.attemptAnchorPlacement=function(n,s,o,c,_,w,k,z,C,F,Z,K,W,ne,ie){var ce,J=[K.textOffset0,K.textOffset1],se=Mn(n,o,c,J,_),de=this.collisionIndex.placeCollisionBox($r(s,se.x,se.y,w,k,this.transform.angle),Z,z,C,F.predicate);if(!ie||this.collisionIndex.placeCollisionBox($r(ie,se.x,se.y,w,k,this.transform.angle),Z,z,C,F.predicate).box.length!==0)return de.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(ce=this.prevPlacement.variableOffsets[K.crossTileID].anchor),this.variableOffsets[K.crossTileID]={textOffset:J,width:o,height:c,anchor:n,textBoxScale:_,prevAnchor:ce},this.markUsedJustification(W,n,K,ne),W.allowVerticalPlacement&&(this.markUsedOrientation(W,ne,K),this.placedOrientations[K.crossTileID]=ne),{shift:se,placedGlyphBoxes:de}):void 0},Zn.prototype.placeLayerBucketPart=function(n,s,o){var c=this,_=n.parameters,w=_.bucket,k=_.layout,z=_.posMatrix,C=_.textLabelPlaneMatrix,F=_.labelToScreenMatrix,Z=_.textPixelRatio,K=_.holdingForFade,W=_.collisionBoxArray,ne=_.partiallyEvaluatedTextSize,ie=_.collisionGroup,ce=k.get("text-optional"),J=k.get("icon-optional"),se=k.get("text-allow-overlap"),de=k.get("icon-allow-overlap"),be=k.get("text-rotation-alignment")==="map",Te=k.get("text-pitch-alignment")==="map",ke=k.get("icon-text-fit")!=="none",Pe=k.get("symbol-z-order")==="viewport-y",Le=se&&(de||!w.hasIconData()||J),We=de&&(se||!w.hasTextData()||ce);!w.collisionArrays&&W&&w.deserializeCollisionBoxes(W);var He=function(dt,Ot){if(!s[dt.crossTileID])if(K)c.placements[dt.crossTileID]=new os(!1,!1,!1);else{var Yt,Ft=!1,Bt=!1,Wt=!0,Rt=null,Dt={box:null,offscreen:null},Nn={box:null,offscreen:null},un=null,dr=null,Wn=0,rn=0,mn=0;Ot.textFeatureIndex?Wn=Ot.textFeatureIndex:dt.useRuntimeCollisionCircles&&(Wn=dt.featureIndex),Ot.verticalTextFeatureIndex&&(rn=Ot.verticalTextFeatureIndex);var Zr=Ot.textBox;if(Zr){var xr=function(Ii){var ia=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Ii&&c.prevPlacement){var Pr=c.prevPlacement.placedOrientations[dt.crossTileID];Pr&&(c.placedOrientations[dt.crossTileID]=Pr,c.markUsedOrientation(w,ia=Pr,dt))}return ia},$a=function(Ii,ia){if(w.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Ot.verticalTextBox)for(var Pr=0,Mo=w.writingModes;Pr<Mo.length&&(Mo[Pr]===a.WritingMode.vertical?(Dt=ia(),Nn=Dt):Dt=Ii(),!(Dt&&Dt.box&&Dt.box.length));Pr+=1);else Dt=Ii()};if(k.get("text-variable-anchor")){var Ar=k.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[dt.crossTileID]){var va=c.prevPlacement.variableOffsets[dt.crossTileID];Ar.indexOf(va.anchor)>0&&(Ar=Ar.filter(function(Ii){return Ii!==va.anchor})).unshift(va.anchor)}var la=function(Ii,ia,Pr){for(var Mo=Ii.x2-Ii.x1,Gp=Ii.y2-Ii.y1,sl=dt.textBoxScale,Zp=ke&&!de?ia:null,Is={box:[],offscreen:!1},Ic=se?2*Ar.length:Ar.length,$o=0;$o<Ic;++$o){var ll=c.attemptAnchorPlacement(Ar[$o%Ar.length],Ii,Mo,Gp,sl,be,Te,Z,z,ie,$o>=Ar.length,dt,w,Pr,Zp);if(ll&&(Is=ll.placedGlyphBoxes)&&Is.box&&Is.box.length){Ft=!0,Rt=ll.shift;break}}return Is};$a(function(){return la(Zr,Ot.iconBox,a.WritingMode.horizontal)},function(){var Ii=Ot.verticalTextBox;return w.allowVerticalPlacement&&!(Dt&&Dt.box&&Dt.box.length)&&dt.numVerticalGlyphVertices>0&&Ii?la(Ii,Ot.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),Dt&&(Ft=Dt.box,Wt=Dt.offscreen);var Es=xr(Dt&&Dt.box);if(!Ft&&c.prevPlacement){var Jo=c.prevPlacement.variableOffsets[dt.crossTileID];Jo&&(c.variableOffsets[dt.crossTileID]=Jo,c.markUsedJustification(w,Jo.anchor,dt,Es))}}else{var eo=function(Ii,ia){var Pr=c.collisionIndex.placeCollisionBox(Ii,se,Z,z,ie.predicate);return Pr&&Pr.box&&Pr.box.length&&(c.markUsedOrientation(w,ia,dt),c.placedOrientations[dt.crossTileID]=ia),Pr};$a(function(){return eo(Zr,a.WritingMode.horizontal)},function(){var Ii=Ot.verticalTextBox;return w.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Ii?eo(Ii,a.WritingMode.vertical):{box:null,offscreen:null}}),xr(Dt&&Dt.box&&Dt.box.length)}}if(Ft=(Yt=Dt)&&Yt.box&&Yt.box.length>0,Wt=Yt&&Yt.offscreen,dt.useRuntimeCollisionCircles){var Qo=w.text.placedSymbolArray.get(dt.centerJustifiedTextSymbolIndex),zs=a.evaluateSizeForFeature(w.textSizeData,ne,Qo),Aa=k.get("text-padding");un=c.collisionIndex.placeCollisionCircles(se,Qo,w.lineVertexArray,w.glyphOffsetArray,zs,z,C,F,o,Te,ie.predicate,dt.collisionCircleDiameter,Aa),Ft=se||un.circles.length>0&&!un.collisionDetected,Wt=Wt&&un.offscreen}if(Ot.iconFeatureIndex&&(mn=Ot.iconFeatureIndex),Ot.iconBox){var Ts=function(Ii){var ia=ke&&Rt?$r(Ii,Rt.x,Rt.y,be,Te,c.transform.angle):Ii;return c.collisionIndex.placeCollisionBox(ia,de,Z,z,ie.predicate)};Bt=Nn&&Nn.box&&Nn.box.length&&Ot.verticalIconBox?(dr=Ts(Ot.verticalIconBox)).box.length>0:(dr=Ts(Ot.iconBox)).box.length>0,Wt=Wt&&dr.offscreen}var Pa=ce||dt.numHorizontalGlyphVertices===0&&dt.numVerticalGlyphVertices===0,Un=J||dt.numIconVertices===0;if(Pa||Un?Un?Pa||(Bt=Bt&&Ft):Ft=Bt&&Ft:Bt=Ft=Bt&&Ft,Ft&&Yt&&Yt.box&&c.collisionIndex.insertCollisionBox(Yt.box,k.get("text-ignore-placement"),w.bucketInstanceId,Nn&&Nn.box&&rn?rn:Wn,ie.ID),Bt&&dr&&c.collisionIndex.insertCollisionBox(dr.box,k.get("icon-ignore-placement"),w.bucketInstanceId,mn,ie.ID),un&&(Ft&&c.collisionIndex.insertCollisionCircles(un.circles,k.get("text-ignore-placement"),w.bucketInstanceId,Wn,ie.ID),o)){var Ra=w.bucketInstanceId,to=c.collisionCircleArrays[Ra];to===void 0&&(to=c.collisionCircleArrays[Ra]=new Cn);for(var Co=0;Co<un.circles.length;Co+=4)to.circles.push(un.circles[Co+0]),to.circles.push(un.circles[Co+1]),to.circles.push(un.circles[Co+2]),to.circles.push(un.collisionDetected?1:0)}c.placements[dt.crossTileID]=new os(Ft||Le,Bt||We,Wt||w.justReloaded),s[dt.crossTileID]=!0}};if(Pe)for(var ft=w.getSortedSymbolIndexes(this.transform.angle),Tt=ft.length-1;Tt>=0;--Tt){var Ct=ft[Tt];He(w.symbolInstances.get(Ct),w.collisionArrays[Ct])}else for(var Pt=n.symbolInstanceStart;Pt<n.symbolInstanceEnd;Pt++)He(w.symbolInstances.get(Pt),w.collisionArrays[Pt]);if(o&&w.bucketInstanceId in this.collisionCircleArrays){var yi=this.collisionCircleArrays[w.bucketInstanceId];a.invert(yi.invProjMatrix,z),yi.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Zn.prototype.markUsedJustification=function(n,s,o,c){var _;_=c===a.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(s)];for(var w=0,k=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];w<k.length;w+=1){var z=k[w];z>=0&&(n.text.placedSymbolArray.get(z).crossTileID=_>=0&&z!==_?0:o.crossTileID)}},Zn.prototype.markUsedOrientation=function(n,s,o){for(var c=s===a.WritingMode.horizontal||s===a.WritingMode.horizontalOnly?s:0,_=s===a.WritingMode.vertical?s:0,w=0,k=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];w<k.length;w+=1)n.text.placedSymbolArray.get(k[w]).placedOrientation=c;o.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=_)},Zn.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(n):1,_=s?s.opacities:{},w=s?s.variableOffsets:{},k=s?s.placedOrientations:{};for(var z in this.placements){var C=this.placements[z],F=_[z];F?(this.opacities[z]=new _r(F,c,C.text,C.icon),o=o||C.text!==F.text.placed||C.icon!==F.icon.placed):(this.opacities[z]=new _r(null,c,C.text,C.icon,C.skipFade),o=o||C.text||C.icon)}for(var Z in _){var K=_[Z];if(!this.opacities[Z]){var W=new _r(K,c,!1,!1);W.isHidden()||(this.opacities[Z]=W,o=o||K.text.placed||K.icon.placed)}}for(var ne in w)this.variableOffsets[ne]||!this.opacities[ne]||this.opacities[ne].isHidden()||(this.variableOffsets[ne]=w[ne]);for(var ie in k)this.placedOrientations[ie]||!this.opacities[ie]||this.opacities[ie].isHidden()||(this.placedOrientations[ie]=k[ie]);o?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},Zn.prototype.updateLayerOpacities=function(n,s){for(var o={},c=0,_=s;c<_.length;c+=1){var w=_[c],k=w.getBucket(n);k&&w.latestFeatureIndex&&n.id===k.layerIds[0]&&this.updateBucketOpacities(k,o,w.collisionBoxArray)}},Zn.prototype.updateBucketOpacities=function(n,s,o){var c=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var _=n.layers[0].layout,w=new _r(null,0,!1,!1,!0),k=_.get("text-allow-overlap"),z=_.get("icon-allow-overlap"),C=_.get("text-variable-anchor"),F=_.get("text-rotation-alignment")==="map",Z=_.get("text-pitch-alignment")==="map",K=_.get("icon-text-fit")!=="none",W=new _r(null,0,k&&(z||!n.hasIconData()||_.get("icon-optional")),z&&(k||!n.hasTextData()||_.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);for(var ne=function(se,de,be){for(var Te=0;Te<de/4;Te++)se.opacityVertexArray.emplaceBack(be)},ie=function(se){var de=n.symbolInstances.get(se),be=de.numHorizontalGlyphVertices,Te=de.numVerticalGlyphVertices,ke=de.crossTileID,Pe=c.opacities[ke];s[ke]?Pe=w:Pe||(c.opacities[ke]=Pe=W),s[ke]=!0;var Le=de.numIconVertices>0,We=c.placedOrientations[de.crossTileID],He=We===a.WritingMode.vertical,ft=We===a.WritingMode.horizontal||We===a.WritingMode.horizontalOnly;if(be>0||Te>0){var Tt=Vs(Pe.text);ne(n.text,be,He?Va:Tt),ne(n.text,Te,ft?Va:Tt);var Ct=Pe.text.isHidden();[de.rightJustifiedTextSymbolIndex,de.centerJustifiedTextSymbolIndex,de.leftJustifiedTextSymbolIndex].forEach(function(Dt){Dt>=0&&(n.text.placedSymbolArray.get(Dt).hidden=Ct||He?1:0)}),de.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(de.verticalPlacedTextSymbolIndex).hidden=Ct||ft?1:0);var Pt=c.variableOffsets[de.crossTileID];Pt&&c.markUsedJustification(n,Pt.anchor,de,We);var yi=c.placedOrientations[de.crossTileID];yi&&(c.markUsedJustification(n,"left",de,yi),c.markUsedOrientation(n,yi,de))}if(Le){var dt=Vs(Pe.icon),Ot=!(K&&de.verticalPlacedIconSymbolIndex&&He);de.placedIconSymbolIndex>=0&&(ne(n.icon,de.numIconVertices,Ot?dt:Va),n.icon.placedSymbolArray.get(de.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),de.verticalPlacedIconSymbolIndex>=0&&(ne(n.icon,de.numVerticalIconVertices,Ot?Va:dt),n.icon.placedSymbolArray.get(de.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Yt=n.collisionArrays[se];if(Yt){var Ft=new a.Point(0,0);if(Yt.textBox||Yt.verticalTextBox){var Bt=!0;if(C){var Wt=c.variableOffsets[ke];Wt?(Ft=Mn(Wt.anchor,Wt.width,Wt.height,Wt.textOffset,Wt.textBoxScale),F&&Ft._rotate(Z?c.transform.angle:-c.transform.angle)):Bt=!1}Yt.textBox&&Sa(n.textCollisionBox.collisionVertexArray,Pe.text.placed,!Bt||He,Ft.x,Ft.y),Yt.verticalTextBox&&Sa(n.textCollisionBox.collisionVertexArray,Pe.text.placed,!Bt||ft,Ft.x,Ft.y)}var Rt=!!(!ft&&Yt.verticalIconBox);Yt.iconBox&&Sa(n.iconCollisionBox.collisionVertexArray,Pe.icon.placed,Rt,K?Ft.x:0,K?Ft.y:0),Yt.verticalIconBox&&Sa(n.iconCollisionBox.collisionVertexArray,Pe.icon.placed,!Rt,K?Ft.x:0,K?Ft.y:0)}}},ce=0;ce<n.symbolInstances.length;ce++)ie(ce);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var J=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=J.invProjMatrix,n.placementViewportMatrix=J.viewportMatrix,n.collisionCircleArray=J.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},Zn.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Zn.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},Zn.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},Zn.prototype.stillRecent=function(n,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>n},Zn.prototype.setStale=function(){this.stale=!0};var ss=Math.pow(2,25),Ol=Math.pow(2,24),fo=Math.pow(2,17),Nl=Math.pow(2,16),No=Math.pow(2,9),Ul=Math.pow(2,8),Uo=Math.pow(2,1);function Vs(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,o=Math.floor(127*n.opacity);return o*ss+s*Ol+o*fo+s*Nl+o*No+s*Ul+o*Uo+s}var Va=0,ls=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ls.prototype.continuePlacement=function(n,s,o,c,_){for(var w=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(w,c,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(k,z){return k.sortKey-z.sortKey}));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,_())return!0;return!1};var mo=function(n,s,o,c,_,w,k){this.placement=new Zn(n,_,w,k),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=c,this._done=!1};mo.prototype.isDone=function(){return this._done},mo.prototype.continuePlacement=function(n,s,o){for(var c=this,_=a.browser.now(),w=function(){var C=a.browser.now()-_;return!c._forceFullPlacement&&C>2};this._currentPlacementIndex>=0;){var k=s[n[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=z)&&(!k.maxzoom||k.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new ls(k)),this._inProgressLayer.continuePlacement(o[k.source],this.placement,this._showCollisionBoxes,k,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},mo.prototype.commit=function(n){return this.placement.commit(n),this.placement};var qs=512/a.EXTENT/2,qa=function(n,s,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var c=0;c<s.length;c++){var _=s.get(c),w=_.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:_.crossTileID,coord:this.getScaledCoordinates(_,n)})}};qa.prototype.getScaledCoordinates=function(n,s){var o=qs/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*a.EXTENT+n.anchorX)*o),y:Math.floor((s.canonical.y*a.EXTENT+n.anchorY)*o)}},qa.prototype.findMatches=function(n,s,o){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),_=0;_<n.length;_++){var w=n.get(_);if(!w.crossTileID){var k=this.indexedSymbolInstances[w.key];if(k)for(var z=this.getScaledCoordinates(w,s),C=0,F=k;C<F.length;C+=1){var Z=F[C];if(Math.abs(Z.coord.x-z.x)<=c&&Math.abs(Z.coord.y-z.y)<=c&&!o[Z.crossTileID]){o[Z.crossTileID]=!0,w.crossTileID=Z.crossTileID;break}}}}};var Or=function(){this.maxCrossTileID=0};Or.prototype.generate=function(){return++this.maxCrossTileID};var ka=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ka.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var o in this.indexes){var c=this.indexes[o],_={};for(var w in c){var k=c[w];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+s),_[k.tileID.key]=k}this.indexes[o]=_}this.lng=n},ka.prototype.addBucket=function(n,s,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var _=this.usedCrossTileIDs[n.overscaledZ];for(var w in this.indexes){var k=this.indexes[w];if(Number(w)>n.overscaledZ)for(var z in k){var C=k[z];C.tileID.isChildOf(n)&&C.findMatches(s.symbolInstances,n,_)}else{var F=k[n.scaledTo(Number(w)).key];F&&F.findMatches(s.symbolInstances,n,_)}}for(var Z=0;Z<s.symbolInstances.length;Z++){var K=s.symbolInstances.get(Z);K.crossTileID||(K.crossTileID=o.generate(),_[K.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new qa(n,s.symbolInstances,s.bucketInstanceId),!0},ka.prototype.removeBucketCrossTileIDs=function(n,s){for(var o in s.indexedSymbolInstances)for(var c=0,_=s.indexedSymbolInstances[o];c<_.length;c+=1)delete this.usedCrossTileIDs[n][_[c].crossTileID]},ka.prototype.removeStaleBuckets=function(n){var s=!1;for(var o in this.indexes){var c=this.indexes[o];for(var _ in c)n[c[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,c[_]),delete c[_],s=!0)}return s};var _e=function(){this.layerIndexes={},this.crossTileIDs=new Or,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};_e.prototype.addLayer=function(n,s,o){var c=this.layerIndexes[n.id];c===void 0&&(c=this.layerIndexes[n.id]=new ka);var _=!1,w={};c.handleWrapJump(o);for(var k=0,z=s;k<z.length;k+=1){var C=z[k],F=C.getBucket(n);F&&n.id===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(C.tileID,F,this.crossTileIDs)&&(_=!0),w[F.bucketInstanceId]=!0)}return c.removeStaleBuckets(w)&&(_=!0),_},_e.prototype.pruneUnusedLayers=function(n){var s={};for(var o in n.forEach(function(c){s[c]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var fr=function(n,s){return a.emitValidationErrors(n,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},Kn=a.pick(it,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ki=a.pick(it,["setCenter","setZoom","setBearing","setPitch"]),Ea=function(){var n={},s=a.styleSpec.$version;for(var o in a.styleSpec.$root){var c,_=a.styleSpec.$root[o];_.required&&(c=o==="version"?s:_.type==="array"?[]:{})!=null&&(n[o]=c)}return n}(),Nr=function(n){function s(o,c){var _=this;c===void 0&&(c={}),n.call(this),this.map=o,this.dispatcher=new qe(Ie(),this),this.imageManager=new ve,this.imageManager.setEventedParent(this),this.glyphManager=new Ze(o._requestManager,c.localIdeographFontFamily),this.lineAtlas=new we(256,512),this.crossTileSymbolIndex=new _e,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var w=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(k){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},function(z,C){if(a.triggerPluginCompletionEvent(z),C&&C.every(function(Z){return Z}))for(var F in w.sourceCaches)w.sourceCaches[F].reload()})}),this.on("data",function(k){if(k.dataType==="source"&&k.sourceDataType==="metadata"){var z=_.sourceCaches[k.sourceId];if(z){var C=z.getSource();if(C&&C.vectorLayerIds)for(var F in _._layers){var Z=_._layers[F];Z.source===C.id&&_._validateLayer(Z)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(o,c){var _=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var w=typeof c.validate=="boolean"?c.validate:!a.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,c.accessToken);var k=this.map._requestManager.transformRequest(o,a.ResourceType.Style);this._request=a.getJSON(k,function(z,C){_._request=null,z?_.fire(new a.ErrorEvent(z)):C&&_._load(C,w)})},s.prototype.loadJSON=function(o,c){var _=this;c===void 0&&(c={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){_._request=null,_._load(o,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Ea,!1)},s.prototype._load=function(o,c){if(!c||!fr(this,a.validateStyle(o))){for(var _ in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(_,o.sources[_],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var w=Qe(this.stylesheet.layers);this._order=w.map(function(F){return F.id}),this._layers={},this._serializedLayers={};for(var k=0,z=w;k<z.length;k+=1){var C=z[k];(C=a.createStyleLayer(C)).setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new jt(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},s.prototype._loadSprite=function(o){var c=this;this._spriteRequest=function(_,w,k){var z,C,F,Z=a.browser.devicePixelRatio>1?"@2x":"",K=a.getJSON(w.transformRequest(w.normalizeSpriteURL(_,Z,".json"),a.ResourceType.SpriteJSON),function(ie,ce){K=null,F||(F=ie,z=ce,ne())}),W=a.getImage(w.transformRequest(w.normalizeSpriteURL(_,Z,".png"),a.ResourceType.SpriteImage),function(ie,ce){W=null,F||(F=ie,C=ce,ne())});function ne(){if(F)k(F);else if(z&&C){var ie=a.browser.getImageData(C),ce={};for(var J in z){var se=z[J],de=se.width,be=se.height,Te=se.x,ke=se.y,Pe=se.sdf,Le=se.pixelRatio,We=se.stretchX,He=se.stretchY,ft=se.content,Tt=new a.RGBAImage({width:de,height:be});a.RGBAImage.copy(ie,Tt,{x:Te,y:ke},{x:0,y:0},{width:de,height:be}),ce[J]={data:Tt,pixelRatio:Le,sdf:Pe,stretchX:We,stretchY:He,content:ft}}k(null,ce)}}return{cancel:function(){K&&(K.cancel(),K=null),W&&(W.cancel(),W=null)}}}(o,this.map._requestManager,function(_,w){if(c._spriteRequest=null,_)c.fire(new a.ErrorEvent(_));else if(w)for(var k in w)c.imageManager.addImage(k,w[k]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new a.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var c=this.sourceCaches[o.source];if(c){var _=o.sourceLayer;if(_){var w=c.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(_)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+_+'" does not exist on source "'+w.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var c=[],_=0,w=o;_<w.length;_+=1){var k=this._layers[w[_]];k.type!=="custom"&&c.push(k.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var c=this._changed;if(this._changed){var _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var k in(_.length||w.length)&&this._updateWorkerLayers(_,w),this._updatedSources){var z=this._updatedSources[k];z==="reload"?this._reloadSource(k):z==="clear"&&this._clearSource(k)}for(var C in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[C].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var F={};for(var Z in this.sourceCaches){var K=this.sourceCaches[Z];F[Z]=K.used,K.used=!1}for(var W=0,ne=this._order;W<ne.length;W+=1){var ie=this._layers[ne[W]];ie.recalculate(o,this._availableImages),!ie.isHidden(o.zoom)&&ie.source&&(this.sourceCaches[ie.source].used=!0)}for(var ce in F){var J=this.sourceCaches[ce];F[ce]!==J.used&&J.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ce}))}this.light.recalculate(o),this.z=o.zoom,c&&this.fire(new a.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var c=this;if(this._checkLoaded(),fr(this,a.validateStyle(o)))return!1;(o=a.clone$1(o)).layers=Qe(o.layers);var _=function(k,z){if(!k)return[{command:it.setStyle,args:[z]}];var C=[];try{if(!a.deepEqual(k.version,z.version))return[{command:it.setStyle,args:[z]}];a.deepEqual(k.center,z.center)||C.push({command:it.setCenter,args:[z.center]}),a.deepEqual(k.zoom,z.zoom)||C.push({command:it.setZoom,args:[z.zoom]}),a.deepEqual(k.bearing,z.bearing)||C.push({command:it.setBearing,args:[z.bearing]}),a.deepEqual(k.pitch,z.pitch)||C.push({command:it.setPitch,args:[z.pitch]}),a.deepEqual(k.sprite,z.sprite)||C.push({command:it.setSprite,args:[z.sprite]}),a.deepEqual(k.glyphs,z.glyphs)||C.push({command:it.setGlyphs,args:[z.glyphs]}),a.deepEqual(k.transition,z.transition)||C.push({command:it.setTransition,args:[z.transition]}),a.deepEqual(k.light,z.light)||C.push({command:it.setLight,args:[z.light]});var F={},Z=[];(function(W,ne,ie,ce){var J;for(J in ne=ne||{},W=W||{})W.hasOwnProperty(J)&&(ne.hasOwnProperty(J)||ot(J,ie,ce));for(J in ne)ne.hasOwnProperty(J)&&(W.hasOwnProperty(J)?a.deepEqual(W[J],ne[J])||(W[J].type==="geojson"&&ne[J].type==="geojson"&&Ei(W,ne,J)?ie.push({command:it.setGeoJSONSourceData,args:[J,ne[J].data]}):$t(J,ne,ie,ce)):Gt(J,ne,ie))})(k.sources,z.sources,Z,F);var K=[];k.layers&&k.layers.forEach(function(W){F[W.source]?C.push({command:it.removeLayer,args:[W.id]}):K.push(W)}),C=C.concat(Z),function(W,ne,ie){ne=ne||[];var ce,J,se,de,be,Te,ke,Pe=(W=W||[]).map(oi),Le=ne.map(oi),We=W.reduce(ei,{}),He=ne.reduce(ei,{}),ft=Pe.slice(),Tt=Object.create(null);for(ce=0,J=0;ce<Pe.length;ce++)He.hasOwnProperty(se=Pe[ce])?J++:(ie.push({command:it.removeLayer,args:[se]}),ft.splice(ft.indexOf(se,J),1));for(ce=0,J=0;ce<Le.length;ce++)ft[ft.length-1-ce]!==(se=Le[Le.length-1-ce])&&(We.hasOwnProperty(se)?(ie.push({command:it.removeLayer,args:[se]}),ft.splice(ft.lastIndexOf(se,ft.length-J),1)):J++,ie.push({command:it.addLayer,args:[He[se],Te=ft[ft.length-ce]]}),ft.splice(ft.length-ce,0,se),Tt[se]=!0);for(ce=0;ce<Le.length;ce++)if(de=We[se=Le[ce]],be=He[se],!Tt[se]&&!a.deepEqual(de,be))if(a.deepEqual(de.source,be.source)&&a.deepEqual(de["source-layer"],be["source-layer"])&&a.deepEqual(de.type,be.type)){for(ke in Ht(de.layout,be.layout,ie,se,null,it.setLayoutProperty),Ht(de.paint,be.paint,ie,se,null,it.setPaintProperty),a.deepEqual(de.filter,be.filter)||ie.push({command:it.setFilter,args:[se,be.filter]}),a.deepEqual(de.minzoom,be.minzoom)&&a.deepEqual(de.maxzoom,be.maxzoom)||ie.push({command:it.setLayerZoomRange,args:[se,be.minzoom,be.maxzoom]}),de)de.hasOwnProperty(ke)&&ke!=="layout"&&ke!=="paint"&&ke!=="filter"&&ke!=="metadata"&&ke!=="minzoom"&&ke!=="maxzoom"&&(ke.indexOf("paint.")===0?Ht(de[ke],be[ke],ie,se,ke.slice(6),it.setPaintProperty):a.deepEqual(de[ke],be[ke])||ie.push({command:it.setLayerProperty,args:[se,ke,be[ke]]}));for(ke in be)be.hasOwnProperty(ke)&&!de.hasOwnProperty(ke)&&ke!=="layout"&&ke!=="paint"&&ke!=="filter"&&ke!=="metadata"&&ke!=="minzoom"&&ke!=="maxzoom"&&(ke.indexOf("paint.")===0?Ht(de[ke],be[ke],ie,se,ke.slice(6),it.setPaintProperty):a.deepEqual(de[ke],be[ke])||ie.push({command:it.setLayerProperty,args:[se,ke,be[ke]]}))}else ie.push({command:it.removeLayer,args:[se]}),Te=ft[ft.lastIndexOf(se)+1],ie.push({command:it.addLayer,args:[be,Te]})}(K,z.layers,C)}catch(W){console.warn("Unable to compute style diff:",W),C=[{command:it.setStyle,args:[z]}]}return C}(this.serialize(),o).filter(function(k){return!(k.command in Ki)});if(_.length===0)return!1;var w=_.filter(function(k){return!(k.command in Kn)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(k){return k.command}).join(", ")+".");return _.forEach(function(k){k.command!=="setTransition"&&c[k.command].apply(c,k.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,c){if(this.getImage(o))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,c),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,c){this.imageManager.updateImage(o,c)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,c,_){var w=this;if(_===void 0&&(_={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.validateStyle.source,"sources."+o,c,null,_))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var k=this.sourceCaches[o]=new ee(o,c,this.dispatcher);k.style=this,k.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:k.serialize(),sourceId:o}}),k.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===o)return this.fire(new a.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+c+'" is using it.')));var _=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],_.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),_.setEventedParent(null),_.clearTiles(),_.onRemove&&_.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,c){this._checkLoaded(),this.sourceCaches[o].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,c,_){_===void 0&&(_={}),this._checkLoaded();var w=o.id;if(this.getLayer(w))this.fire(new a.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var k;if(o.type==="custom"){if(fr(this,a.validateCustomStyleLayer(o)))return;k=a.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(w,o.source),o=a.clone$1(o),o=a.extend(o,{source:w})),this._validate(a.validateStyle.layer,"layers."+w,o,{arrayIndex:-1},_))return;k=a.createStyleLayer(o),this._validateLayer(k),k.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[k.id]=k.serialize()}var z=c?this._order.indexOf(c):this._order.length;if(c&&z===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(z,0,w),this._layerOrderChanged=!0,this._layers[w]=k,this._removedLayers[w]&&k.source&&k.type!=="custom"){var C=this._removedLayers[w];delete this._removedLayers[w],C.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}},s.prototype.moveLayer=function(o,c){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==c){var _=this._order.indexOf(o);this._order.splice(_,1);var w=c?this._order.indexOf(c):this._order.length;c&&w===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(w,0,o),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var c=this._layers[o];if(c){c.setEventedParent(null);var _=this._order.indexOf(o);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,c,_){this._checkLoaded();var w=this.getLayer(o);w?w.minzoom===c&&w.maxzoom===_||(c!=null&&(w.minzoom=c),_!=null&&(w.maxzoom=_),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,c,_){_===void 0&&(_={}),this._checkLoaded();var w=this.getLayer(o);if(w){if(!a.deepEqual(w.filter,c))return c==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(a.validateStyle.filter,"layers."+w.id+".filter",c,null,_)||(w.filter=a.clone$1(c),this._updateLayer(w)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return a.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,c,_,w){w===void 0&&(w={}),this._checkLoaded();var k=this.getLayer(o);k?a.deepEqual(k.getLayoutProperty(c),_)||(k.setLayoutProperty(c,_,w),this._updateLayer(k)):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,c){var _=this.getLayer(o);if(_)return _.getLayoutProperty(c);this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,c,_,w){w===void 0&&(w={}),this._checkLoaded();var k=this.getLayer(o);k?a.deepEqual(k.getPaintProperty(c),_)||(k.setPaintProperty(c,_,w)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,c){return this.getLayer(o).getPaintProperty(c)},s.prototype.setFeatureState=function(o,c){this._checkLoaded();var _=o.source,w=o.sourceLayer,k=this.sourceCaches[_];if(k!==void 0){var z=k.getSource().type;z==="geojson"&&w?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||w?(o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),k.setFeatureState(w,o.id,c)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+_+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,c){this._checkLoaded();var _=o.source,w=this.sourceCaches[_];if(w!==void 0){var k=w.getSource().type,z=k==="vector"?o.sourceLayer:void 0;k!=="vector"||z?c&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(z,o.id,c):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+_+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var c=o.source,_=o.sourceLayer,w=this.sourceCaches[c];if(w!==void 0){if(w.getSource().type!=="vector"||_)return o.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(_,o.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var c=this,_=function(We){return c._layers[We].type==="fill-extrusion"},w={},k=[],z=this._order.length-1;z>=0;z--){var C=this._order[z];if(_(C)){w[C]=z;for(var F=0,Z=o;F<Z.length;F+=1){var K=Z[F][C];if(K)for(var W=0,ne=K;W<ne.length;W+=1)k.push(ne[W])}}}k.sort(function(We,He){return He.intersectionZ-We.intersectionZ});for(var ie=[],ce=this._order.length-1;ce>=0;ce--){var J=this._order[ce];if(_(J))for(var se=k.length-1;se>=0;se--){var de=k[se].feature;if(w[de.layer.id]<ce)break;ie.push(de),k.pop()}else for(var be=0,Te=o;be<Te.length;be+=1){var ke=Te[be][J];if(ke)for(var Pe=0,Le=ke;Pe<Le.length;Pe+=1)ie.push(Le[Pe].feature)}}return ie},s.prototype.queryRenderedFeatures=function(o,c,_){c&&c.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var w={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var k=0,z=c.layers;k<z.length;k+=1){var C=z[k],F=this._layers[C];if(!F)return this.fire(new a.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be queried for features."))),[];w[F.source]=!0}}var Z=[];for(var K in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!w[K]||Z.push(Fi(this.sourceCaches[K],this._layers,this._serializedLayers,o,c,_));return this.placement&&Z.push(function(W,ne,ie,ce,J,se,de){for(var be={},Te=se.queryRenderedSymbols(ce),ke=[],Pe=0,Le=Object.keys(Te).map(Number);Pe<Le.length;Pe+=1)ke.push(de[Le[Pe]]);ke.sort(zr);for(var We=function(){var Pt=ft[He],yi=Pt.featureIndex.lookupSymbolFeatures(Te[Pt.bucketInstanceId],ne,Pt.bucketIndex,Pt.sourceLayerIndex,J.filter,J.layers,J.availableImages,W);for(var dt in yi){var Ot=be[dt]=be[dt]||[],Yt=yi[dt];Yt.sort(function(Wt,Rt){var Dt=Pt.featureSortOrder;if(Dt){var Nn=Dt.indexOf(Wt.featureIndex);return Dt.indexOf(Rt.featureIndex)-Nn}return Rt.featureIndex-Wt.featureIndex});for(var Ft=0,Bt=Yt;Ft<Bt.length;Ft+=1)Ot.push(Bt[Ft])}},He=0,ft=ke;He<ft.length;He+=1)We();var Tt=function(Pt){be[Pt].forEach(function(yi){var dt=yi.feature,Ot=ie[W[Pt].source].getFeatureState(dt.layer["source-layer"],dt.id);dt.source=dt.layer.source,dt.layer["source-layer"]&&(dt.sourceLayer=dt.layer["source-layer"]),dt.state=Ot})};for(var Ct in be)Tt(Ct);return be}(this._layers,this._serializedLayers,this.sourceCaches,o,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Z)},s.prototype.querySourceFeatures=function(o,c){c&&c.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var _=this.sourceCaches[o];return _?function(w,k){for(var z=w.getRenderableIds().map(function(ne){return w.getTileByID(ne)}),C=[],F={},Z=0;Z<z.length;Z++){var K=z[Z],W=K.tileID.canonical.key;F[W]||(F[W]=!0,K.querySourceFeatures(C,k))}return C}(_,c):[]},s.prototype.addSourceType=function(o,c,_){return s.getSourceType(o)?_(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},_):_(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,c){c===void 0&&(c={}),this._checkLoaded();var _=this.light.getLight(),w=!1;for(var k in o)if(!a.deepEqual(o[k],_[k])){w=!0;break}if(w){var z={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,c),this.light.updateTransitions(z)}},s.prototype._validate=function(o,c,_,w,k){return k===void 0&&(k={}),(!k||k.validate!==!1)&&fr(this,o.call(a.validateStyle,a.extend({key:c,style:this.serialize(),value:_,styleSpec:a.styleSpec},w)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var c in this.sourceCaches)this.sourceCaches[c].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,c,_,w,k){k===void 0&&(k=!1);for(var z=!1,C=!1,F={},Z=0,K=this._order;Z<K.length;Z+=1){var W=this._layers[K[Z]];if(W.type==="symbol"){if(!F[W.source]){var ne=this.sourceCaches[W.source];F[W.source]=ne.getRenderableIds(!0).map(function(de){return ne.getTileByID(de)}).sort(function(de,be){return be.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(be.tileID)?-1:1)})}var ie=this.crossTileSymbolIndex.addLayer(W,F[W.source],o.center.lng);z=z||ie}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),o.zoom))&&(this.pauseablePlacement=new mo(o,this._order,k,c,_,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),C=!0),z&&this.pauseablePlacement.placement.setStale()),C||z)for(var ce=0,J=this._order;ce<J.length;ce+=1){var se=this._layers[J[ce]];se.type==="symbol"&&this.placement.updateLayerOpacities(se,F[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,c,_){this.imageManager.getImages(c.icons,_),this._updateTilesForChangedImages();var w=this.sourceCaches[c.source];w&&w.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(o,c,_){this.glyphManager.getGlyphs(c.stacks,_)},s.prototype.getResource=function(o,c,_){return a.makeRequest(c,_)},s}(a.Evented);Nr.getSourceType=function(n){return $n[n]},Nr.setSourceType=function(n,s){$n[n]=s},Nr.registerForPluginStateChange=a.registerForPluginStateChange;var Sn=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Vo=Ri(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ic=Ri(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rp=Ri(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Bp=Ri(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Vl=Ri("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ql=Ri(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),jl=Ri(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Gl=Ri("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),nc=Ri("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),rc=Ri("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Fp=Ri(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),us=Ri(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),cs=Ri(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ac=Ri(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),nr=Ri(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Zl=Ri(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ja=Ri(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ga=Ri(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),go=Ri(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),yo=Ri(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Za=Ri(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),_o=Ri(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),vo=Ri(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ka=Ri(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),oc=Ri(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),sc=Ri(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Ri(n,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),_=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=w?w.concat(_):_,z={};return{fragmentSource:n=n.replace(o,function(C,F,Z,K,W){return z[W]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_`+W+`
varying `+Z+" "+K+" "+W+`;
#else
uniform `+Z+" "+K+" u_"+W+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+W+`
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`}),vertexSource:s=s.replace(o,function(C,F,Z,K,W){var ne=K==="float"?"vec2":"vec4",ie=W.match(/color/)?"color":ne;return z[W]?F==="define"?`
#ifndef HAS_UNIFORM_u_`+W+`
uniform lowp float u_`+W+`_t;
attribute `+Z+" "+ne+" a_"+W+`;
varying `+Z+" "+K+" "+W+`;
#else
uniform `+Z+" "+K+" u_"+W+`;
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_`+W+`
    `+W+" = a_"+W+`;
#else
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+W+`
    `+W+" = unpack_mix_"+ie+"(a_"+W+", u_"+W+`_t);
#else
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_`+W+`
uniform lowp float u_`+W+`_t;
attribute `+Z+" "+ne+" a_"+W+`;
#else
uniform `+Z+" "+K+" u_"+W+`;
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_`+W+`
    `+Z+" "+K+" "+W+" = a_"+W+`;
#else
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+W+`
    `+Z+" "+K+" "+W+" = unpack_mix_"+ie+"(a_"+W+", u_"+W+`_t);
#else
    `+Z+" "+K+" "+W+" = u_"+W+`;
#endif
`}),staticAttributes:c,staticUniforms:k}}var Op=Object.freeze({__proto__:null,prelude:Vo,background:ic,backgroundPattern:Rp,circle:Bp,clippingMask:Vl,heatmap:ql,heatmapTexture:jl,collisionBox:Gl,collisionCircle:nc,debug:rc,fill:Fp,fillOutline:us,fillOutlinePattern:cs,fillPattern:ac,fillExtrusion:nr,fillExtrusionPattern:Zl,hillshadePrepare:ja,hillshade:Ga,line:go,lineGradient:yo,linePattern:Za,lineSDF:_o,raster:vo,symbolIcon:Ka,symbolSDF:oc,symbolTextAndIcon:sc}),js=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function lc(n){for(var s=[],o=0;o<n.length;o++)if(n[o]!==null){var c=n[o].split(" ");s.push(c.pop())}return s}js.prototype.bind=function(n,s,o,c,_,w,k,z){this.context=n;for(var C=this.boundPaintVertexBuffers.length!==c.length,F=0;!C&&F<c.length;F++)this.boundPaintVertexBuffers[F]!==c[F]&&(C=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!C&&this.boundIndexBuffer===_&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===z?(n.bindVertexArrayOES.set(this.vao),k&&k.bind(),_&&_.dynamicDraw&&_.bind(),z&&z.bind()):this.freshBind(s,o,c,_,w,k,z)},js.prototype.freshBind=function(n,s,o,c,_,w,k){var z,C=n.numAttributes,F=this.context,Z=F.gl;if(F.extVertexArrayObject)this.vao&&this.destroy(),this.vao=F.extVertexArrayObject.createVertexArrayOES(),F.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=c,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=k;else{z=F.currentNumAttributes||0;for(var K=C;K<z;K++)Z.disableVertexAttribArray(K)}s.enableAttributes(Z,n);for(var W=0,ne=o;W<ne.length;W+=1)ne[W].enableAttributes(Z,n);w&&w.enableAttributes(Z,n),k&&k.enableAttributes(Z,n),s.bind(),s.setVertexAttribPointers(Z,n,_);for(var ie=0,ce=o;ie<ce.length;ie+=1){var J=ce[ie];J.bind(),J.setVertexAttribPointers(Z,n,_)}w&&(w.bind(),w.setVertexAttribPointers(Z,n,_)),c&&c.bind(),k&&(k.bind(),k.setVertexAttribPointers(Z,n,_)),F.currentNumAttributes=C},js.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var uc=function(n,s,o,c,_,w){var k=n.gl;this.program=k.createProgram();for(var z=lc(o.staticAttributes),C=c?c.getBinderAttributes():[],F=z.concat(C),Z=o.staticUniforms?lc(o.staticUniforms):[],K=c?c.getBinderUniforms():[],W=[],ne=0,ie=Z.concat(K);ne<ie.length;ne+=1){var ce=ie[ne];W.indexOf(ce)<0&&W.push(ce)}var J=c?c.defines():[];w&&J.push("#define OVERDRAW_INSPECTOR;");var se=J.concat(Vo.fragmentSource,o.fragmentSource).join(`
`),de=J.concat(Vo.vertexSource,o.vertexSource).join(`
`),be=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(be,se),k.compileShader(be),k.attachShader(this.program,be);var Te=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Te,de),k.compileShader(Te),k.attachShader(this.program,Te),this.attributes={};var ke={};this.numAttributes=F.length;for(var Pe=0;Pe<this.numAttributes;Pe++)F[Pe]&&(k.bindAttribLocation(this.program,Pe,F[Pe]),this.attributes[F[Pe]]=Pe);k.linkProgram(this.program),k.deleteShader(Te),k.deleteShader(be);for(var Le=0;Le<W.length;Le++){var We=W[Le];if(We&&!ke[We]){var He=k.getUniformLocation(this.program,We);He&&(ke[We]=He)}}this.fixedUniforms=_(n,ke),this.binderUniforms=c?c.getUniforms(n,ke):[]}}};function cc(n,s,o){var c=1/Di(o,1,s.transform.tileZoom),_=Math.pow(2,o.tileID.overscaledZ),w=o.tileSize*Math.pow(2,s.transform.tileZoom)/_,k=w*(o.tileID.canonical.x+o.tileID.wrap*_),z=w*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[k>>16,z>>16],u_pixel_coord_lower:[65535&k,65535&z]}}uc.prototype.draw=function(n,s,o,c,_,w,k,z,C,F,Z,K,W,ne,ie,ce){var J,se=n.gl;if(!this.failedToCreate){for(var de in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(c),n.setColorMode(_),n.setCullFace(w),this.fixedUniforms)this.fixedUniforms[de].set(k[de]);ne&&ne.setUniforms(n,this.binderUniforms,K,{zoom:W});for(var be=(J={},J[se.LINES]=2,J[se.TRIANGLES]=3,J[se.LINE_STRIP]=1,J)[s],Te=0,ke=Z.get();Te<ke.length;Te+=1){var Pe=ke[Te],Le=Pe.vaos||(Pe.vaos={});(Le[z]||(Le[z]=new js)).bind(n,this,C,ne?ne.getPaintVertexBuffers():[],F,Pe.vertexOffset,ie,ce),se.drawElements(s,Pe.primitiveLength*be,se.UNSIGNED_SHORT,Pe.primitiveOffset*be*2)}}};var pc=function(n,s,o,c){var _=s.style.light,w=_.properties.get("position"),k=[w.x,w.y,w.z],z=a.create$1();_.properties.get("anchor")==="viewport"&&a.fromRotation(z,-s.transform.angle),a.transformMat3(k,k,z);var C=_.properties.get("color");return{u_matrix:n,u_lightpos:k,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+o,u_opacity:c}},bo=function(n,s,o,c,_,w,k){return a.extend(pc(n,s,o,c),cc(w,s,k),{u_height_factor:-Math.pow(2,_.overscaledZ)/k.tileSize/8})},Ha=function(n){return{u_matrix:n}},xo=function(n,s,o,c){return a.extend(Ha(n),cc(o,s,c))},hc=function(n,s){return{u_matrix:n,u_world:s}},fc=function(n,s,o,c,_){return a.extend(xo(n,s,o,c),{u_world:_})},Kl=function(n,s,o,c){var _,w,k=n.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var z=Di(o,1,k.zoom);_=!0,w=[z,z]}else _=!1,w=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:w}},wo=function(n,s,o){var c=Di(o,1,s.zoom),_=Math.pow(2,s.zoom-o.tileID.overscaledZ),w=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*_),s.pixelsToGLUnits[1]/(c*_)],u_overscale_factor:w}},dc=function(n,s,o){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},So=function(n,s,o){return o===void 0&&(o=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:o}},ko=function(n){return{u_matrix:n}},mc=function(n,s,o,c){return{u_matrix:n,u_extrude_scale:Di(s,1,o),u_intensity:c}},ps=function(n,s,o){var c=n.transform;return{u_matrix:gc(n,s,o),u_ratio:1/Di(s,1,c.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Ni=function(n,s,o,c){return a.extend(ps(n,s,o),{u_image:0,u_image_height:c})},Gs=function(n,s,o,c){var _=n.transform,w=qo(s,_);return{u_matrix:gc(n,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Di(s,1,_.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Np=function(n,s,o,c,_){var w=n.lineAtlas,k=qo(s,n.transform),z=o.layout.get("line-cap")==="round",C=w.getDash(c.from,z),F=w.getDash(c.to,z),Z=C.width*_.fromScale,K=F.width*_.toScale;return a.extend(ps(n,s,o),{u_patternscale_a:[k/Z,-C.height/2],u_patternscale_b:[k/K,-F.height/2],u_sdfgamma:w.width/(256*Math.min(Z,K)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:C.y,u_tex_y_b:F.y,u_mix:_.t})};function qo(n,s){return 1/Di(n,1,s.tileZoom)}function gc(n,s,o){return n.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Up=function(n,s,o,c,_){return{u_matrix:n,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(k=_.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(w=_.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:yc(_.paint.get("raster-hue-rotate"))};var w,k};function yc(n){n*=Math.PI/180;var s=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var Zs,jo=function(n,s,o,c,_,w,k,z,C,F){var Z=_.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:Z.width/Z.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:k,u_coord_matrix:z,u_is_text:+C,u_pitch_with_map:+c,u_texsize:F,u_texture:0}},hs=function(n,s,o,c,_,w,k,z,C,F,Z){var K=_.transform;return a.extend(jo(n,s,o,c,_,w,k,z,C,F),{u_gamma_scale:c?Math.cos(K._pitch)*K.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+Z})},Ks=function(n,s,o,c,_,w,k,z,C,F){return a.extend(hs(n,s,o,c,_,w,k,z,!0,C,!0),{u_texsize_icon:F,u_texture_icon:1})},fs=function(n,s,o){return{u_matrix:n,u_opacity:s,u_color:o}},Go=function(n,s,o,c,_,w){return a.extend(function(k,z,C,F){var Z=C.imageManager.getPattern(k.from.toString()),K=C.imageManager.getPattern(k.to.toString()),W=C.imageManager.getPixelSize(),ne=W.width,ie=W.height,ce=Math.pow(2,F.tileID.overscaledZ),J=F.tileSize*Math.pow(2,C.transform.tileZoom)/ce,se=J*(F.tileID.canonical.x+F.tileID.wrap*ce),de=J*F.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Z.tl,u_pattern_br_a:Z.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[ne,ie],u_mix:z.t,u_pattern_size_a:Z.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/Di(F,1,C.transform.tileZoom),u_pixel_coord_upper:[se>>16,de>>16],u_pixel_coord_lower:[65535&se,65535&de]}}(c,w,o,_),{u_matrix:n,u_opacity:s})},_c={fillExtrusion:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_lightpos:new a.Uniform3f(n,s.u_lightpos),u_lightintensity:new a.Uniform1f(n,s.u_lightintensity),u_lightcolor:new a.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new a.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new a.Uniform1f(n,s.u_height_factor),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade),u_opacity:new a.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_texsize:new a.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new a.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new a.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new a.UniformColor(n,s.u_color),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_overlay:new a.Uniform1i(n,s.u_overlay),u_overlay_scale:new a.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new a.Uniform1f(n,s.u_extrude_scale),u_intensity:new a.Uniform1f(n,s.u_intensity),u_matrix:new a.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_world:new a.Uniform2f(n,s.u_world),u_image:new a.Uniform1i(n,s.u_image),u_color_ramp:new a.Uniform1i(n,s.u_color_ramp),u_opacity:new a.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_latrange:new a.Uniform2f(n,s.u_latrange),u_light:new a.Uniform2f(n,s.u_light),u_shadow:new a.UniformColor(n,s.u_shadow),u_highlight:new a.UniformColor(n,s.u_highlight),u_accent:new a.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_image:new a.Uniform1i(n,s.u_image),u_dimension:new a.Uniform2f(n,s.u_dimension),u_zoom:new a.Uniform1f(n,s.u_zoom),u_unpack:new a.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_image:new a.Uniform1i(n,s.u_image),u_image_height:new a.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_texsize:new a.Uniform2f(n,s.u_texsize),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_image:new a.Uniform1i(n,s.u_image),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_scale:new a.Uniform3f(n,s.u_scale),u_fade:new a.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_ratio:new a.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new a.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new a.Uniform1f(n,s.u_sdfgamma),u_image:new a.Uniform1i(n,s.u_image),u_tex_y_a:new a.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new a.Uniform1f(n,s.u_tex_y_b),u_mix:new a.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new a.Uniform2f(n,s.u_tl_parent),u_scale_parent:new a.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new a.Uniform1f(n,s.u_buffer_scale),u_fade_t:new a.Uniform1f(n,s.u_fade_t),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image0:new a.Uniform1i(n,s.u_image0),u_image1:new a.Uniform1i(n,s.u_image1),u_brightness_low:new a.Uniform1f(n,s.u_brightness_low),u_brightness_high:new a.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new a.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new a.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new a.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texture:new a.Uniform1i(n,s.u_texture),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new a.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new a.Uniform1f(n,s.u_size_t),u_size:new a.Uniform1f(n,s.u_size),u_camera_to_center_distance:new a.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new a.Uniform1f(n,s.u_pitch),u_rotate_symbol:new a.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new a.Uniform1f(n,s.u_fade_change),u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new a.Uniform1i(n,s.u_is_text),u_pitch_with_map:new a.Uniform1i(n,s.u_pitch_with_map),u_texsize:new a.Uniform2f(n,s.u_texsize),u_texsize_icon:new a.Uniform2f(n,s.u_texsize_icon),u_texture:new a.Uniform1i(n,s.u_texture),u_texture_icon:new a.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new a.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_color:new a.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new a.UniformMatrix4f(n,s.u_matrix),u_opacity:new a.Uniform1f(n,s.u_opacity),u_image:new a.Uniform1i(n,s.u_image),u_pattern_tl_a:new a.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(n,s.u_pattern_br_b),u_texsize:new a.Uniform2f(n,s.u_texsize),u_mix:new a.Uniform1f(n,s.u_mix),u_pattern_size_a:new a.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new a.Uniform1f(n,s.u_scale_a),u_scale_b:new a.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(n,s.u_tile_units_to_pixels)}}};function Zo(n,s,o,c,_,w,k){for(var z=n.context,C=z.gl,F=n.useProgram("collisionBox"),Z=[],K=0,W=0,ne=0;ne<c.length;ne++){var ie=c[ne],ce=s.getTile(ie),J=ce.getBucket(o);if(J){var se=ie.posMatrix;_[0]===0&&_[1]===0||(se=n.translatePosMatrix(ie.posMatrix,ce,_,w));var de=k?J.textCollisionBox:J.iconCollisionBox,be=J.collisionCircleArray;if(be.length>0){var Te=a.create(),ke=se;a.mul(Te,J.placementInvProjMatrix,n.transform.glCoordMatrix),a.mul(Te,Te,J.placementViewportMatrix),Z.push({circleArray:be,circleOffset:W,transform:ke,invTransform:Te}),W=K+=be.length/4}de&&F.draw(z,C.LINES,H.disabled,Y.disabled,n.colorModeForRenderPass(),fe.disabled,wo(se,n.transform,ce),o.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,null,n.transform.zoom,null,null,de.collisionVertexBuffer)}}if(k&&Z.length){var Pe=n.useProgram("collisionCircle"),Le=new a.StructArrayLayout2f1f2i16;Le.resize(4*K),Le._trim();for(var We=0,He=0,ft=Z;He<ft.length;He+=1)for(var Tt=ft[He],Ct=0;Ct<Tt.circleArray.length/4;Ct++){var Pt=4*Ct,yi=Tt.circleArray[Pt+0],dt=Tt.circleArray[Pt+1],Ot=Tt.circleArray[Pt+2],Yt=Tt.circleArray[Pt+3];Le.emplace(We++,yi,dt,Ot,Yt,0),Le.emplace(We++,yi,dt,Ot,Yt,1),Le.emplace(We++,yi,dt,Ot,Yt,2),Le.emplace(We++,yi,dt,Ot,Yt,3)}(!Zs||Zs.length<2*K)&&(Zs=function(un){var dr=2*un,Wn=new a.StructArrayLayout3ui6;Wn.resize(dr),Wn._trim();for(var rn=0;rn<dr;rn++){var mn=6*rn;Wn.uint16[mn+0]=4*rn+0,Wn.uint16[mn+1]=4*rn+1,Wn.uint16[mn+2]=4*rn+2,Wn.uint16[mn+3]=4*rn+2,Wn.uint16[mn+4]=4*rn+3,Wn.uint16[mn+5]=4*rn+0}return Wn}(K));for(var Ft=z.createIndexBuffer(Zs,!0),Bt=z.createVertexBuffer(Le,a.collisionCircleLayout.members,!0),Wt=0,Rt=Z;Wt<Rt.length;Wt+=1){var Dt=Rt[Wt],Nn=dc(Dt.transform,Dt.invTransform,n.transform);Pe.draw(z,C.TRIANGLES,H.disabled,Y.disabled,n.colorModeForRenderPass(),fe.disabled,Nn,o.id,Bt,Ft,a.SegmentVector.simpleSegment(0,2*Dt.circleOffset,Dt.circleArray.length,Dt.circleArray.length/2),null,n.transform.zoom,null,null,null)}Bt.destroy(),Ft.destroy()}}var da=a.identity(new Float32Array(16));function vc(n,s,o,c,_,w){var k=a.getAnchorAlignment(n),z=-(k.horizontalAlign-.5)*s,C=-(k.verticalAlign-.5)*o,F=a.evaluateVariableOffset(n,c);return new a.Point((z/_+F[0])*w,(C/_+F[1])*w)}function bc(n,s,o,c,_,w,k,z,C,F,Z){var K=n.text.placedSymbolArray,W=n.text.dynamicLayoutVertexArray,ne=n.icon.dynamicLayoutVertexArray,ie={};W.clear();for(var ce=0;ce<K.length;ce++){var J=K.get(ce),se=J.hidden||!J.crossTileID||n.allowVerticalPlacement&&!J.placedOrientation?null:c[J.crossTileID];if(se){var de=new a.Point(J.anchorX,J.anchorY),be=Jt(de,o?z:k),Te=si(w.cameraToCenterDistance,be.signedDistanceFromCamera),ke=_.evaluateSizeForFeature(n.textSizeData,F,J)*Te/a.ONE_EM;o&&(ke*=n.tilePixelRatio/C);for(var Pe=vc(se.anchor,se.width,se.height,se.textOffset,se.textBoxScale,ke),Le=o?Jt(de.add(Pe),k).point:be.point.add(s?Pe.rotate(-w.angle):Pe),We=n.allowVerticalPlacement&&J.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,He=0;He<J.numGlyphs;He++)a.addDynamicAttributes(W,Le,We);Z&&J.associatedIconIndex>=0&&(ie[J.associatedIconIndex]={shiftedAnchor:Le,angle:We})}else Pn(J.numGlyphs,W)}if(Z){ne.clear();for(var ft=n.icon.placedSymbolArray,Tt=0;Tt<ft.length;Tt++){var Ct=ft.get(Tt);if(Ct.hidden)Pn(Ct.numGlyphs,ne);else{var Pt=ie[Tt];if(Pt)for(var yi=0;yi<Ct.numGlyphs;yi++)a.addDynamicAttributes(ne,Pt.shiftedAnchor,Pt.angle);else Pn(Ct.numGlyphs,ne)}}n.icon.dynamicLayoutVertexBuffer.updateData(ne)}n.text.dynamicLayoutVertexBuffer.updateData(W)}function xc(n,s,o){return o.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function Eo(n,s,o,c,_,w,k,z,C,F,Z,K){for(var W=n.context,ne=W.gl,ie=n.transform,ce=z==="map",J=C==="map",se=ce&&o.layout.get("symbol-placement")!=="point",de=ce&&!J&&!se,be=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Te=!1,ke=n.depthModeForSublayer(0,H.ReadOnly),Pe=o.layout.get("text-variable-anchor"),Le=[],We=0,He=c;We<He.length;We+=1){var ft=He[We],Tt=s.getTile(ft),Ct=Tt.getBucket(o);if(Ct){var Pt=_?Ct.text:Ct.icon;if(Pt&&Pt.segments.get().length){var yi=Pt.programConfigurations.get(o.id),dt=_||Ct.sdfIcons,Ot=_?Ct.textSizeData:Ct.iconSizeData,Yt=J||ie.pitch!==0,Ft=n.useProgram(xc(dt,_,Ct),yi),Bt=a.evaluateSizeForZoom(Ot,ie.zoom),Wt=void 0,Rt=[0,0],Dt=void 0,Nn=void 0,un=null,dr=void 0;if(_)Dt=Tt.glyphAtlasTexture,Nn=ne.LINEAR,Wt=Tt.glyphAtlasTexture.size,Ct.iconsInText&&(Rt=Tt.imageAtlasTexture.size,un=Tt.imageAtlasTexture,dr=Yt||n.options.rotating||n.options.zooming||Ot.kind==="composite"||Ot.kind==="camera"?ne.LINEAR:ne.NEAREST);else{var Wn=o.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;Dt=Tt.imageAtlasTexture,Nn=dt||n.options.rotating||n.options.zooming||Wn||Yt?ne.LINEAR:ne.NEAREST,Wt=Tt.imageAtlasTexture.size}var rn=Di(Tt,1,n.transform.zoom),mn=Oi(ft.posMatrix,J,ce,n.transform,rn),Zr=xi(ft.posMatrix,J,ce,n.transform,rn),xr=Pe&&Ct.hasTextData(),$a=o.layout.get("icon-text-fit")!=="none"&&xr&&Ct.hasIconData();se&&fa(Ct,ft.posMatrix,n,_,mn,Zr,J,F);var Ar=n.translatePosMatrix(ft.posMatrix,Tt,w,k),va=se||_&&Pe||$a?da:mn,la=n.translatePosMatrix(Zr,Tt,w,k,!0),Es=dt&&o.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Jo={program:Ft,buffers:Pt,uniformValues:dt?Ct.iconsInText?Ks(Ot.kind,Bt,de,J,n,Ar,va,la,Wt,Rt):hs(Ot.kind,Bt,de,J,n,Ar,va,la,_,Wt,!0):jo(Ot.kind,Bt,de,J,n,Ar,va,la,_,Wt),atlasTexture:Dt,atlasTextureIcon:un,atlasInterpolation:Nn,atlasInterpolationIcon:dr,isSDF:dt,hasHalo:Es};if(be&&Ct.canOverlap){Te=!0;for(var eo=0,Qo=Pt.segments.get();eo<Qo.length;eo+=1){var zs=Qo[eo];Le.push({segments:new a.SegmentVector([zs]),sortKey:zs.sortKey,state:Jo})}}else Le.push({segments:Pt.segments,sortKey:0,state:Jo})}}}Te&&Le.sort(function(to,Co){return to.sortKey-Co.sortKey});for(var Aa=0,Ts=Le;Aa<Ts.length;Aa+=1){var Pa=Ts[Aa],Un=Pa.state;if(W.activeTexture.set(ne.TEXTURE0),Un.atlasTexture.bind(Un.atlasInterpolation,ne.CLAMP_TO_EDGE),Un.atlasTextureIcon&&(W.activeTexture.set(ne.TEXTURE1),Un.atlasTextureIcon&&Un.atlasTextureIcon.bind(Un.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),Un.isSDF){var Ra=Un.uniformValues;Un.hasHalo&&(Ra.u_is_halo=1,ds(Un.buffers,Pa.segments,o,n,Un.program,ke,Z,K,Ra)),Ra.u_is_halo=0}ds(Un.buffers,Pa.segments,o,n,Un.program,ke,Z,K,Un.uniformValues)}}function ds(n,s,o,c,_,w,k,z,C){var F=c.context;_.draw(F,F.gl.TRIANGLES,w,k,z,fe.disabled,C,o.id,n.layoutVertexBuffer,n.indexBuffer,s,o.paint,c.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Hs(n,s,o,c,_,w,k){var z,C,F,Z,K,W=n.context.gl,ne=o.paint.get("fill-pattern"),ie=ne&&ne.constantOr(1),ce=o.getCrossfadeParameters();k?(C=ie&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",z=W.LINES):(C=ie?"fillPattern":"fill",z=W.TRIANGLES);for(var J=0,se=c;J<se.length;J+=1){var de=se[J],be=s.getTile(de);if(!ie||be.patternsLoaded()){var Te=be.getBucket(o);if(Te){var ke=Te.programConfigurations.get(o.id),Pe=n.useProgram(C,ke);ie&&(n.context.activeTexture.set(W.TEXTURE0),be.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),ke.updatePaintBuffers(ce));var Le=ne.constantOr(null);if(Le&&be.imageAtlas){var We=be.imageAtlas,He=We.patternPositions[Le.to.toString()],ft=We.patternPositions[Le.from.toString()];He&&ft&&ke.setConstantPatternPositions(He,ft)}var Tt=n.translatePosMatrix(de.posMatrix,be,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(k){Z=Te.indexBuffer2,K=Te.segments2;var Ct=[W.drawingBufferWidth,W.drawingBufferHeight];F=C==="fillOutlinePattern"&&ie?fc(Tt,n,ce,be,Ct):hc(Tt,Ct)}else Z=Te.indexBuffer,K=Te.segments,F=ie?xo(Tt,n,ce,be):Ha(Tt);Pe.draw(n.context,z,_,n.stencilModeForClipping(de),w,fe.disabled,F,o.id,Te.layoutVertexBuffer,Z,K,o.paint,n.transform.zoom,ke)}}}}function Hl(n,s,o,c,_,w,k){for(var z=n.context,C=z.gl,F=o.paint.get("fill-extrusion-pattern"),Z=F.constantOr(1),K=o.getCrossfadeParameters(),W=o.paint.get("fill-extrusion-opacity"),ne=0,ie=c;ne<ie.length;ne+=1){var ce=ie[ne],J=s.getTile(ce),se=J.getBucket(o);if(se){var de=se.programConfigurations.get(o.id),be=n.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",de);Z&&(n.context.activeTexture.set(C.TEXTURE0),J.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),de.updatePaintBuffers(K));var Te=F.constantOr(null);if(Te&&J.imageAtlas){var ke=J.imageAtlas,Pe=ke.patternPositions[Te.to.toString()],Le=ke.patternPositions[Te.from.toString()];Pe&&Le&&de.setConstantPatternPositions(Pe,Le)}var We=n.translatePosMatrix(ce.posMatrix,J,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),He=o.paint.get("fill-extrusion-vertical-gradient"),ft=Z?bo(We,n,He,W,ce,K,J):pc(We,n,He,W);be.draw(z,z.gl.TRIANGLES,_,w,k,fe.backCCW,ft,o.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,o.paint,n.transform.zoom,de)}}}function Ws(n,s,o,c,_,w){var k=n.context,z=k.gl,C=s.fbo;if(C){var F=n.useProgram("hillshade");k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,C.colorAttachment.get());var Z=function(K,W,ne){var ie=ne.paint.get("hillshade-shadow-color"),ce=ne.paint.get("hillshade-highlight-color"),J=ne.paint.get("hillshade-accent-color"),se=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(se-=K.transform.angle);var de,be,Te,ke=!K.options.moving;return{u_matrix:K.transform.calculatePosMatrix(W.tileID.toUnwrapped(),ke),u_image:0,u_latrange:(de=W.tileID,be=Math.pow(2,de.canonical.z),Te=de.canonical.y,[new a.MercatorCoordinate(0,Te/be).toLngLat().lat,new a.MercatorCoordinate(0,(Te+1)/be).toLngLat().lat]),u_light:[ne.paint.get("hillshade-exaggeration"),se],u_shadow:ie,u_highlight:ce,u_accent:J}}(n,s,o);F.draw(k,z.TRIANGLES,c,_,w,fe.disabled,Z,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function Vp(n,s,o,c,_,w){var k=n.context,z=k.gl,C=s.dem;if(C&&C.data){var F=C.dim,Z=C.stride,K=C.getPixels();if(k.activeTexture.set(z.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(Z),s.demTexture){var W=s.demTexture;W.update(K,{premultiply:!1}),W.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else s.demTexture=new a.Texture(k,K,z.RGBA,{premultiply:!1}),s.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);k.activeTexture.set(z.TEXTURE0);var ne=s.fbo;if(!ne){var ie=new a.Texture(k,{width:F,height:F,data:null},z.RGBA);ie.bind(z.LINEAR,z.CLAMP_TO_EDGE),(ne=s.fbo=k.createFramebuffer(F,F,!0)).colorAttachment.set(ie.texture)}k.bindFramebuffer.set(ne.framebuffer),k.viewport.set([0,0,F,F]),n.useProgram("hillshadePrepare").draw(k,z.TRIANGLES,c,_,w,fe.disabled,function(ce,J){var se=J.stride,de=a.create();return a.ortho(de,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(de,de,[0,-a.EXTENT,0]),{u_matrix:de,u_image:1,u_dimension:[se,se],u_zoom:ce.overscaledZ,u_unpack:J.getUnpackVector()}}(s.tileID,C),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Xs(n,s,o,c,_){var w=c.paint.get("raster-fade-duration");if(w>0){var k=a.browser.now(),z=(k-n.timeAdded)/w,C=s?(k-s.timeAdded)/w:-1,F=o.getSource(),Z=_.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),K=!s||Math.abs(s.tileID.overscaledZ-Z)>Math.abs(n.tileID.overscaledZ-Z),W=K&&n.refreshedUponExpiration?1:a.clamp(K?z:1-C,0,1);return n.refreshedUponExpiration&&z>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}var Wl=new a.Color(1,0,0,1),wc=new a.Color(0,1,0,1),Sc=new a.Color(0,0,1,1),Ys=new a.Color(1,0,1,1),Xl=new a.Color(0,1,1,1);function Yl(n,s,o,c){ms(n,0,s+o/2,n.transform.width,o,c)}function Jl(n,s,o,c){ms(n,s-o/2,0,o,n.transform.height,c)}function ms(n,s,o,c,_,w){var k=n.context,z=k.gl;z.enable(z.SCISSOR_TEST),z.scissor(s*a.browser.devicePixelRatio,o*a.browser.devicePixelRatio,c*a.browser.devicePixelRatio,_*a.browser.devicePixelRatio),k.clear({color:w}),z.disable(z.SCISSOR_TEST)}function kc(n,s,o){var c=n.context,_=c.gl,w=o.posMatrix,k=n.useProgram("debug"),z=H.disabled,C=Y.disabled,F=n.colorModeForRenderPass();c.activeTexture.set(_.TEXTURE0),n.emptyTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),k.draw(c,_.LINE_STRIP,z,C,F,fe.disabled,So(w,a.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var Z=s.getTileByID(o.key).latestRawTileData,K=Math.floor((Z&&Z.byteLength||0)/1024),W=s.getTile(o).tileSize,ne=512/Math.min(W,512)*(o.overscaledZ/n.transform.zoom)*.5,ie=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ie+=" => "+o.overscaledZ),function(ce,J){ce.initDebugOverlayCanvas();var se=ce.debugOverlayCanvas,de=ce.context.gl,be=ce.debugOverlayCanvas.getContext("2d");be.clearRect(0,0,se.width,se.height),be.shadowColor="white",be.shadowBlur=2,be.lineWidth=1.5,be.strokeStyle="white",be.textBaseline="top",be.font="bold 36px Open Sans, sans-serif",be.fillText(J,5,5),be.strokeText(J,5,5),ce.debugOverlayTexture.update(se),ce.debugOverlayTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)}(n,ie+" "+K+"kb"),k.draw(c,_.TRIANGLES,z,C,ue.alphaBlended,fe.disabled,So(w,a.Color.transparent,ne),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var zo={symbol:function(n,s,o,c,_){if(n.renderPass==="translucent"){var w=Y.disabled,k=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(z,C,F,Z,K,W,ne){for(var ie=C.transform,ce=K==="map",J=W==="map",se=0,de=z;se<de.length;se+=1){var be=de[se],Te=Z.getTile(be),ke=Te.getBucket(F);if(ke&&ke.text&&ke.text.segments.get().length){var Pe=a.evaluateSizeForZoom(ke.textSizeData,ie.zoom),Le=Di(Te,1,C.transform.zoom),We=Oi(be.posMatrix,J,ce,C.transform,Le),He=F.layout.get("icon-text-fit")!=="none"&&ke.hasIconData();if(Pe){var ft=Math.pow(2,ie.zoom-Te.tileID.overscaledZ);bc(ke,ce,J,ne,a.symbolSize,ie,We,be.posMatrix,ft,Pe,He)}}}}(c,n,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),_),o.paint.get("icon-opacity").constantOr(1)!==0&&Eo(n,s,o,c,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),w,k),o.paint.get("text-opacity").constantOr(1)!==0&&Eo(n,s,o,c,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),w,k),s.map.showCollisionBoxes&&(Zo(n,s,o,c,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Zo(n,s,o,c,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,o,c){if(n.renderPass==="translucent"){var _=o.paint.get("circle-opacity"),w=o.paint.get("circle-stroke-width"),k=o.paint.get("circle-stroke-opacity"),z=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)!==0||w.constantOr(1)!==0&&k.constantOr(1)!==0){for(var C=n.context,F=C.gl,Z=n.depthModeForSublayer(0,H.ReadOnly),K=Y.disabled,W=n.colorModeForRenderPass(),ne=[],ie=0;ie<c.length;ie++){var ce=c[ie],J=s.getTile(ce),se=J.getBucket(o);if(se){var de=se.programConfigurations.get(o.id),be={programConfiguration:de,program:n.useProgram("circle",de),layoutVertexBuffer:se.layoutVertexBuffer,indexBuffer:se.indexBuffer,uniformValues:Kl(n,ce,J,o)};if(z)for(var Te=0,ke=se.segments.get();Te<ke.length;Te+=1){var Pe=ke[Te];ne.push({segments:new a.SegmentVector([Pe]),sortKey:Pe.sortKey,state:be})}else ne.push({segments:se.segments,sortKey:0,state:be})}}z&&ne.sort(function(Tt,Ct){return Tt.sortKey-Ct.sortKey});for(var Le=0,We=ne;Le<We.length;Le+=1){var He=We[Le],ft=He.state;ft.program.draw(C,F.TRIANGLES,Z,K,W,fe.disabled,ft.uniformValues,o.id,ft.layoutVertexBuffer,ft.indexBuffer,He.segments,o.paint,n.transform.zoom,ft.programConfiguration)}}}},heatmap:function(n,s,o,c){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var _=n.context,w=_.gl,k=Y.disabled,z=new ue([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ne,ie,ce){var J=ne.gl;ne.activeTexture.set(J.TEXTURE1),ne.viewport.set([0,0,ie.width/4,ie.height/4]);var se=ce.heatmapFbo;if(se)J.bindTexture(J.TEXTURE_2D,se.colorAttachment.get()),ne.bindFramebuffer.set(se.framebuffer);else{var de=J.createTexture();J.bindTexture(J.TEXTURE_2D,de),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),se=ce.heatmapFbo=ne.createFramebuffer(ie.width/4,ie.height/4,!1),function(be,Te,ke,Pe){var Le=be.gl;Le.texImage2D(Le.TEXTURE_2D,0,Le.RGBA,Te.width/4,Te.height/4,0,Le.RGBA,be.extRenderToTextureHalfFloat?be.extTextureHalfFloat.HALF_FLOAT_OES:Le.UNSIGNED_BYTE,null),Pe.colorAttachment.set(ke)}(ne,ie,de,se)}})(_,n,o),_.clear({color:a.Color.transparent});for(var C=0;C<c.length;C++){var F=c[C];if(!s.hasRenderableParent(F)){var Z=s.getTile(F),K=Z.getBucket(o);if(K){var W=K.programConfigurations.get(o.id);n.useProgram("heatmap",W).draw(_,w.TRIANGLES,H.disabled,k,z,fe.disabled,mc(F.posMatrix,Z,n.transform.zoom,o.paint.get("heatmap-intensity")),o.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,o.paint,n.transform.zoom,W)}}}_.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(ne,ie){var ce=ne.context,J=ce.gl,se=ie.heatmapFbo;if(se){ce.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,se.colorAttachment.get()),ce.activeTexture.set(J.TEXTURE1);var de=ie.colorRampTexture;de||(de=ie.colorRampTexture=new a.Texture(ce,ie.colorRamp,J.RGBA)),de.bind(J.LINEAR,J.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(ce,J.TRIANGLES,H.disabled,Y.disabled,ne.colorModeForRenderPass(),fe.disabled,function(be,Te,ke,Pe){var Le=a.create();a.ortho(Le,0,be.width,be.height,0,0,1);var We=be.context.gl;return{u_matrix:Le,u_world:[We.drawingBufferWidth,We.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Te.paint.get("heatmap-opacity")}}(ne,ie),ie.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,ie.paint,ne.transform.zoom)}}(n,o))},line:function(n,s,o,c){if(n.renderPass==="translucent"){var _=o.paint.get("line-opacity"),w=o.paint.get("line-width");if(_.constantOr(1)!==0&&w.constantOr(1)!==0)for(var k=n.depthModeForSublayer(0,H.ReadOnly),z=n.colorModeForRenderPass(),C=o.paint.get("line-dasharray"),F=o.paint.get("line-pattern"),Z=F.constantOr(1),K=o.paint.get("line-gradient"),W=o.getCrossfadeParameters(),ne=Z?"linePattern":C?"lineSDF":K?"lineGradient":"line",ie=n.context,ce=ie.gl,J=!0,se=0,de=c;se<de.length;se+=1){var be=de[se],Te=s.getTile(be);if(!Z||Te.patternsLoaded()){var ke=Te.getBucket(o);if(ke){var Pe=ke.programConfigurations.get(o.id),Le=n.context.program.get(),We=n.useProgram(ne,Pe),He=J||We.program!==Le,ft=F.constantOr(null);if(ft&&Te.imageAtlas){var Tt=Te.imageAtlas,Ct=Tt.patternPositions[ft.to.toString()],Pt=Tt.patternPositions[ft.from.toString()];Ct&&Pt&&Pe.setConstantPatternPositions(Ct,Pt)}var yi=Z?Gs(n,Te,o,W):C?Np(n,Te,o,C,W):K?Ni(n,Te,o,ke.lineClipsArray.length):ps(n,Te,o);if(Z)ie.activeTexture.set(ce.TEXTURE0),Te.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Pe.updatePaintBuffers(W);else if(C&&(He||n.lineAtlas.dirty))ie.activeTexture.set(ce.TEXTURE0),n.lineAtlas.bind(ie);else if(K){var dt=ke.gradients[o.id],Ot=dt.texture;if(o.gradientVersion!==dt.version){var Yt=256;if(o.stepInterpolant){var Ft=s.getSource().maxzoom,Bt=be.canonical.z===Ft?Math.ceil(1<<n.transform.maxZoom-be.canonical.z):1;Yt=a.clamp(a.nextPowerOfTwo(ke.maxLineLength/a.EXTENT*1024*Bt),256,ie.maxTextureSize)}dt.gradient=a.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Yt,image:dt.gradient||void 0,clips:ke.lineClipsArray}),dt.texture?dt.texture.update(dt.gradient):dt.texture=new a.Texture(ie,dt.gradient,ce.RGBA),dt.version=o.gradientVersion,Ot=dt.texture}ie.activeTexture.set(ce.TEXTURE0),Ot.bind(o.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}We.draw(ie,ce.TRIANGLES,k,n.stencilModeForClipping(be),z,fe.disabled,yi,o.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,o.paint,n.transform.zoom,Pe,ke.layoutVertexBuffer2),J=!1}}}}},fill:function(n,s,o,c){var _=o.paint.get("fill-color"),w=o.paint.get("fill-opacity");if(w.constantOr(1)!==0){var k=n.colorModeForRenderPass(),z=o.paint.get("fill-pattern"),C=n.opaquePassEnabledForLayer()&&!z.constantOr(1)&&_.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===C){var F=n.depthModeForSublayer(1,n.renderPass==="opaque"?H.ReadWrite:H.ReadOnly);Hs(n,s,o,c,F,k,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var Z=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,H.ReadOnly);Hs(n,s,o,c,Z,k,!0)}}},"fill-extrusion":function(n,s,o,c){var _=o.paint.get("fill-extrusion-opacity");if(_!==0&&n.renderPass==="translucent"){var w=new H(n.context.gl.LEQUAL,H.ReadWrite,n.depthRangeFor3D);if(_!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))Hl(n,s,o,c,w,Y.disabled,ue.disabled),Hl(n,s,o,c,w,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var k=n.colorModeForRenderPass();Hl(n,s,o,c,w,Y.disabled,k)}}},hillshade:function(n,s,o,c){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var _=n.context,w=n.depthModeForSublayer(0,H.ReadOnly),k=n.colorModeForRenderPass(),z=n.renderPass==="translucent"?n.stencilConfigForOverlap(c):[{},c],C=z[0],F=0,Z=z[1];F<Z.length;F+=1){var K=Z[F],W=s.getTile(K);W.needsHillshadePrepare&&n.renderPass==="offscreen"?Vp(n,W,o,w,Y.disabled,k):n.renderPass==="translucent"&&Ws(n,W,o,w,C[K.overscaledZ],k)}_.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,o,c){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&c.length)for(var _=n.context,w=_.gl,k=s.getSource(),z=n.useProgram("raster"),C=n.colorModeForRenderPass(),F=k instanceof vt?[{},c]:n.stencilConfigForOverlap(c),Z=F[0],K=F[1],W=K[K.length-1].overscaledZ,ne=!n.options.moving,ie=0,ce=K;ie<ce.length;ie+=1){var J=ce[ie],se=n.depthModeForSublayer(J.overscaledZ-W,o.paint.get("raster-opacity")===1?H.ReadWrite:H.ReadOnly,w.LESS),de=s.getTile(J),be=n.transform.calculatePosMatrix(J.toUnwrapped(),ne);de.registerFadeDuration(o.paint.get("raster-fade-duration"));var Te=s.findLoadedParent(J,0),ke=Xs(de,Te,s,o,n.transform),Pe=void 0,Le=void 0,We=o.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;_.activeTexture.set(w.TEXTURE0),de.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),_.activeTexture.set(w.TEXTURE1),Te?(Te.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),Pe=Math.pow(2,Te.tileID.overscaledZ-de.tileID.overscaledZ),Le=[de.tileID.canonical.x*Pe%1,de.tileID.canonical.y*Pe%1]):de.texture.bind(We,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var He=Up(be,Le||[0,0],Pe||1,ke,o);k instanceof vt?z.draw(_,w.TRIANGLES,se,Y.disabled,C,fe.disabled,He,o.id,k.boundsBuffer,n.quadTriangleIndexBuffer,k.boundsSegments):z.draw(_,w.TRIANGLES,se,Z[J.overscaledZ],C,fe.disabled,He,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,o){var c=o.paint.get("background-color"),_=o.paint.get("background-opacity");if(_!==0){var w=n.context,k=w.gl,z=n.transform,C=z.tileSize,F=o.paint.get("background-pattern");if(!n.isPatternMissing(F)){var Z=!F&&c.a===1&&_===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===Z){var K=Y.disabled,W=n.depthModeForSublayer(0,Z==="opaque"?H.ReadWrite:H.ReadOnly),ne=n.colorModeForRenderPass(),ie=n.useProgram(F?"backgroundPattern":"background"),ce=z.coveringTiles({tileSize:C});F&&(w.activeTexture.set(k.TEXTURE0),n.imageManager.bind(n.context));for(var J=o.getCrossfadeParameters(),se=0,de=ce;se<de.length;se+=1){var be=de[se],Te=n.transform.calculatePosMatrix(be.toUnwrapped()),ke=F?Go(Te,_,n,F,{tileID:be,tileSize:C},J):fs(Te,_,c);ie.draw(w,k.TRIANGLES,W,K,ne,fe.disabled,ke,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,o){for(var c=0;c<o.length;c++)kc(n,s,o[c])},custom:function(n,s,o){var c=n.context,_=o.implementation;if(n.renderPass==="offscreen"){var w=_.prerender;w&&(n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),w.call(_,c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),c.setColorMode(n.colorModeForRenderPass()),c.setStencilMode(Y.disabled);var k=_.renderingMode==="3d"?new H(n.context.gl.LEQUAL,H.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,H.ReadOnly);c.setDepthMode(k),_.render(c.gl,n.transform.customLayerMatrix()),c.setDirty(),n.setBaseState(),c.bindFramebuffer.set(null)}}},Ji=function(n,s){this.context=new j(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=ee.maxUnderzooming+ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _e,this.gpuTimers={}};Ji.prototype.resize=function(n,s){if(this.width=n*a.browser.devicePixelRatio,this.height=s*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,c=this.style._order;o<c.length;o+=1)this.style._layers[c[o]].resize()},Ji.prototype.setup=function(){var n=this.context,s=new a.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(a.EXTENT,0),s.emplaceBack(0,a.EXTENT),s.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Sn.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var o=new a.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(a.EXTENT,0),o.emplaceBack(0,a.EXTENT),o.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=n.createVertexBuffer(o,Sn.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var c=new a.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(a.EXTENT,0,a.EXTENT,0),c.emplaceBack(0,a.EXTENT,0,a.EXTENT),c.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(c,Je.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var _=new a.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(_,Sn.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var w=new a.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(w);var k=new a.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k),this.emptyTexture=new a.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var z=this.context.gl;this.stencilClearMode=new Y({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)},Ji.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=a.create();a.ortho(o,0,this.width,this.height,0,0,1),a.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,H.disabled,this.stencilClearMode,ue.disabled,fe.disabled,ko(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ji.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var o=this.context,c=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(ue.disabled),o.setDepthMode(H.disabled);var _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,k=s;w<k.length;w+=1){var z=k[w],C=this._tileClippingMaskIDs[z.key]=this.nextStencilID++;_.draw(o,c.TRIANGLES,H.disabled,new Y({func:c.ALWAYS,mask:0},C,255,c.KEEP,c.KEEP,c.REPLACE),ue.disabled,fe.disabled,ko(z.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ji.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new Y({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Ji.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new Y({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Ji.prototype.stencilConfigForOverlap=function(n){var s,o=this.context.gl,c=n.sort(function(C,F){return F.overscaledZ-C.overscaledZ}),_=c[c.length-1].overscaledZ,w=c[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var k={},z=0;z<w;z++)k[z+_]=new Y({func:o.GEQUAL,mask:255},z+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=w,[k,c]}return[(s={},s[_]=Y.disabled,s),c]},Ji.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ue([n.CONSTANT_COLOR,n.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ue.unblended:ue.alphaBlended},Ji.prototype.depthModeForSublayer=function(n,s,o){if(!this.opaquePassEnabledForLayer())return H.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new H(o||this.context.gl.LEQUAL,s,[c,c])},Ji.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ji.prototype.render=function(n,s){var o=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var c=this.style._order,_=this.style.sourceCaches;for(var w in _){var k=_[w];k.used&&k.prepare(this.context)}var z,C,F={},Z={},K={};for(var W in _){var ne=_[W];F[W]=ne.getVisibleCoordinates(),Z[W]=F[W].slice().reverse(),K[W]=ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ie=0;ie<c.length;ie++)if(this.style._layers[c[ie]].is3D()){this.opaquePassCutoff=ie;break}this.renderPass="offscreen";for(var ce=0,J=c;ce<J.length;ce+=1){var se=this.style._layers[J[ce]];if(se.hasOffscreenPass()&&!se.isHidden(this.transform.zoom)){var de=Z[se.source];(se.type==="custom"||de.length)&&this.renderLayer(this,_[se.source],se,de)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var be=this.style._layers[c[this.currentLayer]],Te=_[be.source],ke=F[be.source];this._renderTileClippingMasks(be,ke),this.renderLayer(this,Te,be,ke)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Pe=this.style._layers[c[this.currentLayer]],Le=_[Pe.source],We=(Pe.type==="symbol"?K:Z)[Pe.source];this._renderTileClippingMasks(Pe,F[Pe.source]),this.renderLayer(this,Le,Pe,We)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(He){He.source&&!He.isHidden(o.transform.zoom)&&(He.source!==(C&&C.id)&&(C=o.style.sourceCaches[He.source]),(!z||z.getSource().maxzoom<C.getSource().maxzoom)&&(z=C))}),z&&zo.debug(this,z,z.getVisibleCoordinates())),this.options.showPadding&&function(He){var ft=He.transform.padding;Yl(He,He.transform.height-(ft.top||0),3,Wl),Yl(He,ft.bottom||0,3,wc),Jl(He,ft.left||0,3,Sc),Jl(He,He.transform.width-(ft.right||0),3,Ys);var Tt=He.transform.centerPoint;(function(Ct,Pt,yi,dt){ms(Ct,Pt-1,yi-10,2,20,dt),ms(Ct,Pt-10,yi-1,20,2,dt)})(He,Tt.x,He.transform.height-Tt.y,Xl)}(this),this.context.setDefault()},Ji.prototype.renderLayer=function(n,s,o,c){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||c.length)&&(this.id=o.id,this.gpuTimingStart(o),zo[o.type](n,s,o,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ji.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[n.id];o||(o=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Ji.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Ji.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Ji.prototype.queryGpuTimers=function(n){var s={};for(var o in n){var c=n[o],_=this.context.extTimerQuery,w=_.getQueryObjectEXT(c.query,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(c.query),s[o]=w}return s},Ji.prototype.translatePosMatrix=function(n,s,o,c,_){if(!o[0]&&!o[1])return n;var w=_?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(w){var k=Math.sin(w),z=Math.cos(w);o=[o[0]*z-o[1]*k,o[0]*k+o[1]*z]}var C=[_?o[0]:Di(s,o[0],this.transform.zoom),_?o[1]:Di(s,o[1],this.transform.zoom),0],F=new Float32Array(16);return a.translate(F,n,C),F},Ji.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Ji.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Ji.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),o=this.imageManager.getPattern(n.to.toString());return!s||!o},Ji.prototype.useProgram=function(n,s){this.cache=this.cache||{};var o=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new uc(this.context,n,Op[n],s,_c[n],this._showOverdrawInspector)),this.cache[o]},Ji.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ji.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Ji.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ji.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Js=function(n,s){this.points=n,this.planes=s};Js.fromInvProjectionMatrix=function(n,s,o){var c=Math.pow(2,o),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(k){return a.transformMat4([],k,n)}).map(function(k){return a.scale$1([],k,1/k[3]/s*c)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(k){var z=a.sub([],_[k[0]],_[k[1]]),C=a.sub([],_[k[2]],_[k[1]]),F=a.normalize([],a.cross([],z,C)),Z=-a.dot(F,_[k[1]]);return F.concat(Z)});return new Js(_,w)};var To=function(n,s){this.min=n,this.max=s,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};To.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],o=a.clone$2(this.min),c=a.clone$2(this.max),_=0;_<s.length;_++)o[_]=s[_]?this.min[_]:this.center[_],c[_]=s[_]?this.center[_]:this.max[_];return c[2]=this.max[2],new To(o,c)},To.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},To.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},To.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,c=0;c<n.planes.length;c++){for(var _=n.planes[c],w=0,k=0;k<s.length;k++)w+=a.dot$1(_,s[k])>=0;if(w===0)return 0;w!==s.length&&(o=!1)}if(o)return 2;for(var z=0;z<3;z++){for(var C=Number.MAX_VALUE,F=-Number.MAX_VALUE,Z=0;Z<n.points.length;Z++){var K=n.points[Z][z]-this.min[z];C=Math.min(C,K),F=Math.max(F,K)}if(F<0||C>this.max[z]-this.min[z])return 0}return 1};var Wa=function(n,s,o,c){if(n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),c===void 0&&(c=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=o,this.right=c};Wa.prototype.interpolate=function(n,s,o){return s.top!=null&&n.top!=null&&(this.top=a.number(n.top,s.top,o)),s.bottom!=null&&n.bottom!=null&&(this.bottom=a.number(n.bottom,s.bottom,o)),s.left!=null&&n.left!=null&&(this.left=a.number(n.left,s.left,o)),s.right!=null&&n.right!=null&&(this.right=a.number(n.right,s.right,o)),this},Wa.prototype.getCenter=function(n,s){var o=a.clamp((this.left+n-this.right)/2,0,n),c=a.clamp((this.top+s-this.bottom)/2,0,s);return new a.Point(o,c)},Wa.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},Wa.prototype.clone=function(){return new Wa(this.top,this.bottom,this.left,this.right)},Wa.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var li=function(n,s,o,c,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||_,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=o??0,this._maxPitch=c??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Wa,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ui={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};li.prototype.clone=function(){var n=new li(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},Ui.minZoom.get=function(){return this._minZoom},Ui.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},Ui.maxZoom.get=function(){return this._maxZoom},Ui.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},Ui.minPitch.get=function(){return this._minPitch},Ui.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},Ui.maxPitch.get=function(){return this._maxPitch},Ui.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},Ui.renderWorldCopies.get=function(){return this._renderWorldCopies},Ui.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},Ui.worldSize.get=function(){return this.tileSize*this.scale},Ui.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ui.size.get=function(){return new a.Point(this.width,this.height)},Ui.bearing.get=function(){return-this.angle/Math.PI*180},Ui.bearing.set=function(n){var s=-a.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ui.pitch.get=function(){return this._pitch/Math.PI*180},Ui.pitch.set=function(n){var s=a.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Ui.fov.get=function(){return this._fov/Math.PI*180},Ui.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},Ui.zoom.get=function(){return this._zoom},Ui.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Ui.center.get=function(){return this._center},Ui.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},Ui.padding.get=function(){return this._edgeInsets.toJSON()},Ui.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},Ui.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},li.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},li.prototype.interpolatePadding=function(n,s,o){this._unmodified=!1,this._edgeInsets.interpolate(n,s,o),this._constrain(),this._calcMatrices()},li.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},li.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new a.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new a.Point(0,0)),c=this.pointCoordinate(new a.Point(this.width,0)),_=this.pointCoordinate(new a.Point(this.width,this.height)),w=this.pointCoordinate(new a.Point(0,this.height)),k=Math.floor(Math.min(o.x,c.x,_.x,w.x)),z=Math.floor(Math.max(o.x,c.x,_.x,w.x)),C=k-1;C<=z+1;C++)C!==0&&s.push(new a.UnwrappedTileID(C,n));return s},li.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),o=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var c=a.MercatorCoordinate.fromLngLat(this.center),_=Math.pow(2,s),w=[_*c.x,_*c.y,0],k=Js.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),z=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(z=s);var C=function(He){return{aabb:new To([He*_,0,0],[(He+1)*_,_,0]),zoom:0,x:0,y:0,wrap:He,fullyVisible:!1}},F=[],Z=[],K=s,W=n.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var ne=1;ne<=3;ne++)F.push(C(-ne)),F.push(C(ne));for(F.push(C(0));F.length>0;){var ie=F.pop(),ce=ie.x,J=ie.y,se=ie.fullyVisible;if(!se){var de=ie.aabb.intersects(k);if(de===0)continue;se=de===2}var be=ie.aabb.distanceX(w),Te=ie.aabb.distanceY(w),ke=Math.max(Math.abs(be),Math.abs(Te));if(ie.zoom===K||ke>3+(1<<K-ie.zoom)-2&&ie.zoom>=z)Z.push({tileID:new a.OverscaledTileID(ie.zoom===K?W:ie.zoom,ie.wrap,ie.zoom,ce,J),distanceSq:a.sqrLen([w[0]-.5-ce,w[1]-.5-J])});else for(var Pe=0;Pe<4;Pe++){var Le=(ce<<1)+Pe%2,We=(J<<1)+(Pe>>1);F.push({aabb:ie.aabb.quadrant(Pe),zoom:ie.zoom+1,x:Le,y:We,wrap:ie.wrap,fullyVisible:se})}}return Z.sort(function(He,ft){return He.distanceSq-ft.distanceSq}).map(function(He){return He.tileID})},li.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},Ui.unmodified.get=function(){return this._unmodified},li.prototype.zoomScale=function(n){return Math.pow(2,n)},li.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},li.prototype.project=function(n){var s=a.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(n.lng)*this.worldSize,a.mercatorYfromLat(s)*this.worldSize)},li.prototype.unproject=function(n){return new a.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},Ui.point.get=function(){return this.project(this.center)},li.prototype.setLocationAtPoint=function(n,s){var o=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(n),w=new a.MercatorCoordinate(_.x-(o.x-c.x),_.y-(o.y-c.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},li.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},li.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},li.prototype.locationCoordinate=function(n){return a.MercatorCoordinate.fromLngLat(n)},li.prototype.coordinateLocation=function(n){return n.toLngLat()},li.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],o=[n.x,n.y,1,1];a.transformMat4(s,s,this.pixelMatrixInverse),a.transformMat4(o,o,this.pixelMatrixInverse);var c=s[3],_=o[3],w=s[1]/c,k=o[1]/_,z=s[2]/c,C=o[2]/_,F=z===C?0:(0-z)/(C-z);return new a.MercatorCoordinate(a.number(s[0]/c,o[0]/_,F)/this.worldSize,a.number(w,k,F)/this.worldSize)},li.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix),new a.Point(s[0]/s[3],s[1]/s[3])},li.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},li.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},li.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},li.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var o=n.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[o])return c[o];var _=n.canonical,w=this.worldSize/this.zoomScale(_.z),k=_.x+Math.pow(2,_.z)*n.wrap,z=a.identity(new Float64Array(16));return a.translate(z,z,[k*w,_.y*w,0]),a.scale(z,z,[w/a.EXTENT,w/a.EXTENT,1]),a.multiply(z,s?this.alignedProjMatrix:this.projMatrix,z),c[o]=new Float32Array(z),c[o]},li.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},li.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,o,c,_=-90,w=90,k=-180,z=180,C=this.size,F=this._unmodified;if(this.latRange){var Z=this.latRange;_=a.mercatorYfromLat(Z[1])*this.worldSize,n=(w=a.mercatorYfromLat(Z[0])*this.worldSize)-_<C.y?C.y/(w-_):0}if(this.lngRange){var K=this.lngRange;k=a.mercatorXfromLng(K[0])*this.worldSize,s=(z=a.mercatorXfromLng(K[1])*this.worldSize)-k<C.x?C.x/(z-k):0}var W=this.point,ne=Math.max(s||0,n||0);if(ne)return this.center=this.unproject(new a.Point(s?(z+k)/2:W.x,n?(w+_)/2:W.y)),this.zoom+=this.scaleZoom(ne),this._unmodified=F,void(this._constraining=!1);if(this.latRange){var ie=W.y,ce=C.y/2;ie-ce<_&&(c=_+ce),ie+ce>w&&(c=w-ce)}if(this.lngRange){var J=W.x,se=C.x/2;J-se<k&&(o=k+se),J+se>z&&(o=z-se)}o===void 0&&c===void 0||(this.center=this.unproject(new a.Point(o!==void 0?o:W.x,c!==void 0?c:W.y))),this._unmodified=F,this._constraining=!1}},li.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+n.y/this.height),c=Math.sin(o)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-s-o,.01,Math.PI-.01)),_=this.point,w=_.x,k=_.y,z=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),C=this.height/50,F=new Float64Array(16);a.perspective(F,this._fov,this.width/this.height,C,z),F[8]=2*-n.x/this.width,F[9]=2*n.y/this.height,a.scale(F,F,[1,-1,1]),a.translate(F,F,[0,0,-this.cameraToCenterDistance]),a.rotateX(F,F,this._pitch),a.rotateZ(F,F,this.angle),a.translate(F,F,[-w,-k,0]),this.mercatorMatrix=a.scale([],F,[this.worldSize,this.worldSize,this.worldSize]),a.scale(F,F,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=F,this.invProjMatrix=a.invert([],this.projMatrix);var Z=this.width%2/2,K=this.height%2/2,W=Math.cos(this.angle),ne=Math.sin(this.angle),ie=w-Math.round(w)+W*Z+ne*K,ce=k-Math.round(k)+W*K+ne*Z,J=new Float64Array(F);if(a.translate(J,J,[ie>.5?ie-1:ie,ce>.5?ce-1:ce,0]),this.alignedProjMatrix=J,F=a.create(),a.scale(F,F,[this.width/2,-this.height/2,1]),a.translate(F,F,[1,-1,0]),this.labelPlaneMatrix=F,F=a.create(),a.scale(F,F,[1,-1,1]),a.translate(F,F,[-1,-1,0]),a.scale(F,F,[2/this.width,2/this.height,1]),this.glCoordMatrix=F,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(F=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=F,this._posMatrixCache={},this._alignedPosMatrixCache={}}},li.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new a.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return a.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},li.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,n))},li.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var o=s.x,c=s.y,_=s.x,w=s.y,k=0,z=n;k<z.length;k+=1){var C=z[k];o=Math.min(o,C.x),c=Math.min(c,C.y),_=Math.max(_,C.x),w=Math.max(w,C.y)}return[new a.Point(o,c),new a.Point(_,c),new a.Point(_,w),new a.Point(o,w),new a.Point(o,c)]},Object.defineProperties(li.prototype,Ui);var ea=function(n){var s,o,c,_;this._hashName=n&&encodeURIComponent(n),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,c=null,_=function(){c=null,o&&(s(),c=setTimeout(_,300),o=!1)},function(){return o=!0,c||_(),c})};ea.prototype.addTo=function(n){return this._map=n,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ea.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ea.prototype.getHashString=function(n){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,c=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,c),w=Math.round(s.lng*_)/_,k=Math.round(s.lat*_)/_,z=this._map.getBearing(),C=this._map.getPitch(),F="";if(F+=n?"/"+w+"/"+k+"/"+o:o+"/"+k+"/"+w,(z||C)&&(F+="/"+Math.round(10*z)/10),C&&(F+="/"+Math.round(C)),this._hashName){var Z=this._hashName,K=!1,W=a.window.location.hash.slice(1).split("&").map(function(ne){var ie=ne.split("=")[0];return ie===Z?(K=!0,ie+"="+F):ne}).filter(function(ne){return ne});return K||W.push(Z+"="+F),"#"+W.join("&")}return"#"+F},ea.prototype._getCurrentHash=function(){var n,s=this,o=a.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(n=c)}),(n&&n[1]||"").split("/")):o.split("/")},ea.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},ea.prototype._updateHashUnthrottled=function(){var n=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,n)}catch{}};var gs={linearity:.3,easing:a.bezier(0,0,.3,1)},Ko=a.extend({deceleration:2500,maxSpeed:1400},gs),ys=a.extend({deceleration:20,maxSpeed:1400},gs),qp=a.extend({deceleration:1e3,maxSpeed:360},gs),jp=a.extend({deceleration:1e3,maxSpeed:90},gs),_s=function(n){this._map=n,this.clear()};function vs(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function Ma(n,s,o){var c=o.maxSpeed,_=o.linearity,w=o.deceleration,k=a.clamp(n*_/(s/1e3),-c,c),z=Math.abs(k)/(w*_);return{easing:o.easing,duration:1e3*z,amount:k*(z/2)}}_s.prototype.clear=function(){this._inertiaBuffer=[]},_s.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:n})},_s.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=a.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},_s.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},o=0,c=this._inertiaBuffer;o<c.length;o+=1){var _=c[o].settings;s.zoom+=_.zoomDelta||0,s.bearing+=_.bearingDelta||0,s.pitch+=_.pitchDelta||0,_.panDelta&&s.pan._add(_.panDelta),_.around&&(s.around=_.around),_.pinchAround&&(s.pinchAround=_.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(s.pan.mag()){var z=Ma(s.pan.mag(),w,a.extend({},Ko,n||{}));k.offset=s.pan.mult(z.amount/s.pan.mag()),k.center=this._map.transform.center,vs(k,z)}if(s.zoom){var C=Ma(s.zoom,w,ys);k.zoom=this._map.transform.zoom+C.amount,vs(k,C)}if(s.bearing){var F=Ma(s.bearing,w,qp);k.bearing=this._map.transform.bearing+a.clamp(F.amount,-179,179),vs(k,F)}if(s.pitch){var Z=Ma(s.pitch,w,jp);k.pitch=this._map.transform.pitch+Z.amount,vs(k,Z)}if(k.zoom||k.bearing){var K=s.pinchAround===void 0?s.around:s.pinchAround;k.around=K?this._map.unproject(K):this._map.getCenter()}return this.clear(),a.extend(k,{noMoveStart:!0})}};var Dn=function(n){function s(c,_,w,k){k===void 0&&(k={});var z=S.mousePos(_.getCanvasContainer(),w),C=_.unproject(z);n.call(this,c,a.extend({point:z,lngLat:C,originalEvent:w},k)),this._defaultPrevented=!1,this.target=_}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),bs=function(n){function s(c,_,w){var k=c==="touchend"?w.changedTouches:w.touches,z=S.touchPos(_.getCanvasContainer(),k),C=z.map(function(K){return _.unproject(K)}),F=z.reduce(function(K,W,ne,ie){return K.add(W.div(ie.length))},new a.Point(0,0)),Z=_.unproject(F);n.call(this,c,{points:z,point:F,lngLats:C,lngLat:Z,originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),Ec=function(n){function s(c,_,w){n.call(this,c,{originalEvent:w}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(a.Event),kn=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};kn.prototype.reset=function(){delete this._mousedownPos},kn.prototype.wheel=function(n){return this._firePreventable(new Ec(n.type,this._map,n))},kn.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new Dn(n.type,this._map,n))},kn.prototype.mouseup=function(n){this._map.fire(new Dn(n.type,this._map,n))},kn.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Dn(n.type,this._map,n))},kn.prototype.dblclick=function(n){return this._firePreventable(new Dn(n.type,this._map,n))},kn.prototype.mouseover=function(n){this._map.fire(new Dn(n.type,this._map,n))},kn.prototype.mouseout=function(n){this._map.fire(new Dn(n.type,this._map,n))},kn.prototype.touchstart=function(n){return this._firePreventable(new bs(n.type,this._map,n))},kn.prototype.touchmove=function(n){this._map.fire(new bs(n.type,this._map,n))},kn.prototype.touchend=function(n){this._map.fire(new bs(n.type,this._map,n))},kn.prototype.touchcancel=function(n){this._map.fire(new bs(n.type,this._map,n))},kn.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},kn.prototype.isEnabled=function(){return!0},kn.prototype.isActive=function(){return!1},kn.prototype.enable=function(){},kn.prototype.disable=function(){};var yt=function(n){this._map=n};yt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},yt.prototype.mousemove=function(n){this._map.fire(new Dn(n.type,this._map,n))},yt.prototype.mousedown=function(){this._delayContextMenu=!0},yt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},yt.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new Dn(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},yt.prototype.isEnabled=function(){return!0},yt.prototype.isActive=function(){return!1},yt.prototype.enable=function(){},yt.prototype.disable=function(){};var Ur=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Qs(n,s){for(var o={},c=0;c<n.length;c++)o[n[c].identifier]=s[c];return o}Ur.prototype.isEnabled=function(){return!!this._enabled},Ur.prototype.isActive=function(){return!!this._active},Ur.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ur.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ur.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(S.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},Ur.prototype.mousemoveWindow=function(n,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=o,this._box||(this._box=S.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var _=Math.min(c.x,o.x),w=Math.max(c.x,o.x),k=Math.min(c.y,o.y),z=Math.max(c.y,o.y);S.setTransform(this._box,"translate("+_+"px,"+k+"px)"),this._box.style.width=w-_+"px",this._box.style.height=z-k+"px"}}},Ur.prototype.mouseupWindow=function(n,s){var o=this;if(this._active&&n.button===0){var c=this._startPos,_=s;if(this.reset(),S.suppressClick(),c.x!==_.x||c.y!==_.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(w){return w.fitScreenCoordinates(c,_,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},Ur.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},Ur.prototype.blur=function(){this.reset()},Ur.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(S.remove(this._box),this._box=null),S.enableDrag(),delete this._startPos,delete this._lastPos},Ur.prototype._fireEvent=function(n,s){return this._map.fire(new a.Event(n,{originalEvent:s}))};var Ho=function(n){this.reset(),this.numTouches=n.numTouches};Ho.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ho.prototype.touchstart=function(n,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(c){for(var _=new a.Point(0,0),w=0,k=c;w<k.length;w+=1)_._add(k[w]);return _.div(c.length)}(s),this.touches=Qs(o,s)))},Ho.prototype.touchmove=function(n,s,o){if(!this.aborted&&this.centroid){var c=Qs(o,s);for(var _ in this.touches){var w=c[_];(!w||w.dist(this.touches[_])>30)&&(this.aborted=!0)}}},Ho.prototype.touchend=function(n,s,o){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var ma=function(n){this.singleTap=new Ho(n),this.numTaps=n.numTaps,this.reset()};ma.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ma.prototype.touchstart=function(n,s,o){this.singleTap.touchstart(n,s,o)},ma.prototype.touchmove=function(n,s,o){this.singleTap.touchmove(n,s,o)},ma.prototype.touchend=function(n,s,o){var c=this.singleTap.touchend(n,s,o);if(c){var _=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(c)<30;if(_&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var Vr=function(){this._zoomIn=new ma({numTouches:1,numTaps:2}),this._zoomOut=new ma({numTouches:2,numTaps:1}),this.reset()};Vr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Vr.prototype.touchstart=function(n,s,o){this._zoomIn.touchstart(n,s,o),this._zoomOut.touchstart(n,s,o)},Vr.prototype.touchmove=function(n,s,o){this._zoomIn.touchmove(n,s,o),this._zoomOut.touchmove(n,s,o)},Vr.prototype.touchend=function(n,s,o){var c=this,_=this._zoomIn.touchend(n,s,o),w=this._zoomOut.touchend(n,s,o);return _?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(_)},{originalEvent:n})}}):w?(this._active=!0,n.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(w)},{originalEvent:n})}}):void 0},Vr.prototype.touchcancel=function(){this.reset()},Vr.prototype.enable=function(){this._enabled=!0},Vr.prototype.disable=function(){this._enabled=!1,this.reset()},Vr.prototype.isEnabled=function(){return this._enabled},Vr.prototype.isActive=function(){return this._active};var Ql={0:1,2:2},rt=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};rt.prototype.blur=function(){this.reset()},rt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},rt.prototype._correctButton=function(n,s){return!1},rt.prototype._move=function(n,s){return{}},rt.prototype.mousedown=function(n,s){if(!this._lastPoint){var o=S.mouseButton(n);this._correctButton(n,o)&&(this._lastPoint=s,this._eventButton=o)}},rt.prototype.mousemoveWindow=function(n,s){var o=this._lastPoint;if(o){if(n.preventDefault(),function(c,_){var w=Ql[_];return c.buttons===void 0||(c.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},rt.prototype.mouseupWindow=function(n){this._lastPoint&&S.mouseButton(n)===this._eventButton&&(this._moved&&S.suppressClick(),this.reset())},rt.prototype.enable=function(){this._enabled=!0},rt.prototype.disable=function(){this._enabled=!1,this.reset()},rt.prototype.isEnabled=function(){return this._enabled},rt.prototype.isActive=function(){return this._active};var $l=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(o,c){n.prototype.mousedown.call(this,o,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,c){return c===0&&!o.ctrlKey},s.prototype._move=function(o,c){return{around:c,panDelta:c.sub(o)}},s}(rt),$s=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var _=.8*(c.x-o.x);if(_)return this._active=!0,{bearingDelta:_}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(rt),eu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,c){return c===0&&o.ctrlKey||c===2},s.prototype._move=function(o,c){var _=-.5*(c.y-o.y);if(_)return this._active=!0,{pitchDelta:_}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(rt),aa=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};aa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},aa.prototype.touchstart=function(n,s,o){return this._calculateTransform(n,s,o)},aa.prototype.touchmove=function(n,s,o){if(this._active&&!(o.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,o)},aa.prototype.touchend=function(n,s,o){this._calculateTransform(n,s,o),this._active&&o.length<this._minTouches&&this.reset()},aa.prototype.touchcancel=function(){this.reset()},aa.prototype._calculateTransform=function(n,s,o){o.length>0&&(this._active=!0);var c=Qs(o,s),_=new a.Point(0,0),w=new a.Point(0,0),k=0;for(var z in c){var C=c[z],F=this._touches[z];F&&(_._add(C),w._add(C.sub(F)),k++,c[z]=C)}if(this._touches=c,!(k<this._minTouches)&&w.mag()){var Z=w.div(k);if(this._sum._add(Z),!(this._sum.mag()<this._clickTolerance))return{around:_.div(k),panDelta:Z}}},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var qr=function(){this.reset()};function el(n,s,o){for(var c=0;c<n.length;c++)if(n[c].identifier===o)return s[c]}function tl(n,s){return Math.log(n/s)/Math.LN2}qr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qr.prototype._start=function(n){},qr.prototype._move=function(n,s,o){return{}},qr.prototype.touchstart=function(n,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},qr.prototype.touchmove=function(n,s,o){if(this._firstTwoTouches){n.preventDefault();var c=this._firstTwoTouches,_=c[1],w=el(o,s,c[0]),k=el(o,s,_);if(w&&k){var z=this._aroundCenter?null:w.add(k).div(2);return this._move([w,k],z,n)}}},qr.prototype.touchend=function(n,s,o){if(this._firstTwoTouches){var c=this._firstTwoTouches,_=c[1],w=el(o,s,c[0]),k=el(o,s,_);w&&k||(this._active&&S.suppressClick(),this.reset())}},qr.prototype.touchcancel=function(){this.reset()},qr.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},qr.prototype.disable=function(){this._enabled=!1,this.reset()},qr.prototype.isEnabled=function(){return this._enabled},qr.prototype.isActive=function(){return this._active};var jr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,c){var _=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(tl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tl(this._distance,_),pinchAround:c}},s}(qr);function Da(n,s){return 180*n.angleWith(s)/Math.PI}var zc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,c){var _=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Da(this._vector,_),pinchAround:c}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var c=25/(Math.PI*this._minDiameter)*360,_=Da(o,this._startVector);return Math.abs(_)<c},s}(qr);function xs(n){return Math.abs(n.y)>Math.abs(n.x)}var tu=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,xs(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,c,_){var w=o[0].sub(this._lastPoints[0]),k=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,k,_.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(w.y+k.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,c,_){if(this._valid!==void 0)return this._valid;var w=o.mag()>=2,k=c.mag()>=2;if(w||k){if(!w||!k)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;var z=o.y>0==c.y>0;return xs(o)&&xs(c)&&z}},s}(qr),iu={panStep:100,bearingStep:15,pitchStep:10},ga=function(){var n=iu;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function ta(n){return n*(2-n)}ga.prototype.blur=function(){this.reset()},ga.prototype.reset=function(){this._active=!1},ga.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=0,c=0,_=0,w=0,k=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?c=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?c=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?_=1:(n.preventDefault(),k=-1);break;case 40:n.shiftKey?_=-1:(n.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(c=0,_=0),{cameraAnimation:function(z){var C=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:ta,zoom:o?Math.round(C)+o*(n.shiftKey?2:1):C,bearing:z.getBearing()+c*s._bearingStep,pitch:z.getPitch()+_*s._pitchStep,offset:[-w*s._panStep,-k*s._panStep],center:z.getCenter()},{originalEvent:n})}}}},ga.prototype.enable=function(){this._enabled=!0},ga.prototype.disable=function(){this._enabled=!1,this.reset()},ga.prototype.isEnabled=function(){return this._enabled},ga.prototype.isActive=function(){return this._active},ga.prototype.disableRotation=function(){this._rotationDisabled=!0},ga.prototype.enableRotation=function(){this._rotationDisabled=!1};var ii=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};ii.prototype.setZoomRate=function(n){this._defaultZoomRate=n},ii.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},ii.prototype.isEnabled=function(){return!!this._enabled},ii.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ii.prototype.isZooming=function(){return!!this._zooming},ii.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},ii.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ii.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=a.browser.now(),c=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},ii.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},ii.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=S.mousePos(this._el,n);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ii.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&c!==0&&(c=1/c);var _=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(_*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,k=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,z=this._startZoom,C=this._easing,F=!1;if(this._type==="wheel"&&z&&C){var Z=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),K=C(Z);w=a.number(z,k,K),Z<1?this._frameId||(this._frameId=!0):F=!0}else w=k,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ii.prototype._smoothOutEasing=function(n){var s=a.ease;if(this._prevEase){var o=this._prevEase,c=(a.browser.now()-o.start)/o.duration,_=o.easing(c+.01)-o.easing(c),w=.27/Math.sqrt(_*_+1e-4)*.01,k=Math.sqrt(.0729-w*w);s=a.bezier(w,k,.25,1)}return this._prevEase={start:a.browser.now(),duration:n,easing:s},s},ii.prototype.blur=function(){this.reset()},ii.prototype.reset=function(){this._active=!1};var za=function(n,s){this._clickZoom=n,this._tapZoom=s};za.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},za.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},za.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},za.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var oa=function(){this.reset()};oa.prototype.reset=function(){this._active=!1},oa.prototype.blur=function(){this.reset()},oa.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:n})}}},oa.prototype.enable=function(){this._enabled=!0},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active};var rr=function(){this._tap=new ma({numTouches:1,numTaps:1}),this.reset()};rr.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},rr.prototype.touchstart=function(n,s,o){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(n,s,o))},rr.prototype.touchmove=function(n,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var c=s[0],_=c.y-this._swipePoint.y;return this._swipePoint=c,n.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(n,s,o)},rr.prototype.touchend=function(n,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(n,s,o)&&(this._tapTime=n.timeStamp)},rr.prototype.touchcancel=function(){this.reset()},rr.prototype.enable=function(){this._enabled=!0},rr.prototype.disable=function(){this._enabled=!1,this.reset()},rr.prototype.isEnabled=function(){return this._enabled},rr.prototype.isActive=function(){return this._active};var Io=function(n,s,o){this._el=n,this._mousePan=s,this._touchPan=o};Io.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Io.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Io.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Io.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Xa=function(n,s,o){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};Xa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Xa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Xa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Xa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ya=function(n,s,o,c){this._el=n,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};ya.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ya.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ya.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ya.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ya.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ya.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var vr=function(n){return n.zoom||n.drag||n.pitch||n.rotate},ws=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(a.Event);function zt(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var bt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _s(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),a.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[a.window,"blur",void 0]];for(var c=0,_=this._listeners;c<_.length;c+=1){var w=_[c],k=w[0];S.addEventListener(k,w[1],k===a.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};bt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var o=s[n],c=o[0];S.removeEventListener(c,o[1],c===a.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},bt.prototype._addDefaultHandlers=function(n){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new kn(s,n));var c=s.boxZoom=new Ur(s,n);this._add("boxZoom",c);var _=new Vr,w=new oa;s.doubleClickZoom=new za(w,_),this._add("tapZoom",_),this._add("clickZoom",w);var k=new rr;this._add("tapDragZoom",k);var z=s.touchPitch=new tu;this._add("touchPitch",z);var C=new $s(n),F=new eu(n);s.dragRotate=new Xa(n,C,F),this._add("mouseRotate",C,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]);var Z=new $l(n),K=new aa(n);s.dragPan=new Io(o,Z,K),this._add("mousePan",Z),this._add("touchPan",K,["touchZoom","touchRotate"]);var W=new zc,ne=new jr;s.touchZoomRotate=new ya(o,ne,W,k),this._add("touchRotate",W,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]);var ie=s.scrollZoom=new ii(s,this);this._add("scrollZoom",ie,["mousePan"]);var ce=s.keyboard=new ga;this._add("keyboard",ce),this._add("blockableMapEvent",new yt(s));for(var J=0,se=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];J<se.length;J+=1){var de=se[J];n.interactive&&n[de]&&s[de].enable(n[de])}},bt.prototype._add=function(n,s,o){this._handlers.push({handlerName:n,handler:s,allowed:o}),this._handlersById[n]=s},bt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},bt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},bt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},bt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},bt.prototype.isMoving=function(){return!!vr(this._eventsInProgress)||this.isZooming()},bt.prototype._blockedByActive=function(n,s,o){for(var c in n)if(c!==o&&(!s||s.indexOf(c)<0))return!0;return!1},bt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},bt.prototype._getMapTouches=function(n){for(var s=[],o=0,c=n;o<c.length;o+=1){var _=c[o];this._el.contains(_.target)&&s.push(_)}return s},bt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var o=n.type==="renderFrame"?void 0:n,c={needsRenderFrame:!1},_={},w={},k=n.touches?this._getMapTouches(n.touches):void 0,z=k?S.touchPos(this._el,k):S.mousePos(this._el,n),C=0,F=this._handlers;C<F.length;C+=1){var Z=F[C],K=Z.handlerName,W=Z.handler,ne=Z.allowed;if(W.isEnabled()){var ie=void 0;this._blockedByActive(w,ne,K)?W.reset():W[s||n.type]&&(ie=W[s||n.type](n,z,k),this.mergeHandlerResult(c,_,ie,K,o),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||W.isActive())&&(w[K]=W)}}var ce={};for(var J in this._previousActiveHandlers)w[J]||(ce[J]=o);this._previousActiveHandlers=w,(Object.keys(ce).length||zt(c))&&(this._changes.push([c,_,ce]),this._triggerRenderFrame()),(Object.keys(w).length||zt(c))&&this._map._stop(!0),this._updatingCamera=!1;var se=c.cameraAnimation;se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],se(this._map))},bt.prototype.mergeHandlerResult=function(n,s,o,c,_){if(o){a.extend(n,o);var w={handlerName:c,originalEvent:o.originalEvent||_};o.zoomDelta!==void 0&&(s.zoom=w),o.panDelta!==void 0&&(s.drag=w),o.pitchDelta!==void 0&&(s.pitch=w),o.bearingDelta!==void 0&&(s.rotate=w)}},bt.prototype._applyChanges=function(){for(var n={},s={},o={},c=0,_=this._changes;c<_.length;c+=1){var w=_[c],k=w[0],z=w[1],C=w[2];k.panDelta&&(n.panDelta=(n.panDelta||new a.Point(0,0))._add(k.panDelta)),k.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(n.around=k.around),k.pinchAround!==void 0&&(n.pinchAround=k.pinchAround),k.noInertia&&(n.noInertia=k.noInertia),a.extend(s,z),a.extend(o,C)}this._updateMapTransform(n,s,o),this._changes=[]},bt.prototype._updateMapTransform=function(n,s,o){var c=this._map,_=c.transform;if(!zt(n))return this._fireEvents(s,o,!0);var w=n.panDelta,k=n.zoomDelta,z=n.bearingDelta,C=n.pitchDelta,F=n.around,Z=n.pinchAround;Z!==void 0&&(F=Z),c._stop(!0),F=F||c.transform.centerPoint;var K=_.pointLocation(w?F.sub(w):F);z&&(_.bearing+=z),C&&(_.pitch+=C),k&&(_.zoom+=k),_.setLocationAtPoint(K,F),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,o,!0)},bt.prototype._fireEvents=function(n,s,o){var c=this,_=vr(this._eventsInProgress),w=vr(n),k={};for(var z in n)this._eventsInProgress[z]||(k[z+"start"]=n[z].originalEvent),this._eventsInProgress[z]=n[z];for(var C in!_&&w&&this._fireEvent("movestart",w.originalEvent),k)this._fireEvent(C,k[C]);for(var F in w&&this._fireEvent("move",w.originalEvent),n)this._fireEvent(F,n[F].originalEvent);var Z,K={};for(var W in this._eventsInProgress){var ne=this._eventsInProgress[W],ie=ne.handlerName,ce=ne.originalEvent;this._handlersById[ie].isActive()||(delete this._eventsInProgress[W],K[W+"end"]=Z=s[ie]||ce)}for(var J in K)this._fireEvent(J,K[J]);var se=vr(this._eventsInProgress);if(o&&(_||w)&&!se){this._updatingCamera=!0;var de=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),be=function(Te){return Te!==0&&-c._bearingSnap<Te&&Te<c._bearingSnap};de?(be(de.bearing||this._map.getBearing())&&(de.bearing=0),this._map.easeTo(de,{originalEvent:Z})):(this._map.fire(new a.Event("moveend",{originalEvent:Z})),be(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},bt.prototype._fireEvent=function(n,s){this._map.fire(new a.Event(n,s?{originalEvent:s}:{}))},bt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new ws("renderFrame",{timeStamp:s})),n._applyChanges()})},bt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var il=function(n){function s(o,c){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,c){return this.jumpTo({center:o},c)},s.prototype.panBy=function(o,c,_){return o=a.Point.convert(o).mult(-1),this.panTo(this.transform.center,a.extend({offset:o},c),_)},s.prototype.panTo=function(o,c,_){return this.easeTo(a.extend({center:o},c),_)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,c){return this.jumpTo({zoom:o},c),this},s.prototype.zoomTo=function(o,c,_){return this.easeTo(a.extend({zoom:o},c),_)},s.prototype.zoomIn=function(o,c){return this.zoomTo(this.getZoom()+1,o,c),this},s.prototype.zoomOut=function(o,c){return this.zoomTo(this.getZoom()-1,o,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,c){return this.jumpTo({bearing:o},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,c){return this.jumpTo({padding:o},c),this},s.prototype.rotateTo=function(o,c,_){return this.easeTo(a.extend({bearing:o},c),_)},s.prototype.resetNorth=function(o,c){return this.rotateTo(0,a.extend({duration:1e3},o),c),this},s.prototype.resetNorthPitch=function(o,c){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},o),c),this},s.prototype.snapToNorth=function(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,c){return this.jumpTo({pitch:o},c),this},s.prototype.cameraForBounds=function(o,c){o=a.LngLatBounds.convert(o);var _=c&&c.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),_,c)},s.prototype._cameraForBoxAndBearing=function(o,c,_,w){var k={top:0,bottom:0,right:0,left:0};if(typeof(w=a.extend({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var z=w.padding;w.padding={top:z,bottom:z,right:z,left:z}}w.padding=a.extend(k,w.padding);var C=this.transform,F=C.padding,Z=C.project(a.LngLat.convert(o)),K=C.project(a.LngLat.convert(c)),W=Z.rotate(-_*Math.PI/180),ne=K.rotate(-_*Math.PI/180),ie=new a.Point(Math.max(W.x,ne.x),Math.max(W.y,ne.y)),ce=new a.Point(Math.min(W.x,ne.x),Math.min(W.y,ne.y)),J=ie.sub(ce),se=(C.width-(F.left+F.right+w.padding.left+w.padding.right))/J.x,de=(C.height-(F.top+F.bottom+w.padding.top+w.padding.bottom))/J.y;if(!(de<0||se<0)){var be=Math.min(C.scaleZoom(C.scale*Math.min(se,de)),w.maxZoom),Te=typeof w.offset.x=="number"?new a.Point(w.offset.x,w.offset.y):a.Point.convert(w.offset),ke=new a.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(_*Math.PI/180),Pe=Te.add(ke).mult(C.scale/C.zoomScale(be));return{center:C.unproject(Z.add(K).div(2).sub(Pe)),zoom:be,bearing:_}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,c,_){return this._fitInternal(this.cameraForBounds(o,c),c,_)},s.prototype.fitScreenCoordinates=function(o,c,_,w,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(o)),this.transform.pointLocation(a.Point.convert(c)),_,w),w,k)},s.prototype._fitInternal=function(o,c,_){return o?(delete(c=a.extend(o,c)).padding,c.linear?this.easeTo(c,_):this.flyTo(c,_)):this},s.prototype.jumpTo=function(o,c){this.stop();var _=this.transform,w=!1,k=!1,z=!1;return"zoom"in o&&_.zoom!==+o.zoom&&(w=!0,_.zoom=+o.zoom),o.center!==void 0&&(_.center=a.LngLat.convert(o.center)),"bearing"in o&&_.bearing!==+o.bearing&&(k=!0,_.bearing=+o.bearing),"pitch"in o&&_.pitch!==+o.pitch&&(z=!0,_.pitch=+o.pitch),o.padding==null||_.isPaddingEqual(o.padding)||(_.padding=o.padding),this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),w&&this.fire(new a.Event("zoomstart",c)).fire(new a.Event("zoom",c)).fire(new a.Event("zoomend",c)),k&&this.fire(new a.Event("rotatestart",c)).fire(new a.Event("rotate",c)).fire(new a.Event("rotateend",c)),z&&this.fire(new a.Event("pitchstart",c)).fire(new a.Event("pitch",c)).fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))},s.prototype.easeTo=function(o,c){var _=this;this._stop(!1,o.easeId),((o=a.extend({offset:[0,0],duration:500,easing:a.ease},o)).animate===!1||!o.essential&&a.browser.prefersReducedMotion)&&(o.duration=0);var w=this.transform,k=this.getZoom(),z=this.getBearing(),C=this.getPitch(),F=this.getPadding(),Z="zoom"in o?+o.zoom:k,K="bearing"in o?this._normalizeBearing(o.bearing,z):z,W="pitch"in o?+o.pitch:C,ne="padding"in o?o.padding:w.padding,ie=a.Point.convert(o.offset),ce=w.centerPoint.add(ie),J=w.pointLocation(ce),se=a.LngLat.convert(o.center||J);this._normalizeCenter(se);var de,be,Te=w.project(J),ke=w.project(se).sub(Te),Pe=w.zoomScale(Z-k);o.around&&(de=a.LngLat.convert(o.around),be=w.locationPoint(de));var Le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Z!==k,this._rotating=this._rotating||z!==K,this._pitching=this._pitching||W!==C,this._padding=!w.isPaddingEqual(ne),this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,Le),this._ease(function(We){if(_._zooming&&(w.zoom=a.number(k,Z,We)),_._rotating&&(w.bearing=a.number(z,K,We)),_._pitching&&(w.pitch=a.number(C,W,We)),_._padding&&(w.interpolatePadding(F,ne,We),ce=w.centerPoint.add(ie)),de)w.setLocationAtPoint(de,be);else{var He=w.zoomScale(w.zoom-k),ft=Z>k?Math.min(2,Pe):Math.max(.5,Pe),Tt=Math.pow(ft,1-We),Ct=w.unproject(Te.add(ke.mult(We*Tt)).mult(He));w.setLocationAtPoint(w.renderWorldCopies?Ct.wrap():Ct,ce)}_._fireMoveEvents(c)},function(We){_._afterEase(c,We)},o),this},s.prototype._prepareEase=function(o,c,_){_===void 0&&(_={}),this._moving=!0,c||_.moving||this.fire(new a.Event("movestart",o)),this._zooming&&!_.zooming&&this.fire(new a.Event("zoomstart",o)),this._rotating&&!_.rotating&&this.fire(new a.Event("rotatestart",o)),this._pitching&&!_.pitching&&this.fire(new a.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new a.Event("move",o)),this._zooming&&this.fire(new a.Event("zoom",o)),this._rotating&&this.fire(new a.Event("rotate",o)),this._pitching&&this.fire(new a.Event("pitch",o))},s.prototype._afterEase=function(o,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var _=this._zooming,w=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new a.Event("zoomend",o)),w&&this.fire(new a.Event("rotateend",o)),k&&this.fire(new a.Event("pitchend",o)),this.fire(new a.Event("moveend",o))}},s.prototype.flyTo=function(o,c){var _=this;if(!o.essential&&a.browser.prefersReducedMotion){var w=a.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,c)}this.stop(),o=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},o);var k=this.transform,z=this.getZoom(),C=this.getBearing(),F=this.getPitch(),Z=this.getPadding(),K="zoom"in o?a.clamp(+o.zoom,k.minZoom,k.maxZoom):z,W="bearing"in o?this._normalizeBearing(o.bearing,C):C,ne="pitch"in o?+o.pitch:F,ie="padding"in o?o.padding:k.padding,ce=k.zoomScale(K-z),J=a.Point.convert(o.offset),se=k.centerPoint.add(J),de=k.pointLocation(se),be=a.LngLat.convert(o.center||de);this._normalizeCenter(be);var Te=k.project(de),ke=k.project(be).sub(Te),Pe=o.curve,Le=Math.max(k.width,k.height),We=Le/ce,He=ke.mag();if("minZoom"in o){var ft=a.clamp(Math.min(o.minZoom,z,K),k.minZoom,k.maxZoom),Tt=Le/k.zoomScale(ft-z);Pe=Math.sqrt(Tt/He*2)}var Ct=Pe*Pe;function Pt(Rt){var Dt=(We*We-Le*Le+(Rt?-1:1)*Ct*Ct*He*He)/(2*(Rt?We:Le)*Ct*He);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function yi(Rt){return(Math.exp(Rt)-Math.exp(-Rt))/2}function dt(Rt){return(Math.exp(Rt)+Math.exp(-Rt))/2}var Ot=Pt(0),Yt=function(Rt){return dt(Ot)/dt(Ot+Pe*Rt)},Ft=function(Rt){return Le*((dt(Ot)*(yi(Dt=Ot+Pe*Rt)/dt(Dt))-yi(Ot))/Ct)/He;var Dt},Bt=(Pt(1)-Ot)/Pe;if(Math.abs(He)<1e-6||!isFinite(Bt)){if(Math.abs(Le-We)<1e-6)return this.easeTo(o,c);var Wt=We<Le?-1:1;Bt=Math.abs(Math.log(We/Le))/Pe,Ft=function(){return 0},Yt=function(Rt){return Math.exp(Wt*Pe*Rt)}}return o.duration="duration"in o?+o.duration:1e3*Bt/("screenSpeed"in o?+o.screenSpeed/Pe:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=C!==W,this._pitching=ne!==F,this._padding=!k.isPaddingEqual(ie),this._prepareEase(c,!1),this._ease(function(Rt){var Dt=Rt*Bt,Nn=1/Yt(Dt);k.zoom=Rt===1?K:z+k.scaleZoom(Nn),_._rotating&&(k.bearing=a.number(C,W,Rt)),_._pitching&&(k.pitch=a.number(F,ne,Rt)),_._padding&&(k.interpolatePadding(Z,ie,Rt),se=k.centerPoint.add(J));var un=Rt===1?be:k.unproject(Te.add(ke.mult(Ft(Dt))).mult(Nn));k.setLocationAtPoint(k.renderWorldCopies?un.wrap():un,se),_._fireMoveEvents(c)},function(){return _._afterEase(c)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,c)}if(!o){var w=this.handlers;w&&w.stop(!1)}return this},s.prototype._ease=function(o,c,_){_.animate===!1||_.duration===0?(o(1),c()):(this._easeStart=a.browser.now(),this._easeOptions=_,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,c){o=a.wrap(o,-180,180);var _=Math.abs(o-c);return Math.abs(o-360-c)<_&&(o-=360),Math.abs(o+360-c)<_&&(o+=360),o},s.prototype._normalizeCenter=function(o){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var _=o.lng-c.center.lng;o.lng+=_>180?-360:_<-180?360:0}},s}(a.Evented),br=function(n){n===void 0&&(n={}),this.options=n,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};br.prototype.getDefaultPosition=function(){return"bottom-right"},br.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=S.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=S.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},br.prototype.onRemove=function(){S.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},br.prototype._setElementTitle=function(n,s){var o=this._map._getUIString("AttributionControl."+s);n.title=o,n.setAttribute("aria-label",o)},br.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},br.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(n){var o=s.reduce(function(c,_,w){return _.value&&(c+=_.key+"="+_.value+(w<s.length-1?"&":"")),c},"?");n.href=a.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},br.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},br.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(z){return typeof z!="string"?"":z})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var c in o){var _=o[c];if(_.used){var w=_.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort(function(z,C){return z.length-C.length});var k=(n=n.filter(function(z,C){for(var F=C+1;F<n.length;F++)if(n[F].indexOf(z)>=0)return!1;return!0})).join(" | ");k!==this._attribHTML&&(this._attribHTML=k,n.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},br.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var _a=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};_a.prototype.onAdd=function(n){this._map=n,this._container=S.create("div","mapboxgl-ctrl");var s=S.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},_a.prototype.onRemove=function(){S.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},_a.prototype.getDefaultPosition=function(){return"bottom-left"},_a.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},_a.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},_a.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var ar=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ar.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},ar.prototype.remove=function(n){for(var s=this._currentlyRunning,o=0,c=s?this._queue.concat(s):this._queue;o<c.length;o+=1){var _=c[o];if(_.id===n)return void(_.cancelled=!0)}},ar.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,c=s;o<c.length;o+=1){var _=c[o];if(!_.cancelled&&(_.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ar.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ta={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},nu=a.window.HTMLImageElement,nl=a.window.HTMLElement,Ci=a.window.ImageBitmap,Hn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Tc=function(n){function s(c){var _=this;if((c=a.extend({},Hn,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new li(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(n.call(this,w,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new ar,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Ta,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new a.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=a.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof nl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return _._update(!1)}),this.on("moveend",function(){return _._update(!1)}),this.on("zoom",function(){return _._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new bt(this,c),this._hash=c.hash&&new ea(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,a.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new br({customAttribution:c.customAttribution})),this.addControl(new _a,c.logoPosition),this.on("style.load",function(){_.transform.unmodified&&_.jumpTo(_.style.stylesheet)}),this.on("data",function(k){_._update(k.dataType==="style"),_.fire(new a.Event(k.dataType+"data",k))}),this.on("dataloading",function(k){_.fire(new a.Event(k.dataType+"dataloading",k))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,_){if(_===void 0&&(_=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=c.onAdd(this);this._controls.push(c);var k=this._controlPositions[_];return _.indexOf("bottom")!==-1?k.insertBefore(w,k.firstChild):k.appendChild(w),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var _=this._controls.indexOf(c);return _>-1&&this._controls.splice(_,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var _=this._containerDimensions(),w=_[0],k=_[1];if(w===this.transform.width&&k===this.transform.height)return this;this._resizeCanvas(w,k),this.transform.resize(w,k),this.painter.resize(w,k);var z=!this._moving;return z&&this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),this.fire(new a.Event("resize",c)),z&&this.fire(new a.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(a.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(a.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(a.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,_,w){var k,z=this;if(c==="mouseenter"||c==="mouseover"){var C=!1;return{layer:_,listener:w,delegates:{mousemove:function(Z){var K=z.getLayer(_)?z.queryRenderedFeatures(Z.point,{layers:[_]}):[];K.length?C||(C=!0,w.call(z,new Dn(c,z,Z.originalEvent,{features:K}))):C=!1},mouseout:function(){C=!1}}}}if(c==="mouseleave"||c==="mouseout"){var F=!1;return{layer:_,listener:w,delegates:{mousemove:function(Z){(z.getLayer(_)?z.queryRenderedFeatures(Z.point,{layers:[_]}):[]).length?F=!0:F&&(F=!1,w.call(z,new Dn(c,z,Z.originalEvent)))},mouseout:function(Z){F&&(F=!1,w.call(z,new Dn(c,z,Z.originalEvent)))}}}}return{layer:_,listener:w,delegates:(k={},k[c]=function(Z){var K=z.getLayer(_)?z.queryRenderedFeatures(Z.point,{layers:[_]}):[];K.length&&(Z.features=K,w.call(z,Z),delete Z.features)},k)}},s.prototype.on=function(c,_,w){if(w===void 0)return n.prototype.on.call(this,c,_);var k=this._createDelegatedListener(c,_,w);for(var z in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(k),k.delegates)this.on(z,k.delegates[z]);return this},s.prototype.once=function(c,_,w){if(w===void 0)return n.prototype.once.call(this,c,_);var k=this._createDelegatedListener(c,_,w);for(var z in k.delegates)this.once(z,k.delegates[z]);return this},s.prototype.off=function(c,_,w){var k=this;return w===void 0?n.prototype.off.call(this,c,_):(this._delegatedListeners&&this._delegatedListeners[c]&&function(z){for(var C=z[c],F=0;F<C.length;F++){var Z=C[F];if(Z.layer===_&&Z.listener===w){for(var K in Z.delegates)k.off(K,Z.delegates[K]);return C.splice(F,1),k}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,_){if(!this.style)return[];var w;if(_!==void 0||c===void 0||c instanceof a.Point||Array.isArray(c)||(_=c,c=void 0),_=_||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof c[0]=="number")w=[a.Point.convert(c)];else{var k=a.Point.convert(c[0]),z=a.Point.convert(c[1]);w=[k,new a.Point(z.x,k.y),z,new a.Point(k.x,z.y),k]}return this.style.queryRenderedFeatures(w,_,this.transform)},s.prototype.querySourceFeatures=function(c,_){return this.style.querySourceFeatures(c,_)},s.prototype.setStyle=function(c,_){return(_=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},_)).diff!==!1&&_.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,_),this):(this._localIdeographFontFamily=_.localIdeographFontFamily,this._updateStyle(c,_))},s.prototype._getUIString=function(c){var _=this._locale[c];if(_==null)throw new Error("Missing UI string '"+c+"'");return _},s.prototype._updateStyle=function(c,_){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new Nr(this,_||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Nr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,_){var w=this;if(typeof c=="string"){var k=this._requestManager.normalizeStyleURL(c),z=this._requestManager.transformRequest(k,a.ResourceType.Style);a.getJSON(z,function(C,F){C?w.fire(new a.ErrorEvent(C)):F&&w._updateDiff(F,_)})}else typeof c=="object"&&this._updateDiff(c,_)},s.prototype._updateDiff=function(c,_){try{this.style.setState(c)&&this._update(!0)}catch(w){a.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(c,_)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,_){return this._lazyInitEmptyStyle(),this.style.addSource(c,_),this._update(!0)},s.prototype.isSourceLoaded=function(c){var _=this.style&&this.style.sourceCaches[c];if(_!==void 0)return _.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var _ in c){var w=c[_]._tiles;for(var k in w){var z=w[k];if(z.state!=="loaded"&&z.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,_,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,_,w)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,_,w){w===void 0&&(w={});var k=w.pixelRatio;k===void 0&&(k=1);var z=w.sdf;z===void 0&&(z=!1);var C=w.stretchX,F=w.stretchY,Z=w.content;if(this._lazyInitEmptyStyle(),_ instanceof nu||Ci&&_ instanceof Ci){var K=a.browser.getImageData(_);this.style.addImage(c,{data:new a.RGBAImage({width:K.width,height:K.height},K.data),pixelRatio:k,stretchX:C,stretchY:F,content:Z,sdf:z,version:0})}else{if(_.width===void 0||_.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var W=_;this.style.addImage(c,{data:new a.RGBAImage({width:_.width,height:_.height},new Uint8Array(_.data)),pixelRatio:k,stretchX:C,stretchY:F,content:Z,sdf:z,version:0,userImage:W}),W.onAdd&&W.onAdd(this,c)}},s.prototype.updateImage=function(c,_){var w=this.style.getImage(c);if(!w)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var k=_ instanceof nu||Ci&&_ instanceof Ci?a.browser.getImageData(_):_,z=k.width,C=k.height,F=k.data;return z===void 0||C===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):z!==w.data.width||C!==w.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(F,!(_ instanceof nu||Ci&&_ instanceof Ci)),void this.style.updateImage(c,w))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,_){a.getImage(this._requestManager.transformRequest(c,a.ResourceType.Image),_)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,_){return this._lazyInitEmptyStyle(),this.style.addLayer(c,_),this._update(!0)},s.prototype.moveLayer=function(c,_){return this.style.moveLayer(c,_),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,_,w){return this.style.setLayerZoomRange(c,_,w),this._update(!0)},s.prototype.setFilter=function(c,_,w){return w===void 0&&(w={}),this.style.setFilter(c,_,w),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,_,w,k){return k===void 0&&(k={}),this.style.setPaintProperty(c,_,w,k),this._update(!0)},s.prototype.getPaintProperty=function(c,_){return this.style.getPaintProperty(c,_)},s.prototype.setLayoutProperty=function(c,_,w,k){return k===void 0&&(k={}),this.style.setLayoutProperty(c,_,w,k),this._update(!0)},s.prototype.getLayoutProperty=function(c,_){return this.style.getLayoutProperty(c,_)},s.prototype.setLight=function(c,_){return _===void 0&&(_={}),this._lazyInitEmptyStyle(),this.style.setLight(c,_),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,_){return this.style.setFeatureState(c,_),this._update()},s.prototype.removeFeatureState=function(c,_){return this.style.removeFeatureState(c,_),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,_=0;return this._container&&(c=this._container.clientWidth||400,_=this._container.clientHeight||300),[c,_]},s.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=S.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var _=this._canvasContainer=S.create("div","mapboxgl-canvas-container",c);this._interactive&&_.classList.add("mapboxgl-interactive"),this._canvas=S.create("canvas","mapboxgl-canvas",_),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var k=this._controlContainer=S.create("div","mapboxgl-control-container",c),z=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(C){z[C]=S.create("div","mapboxgl-ctrl-"+C,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,_){var w=a.browser.devicePixelRatio||1;this._canvas.width=w*c,this._canvas.height=w*_,this._canvas.style.width=c+"px",this._canvas.style.height=_+"px"},s.prototype._setupPainter=function(){var c=a.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),_=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);_?(this.painter=new Ji(_,this.transform),a.webpSupported.testSupport(_)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var _,w=this,k=0,z=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(_=z.createQueryEXT(),z.beginQueryEXT(z.TIME_ELAPSED_EXT,_),k=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var C=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var F=this.transform.zoom,Z=a.browser.now();this.style.zoomHistory.update(F,Z);var K=new a.EvaluationParameters(F,{now:Z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),W=K.crossFadingFactor();W===1&&W===this._crossFadingFactor||(C=!0,this._crossFadingFactor=W),this.style.update(K)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||C)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ne=a.browser.now()-k;z.endQueryEXT(z.TIME_ELAPSED_EXT,_),setTimeout(function(){var J=z.getQueryObjectEXT(_,z.QUERY_RESULT_EXT)/1e6;z.deleteQueryEXT(_),w.fire(new a.Event("gpu-timing-frame",{cpuTime:ne,gpuTime:J}))},50)}if(this.listens("gpu-timing-layer")){var ie=this.painter.collectGpuTimers();setTimeout(function(){var J=w.painter.queryGpuTimers(ie);w.fire(new a.Event("gpu-timing-layer",{layerTimes:J}))},50)}var ce=this._sourcesDirty||this._styleDirty||this._placementDirty;return ce||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||ce||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,_=this._controls;c<_.length;c+=1)_[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),Ao(this._canvasContainer),Ao(this._controlContainer),Ao(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(_){c._frame=null,c._render(_)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,_){a.setCacheLimits(c,_)},o.version.get=function(){return a.version},Object.defineProperties(s.prototype,o),s}(il);function Ao(n){n.parentNode&&n.parentNode.removeChild(n)}var ru={showCompass:!0,showZoom:!0,visualizePitch:!1},La=function(n){var s=this;this.options=a.extend({},ru,n),this._container=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),S.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),S.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=S.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};La.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),o=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},La.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},La.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gr(this._map,this._compass,this.options.visualizePitch)),this._container},La.prototype.onRemove=function(){S.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},La.prototype._createButton=function(n,s){var o=S.create("button",n,this._container);return o.type="button",o.addEventListener("click",s),o},La.prototype._setButtonTitle=function(n,s){var o=this._map._getUIString("NavigationControl."+s);n.title=o,n.setAttribute("aria-label",o)};var Gr=function(n,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new $s({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new eu({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),S.addEventListener(s,"mousedown",this.mousedown),S.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),S.addEventListener(s,"touchmove",this.touchmove),S.addEventListener(s,"touchend",this.touchend),S.addEventListener(s,"touchcancel",this.reset)};function Wo(n,s,o){if(n=new a.LngLat(n.lng,n.lat),s){var c=new a.LngLat(n.lng-360,n.lat),_=new a.LngLat(n.lng+360,n.lat),w=o.locationPoint(n).distSqr(s);o.locationPoint(c).distSqr(s)<w?n=c:o.locationPoint(_).distSqr(s)<w&&(n=_)}for(;Math.abs(n.lng-o.center.lng)>180;){var k=o.locationPoint(n);if(k.x>=0&&k.y>=0&&k.x<=o.width&&k.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}Gr.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),S.disableDrag()},Gr.prototype.move=function(n,s){var o=this.map,c=this.mouseRotate.mousemoveWindow(n,s);if(c&&c.bearingDelta&&o.setBearing(o.getBearing()+c.bearingDelta),this.mousePitch){var _=this.mousePitch.mousemoveWindow(n,s);_&&_.pitchDelta&&o.setPitch(o.getPitch()+_.pitchDelta)}},Gr.prototype.off=function(){var n=this.element;S.removeEventListener(n,"mousedown",this.mousedown),S.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),S.removeEventListener(n,"touchmove",this.touchmove),S.removeEventListener(n,"touchend",this.touchend),S.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},Gr.prototype.offTemp=function(){S.enableDrag(),S.removeEventListener(a.window,"mousemove",this.mousemove),S.removeEventListener(a.window,"mouseup",this.mouseup)},Gr.prototype.mousedown=function(n){this.down(a.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),S.mousePos(this.element,n)),S.addEventListener(a.window,"mousemove",this.mousemove),S.addEventListener(a.window,"mouseup",this.mouseup)},Gr.prototype.mousemove=function(n){this.move(n,S.mousePos(this.element,n))},Gr.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},Gr.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=S.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},Gr.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=S.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},Gr.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Gr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ia={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function rl(n,s,o){var c=n.classList;for(var _ in Ia)c.remove("mapboxgl-"+o+"-anchor-"+_);c.add("mapboxgl-"+o+"-anchor-"+s)}var Xo,Ss=function(n){function s(o,c){if(n.call(this),(o instanceof a.window.HTMLElement||c)&&(o=a.extend({element:o},c)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=a.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=S.create("div"),this._element.setAttribute("aria-label","Map marker");var _=S.createNS("http://www.w3.org/2000/svg","svg");_.setAttributeNS(null,"display","block"),_.setAttributeNS(null,"height","41px"),_.setAttributeNS(null,"width","27px"),_.setAttributeNS(null,"viewBox","0 0 27 41");var w=S.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var k=S.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");var z=S.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");for(var C=0,F=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];C<F.length;C+=1){var Z=F[C],K=S.createNS("http://www.w3.org/2000/svg","ellipse");K.setAttributeNS(null,"opacity","0.04"),K.setAttributeNS(null,"cx","10.5"),K.setAttributeNS(null,"cy","5.80029008"),K.setAttributeNS(null,"rx",Z.rx),K.setAttributeNS(null,"ry",Z.ry),z.appendChild(K)}var W=S.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);var ne=S.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(ne);var ie=S.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"fill","#000000");var ce=S.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ie.appendChild(ce);var J=S.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");var se=S.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(8.0, 8.0)");var de=S.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");var be=S.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#FFFFFF"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962"),se.appendChild(de),se.appendChild(be),k.appendChild(z),k.appendChild(W),k.appendChild(ie),k.appendChild(J),k.appendChild(se),_.appendChild(k),_.setAttributeNS(null,"height",41*this._scale+"px"),_.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(_),this._offset=a.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Te){Te.preventDefault()}),this._element.addEventListener("mousedown",function(Te){Te.preventDefault()}),rl(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),S.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var c=o.code,_=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&_!==32&&_!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var c=o.originalEvent.target,_=this._element;this._popup&&(c===_||_.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Wo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),S.setTransform(this._element,Ia[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+_+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=a.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(a.Evented),au={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Yo=0,Po=!1,ou=function(n){function s(o){n.call(this),this.options=a.extend({},au,o),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){var c;return this._map=o,this._container=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,Xo!==void 0?c(Xo):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(_){c(Xo=_.state!=="denied")}):c(Xo=!!a.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),S.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Yo=0,Po=!1},s.prototype._isOutOfMapMaxBounds=function(o){var c=this._map.getMaxBounds(),_=o.coords;return c&&(_.longitude<c.getWest()||_.longitude>c.getEast()||_.latitude<c.getSouth()||_.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude),_=o.coords.accuracy,w=this._map.getBearing(),k=a.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(_),k,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var c=new a.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,c=this._map.unproject([0,o]),_=this._map.unproject([1,o]),w=c.distanceTo(_),k=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=k+"px",this._circleElement.style.height=k+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&Po)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var c=this;if(this._container.addEventListener("contextmenu",function(k){return k.preventDefault()}),this._geolocateButton=S.create("button","mapboxgl-ctrl-geolocate",this._container),S.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var _=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=S.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ss(this._dotElement),this._circleElement=S.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ss({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(k){k.geolocateSource||c._watchState!=="ACTIVE_LOCK"||k.originalEvent&&k.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new a.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Yo--,Po=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Yo>1?(o={maximumAge:6e5,timeout:0},Po=!0):(o=this.options.positionOptions,Po=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(a.Evented),Ya={maxWidth:100,unit:"metric"},Ja=function(n){this.options=a.extend({},Ya,n),a.bindAll(["_onMove","setUnit"],this)};function al(n,s,o){var c=o&&o.maxWidth||100,_=n._container.clientHeight/2,w=n.unproject([0,_]),k=n.unproject([c,_]),z=w.distanceTo(k);if(o&&o.unit==="imperial"){var C=3.2808*z;C>5280?Qa(s,c,C/5280,n._getUIString("ScaleControl.Miles")):Qa(s,c,C,n._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Qa(s,c,z/1852,n._getUIString("ScaleControl.NauticalMiles")):z>=1e3?Qa(s,c,z/1e3,n._getUIString("ScaleControl.Kilometers")):Qa(s,c,z,n._getUIString("ScaleControl.Meters"))}function Qa(n,s,o,c){var _,w,k,z=(_=o,(w=Math.pow(10,(""+Math.floor(_)).length-1))*(k=(k=_/w)>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(C){var F=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*F)/F}(k)));n.style.width=s*(z/o)+"px",n.innerHTML=z+"&nbsp;"+c}Ja.prototype.getDefaultPosition=function(){return"bottom-left"},Ja.prototype._onMove=function(){al(this._map,this._container,this.options)},Ja.prototype.onAdd=function(n){return this._map=n,this._container=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ja.prototype.onRemove=function(){S.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ja.prototype.setUnit=function(n){this.options.unit=n,al(this._map,this._container,this.options)};var sa=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof a.window.HTMLElement?this._container=n.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};sa.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=S.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},sa.prototype.onRemove=function(){S.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},sa.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},sa.prototype._setupUI=function(){var n=this._fullscreenButton=S.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);S.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},sa.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},sa.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},sa.prototype._isFullscreen=function(){return this._fullscreen},sa.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},sa.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var su={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ks=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),lu=function(n){function s(o){n.call(this),this.options=a.extend(Object.create(su),o),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&S.remove(this._content),this._container&&(S.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=a.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(a.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var c,_=a.window.document.createDocumentFragment(),w=a.window.document.createElement("body");for(w.innerHTML=o;c=w.firstChild;)_.appendChild(c);return this.setDOMContent(_)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=S.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=S.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=S.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=S.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(K){return c._container.classList.add(K)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wo(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var _=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),w=this.options.anchor,k=function K(W){if(W){if(typeof W=="number"){var ne=Math.round(Math.sqrt(.5*Math.pow(W,2)));return{center:new a.Point(0,0),top:new a.Point(0,W),"top-left":new a.Point(ne,ne),"top-right":new a.Point(-ne,ne),bottom:new a.Point(0,-W),"bottom-left":new a.Point(ne,-ne),"bottom-right":new a.Point(-ne,-ne),left:new a.Point(W,0),right:new a.Point(-W,0)}}if(W instanceof a.Point||Array.isArray(W)){var ie=a.Point.convert(W);return{center:ie,top:ie,"top-left":ie,"top-right":ie,bottom:ie,"bottom-left":ie,"bottom-right":ie,left:ie,right:ie}}return{center:a.Point.convert(W.center||[0,0]),top:a.Point.convert(W.top||[0,0]),"top-left":a.Point.convert(W["top-left"]||[0,0]),"top-right":a.Point.convert(W["top-right"]||[0,0]),bottom:a.Point.convert(W.bottom||[0,0]),"bottom-left":a.Point.convert(W["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(W["bottom-right"]||[0,0]),left:a.Point.convert(W.left||[0,0]),right:a.Point.convert(W.right||[0,0])}}return K(new a.Point(0,0))}(this.options.offset);if(!w){var z,C=this._container.offsetWidth,F=this._container.offsetHeight;z=_.y+k.bottom.y<F?["top"]:_.y>this._map.transform.height-F?["bottom"]:[],_.x<C/2?z.push("left"):_.x>this._map.transform.width-C/2&&z.push("right"),w=z.length===0?"bottom":z.join("-")}var Z=_.add(k[w]).round();S.setTransform(this._container,Ia[w]+" translate("+Z.x+"px,"+Z.y+"px)"),rl(this._container,w,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(ks);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(a.Evented),ol={version:a.version,supported:T,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Tc,NavigationControl:La,GeolocateControl:ou,AttributionControl:br,ScaleControl:Ja,FullscreenControl:sa,Popup:lu,Marker:Ss,Style:Nr,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){Ie().acquire(ze)},clearPrewarmedResources:function(){var n=gt;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(ze),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(n){a.config.ACCESS_TOKEN=n},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(n){a.config.API_URL=n},get workerCount(){return Re.workerCount},set workerCount(n){Re.workerCount=n},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){a.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){a.clearTileCache(n)},workerUrl:""};return ol}),y})})(cg);var vp=cg.exports;const X_=b_(vp);function Sd(l){let p;const d=l[15].default,h=Ou(d,l,l[14],null);return{c(){h&&h.c()},l(y){h&&h.l(y)},m(y,v){h&&h.m(y,v),p=!0},p(y,v){h&&h.p&&(!p||v&16384)&&Nu(h,d,y,y[14],p?Vu(d,y[14],v,null):Uu(y[14]),null)},i(y){p||(ct(h,y),p=!0)},o(y){_t(h,y),p=!1},d(y){h&&h.d(y)}}}function Y_(l){let p,d,h,y=l[0]&&Sd(l);return{c(){p=Oe("div"),y&&y.c(),this.h()},l(v){p=Ne(v,"DIV",{class:!0,id:!0});var a=Ge(p);y&&y.l(a),a.forEach(oe),this.h()},h(){re(p,"class","absolute top-0 bg-grey4 w-full h-full svelte-a65d1y"),re(p,"id",l[1]),Zu(()=>l[16].call(p))},m(v,a){Me(v,p,a),y&&y.m(p,null),d=Ku(p,l[16].bind(p)),l[17](p),h=!0},p(v,[a]){v[0]?y?(y.p(v,a),a&1&&ct(y,1)):(y=Sd(v),y.c(),ct(y,1),y.m(p,null)):y&&(Xr(),_t(y,1,1,()=>{y=null}),Yr()),(!h||a&2)&&re(p,"id",v[1])},i(v){h||(ct(y),h=!0)},o(v){_t(y),h=!1},d(v){v&&oe(p),y&&y.d(),d(),l[17](null)}}}function J_(l,p,d){let{$$slots:h={},$$scope:y}=p,{map:v}=p,{id:a="map"}=p,{location:T={bounds:[[-8.1775,54.02275],[-5.43279,55.31298]]}}=p,{style:S="https://raw.githubusercontent.com/nisra-explore/map_tiles/main/basemap_styles/style-omt.json"}=p,{interactive:D=!0}=p,{minzoom:P=0}=p,{maxzoom:O=20}=p,{zoom:R=null}=p,{scrollzoom:X=!0}=p,{geolocate:$=!0}=p,{zoomcontrol:pe=!0}=p,{options:le={}}=p,me,ve;ag("map",{getMap:()=>v}),T.bounds?le={...le,bounds:T.bounds}:T.lon&&T.lat&&(le={...le,center:[T.lon,T.lat]},T.zoom&&(le.zoom=T.zoom)),Ap(()=>{const tt=document.createElement("link");return tt.rel="stylesheet",tt.href="https://unpkg.com/mapbox-gl@1.13.0/dist/mapbox-gl.css",tt.onload=()=>{d(0,v=new vp.Map({container:me,style:S,minZoom:P,maxZoom:O,maxBounds:[[-9.2,53.58],[-4.53,55.72]],interactive:D,...le})),pe&&v.addControl(new vp.NavigationControl({showCompass:!1})),X||v.scrollZoom.disable(),$&&v.addControl(new vp.GeolocateControl),v.on("load",()=>{d(4,R=v.getZoom())}),v.on("zoom",()=>{d(4,R=v.getZoom())})},document.head.appendChild(tt),()=>{v.remove(),tt.parentNode.removeChild(tt)}});function nt(){let tt=document.getElementsByClassName("mapboxgl-canvas");tt[0]&&(tt[0].style.width="100%",v.resize())}function Ve(){ve=this.clientWidth,d(2,ve)}function Ue(tt){Ns[tt?"unshift":"push"](()=>{me=tt,d(3,me)})}return l.$$set=tt=>{"map"in tt&&d(0,v=tt.map),"id"in tt&&d(1,a=tt.id),"location"in tt&&d(6,T=tt.location),"style"in tt&&d(7,S=tt.style),"interactive"in tt&&d(8,D=tt.interactive),"minzoom"in tt&&d(9,P=tt.minzoom),"maxzoom"in tt&&d(10,O=tt.maxzoom),"zoom"in tt&&d(4,R=tt.zoom),"scrollzoom"in tt&&d(11,X=tt.scrollzoom),"geolocate"in tt&&d(12,$=tt.geolocate),"zoomcontrol"in tt&&d(13,pe=tt.zoomcontrol),"options"in tt&&d(5,le=tt.options),"$$scope"in tt&&d(14,y=tt.$$scope)},l.$$.update=()=>{l.$$.dirty&4&&ve&&nt()},[v,a,ve,me,R,le,T,S,D,P,O,X,$,pe,y,h,Ve,Ue]}class Q_ extends lr{constructor(p){super(),ur(this,p,J_,Y_,sr,{map:0,id:1,location:6,style:7,interactive:8,minzoom:9,maxzoom:10,zoom:4,scrollzoom:11,geolocate:12,zoomcontrol:13,options:5})}}function kd(l){let p;const d=l[11].default,h=Ou(d,l,l[10],null);return{c(){h&&h.c()},l(y){h&&h.l(y)},m(y,v){h&&h.m(y,v),p=!0},p(y,v){h&&h.p&&(!p||v&1024)&&Nu(h,d,y,y[10],p?Vu(d,y[10],v,null):Uu(y[10]),null)},i(y){p||(ct(h,y),p=!0)},o(y){_t(h,y),p=!1},d(y){h&&h.d(y)}}}function $_(l){let p,d,h=l[0]&&kd(l);return{c(){h&&h.c(),p=ri()},l(y){h&&h.l(y),p=ri()},m(y,v){h&&h.m(y,v),Me(y,p,v),d=!0},p(y,[v]){y[0]?h?(h.p(y,v),v&1&&ct(h,1)):(h=kd(y),h.c(),ct(h,1),h.m(p.parentNode,p)):h&&(Xr(),_t(h,1,1,()=>{h=null}),Yr())},i(y){d||(ct(h),d=!0)},o(y){_t(h),d=!1},d(y){y&&oe(p),h&&h.d(y)}}}function ev(l,p,d){let{$$slots:h={},$$scope:y}=p,{id:v}=p,{type:a}=p,{url:T=null}=p,{props:S={}}=p,{data:D=null}=p,{layer:P=null}=p,{promoteId:O=null}=p,{minzoom:R=null}=p,{maxzoom:X=null}=p,$=!1;const{getMap:pe}=Hu("map"),le=pe();le.getSource(v)&&le.removeSource(v);function me(){le.isSourceLoaded(v)?(d(0,$=!0),console.log(v+" loaded!")):setTimeout(()=>{console.log("..."),me()},500)}function ve(){le.isStyleLoaded(v)?(nt(),document.querySelector("#map canvas")&&document.querySelector("#map canvas").tabIndex=="0"&&(document.querySelector("#map canvas").tabIndex="-1")):setTimeout(()=>{console.log("..."),ve()},500)}R&&(S.minzoom=R),X&&(S.maxzoom=X),P&&O?(S.promoteId={},S.promoteId[P]=O):O&&(S.promoteId=O);function nt(){console.log(v+" map source loading..."),a=="geojson"?D?(le.addSource(v,{type:a,data:D,...S}),me()):T&&(le.addSource(v,{type:a,data:T,...S}),me()):a=="vector"&&(le.addSource(v,{type:a,tiles:[T],...S}),me())}ve();function Ve(){le.getSource(v).setData(D)}return l.$$set=Ue=>{"id"in Ue&&d(2,v=Ue.id),"type"in Ue&&d(3,a=Ue.type),"url"in Ue&&d(4,T=Ue.url),"props"in Ue&&d(1,S=Ue.props),"data"in Ue&&d(5,D=Ue.data),"layer"in Ue&&d(6,P=Ue.layer),"promoteId"in Ue&&d(7,O=Ue.promoteId),"minzoom"in Ue&&d(8,R=Ue.minzoom),"maxzoom"in Ue&&d(9,X=Ue.maxzoom),"$$scope"in Ue&&d(10,y=Ue.$$scope)},l.$$.update=()=>{l.$$.dirty&33&&$&&D&&Ve()},[$,S,v,a,T,D,P,O,R,X,y,h]}class tv extends lr{constructor(p){super(),ur(this,p,ev,$_,sr,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9})}}function iv(l,p,d){const{Popup:h}=X_,y=h_(),v=new h({closeButton:!1,closeOnClick:!1});let{id:a}=p,{source:T}=p,{sourceLayer:S=null}=p,{type:D}=p,{filter:P=null}=p,{layout:O={}}=p,{paint:R={}}=p,{data:X=null}=p,{code:$=null}=p,{name:pe="name"}=p,{colorCode:le=null}=p,{click:me=!1}=p,{ignoreClick:ve=!1}=p,{clickCenter:nt=!1}=p,{selected:Ve=null}=p,{hover:Ue=!1}=p,{hovered:tt=null}=p,{highlight:Vt=!1}=p,{highlightKey:qt="highlighted"}=p,{highlighted:Ze=[]}=p,{order:Xe=null}=p,{maxzoom:wt=null}=p,{minzoom:jt=null}=p,{isChild:we=!1}=p;const{getMap:qe}=Hu("map"),Be=qe();let Ye=null,ht=null,mt=[];Be.getLayer(a)&&Be.removeLayer(a);let Mt={id:a,type:D,source:T,paint:R,layout:O};P&&(Mt.filter=P),S&&(Mt["source-layer"]=S),wt&&(Mt.maxzoom=wt),jt&&(Mt.minzoom=jt),Be.addLayer(Mt,Xe);function ki(){console.log("updating colors..."),X.forEach(Je=>{Be.setFeatureState({source:T,sourceLayer:S,id:Je[$]},{color:Je[le]})})}return me&&Be.on("click",a,Je=>{if(Je.features.length>0&&!ve){let vt=Je.features[0].id;if(we&&Ze.includes(vt)||!we&&Ve!=vt){if(d(0,Ve=vt),y("select",{code:Ve}),Ye&&Be.setFeatureState({source:T,sourceLayer:S,id:Ye},{selected:!1}),Be.setFeatureState({source:T,sourceLayer:S,id:Ve},{selected:!0}),nt){let vi=centroid(Je.features[0].toJSON().geometry);Be.flyTo({center:vi.geometry.coordinates})}d(24,Ye=Ve)}}}),Ue&&(Be.on("mousemove",a,Je=>{if(Je.features.length>0){let vt=Je.features[0].id;tt&&Be.setFeatureState({source:T,sourceLayer:S,id:tt},{hovered:!1}),we&&Ze.includes(vt)||!we&&Ve!=vt?(d(1,tt=d(25,ht=vt)),Be.setFeatureState({source:T,sourceLayer:S,id:tt},{hovered:!0}),Be.getCanvas().style.cursor="pointer",v.setLngLat(Je.lngLat).setHTML(`<strong>${Je.features[0].properties[pe]?Je.features[0].properties[pe]:Je.features[0].properties[$]}</strong>`).addTo(Be)):v.remove()}}),Be.on("mouseleave",a,Je=>{tt&&Be.setFeatureState({source:T,sourceLayer:S,id:tt},{hovered:!1}),d(1,tt=d(25,ht=null)),Be.getCanvas().style.cursor="",v.remove()})),l.$$set=Je=>{"id"in Je&&d(2,a=Je.id),"source"in Je&&d(3,T=Je.source),"sourceLayer"in Je&&d(4,S=Je.sourceLayer),"type"in Je&&d(5,D=Je.type),"filter"in Je&&d(6,P=Je.filter),"layout"in Je&&d(7,O=Je.layout),"paint"in Je&&d(8,R=Je.paint),"data"in Je&&d(9,X=Je.data),"code"in Je&&d(10,$=Je.code),"name"in Je&&d(11,pe=Je.name),"colorCode"in Je&&d(12,le=Je.colorCode),"click"in Je&&d(13,me=Je.click),"ignoreClick"in Je&&d(14,ve=Je.ignoreClick),"clickCenter"in Je&&d(15,nt=Je.clickCenter),"selected"in Je&&d(0,Ve=Je.selected),"hover"in Je&&d(16,Ue=Je.hover),"hovered"in Je&&d(1,tt=Je.hovered),"highlight"in Je&&d(17,Vt=Je.highlight),"highlightKey"in Je&&d(18,qt=Je.highlightKey),"highlighted"in Je&&d(19,Ze=Je.highlighted),"order"in Je&&d(20,Xe=Je.order),"maxzoom"in Je&&d(21,wt=Je.maxzoom),"minzoom"in Je&&d(22,jt=Je.minzoom),"isChild"in Je&&d(23,we=Je.isChild)},l.$$.update=()=>{l.$$.dirty[0]&4096&&le&&ki(),l.$$.dirty[0]&68026392&&Vt&&Ze!=mt&&(mt[0]&&mt.forEach(Je=>{let vt={};vt[qt]=!1,Be.setFeatureState({source:T,sourceLayer:S,id:Je},vt)}),d(26,mt=Ze),Ze[0]&&Ze.forEach(Je=>{let vt={};vt[qt]=!0,Be.setFeatureState({source:T,sourceLayer:S,id:Je},vt)})),l.$$.dirty[0]&16777241&&Ve!=Ye&&(Ye&&Be.setFeatureState({source:T,sourceLayer:S,id:Ye},{selected:!1}),Ve&&Be.setFeatureState({source:T,sourceLayer:S,id:Ve},{selected:!0}),d(24,Ye=Ve)),l.$$.dirty[0]&33619994&&Ue&&tt!=ht&&(ht&&Be.setFeatureState({source:T,sourceLayer:S,id:ht},{hovered:!1}),tt&&Be.setFeatureState({source:T,sourceLayer:S,id:tt},{hovered:!0}),d(25,ht=tt))},[Ve,tt,a,T,S,D,P,O,R,X,$,pe,le,me,ve,nt,Ue,Vt,qt,Ze,Xe,wt,jt,we,Ye,ht,mt]}class Eh extends lr{constructor(p){super(),ur(this,p,iv,null,sr,{id:2,source:3,sourceLayer:4,type:5,filter:6,layout:7,paint:8,data:9,code:10,name:11,colorCode:12,click:13,ignoreClick:14,clickCenter:15,selected:0,hover:16,hovered:1,highlight:17,highlightKey:18,highlighted:19,order:20,maxzoom:21,minzoom:22,isChild:23},null,[-1,-1])}}function nv(l){return l===0?!0:l}function rs(l){return nv(l)?Array.isArray(l)?p=>l.map(d=>typeof d!="function"?p[d]:d(p)):typeof l!="function"?p=>p[l]:l:null}function rv(l){const p={};for(const d of l){if(Object(d)!==d)throw new TypeError("iterable for fromEntries should yield objects");const{"0":h,"1":y}=d;Object.defineProperty(p,h,{configurable:!0,enumerable:!0,writable:!0,value:y})}return p}function zh(l,p={}){return rv(Object.entries(l).filter(([d,h])=>h!==void 0&&p[d]===void 0))}function av(l,p){if(!Array.isArray(l))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof l}. Consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(p)||p===void 0||p===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const d={},h=Object.keys(p),y=h.length;let v,a,T,S,D,P,O,R;const X=l.length;for(v=0;v<y;v+=1){for(S=h[v],O=p[S],D=null,P=null,a=0;a<X;a+=1)if(R=O(l[a]),Array.isArray(R)){const $=R.length;for(T=0;T<$;T+=1)R[T]!==void 0&&R[T]!==null&&Number.isNaN(R[T])===!1&&((D===null||R[T]<D)&&(D=R[T]),(P===null||R[T]>P)&&(P=R[T]))}else R!=null&&Number.isNaN(R)===!1&&((D===null||R<D)&&(D=R),(P===null||R>P)&&(P=R));d[S]=[D,P]}return d}function pg(l=[],p){return Array.isArray(p)===!0?p.map((d,h)=>d===null?l[h]:d):l}function lp(l){return function([d,h]){return d?pg(d[l],h):h}}function bp(l,p){return l==null||p==null?NaN:l<p?-1:l>p?1:l>=p?0:NaN}function ov(l,p){return l==null||p==null?NaN:p<l?-1:p>l?1:p>=l?0:NaN}function hg(l){let p,d,h;l.length!==2?(p=bp,d=(T,S)=>bp(l(T),S),h=(T,S)=>l(T)-S):(p=l===bp||l===ov?l:sv,d=l,h=l);function y(T,S,D=0,P=T.length){if(D<P){if(p(S,S)!==0)return P;do{const O=D+P>>>1;d(T[O],S)<0?D=O+1:P=O}while(D<P)}return D}function v(T,S,D=0,P=T.length){if(D<P){if(p(S,S)!==0)return P;do{const O=D+P>>>1;d(T[O],S)<=0?D=O+1:P=O}while(D<P)}return D}function a(T,S,D=0,P=T.length){const O=y(T,S,D,P-1);return O>D&&h(T[O-1],S)>-h(T[O],S)?O-1:O}return{left:y,center:a,right:v}}function sv(){return 0}function lv(l){return l===null?NaN:+l}const uv=hg(bp),cv=uv.right;hg(lv).center;const pv=cv;class Ed extends Map{constructor(p,d=dv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:d}}),p!=null)for(const[h,y]of p)this.set(h,y)}get(p){return super.get(zd(this,p))}has(p){return super.has(zd(this,p))}set(p,d){return super.set(hv(this,p),d)}delete(p){return super.delete(fv(this,p))}}function zd({_intern:l,_key:p},d){const h=p(d);return l.has(h)?l.get(h):d}function hv({_intern:l,_key:p},d){const h=p(d);return l.has(h)?l.get(h):(l.set(h,d),d)}function fv({_intern:l,_key:p},d){const h=p(d);return l.has(h)&&(d=l.get(h),l.delete(h)),d}function dv(l){return l!==null&&typeof l=="object"?l.valueOf():l}var Ch=Math.sqrt(50),Mh=Math.sqrt(10),Dh=Math.sqrt(2);function mv(l,p,d){var h,y=-1,v,a,T;if(p=+p,l=+l,d=+d,l===p&&d>0)return[l];if((h=p<l)&&(v=l,l=p,p=v),(T=fg(l,p,d))===0||!isFinite(T))return[];if(T>0){let S=Math.round(l/T),D=Math.round(p/T);for(S*T<l&&++S,D*T>p&&--D,a=new Array(v=D-S+1);++y<v;)a[y]=(S+y)*T}else{T=-T;let S=Math.round(l*T),D=Math.round(p*T);for(S/T<l&&++S,D/T>p&&--D,a=new Array(v=D-S+1);++y<v;)a[y]=(S+y)/T}return h&&a.reverse(),a}function fg(l,p,d){var h=(p-l)/Math.max(0,d),y=Math.floor(Math.log(h)/Math.LN10),v=h/Math.pow(10,y);return y>=0?(v>=Ch?10:v>=Mh?5:v>=Dh?2:1)*Math.pow(10,y):-Math.pow(10,-y)/(v>=Ch?10:v>=Mh?5:v>=Dh?2:1)}function gv(l,p,d){var h=Math.abs(p-l)/Math.max(0,d),y=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),v=h/y;return v>=Ch?y*=10:v>=Mh?y*=5:v>=Dh&&(y*=2),p<l?-y:y}function yv(l,p,d){l=+l,p=+p,d=(y=arguments.length)<2?(p=l,l=0,1):y<3?1:+d;for(var h=-1,y=Math.max(0,Math.ceil((p-l)/d))|0,v=new Array(y);++h<y;)v[h]=l+h*d;return v}function Lp(l,p){switch(arguments.length){case 0:break;case 1:this.range(l);break;default:this.range(p).domain(l);break}return this}const Td=Symbol("implicit");function dg(){var l=new Ed,p=[],d=[],h=Td;function y(v){let a=l.get(v);if(a===void 0){if(h!==Td)return h;l.set(v,a=p.push(v)-1)}return d[a%d.length]}return y.domain=function(v){if(!arguments.length)return p.slice();p=[],l=new Ed;for(const a of v)l.has(a)||l.set(a,p.push(a)-1);return y},y.range=function(v){return arguments.length?(d=Array.from(v),y):d.slice()},y.unknown=function(v){return arguments.length?(h=v,y):h},y.copy=function(){return dg(p,d).unknown(h)},Lp.apply(y,arguments),y}function mg(){var l=dg().unknown(void 0),p=l.domain,d=l.range,h=0,y=1,v,a,T=!1,S=0,D=0,P=.5;delete l.unknown;function O(){var R=p().length,X=y<h,$=X?y:h,pe=X?h:y;v=(pe-$)/Math.max(1,R-S+D*2),T&&(v=Math.floor(v)),$+=(pe-$-v*(R-S))*P,a=v*(1-S),T&&($=Math.round($),a=Math.round(a));var le=yv(R).map(function(me){return $+v*me});return d(X?le.reverse():le)}return l.domain=function(R){return arguments.length?(p(R),O()):p()},l.range=function(R){return arguments.length?([h,y]=R,h=+h,y=+y,O()):[h,y]},l.rangeRound=function(R){return[h,y]=R,h=+h,y=+y,T=!0,O()},l.bandwidth=function(){return a},l.step=function(){return v},l.round=function(R){return arguments.length?(T=!!R,O()):T},l.padding=function(R){return arguments.length?(S=Math.min(1,D=+R),O()):S},l.paddingInner=function(R){return arguments.length?(S=Math.min(1,R),O()):S},l.paddingOuter=function(R){return arguments.length?(D=+R,O()):D},l.align=function(R){return arguments.length?(P=Math.max(0,Math.min(1,R)),O()):P},l.copy=function(){return mg(p(),[h,y]).round(T).paddingInner(S).paddingOuter(D).align(P)},Lp.apply(O(),arguments)}function qh(l,p,d){l.prototype=p.prototype=d,d.constructor=l}function gg(l,p){var d=Object.create(l.prototype);for(var h in p)d[h]=p[h];return d}function tc(){}var qu=.7,kp=1/qu,Bl="\\s*([+-]?\\d+)\\s*",ju="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",co="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_v=/^#([0-9a-f]{3,8})$/,vv=new RegExp(`^rgb\\(${Bl},${Bl},${Bl}\\)$`),bv=new RegExp(`^rgb\\(${co},${co},${co}\\)$`),xv=new RegExp(`^rgba\\(${Bl},${Bl},${Bl},${ju}\\)$`),wv=new RegExp(`^rgba\\(${co},${co},${co},${ju}\\)$`),Sv=new RegExp(`^hsl\\(${ju},${co},${co}\\)$`),kv=new RegExp(`^hsla\\(${ju},${co},${co},${ju}\\)$`),Id={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qh(tc,Gu,{copy(l){return Object.assign(new this.constructor,this,l)},displayable(){return this.rgb().displayable()},hex:Ad,formatHex:Ad,formatHex8:Ev,formatHsl:zv,formatRgb:Pd,toString:Pd});function Ad(){return this.rgb().formatHex()}function Ev(){return this.rgb().formatHex8()}function zv(){return yg(this).formatHsl()}function Pd(){return this.rgb().formatRgb()}function Gu(l){var p,d;return l=(l+"").trim().toLowerCase(),(p=_v.exec(l))?(d=p[1].length,p=parseInt(p[1],16),d===6?Cd(p):d===3?new ha(p>>8&15|p>>4&240,p>>4&15|p&240,(p&15)<<4|p&15,1):d===8?up(p>>24&255,p>>16&255,p>>8&255,(p&255)/255):d===4?up(p>>12&15|p>>8&240,p>>8&15|p>>4&240,p>>4&15|p&240,((p&15)<<4|p&15)/255):null):(p=vv.exec(l))?new ha(p[1],p[2],p[3],1):(p=bv.exec(l))?new ha(p[1]*255/100,p[2]*255/100,p[3]*255/100,1):(p=xv.exec(l))?up(p[1],p[2],p[3],p[4]):(p=wv.exec(l))?up(p[1]*255/100,p[2]*255/100,p[3]*255/100,p[4]):(p=Sv.exec(l))?Ld(p[1],p[2]/100,p[3]/100,1):(p=kv.exec(l))?Ld(p[1],p[2]/100,p[3]/100,p[4]):Id.hasOwnProperty(l)?Cd(Id[l]):l==="transparent"?new ha(NaN,NaN,NaN,0):null}function Cd(l){return new ha(l>>16&255,l>>8&255,l&255,1)}function up(l,p,d,h){return h<=0&&(l=p=d=NaN),new ha(l,p,d,h)}function Tv(l){return l instanceof tc||(l=Gu(l)),l?(l=l.rgb(),new ha(l.r,l.g,l.b,l.opacity)):new ha}function Lh(l,p,d,h){return arguments.length===1?Tv(l):new ha(l,p,d,h??1)}function ha(l,p,d,h){this.r=+l,this.g=+p,this.b=+d,this.opacity=+h}qh(ha,Lh,gg(tc,{brighter(l){return l=l==null?kp:Math.pow(kp,l),new ha(this.r*l,this.g*l,this.b*l,this.opacity)},darker(l){return l=l==null?qu:Math.pow(qu,l),new ha(this.r*l,this.g*l,this.b*l,this.opacity)},rgb(){return this},clamp(){return new ha(Os(this.r),Os(this.g),Os(this.b),Ep(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Md,formatHex:Md,formatHex8:Iv,formatRgb:Dd,toString:Dd}));function Md(){return`#${Fs(this.r)}${Fs(this.g)}${Fs(this.b)}`}function Iv(){return`#${Fs(this.r)}${Fs(this.g)}${Fs(this.b)}${Fs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dd(){const l=Ep(this.opacity);return`${l===1?"rgb(":"rgba("}${Os(this.r)}, ${Os(this.g)}, ${Os(this.b)}${l===1?")":`, ${l})`}`}function Ep(l){return isNaN(l)?1:Math.max(0,Math.min(1,l))}function Os(l){return Math.max(0,Math.min(255,Math.round(l)||0))}function Fs(l){return l=Os(l),(l<16?"0":"")+l.toString(16)}function Ld(l,p,d,h){return h<=0?l=p=d=NaN:d<=0||d>=1?l=p=NaN:p<=0&&(l=NaN),new Na(l,p,d,h)}function yg(l){if(l instanceof Na)return new Na(l.h,l.s,l.l,l.opacity);if(l instanceof tc||(l=Gu(l)),!l)return new Na;if(l instanceof Na)return l;l=l.rgb();var p=l.r/255,d=l.g/255,h=l.b/255,y=Math.min(p,d,h),v=Math.max(p,d,h),a=NaN,T=v-y,S=(v+y)/2;return T?(p===v?a=(d-h)/T+(d<h)*6:d===v?a=(h-p)/T+2:a=(p-d)/T+4,T/=S<.5?v+y:2-v-y,a*=60):T=S>0&&S<1?0:a,new Na(a,T,S,l.opacity)}function Av(l,p,d,h){return arguments.length===1?yg(l):new Na(l,p,d,h??1)}function Na(l,p,d,h){this.h=+l,this.s=+p,this.l=+d,this.opacity=+h}qh(Na,Av,gg(tc,{brighter(l){return l=l==null?kp:Math.pow(kp,l),new Na(this.h,this.s,this.l*l,this.opacity)},darker(l){return l=l==null?qu:Math.pow(qu,l),new Na(this.h,this.s,this.l*l,this.opacity)},rgb(){var l=this.h%360+(this.h<0)*360,p=isNaN(l)||isNaN(this.s)?0:this.s,d=this.l,h=d+(d<.5?d:1-d)*p,y=2*d-h;return new ha(Th(l>=240?l-240:l+120,y,h),Th(l,y,h),Th(l<120?l+240:l-120,y,h),this.opacity)},clamp(){return new Na(Rd(this.h),cp(this.s),cp(this.l),Ep(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const l=Ep(this.opacity);return`${l===1?"hsl(":"hsla("}${Rd(this.h)}, ${cp(this.s)*100}%, ${cp(this.l)*100}%${l===1?")":`, ${l})`}`}}));function Rd(l){return l=(l||0)%360,l<0?l+360:l}function cp(l){return Math.max(0,Math.min(1,l||0))}function Th(l,p,d){return(l<60?p+(d-p)*l/60:l<180?d:l<240?p+(d-p)*(240-l)/60:p)*255}const jh=l=>()=>l;function Pv(l,p){return function(d){return l+d*p}}function Cv(l,p,d){return l=Math.pow(l,d),p=Math.pow(p,d)-l,d=1/d,function(h){return Math.pow(l+h*p,d)}}function Mv(l){return(l=+l)==1?_g:function(p,d){return d-p?Cv(p,d,l):jh(isNaN(p)?d:p)}}function _g(l,p){var d=p-l;return d?Pv(l,d):jh(isNaN(l)?p:l)}const Bd=function l(p){var d=Mv(p);function h(y,v){var a=d((y=Lh(y)).r,(v=Lh(v)).r),T=d(y.g,v.g),S=d(y.b,v.b),D=_g(y.opacity,v.opacity);return function(P){return y.r=a(P),y.g=T(P),y.b=S(P),y.opacity=D(P),y+""}}return h.gamma=l,h}(1);function Dv(l,p){p||(p=[]);var d=l?Math.min(p.length,l.length):0,h=p.slice(),y;return function(v){for(y=0;y<d;++y)h[y]=l[y]*(1-v)+p[y]*v;return h}}function Lv(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}function Rv(l,p){var d=p?p.length:0,h=l?Math.min(d,l.length):0,y=new Array(h),v=new Array(d),a;for(a=0;a<h;++a)y[a]=Gh(l[a],p[a]);for(;a<d;++a)v[a]=p[a];return function(T){for(a=0;a<h;++a)v[a]=y[a](T);return v}}function Bv(l,p){var d=new Date;return l=+l,p=+p,function(h){return d.setTime(l*(1-h)+p*h),d}}function zp(l,p){return l=+l,p=+p,function(d){return l*(1-d)+p*d}}function Fv(l,p){var d={},h={},y;(l===null||typeof l!="object")&&(l={}),(p===null||typeof p!="object")&&(p={});for(y in p)y in l?d[y]=Gh(l[y],p[y]):h[y]=p[y];return function(v){for(y in d)h[y]=d[y](v);return h}}var Rh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ih=new RegExp(Rh.source,"g");function Ov(l){return function(){return l}}function Nv(l){return function(p){return l(p)+""}}function Uv(l,p){var d=Rh.lastIndex=Ih.lastIndex=0,h,y,v,a=-1,T=[],S=[];for(l=l+"",p=p+"";(h=Rh.exec(l))&&(y=Ih.exec(p));)(v=y.index)>d&&(v=p.slice(d,v),T[a]?T[a]+=v:T[++a]=v),(h=h[0])===(y=y[0])?T[a]?T[a]+=y:T[++a]=y:(T[++a]=null,S.push({i:a,x:zp(h,y)})),d=Ih.lastIndex;return d<p.length&&(v=p.slice(d),T[a]?T[a]+=v:T[++a]=v),T.length<2?S[0]?Nv(S[0].x):Ov(p):(p=S.length,function(D){for(var P=0,O;P<p;++P)T[(O=S[P]).i]=O.x(D);return T.join("")})}function Gh(l,p){var d=typeof p,h;return p==null||d==="boolean"?jh(p):(d==="number"?zp:d==="string"?(h=Gu(p))?(p=h,Bd):Uv:p instanceof Gu?Bd:p instanceof Date?Bv:Lv(p)?Dv:Array.isArray(p)?Rv:typeof p.valueOf!="function"&&typeof p.toString!="function"||isNaN(p)?Fv:zp)(l,p)}function Vv(l,p){return l=+l,p=+p,function(d){return Math.round(l*(1-d)+p*d)}}function qv(l){return function(){return l}}function jv(l){return+l}var Fd=[0,1];function uo(l){return l}function Bh(l,p){return(p-=l=+l)?function(d){return(d-l)/p}:qv(isNaN(p)?NaN:.5)}function Gv(l,p){var d;return l>p&&(d=l,l=p,p=d),function(h){return Math.max(l,Math.min(p,h))}}function Zv(l,p,d){var h=l[0],y=l[1],v=p[0],a=p[1];return y<h?(h=Bh(y,h),v=d(a,v)):(h=Bh(h,y),v=d(v,a)),function(T){return v(h(T))}}function Kv(l,p,d){var h=Math.min(l.length,p.length)-1,y=new Array(h),v=new Array(h),a=-1;for(l[h]<l[0]&&(l=l.slice().reverse(),p=p.slice().reverse());++a<h;)y[a]=Bh(l[a],l[a+1]),v[a]=d(p[a],p[a+1]);return function(T){var S=pv(l,T,1,h)-1;return v[S](y[S](T))}}function vg(l,p){return p.domain(l.domain()).range(l.range()).interpolate(l.interpolate()).clamp(l.clamp()).unknown(l.unknown())}function bg(){var l=Fd,p=Fd,d=Gh,h,y,v,a=uo,T,S,D;function P(){var R=Math.min(l.length,p.length);return a!==uo&&(a=Gv(l[0],l[R-1])),T=R>2?Kv:Zv,S=D=null,O}function O(R){return R==null||isNaN(R=+R)?v:(S||(S=T(l.map(h),p,d)))(h(a(R)))}return O.invert=function(R){return a(y((D||(D=T(p,l.map(h),zp)))(R)))},O.domain=function(R){return arguments.length?(l=Array.from(R,jv),P()):l.slice()},O.range=function(R){return arguments.length?(p=Array.from(R),P()):p.slice()},O.rangeRound=function(R){return p=Array.from(R),d=Vv,P()},O.clamp=function(R){return arguments.length?(a=R?!0:uo,P()):a!==uo},O.interpolate=function(R){return arguments.length?(d=R,P()):d},O.unknown=function(R){return arguments.length?(v=R,O):v},function(R,X){return h=R,y=X,P()}}function Hv(){return bg()(uo,uo)}function Wv(l){return Math.abs(l=Math.round(l))>=1e21?l.toLocaleString("en").replace(/,/g,""):l.toString(10)}function Tp(l,p){if((d=(l=p?l.toExponential(p-1):l.toExponential()).indexOf("e"))<0)return null;var d,h=l.slice(0,d);return[h.length>1?h[0]+h.slice(2):h,+l.slice(d+1)]}function Fl(l){return l=Tp(Math.abs(l)),l?l[1]:NaN}function Xv(l,p){return function(d,h){for(var y=d.length,v=[],a=0,T=l[0],S=0;y>0&&T>0&&(S+T+1>h&&(T=Math.max(1,h-S)),v.push(d.substring(y-=T,y+T)),!((S+=T+1)>h));)T=l[a=(a+1)%l.length];return v.reverse().join(p)}}function Yv(l){return function(p){return p.replace(/[0-9]/g,function(d){return l[+d]})}}var Jv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ip(l){if(!(p=Jv.exec(l)))throw new Error("invalid format: "+l);var p;return new Zh({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}Ip.prototype=Zh.prototype;function Zh(l){this.fill=l.fill===void 0?" ":l.fill+"",this.align=l.align===void 0?">":l.align+"",this.sign=l.sign===void 0?"-":l.sign+"",this.symbol=l.symbol===void 0?"":l.symbol+"",this.zero=!!l.zero,this.width=l.width===void 0?void 0:+l.width,this.comma=!!l.comma,this.precision=l.precision===void 0?void 0:+l.precision,this.trim=!!l.trim,this.type=l.type===void 0?"":l.type+""}Zh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qv(l){e:for(var p=l.length,d=1,h=-1,y;d<p;++d)switch(l[d]){case".":h=y=d;break;case"0":h===0&&(h=d),y=d;break;default:if(!+l[d])break e;h>0&&(h=0);break}return h>0?l.slice(0,h)+l.slice(y+1):l}var xg;function $v(l,p){var d=Tp(l,p);if(!d)return l+"";var h=d[0],y=d[1],v=y-(xg=Math.max(-8,Math.min(8,Math.floor(y/3)))*3)+1,a=h.length;return v===a?h:v>a?h+new Array(v-a+1).join("0"):v>0?h.slice(0,v)+"."+h.slice(v):"0."+new Array(1-v).join("0")+Tp(l,Math.max(0,p+v-1))[0]}function Od(l,p){var d=Tp(l,p);if(!d)return l+"";var h=d[0],y=d[1];return y<0?"0."+new Array(-y).join("0")+h:h.length>y+1?h.slice(0,y+1)+"."+h.slice(y+1):h+new Array(y-h.length+2).join("0")}const Nd={"%":(l,p)=>(l*100).toFixed(p),b:l=>Math.round(l).toString(2),c:l=>l+"",d:Wv,e:(l,p)=>l.toExponential(p),f:(l,p)=>l.toFixed(p),g:(l,p)=>l.toPrecision(p),o:l=>Math.round(l).toString(8),p:(l,p)=>Od(l*100,p),r:Od,s:$v,X:l=>Math.round(l).toString(16).toUpperCase(),x:l=>Math.round(l).toString(16)};function Ud(l){return l}var Vd=Array.prototype.map,qd=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function e0(l){var p=l.grouping===void 0||l.thousands===void 0?Ud:Xv(Vd.call(l.grouping,Number),l.thousands+""),d=l.currency===void 0?"":l.currency[0]+"",h=l.currency===void 0?"":l.currency[1]+"",y=l.decimal===void 0?".":l.decimal+"",v=l.numerals===void 0?Ud:Yv(Vd.call(l.numerals,String)),a=l.percent===void 0?"%":l.percent+"",T=l.minus===void 0?"−":l.minus+"",S=l.nan===void 0?"NaN":l.nan+"";function D(O){O=Ip(O);var R=O.fill,X=O.align,$=O.sign,pe=O.symbol,le=O.zero,me=O.width,ve=O.comma,nt=O.precision,Ve=O.trim,Ue=O.type;Ue==="n"?(ve=!0,Ue="g"):Nd[Ue]||(nt===void 0&&(nt=12),Ve=!0,Ue="g"),(le||R==="0"&&X==="=")&&(le=!0,R="0",X="=");var tt=pe==="$"?d:pe==="#"&&/[boxX]/.test(Ue)?"0"+Ue.toLowerCase():"",Vt=pe==="$"?h:/[%p]/.test(Ue)?a:"",qt=Nd[Ue],Ze=/[defgprs%]/.test(Ue);nt=nt===void 0?6:/[gprs]/.test(Ue)?Math.max(1,Math.min(21,nt)):Math.max(0,Math.min(20,nt));function Xe(wt){var jt=tt,we=Vt,qe,Be,Ye;if(Ue==="c")we=qt(wt)+we,wt="";else{wt=+wt;var ht=wt<0||1/wt<0;if(wt=isNaN(wt)?S:qt(Math.abs(wt),nt),Ve&&(wt=Qv(wt)),ht&&+wt==0&&$!=="+"&&(ht=!1),jt=(ht?$==="("?$:T:$==="-"||$==="("?"":$)+jt,we=(Ue==="s"?qd[8+xg/3]:"")+we+(ht&&$==="("?")":""),Ze){for(qe=-1,Be=wt.length;++qe<Be;)if(Ye=wt.charCodeAt(qe),48>Ye||Ye>57){we=(Ye===46?y+wt.slice(qe+1):wt.slice(qe))+we,wt=wt.slice(0,qe);break}}}ve&&!le&&(wt=p(wt,1/0));var mt=jt.length+wt.length+we.length,Mt=mt<me?new Array(me-mt+1).join(R):"";switch(ve&&le&&(wt=p(Mt+wt,Mt.length?me-we.length:1/0),Mt=""),X){case"<":wt=jt+wt+we+Mt;break;case"=":wt=jt+Mt+wt+we;break;case"^":wt=Mt.slice(0,mt=Mt.length>>1)+jt+wt+we+Mt.slice(mt);break;default:wt=Mt+jt+wt+we;break}return v(wt)}return Xe.toString=function(){return O+""},Xe}function P(O,R){var X=D((O=Ip(O),O.type="f",O)),$=Math.max(-8,Math.min(8,Math.floor(Fl(R)/3)))*3,pe=Math.pow(10,-$),le=qd[8+$/3];return function(me){return X(pe*me)+le}}return{format:D,formatPrefix:P}}var pp,wg,Sg;t0({thousands:",",grouping:[3],currency:["$",""]});function t0(l){return pp=e0(l),wg=pp.format,Sg=pp.formatPrefix,pp}function i0(l){return Math.max(0,-Fl(Math.abs(l)))}function n0(l,p){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fl(p)/3)))*3-Fl(Math.abs(l)))}function r0(l,p){return l=Math.abs(l),p=Math.abs(p)-l,Math.max(0,Fl(p)-Fl(l))+1}function a0(l,p,d,h){var y=gv(l,p,d),v;switch(h=Ip(h??",f"),h.type){case"s":{var a=Math.max(Math.abs(l),Math.abs(p));return h.precision==null&&!isNaN(v=n0(y,a))&&(h.precision=v),Sg(h,a)}case"":case"e":case"g":case"p":case"r":{h.precision==null&&!isNaN(v=r0(y,Math.max(Math.abs(l),Math.abs(p))))&&(h.precision=v-(h.type==="e"));break}case"f":case"%":{h.precision==null&&!isNaN(v=i0(y))&&(h.precision=v-(h.type==="%")*2);break}}return wg(h)}function kg(l){var p=l.domain;return l.ticks=function(d){var h=p();return mv(h[0],h[h.length-1],d??10)},l.tickFormat=function(d,h){var y=p();return a0(y[0],y[y.length-1],d??10,h)},l.nice=function(d){d==null&&(d=10);var h=p(),y=0,v=h.length-1,a=h[y],T=h[v],S,D,P=10;for(T<a&&(D=a,a=T,T=D,D=y,y=v,v=D);P-- >0;){if(D=fg(a,T,d),D===S)return h[y]=a,h[v]=T,p(h);if(D>0)a=Math.floor(a/D)*D,T=Math.ceil(T/D)*D;else if(D<0)a=Math.ceil(a*D)/D,T=Math.floor(T*D)/D;else break;S=D}return l},l}function xp(){var l=Hv();return l.copy=function(){return vg(l,xp())},Lp.apply(l,arguments),kg(l)}function jd(l){return function(p){return p<0?-Math.pow(-p,l):Math.pow(p,l)}}function o0(l){return l<0?-Math.sqrt(-l):Math.sqrt(l)}function s0(l){return l<0?-l*l:l*l}function l0(l){var p=l(uo,uo),d=1;function h(){return d===1?l(uo,uo):d===.5?l(o0,s0):l(jd(d),jd(1/d))}return p.exponent=function(y){return arguments.length?(d=+y,h()):d},kg(p)}function Eg(){var l=l0(bg());return l.copy=function(){return vg(l,Eg()).exponent(l.exponent())},Lp.apply(l,arguments),l}function u0(){return Eg.apply(null,arguments).exponent(.5)}const Ru={x:xp,y:xp,z:xp,r:u0};function c0(l){return l.constant?"symlog":l.base?"log":l.exponent?l.exponent()===.5?"sqrt":"pow":"other"}function Gd(l){return l}function p0(l){return p=>Math.log(l*p)}function h0(l){return p=>l*Math.exp(p)}function f0(l){return p=>Math.sign(p)*Math.log1p(Math.abs(p/l))}function d0(l){return p=>Math.sign(p)*Math.expm1(Math.abs(p))*l}function hp(l){return function(d){return d<0?-Math.pow(-d,l):Math.pow(d,l)}}function m0(l){const p=c0(l);if(p==="log"){const d=Math.sign(l.domain()[0]);return{lift:p0(d),ground:h0(d),scaleType:p}}return p==="pow"?{lift:hp(1),ground:hp(1/1),scaleType:p}:p==="sqrt"?{lift:hp(.5),ground:hp(1/.5),scaleType:p}:p==="symlog"?{lift:f0(1),ground:d0(1),scaleType:p}:{lift:Gd,ground:Gd,scaleType:p}}function g0(l,p){if(typeof l.range!="function")throw new Error("Scale method `range` must be a function");if(typeof l.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(p))return l.domain();l.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",l.domain()),l.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",l.range());const{lift:d,ground:h}=m0(l),y=l.domain()[0],v=Object.prototype.toString.call(y)==="[object Date]",[a,T]=l.domain().map(X=>d(v?X.getTime():X)),[S,D]=l.range(),P=p[0]||0,O=p[1]||0,R=(T-a)/(Math.abs(D-S)-P-O);return[a-P*R,O*R+T].map(X=>h(v?new Date(X):X))}function y0(l,p,d,h,y){let v,a;return y===!0?(v=0,a=100):(v=l==="r"?1:0,a=l==="y"?d:l==="r"?25:p),h===!0?[a,v]:[v,a]}function _0(l,p,d,h,y,v){return y?typeof y=="function"?y({width:p,height:d}):y:y0(l,p,d,h,v)}function fp(l){return function([d,h,y,v,a,T,S,D,P,O]){if(h===null)return null;const R=_0(l,S,D,T,P,O),X=d===Ru[l]?d():d.copy();return X.domain(pg(h[l],y)).range(R),v&&X.domain(g0(X,v)),a===!0&&(typeof X.nice=="function"?X.nice():console.error(`[Layer Cake] You set \`${l}Nice: true\` but the ${l}Scale does not have a \`.nice\` method. Ignoring...`)),X}}function dp([l,p]){return d=>{const h=l(d);return Array.isArray(h)?h.map(y=>p(y)):p(h)}}function mp([l]){if(typeof l=="function"){if(typeof l.range=="function")return l.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const gp={x:!1,y:!0,z:!1,r:!1};const v0=l=>({element:l[0]&4,width:l[0]&256,height:l[0]&512,aspectRatio:l[0]&1024,containerWidth:l[0]&128,containerHeight:l[0]&64}),Zd=l=>({element:l[2],width:l[8],height:l[9],aspectRatio:l[10],containerWidth:l[7],containerHeight:l[6]});function Kd(l){let p,d,h;const y=l[90].default,v=Ou(y,l,l[89],Zd);return{c(){p=Oe("div"),v&&v.c(),this.h()},l(a){p=Ne(a,"DIV",{class:!0});var T=Ge(p);v&&v.l(T),T.forEach(oe),this.h()},h(){re(p,"class","layercake-container svelte-vhzpsp"),Zu(()=>l[92].call(p)),$e(p,"position",l[5]),$e(p,"top",l[5]==="absolute"?"0":null),$e(p,"right",l[5]==="absolute"?"0":null),$e(p,"bottom",l[5]==="absolute"?"0":null),$e(p,"left",l[5]==="absolute"?"0":null),$e(p,"pointer-events",l[4]===!1?"none":null)},m(a,T){Me(a,p,T),v&&v.m(p,null),l[91](p),d=Ku(p,l[92].bind(p)),h=!0},p(a,T){v&&v.p&&(!h||T[0]&1988|T[2]&134217728)&&Nu(v,y,a,a[89],h?Vu(y,a[89],T,v0):Uu(a[89]),Zd),T[0]&32&&$e(p,"position",a[5]),T[0]&32&&$e(p,"top",a[5]==="absolute"?"0":null),T[0]&32&&$e(p,"right",a[5]==="absolute"?"0":null),T[0]&32&&$e(p,"bottom",a[5]==="absolute"?"0":null),T[0]&32&&$e(p,"left",a[5]==="absolute"?"0":null),T[0]&16&&$e(p,"pointer-events",a[4]===!1?"none":null)},i(a){h||(ct(v,a),h=!0)},o(a){_t(v,a),h=!1},d(a){a&&oe(p),v&&v.d(a),l[91](null),d()}}}function b0(l){let p,d,h=(l[3]===!0||typeof window<"u")&&Kd(l);return{c(){h&&h.c(),p=ri()},l(y){h&&h.l(y),p=ri()},m(y,v){h&&h.m(y,v),Me(y,p,v),d=!0},p(y,v){y[3]===!0||typeof window<"u"?h?(h.p(y,v),v[0]&8&&ct(h,1)):(h=Kd(y),h.c(),ct(h,1),h.m(p.parentNode,p)):h&&(Xr(),_t(h,1,1,()=>{h=null}),Yr())},i(y){d||(ct(h),d=!0)},o(y){_t(h),d=!1},d(y){y&&oe(p),h&&h.d(y)}}}function x0(l,p,d){let h,y,v,a,T,S,D,P,O,R,X,$,pe,le,me,ve,nt,Ve,Ue,tt,Vt,qt,Ze,Xe,wt,jt,we,qe,Be,Ye,ht,mt,Mt,ki,Je,vt,vi,vn,$n,zn,Fi,{$$slots:zr={},$$scope:bi}=p,{ssr:Tn=!1}=p,{pointerEvents:Jr=!0}=p,{position:bn="relative"}=p,{percentRange:Xt=!1}=p,{width:cr=void 0}=p,{height:fi=void 0}=p,{containerWidth:qi=cr||100}=p,{containerHeight:Dr=fi||100}=p,{element:nn=void 0}=p,{x:yr=void 0}=p,{y:ji=void 0}=p,{z:er=void 0}=p,{r:xn=void 0}=p,{data:hn=[]}=p,{xDomain:Gi=void 0}=p,{yDomain:tr=void 0}=p,{zDomain:Wi=void 0}=p,{rDomain:Tr=void 0}=p,{xNice:ir=!1}=p,{yNice:jn=!1}=p,{zNice:Xi=!1}=p,{rNice:Lr=!1}=p,{xReverse:Rr=gp.x}=p,{yReverse:fn=gp.y}=p,{zReverse:ra=gp.z}=p,{rReverse:Ir=gp.r}=p,{xPadding:Yi=void 0}=p,{yPadding:Qr=void 0}=p,{zPadding:Br=void 0}=p,{rPadding:In=void 0}=p,{xScale:N=Ru.x}=p,{yScale:st=Ru.y}=p,{zScale:dn=Ru.z}=p,{rScale:pr=Ru.r}=p,{xRange:on=void 0}=p,{yRange:di=void 0}=p,{zRange:L=void 0}=p,{rRange:U=void 0}=p,{padding:q={}}=p,{extents:H={}}=p,{flatData:Y=void 0}=p,{custom:ue={}}=p,fe=!1;Ap(()=>{fe=!0});const j={},ee=Pi(Xt);Kt(l,ee,_e=>d(128,vn=_e));const ge=Pi(qi);Kt(l,ge,_e=>d(7,vi=_e));const De=Pi(Dr);Kt(l,De,_e=>d(6,vt=_e));const Fe=Pi(zh(H));Kt(l,Fe,_e=>d(127,Je=_e));const ze=Pi(hn);Kt(l,ze,_e=>d(126,ki=_e));const Re=Pi(Y||hn);Kt(l,Re,_e=>d(125,Mt=_e));const gt=Pi(q);Kt(l,gt,_e=>d(124,mt=_e));const lt=Pi(rs(yr));Kt(l,lt,_e=>d(123,ht=_e));const Ie=Pi(rs(ji));Kt(l,Ie,_e=>d(122,Ye=_e));const at=Pi(rs(er));Kt(l,at,_e=>d(121,Be=_e));const Qe=Pi(rs(xn));Kt(l,Qe,_e=>d(120,qe=_e));const it=Pi(Gi);Kt(l,it,_e=>d(119,we=_e));const Gt=Pi(tr);Kt(l,Gt,_e=>d(118,jt=_e));const ot=Pi(Wi);Kt(l,ot,_e=>d(117,wt=_e));const $t=Pi(Tr);Kt(l,$t,_e=>d(116,Xe=_e));const Ei=Pi(ir);Kt(l,Ei,_e=>d(115,Ze=_e));const Ht=Pi(jn);Kt(l,Ht,_e=>d(114,qt=_e));const oi=Pi(Xi);Kt(l,oi,_e=>d(113,Vt=_e));const ei=Pi(Lr);Kt(l,ei,_e=>d(112,tt=_e));const wn=Pi(Rr);Kt(l,wn,_e=>d(111,Ue=_e));const mi=Pi(fn);Kt(l,mi,_e=>d(110,Ve=_e));const Oi=Pi(ra);Kt(l,Oi,_e=>d(109,nt=_e));const xi=Pi(Ir);Kt(l,xi,_e=>d(108,ve=_e));const Jt=Pi(Yi);Kt(l,Jt,_e=>d(107,me=_e));const si=Pi(Qr);Kt(l,si,_e=>d(106,le=_e));const An=Pi(Br);Kt(l,An,_e=>d(105,pe=_e));const fa=Pi(In);Kt(l,fa,_e=>d(104,$=_e));const sn=Pi(on);Kt(l,sn,_e=>d(103,X=_e));const On=Pi(di);Kt(l,On,_e=>d(102,R=_e));const Ua=Pi(L);Kt(l,Ua,_e=>d(101,O=_e));const ba=Pi(U);Kt(l,ba,_e=>d(100,P=_e));const Zi=Pi(N);Kt(l,Zi,_e=>d(99,D=_e));const xa=Pi(st);Kt(l,xa,_e=>d(98,S=_e));const Pn=Pi(dn);Kt(l,Pn,_e=>d(97,T=_e));const ln=Pi(pr);Kt(l,ln,_e=>d(96,a=_e));const hr=Pi(j);Kt(l,hr,_e=>d(94,y=_e));const Di=Pi(ue);Kt(l,Di,_e=>d(95,v=_e));const Fr=Fn([lt,Ie,at,Qe],([_e,fr,Kn,Ki])=>{const Ea={};return _e&&(Ea.x=_e),fr&&(Ea.y=fr),Kn&&(Ea.z=Kn),Ki&&(Ea.r=Ki),Ea}),_r=Fn([gt,ge,De],([_e])=>Object.assign({top:0,right:0,bottom:0,left:0},_e)),os=Fn([ge,De,_r],([_e,fr,Kn])=>{const Ki={};return Ki.top=Kn.top,Ki.right=_e-Kn.right,Ki.bottom=fr-Kn.bottom,Ki.left=Kn.left,Ki.width=Ki.right-Ki.left,Ki.height=Ki.bottom-Ki.top,Ki.width<=0&&fe===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Ki.height<=0&&fe===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Ki}),Cn=Fn([os],([_e])=>_e.width);Kt(l,Cn,_e=>d(8,$n=_e));const wa=Fn([os],([_e])=>_e.height);Kt(l,wa,_e=>d(9,zn=_e));const Gn=Fn([Re,Fr,Fe],([_e,fr,Kn])=>{const Ki=zh(fr,Kn);return Object.keys(Ki).length>0?{...av(_e,Ki),...Kn}:{}}),Mn=Fn([Gn,it],lp("x")),$r=Fn([Gn,Gt],lp("y")),Zn=Fn([Gn,ot],lp("z")),Sa=Fn([Gn,$t],lp("r")),ss=Fn([Zi,Gn,Mn,Jt,Ei,wn,Cn,wa,sn,ee],fp("x")),Ol=Fn([lt,ss],dp),fo=Fn([xa,Gn,$r,si,Ht,mi,Cn,wa,On,ee],fp("y")),Nl=Fn([Ie,fo],dp),No=Fn([Pn,Gn,Zn,An,oi,Oi,Cn,wa,Ua,ee],fp("z")),Ul=Fn([at,No],dp),Uo=Fn([ln,Gn,Sa,fa,ei,xi,Cn,wa,ba,ee],fp("r")),Vs=Fn([Qe,Uo],dp),Va=Fn([ss],mp),ls=Fn([fo],mp),mo=Fn([No],mp),qs=Fn([Uo],mp),qa=Fn([Cn,wa],([_e,fr])=>_e/fr);Kt(l,qa,_e=>d(10,Fi=_e));function Or(_e){Ns[_e?"unshift":"push"](()=>{nn=_e,d(2,nn)})}function ka(){qi=this.clientWidth,Dr=this.clientHeight,d(0,qi),d(1,Dr)}return l.$$set=_e=>{"ssr"in _e&&d(3,Tn=_e.ssr),"pointerEvents"in _e&&d(4,Jr=_e.pointerEvents),"position"in _e&&d(5,bn=_e.position),"percentRange"in _e&&d(51,Xt=_e.percentRange),"width"in _e&&d(52,cr=_e.width),"height"in _e&&d(53,fi=_e.height),"containerWidth"in _e&&d(0,qi=_e.containerWidth),"containerHeight"in _e&&d(1,Dr=_e.containerHeight),"element"in _e&&d(2,nn=_e.element),"x"in _e&&d(54,yr=_e.x),"y"in _e&&d(55,ji=_e.y),"z"in _e&&d(56,er=_e.z),"r"in _e&&d(57,xn=_e.r),"data"in _e&&d(58,hn=_e.data),"xDomain"in _e&&d(59,Gi=_e.xDomain),"yDomain"in _e&&d(60,tr=_e.yDomain),"zDomain"in _e&&d(61,Wi=_e.zDomain),"rDomain"in _e&&d(62,Tr=_e.rDomain),"xNice"in _e&&d(63,ir=_e.xNice),"yNice"in _e&&d(64,jn=_e.yNice),"zNice"in _e&&d(65,Xi=_e.zNice),"rNice"in _e&&d(66,Lr=_e.rNice),"xReverse"in _e&&d(67,Rr=_e.xReverse),"yReverse"in _e&&d(68,fn=_e.yReverse),"zReverse"in _e&&d(69,ra=_e.zReverse),"rReverse"in _e&&d(70,Ir=_e.rReverse),"xPadding"in _e&&d(71,Yi=_e.xPadding),"yPadding"in _e&&d(72,Qr=_e.yPadding),"zPadding"in _e&&d(73,Br=_e.zPadding),"rPadding"in _e&&d(74,In=_e.rPadding),"xScale"in _e&&d(75,N=_e.xScale),"yScale"in _e&&d(76,st=_e.yScale),"zScale"in _e&&d(77,dn=_e.zScale),"rScale"in _e&&d(78,pr=_e.rScale),"xRange"in _e&&d(79,on=_e.xRange),"yRange"in _e&&d(80,di=_e.yRange),"zRange"in _e&&d(81,L=_e.zRange),"rRange"in _e&&d(82,U=_e.rRange),"padding"in _e&&d(83,q=_e.padding),"extents"in _e&&d(84,H=_e.extents),"flatData"in _e&&d(85,Y=_e.flatData),"custom"in _e&&d(86,ue=_e.custom),"$$scope"in _e&&d(89,bi=_e.$$scope)},l.$$.update=()=>{l.$$.dirty[1]&8388608&&yr&&d(87,j.x=yr,j),l.$$.dirty[1]&16777216&&ji&&d(87,j.y=ji,j),l.$$.dirty[1]&33554432&&er&&d(87,j.z=er,j),l.$$.dirty[1]&67108864&&xn&&d(87,j.r=xn,j),l.$$.dirty[1]&268435456&&Gi&&d(87,j.xDomain=Gi,j),l.$$.dirty[1]&536870912&&tr&&d(87,j.yDomain=tr,j),l.$$.dirty[1]&1073741824&&Wi&&d(87,j.zDomain=Wi,j),l.$$.dirty[2]&1&&Tr&&d(87,j.rDomain=Tr,j),l.$$.dirty[2]&131072&&on&&d(87,j.xRange=on,j),l.$$.dirty[2]&262144&&di&&d(87,j.yRange=di,j),l.$$.dirty[2]&524288&&L&&d(87,j.zRange=L,j),l.$$.dirty[2]&1048576&&U&&d(87,j.rRange=U,j),l.$$.dirty[1]&1048576&&Ai(ee,vn=Xt,vn),l.$$.dirty[0]&1&&Ai(ge,vi=qi,vi),l.$$.dirty[0]&2&&Ai(De,vt=Dr,vt),l.$$.dirty[2]&4194304&&Ai(Fe,Je=zh(H),Je),l.$$.dirty[1]&134217728&&Ai(ze,ki=hn,ki),l.$$.dirty[1]&134217728|l.$$.dirty[2]&8388608&&Ai(Re,Mt=Y||hn,Mt),l.$$.dirty[2]&2097152&&Ai(gt,mt=q,mt),l.$$.dirty[1]&8388608&&Ai(lt,ht=rs(yr),ht),l.$$.dirty[1]&16777216&&Ai(Ie,Ye=rs(ji),Ye),l.$$.dirty[1]&33554432&&Ai(at,Be=rs(er),Be),l.$$.dirty[1]&67108864&&Ai(Qe,qe=rs(xn),qe),l.$$.dirty[1]&268435456&&Ai(it,we=Gi,we),l.$$.dirty[1]&536870912&&Ai(Gt,jt=tr,jt),l.$$.dirty[1]&1073741824&&Ai(ot,wt=Wi,wt),l.$$.dirty[2]&1&&Ai($t,Xe=Tr,Xe),l.$$.dirty[2]&2&&Ai(Ei,Ze=ir,Ze),l.$$.dirty[2]&4&&Ai(Ht,qt=jn,qt),l.$$.dirty[2]&8&&Ai(oi,Vt=Xi,Vt),l.$$.dirty[2]&16&&Ai(ei,tt=Lr,tt),l.$$.dirty[2]&32&&Ai(wn,Ue=Rr,Ue),l.$$.dirty[2]&64&&Ai(mi,Ve=fn,Ve),l.$$.dirty[2]&128&&Ai(Oi,nt=ra,nt),l.$$.dirty[2]&256&&Ai(xi,ve=Ir,ve),l.$$.dirty[2]&512&&Ai(Jt,me=Yi,me),l.$$.dirty[2]&1024&&Ai(si,le=Qr,le),l.$$.dirty[2]&2048&&Ai(An,pe=Br,pe),l.$$.dirty[2]&4096&&Ai(fa,$=In,$),l.$$.dirty[2]&131072&&Ai(sn,X=on,X),l.$$.dirty[2]&262144&&Ai(On,R=di,R),l.$$.dirty[2]&524288&&Ai(Ua,O=L,O),l.$$.dirty[2]&1048576&&Ai(ba,P=U,P),l.$$.dirty[2]&8192&&Ai(Zi,D=N,D),l.$$.dirty[2]&16384&&Ai(xa,S=st,S),l.$$.dirty[2]&32768&&Ai(Pn,T=dn,T),l.$$.dirty[2]&65536&&Ai(ln,a=pr,a),l.$$.dirty[2]&16777216&&Ai(Di,v=ue,v),l.$$.dirty[2]&33554432&&Ai(hr,y=j,y),l.$$.dirty[2]&67108864&&ag("LayerCake",h)},d(88,h={activeGetters:Fr,width:Cn,height:wa,percentRange:ee,aspectRatio:qa,containerWidth:ge,containerHeight:De,x:lt,y:Ie,z:at,r:Qe,custom:Di,data:ze,xNice:Ei,yNice:Ht,zNice:oi,rNice:ei,xReverse:wn,yReverse:mi,zReverse:Oi,rReverse:xi,xPadding:Jt,yPadding:si,zPadding:An,rPadding:fa,padding:_r,flatData:Re,extents:Gn,xDomain:Mn,yDomain:$r,zDomain:Zn,rDomain:Sa,xRange:Va,yRange:ls,zRange:mo,rRange:qs,config:hr,xScale:ss,xGet:Ol,yScale:fo,yGet:Nl,zScale:No,zGet:Ul,rScale:Uo,rGet:Vs}),[qi,Dr,nn,Tn,Jr,bn,vt,vi,$n,zn,Fi,ee,ge,De,Fe,ze,Re,gt,lt,Ie,at,Qe,it,Gt,ot,$t,Ei,Ht,oi,ei,wn,mi,Oi,xi,Jt,si,An,fa,sn,On,Ua,ba,Zi,xa,Pn,ln,hr,Di,Cn,wa,qa,Xt,cr,fi,yr,ji,er,xn,hn,Gi,tr,Wi,Tr,ir,jn,Xi,Lr,Rr,fn,ra,Ir,Yi,Qr,Br,In,N,st,dn,pr,on,di,L,U,q,H,Y,ue,j,h,bi,zr,Or,ka]}class w0 extends lr{constructor(p){super(),ur(this,p,x0,b0,sr,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xReverse:67,yReverse:68,zReverse:69,rReverse:70,xPadding:71,yPadding:72,zPadding:73,rPadding:74,xScale:75,yScale:76,zScale:77,rScale:78,xRange:79,yRange:80,zRange:81,rRange:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const S0=l=>({element:l&1}),Hd=l=>({element:l[0]}),k0=l=>({}),Wd=l=>({});function E0(l){let p,d,h,y,v;const a=l[12].defs,T=Ou(a,l,l[11],Wd),S=l[12].default,D=Ou(S,l,l[11],Hd);return{c(){p=Hr("svg"),d=Hr("defs"),T&&T.c(),h=Hr("g"),D&&D.c(),this.h()},l(P){p=Wr(P,"svg",{class:!0,viewBox:!0,width:!0,height:!0});var O=Ge(p);d=Wr(O,"defs",{});var R=Ge(d);T&&T.l(R),R.forEach(oe),h=Wr(O,"g",{class:!0,transform:!0});var X=Ge(h);D&&D.l(X),X.forEach(oe),O.forEach(oe),this.h()},h(){re(h,"class","layercake-layout-svg_g"),re(h,"transform",y="translate("+l[7].left+", "+l[7].top+")"),re(p,"class","layercake-layout-svg svelte-u84d8d"),re(p,"viewBox",l[4]),re(p,"width",l[5]),re(p,"height",l[6]),$e(p,"z-index",l[2]),$e(p,"pointer-events",l[3]===!1?"none":null)},m(P,O){Me(P,p,O),Ae(p,d),T&&T.m(d,null),Ae(p,h),D&&D.m(h,null),l[13](h),l[14](p),v=!0},p(P,[O]){T&&T.p&&(!v||O&2048)&&Nu(T,a,P,P[11],v?Vu(a,P[11],O,k0):Uu(P[11]),Wd),D&&D.p&&(!v||O&2049)&&Nu(D,S,P,P[11],v?Vu(S,P[11],O,S0):Uu(P[11]),Hd),(!v||O&128&&y!==(y="translate("+P[7].left+", "+P[7].top+")"))&&re(h,"transform",y),(!v||O&16)&&re(p,"viewBox",P[4]),(!v||O&32)&&re(p,"width",P[5]),(!v||O&64)&&re(p,"height",P[6]),O&4&&$e(p,"z-index",P[2]),O&8&&$e(p,"pointer-events",P[3]===!1?"none":null)},i(P){v||(ct(T,P),ct(D,P),v=!0)},o(P){_t(T,P),_t(D,P),v=!1},d(P){P&&oe(p),T&&T.d(P),D&&D.d(P),l[13](null),l[14](null)}}}function z0(l,p,d){let h,y,v,{$$slots:a={},$$scope:T}=p,{element:S=void 0}=p,{innerElement:D=void 0}=p,{zIndex:P=void 0}=p,{pointerEvents:O=void 0}=p,{viewBox:R=void 0}=p;const{containerWidth:X,containerHeight:$,padding:pe}=Hu("LayerCake");Kt(l,X,ve=>d(5,h=ve)),Kt(l,$,ve=>d(6,y=ve)),Kt(l,pe,ve=>d(7,v=ve));function le(ve){Ns[ve?"unshift":"push"](()=>{D=ve,d(1,D)})}function me(ve){Ns[ve?"unshift":"push"](()=>{S=ve,d(0,S)})}return l.$$set=ve=>{"element"in ve&&d(0,S=ve.element),"innerElement"in ve&&d(1,D=ve.innerElement),"zIndex"in ve&&d(2,P=ve.zIndex),"pointerEvents"in ve&&d(3,O=ve.pointerEvents),"viewBox"in ve&&d(4,R=ve.viewBox),"$$scope"in ve&&d(11,T=ve.$$scope)},[S,D,P,O,R,h,y,v,X,$,pe,T,a,le,me]}class T0 extends lr{constructor(p){super(),ur(this,p,z0,E0,sr,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function Xd(l,p,d){const h=l.slice();return h[23]=p[d],h[25]=d,h}function Yd(l){let p,d,h,y;return{c(){p=Hr("rect"),this.h()},l(v){p=Wr(v,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"class","group-rect"),re(p,"data-id",l[25]),re(p,"x",d=l[11].bandwidth?l[7](l[23]):l[7](l[23])[0]),re(p,"y",h=l[13](l[12](l[23]))-1),re(p,"width",y=l[11].bandwidth?l[11].bandwidth():l[9](l[23])),re(p,"height","3"),re(p,"fill","#308182"),re(p,"stroke",l[0]),re(p,"stroke-width",l[1])},m(v,a){Me(v,p,a)},p(v,a){a&3200&&d!==(d=v[11].bandwidth?v[7](v[23]):v[7](v[23])[0])&&re(p,"x",d),a&13312&&h!==(h=v[13](v[12](v[23]))-1)&&re(p,"y",h),a&3584&&y!==(y=v[11].bandwidth?v[11].bandwidth():v[9](v[23]))&&re(p,"width",y),a&1&&re(p,"stroke",v[0]),a&2&&re(p,"stroke-width",v[1])},d(v){v&&oe(p)}}}function Jd(l){let p,d,h,y,v,a,T,S,D=l[12]&&Yd(l);return{c(){p=Hr("rect"),D&&D.c(),a=Hr("text"),this.h()},l(P){p=Wr(P,"rect",{class:!0,"data-id":!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0}),Ge(p).forEach(oe),D&&D.l(P),a=Wr(P,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0}),Ge(a).forEach(oe),this.h()},h(){re(p,"class","group-rect"),re(p,"data-id",l[25]),re(p,"x",d=l[11].bandwidth?l[7](l[23]):l[7](l[23])[0]),re(p,"y",h=l[6](l[23])),re(p,"width",y=l[11].bandwidth?l[11].bandwidth():l[9](l[23])),re(p,"height",v=l[8](l[23])),re(p,"fill",l[4]),re(p,"stroke",l[0]),re(p,"stroke-width",l[1]),re(a,"x",T=l[11].bandwidth?l[7](l[23])+l[11].bandwidth()/2:l[7](l[23])[0]),re(a,"y",S=l[6](l[23])-4),re(a,"dx",l[2]),re(a,"dy",l[3]),re(a,"text-anchor",l[5])},m(P,O){Me(P,p,O),D&&D.m(P,O),Me(P,a,O)},p(P,O){O&3200&&d!==(d=P[11].bandwidth?P[7](P[23]):P[7](P[23])[0])&&re(p,"x",d),O&1088&&h!==(h=P[6](P[23]))&&re(p,"y",h),O&3584&&y!==(y=P[11].bandwidth?P[11].bandwidth():P[9](P[23]))&&re(p,"width",y),O&1280&&v!==(v=P[8](P[23]))&&re(p,"height",v),O&16&&re(p,"fill",P[4]),O&1&&re(p,"stroke",P[0]),O&2&&re(p,"stroke-width",P[1]),P[12]?D?D.p(P,O):(D=Yd(P),D.c(),D.m(a.parentNode,a)):D&&(D.d(1),D=null),O&3200&&T!==(T=P[11].bandwidth?P[7](P[23])+P[11].bandwidth()/2:P[7](P[23])[0])&&re(a,"x",T),O&1088&&S!==(S=P[6](P[23])-4)&&re(a,"y",S),O&4&&re(a,"dx",P[2]),O&8&&re(a,"dy",P[3]),O&32&&re(a,"text-anchor",P[5])},d(P){P&&(oe(p),oe(a)),D&&D.d(P)}}}function I0(l){let p,d=wi(l[10]),h=[];for(let y=0;y<d.length;y+=1)h[y]=Jd(Xd(l,d,y));return{c(){p=Hr("g");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Wr(y,"g",{class:!0});var v=Ge(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(oe),this.h()},h(){re(p,"class","column-group svelte-wgzwsk")},m(y,v){Me(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,[v]){if(v&16383){d=wi(y[10]);let a;for(a=0;a<d.length;a+=1){const T=Xd(y,d,a);h[a]?h[a].p(T,v):(h[a]=Jd(T),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},i:tn,o:tn,d(y){y&&oe(p),or(h,y)}}}function A0(l,p,d){let h,y,v,a,T,S,D,P,O;const{data:R,xGet:X,yGet:$,yRange:pe,xScale:le,yScale:me,y:ve,z:nt}=Hu("LayerCake");Kt(l,R,Xe=>d(10,S=Xe)),Kt(l,X,Xe=>d(7,T=Xe)),Kt(l,$,Xe=>d(6,v=Xe)),Kt(l,pe,Xe=>d(21,a=Xe)),Kt(l,le,Xe=>d(11,D=Xe)),Kt(l,me,Xe=>d(13,O=Xe)),Kt(l,nt,Xe=>d(12,P=Xe));let{stroke:Ve=""}=p,{strokeWidth:Ue=0}=p,{dxTick:tt=0}=p,{dyTick:Vt=0}=p,{fill:qt="#00205b"}=p,{textAnchor:Ze="middle"}=p;return l.$$set=Xe=>{"stroke"in Xe&&d(0,Ve=Xe.stroke),"strokeWidth"in Xe&&d(1,Ue=Xe.strokeWidth),"dxTick"in Xe&&d(2,tt=Xe.dxTick),"dyTick"in Xe&&d(3,Vt=Xe.dyTick),"fill"in Xe&&d(4,qt=Xe.fill),"textAnchor"in Xe&&d(5,Ze=Xe.textAnchor)},l.$$.update=()=>{l.$$.dirty&128&&d(9,h=Xe=>{const wt=T(Xe);return Math.max(0,wt[1]-wt[0])}),l.$$.dirty&2097216&&d(8,y=Xe=>a[0]-v(Xe))},[Ve,Ue,tt,Vt,qt,Ze,v,T,y,h,S,D,P,O,R,X,$,pe,le,me,nt,a]}class P0 extends lr{constructor(p){super(),ur(this,p,A0,I0,sr,{stroke:0,strokeWidth:1,dxTick:2,dyTick:3,fill:4,textAnchor:5})}}function Qd(l,p,d){const h=l.slice();return h[28]=p[d],h[30]=d,h}function $d(l){let p,d,h,y;return{c(){p=Hr("line"),this.h()},l(v){p=Wr(v,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,"stroke-width":!0,class:!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"y1",d=l[20]*-1),re(p,"y2",h=l[14]&&l[30]%2==0?l[10]+l[8]+2:l[10]+l[8]-13),re(p,"x1","0"),re(p,"x2","0"),re(p,"stroke",l[11]),re(p,"stroke-width",y=l[15]&&Array.isArray(l[4])&&l[30]==Math.floor(l[4].length/2)?2:1),re(p,"class","svelte-fwjh80"),as(p,"baseline",l[13])},m(v,a){Me(v,p,a)},p(v,a){a&1048576&&d!==(d=v[20]*-1)&&re(p,"y1",d),a&17664&&h!==(h=v[14]&&v[30]%2==0?v[10]+v[8]+2:v[10]+v[8]-13)&&re(p,"y2",h),a&2048&&re(p,"stroke",v[11]),a&32784&&y!==(y=v[15]&&Array.isArray(v[4])&&v[30]==Math.floor(v[4].length/2)?2:1)&&re(p,"stroke-width",y),a&8192&&as(p,"baseline",v[13])},d(v){v&&oe(p)}}}function C0(l){let p=l[1](l[28])+"",d;return{c(){d=Nt(p)},l(h){d=Ut(h,p)},m(h,y){Me(h,d,y)},p(h,y){y&262146&&p!==(p=h[1](h[28])+"")&&Si(d,p)},d(h){h&&oe(d)}}}function M0(l){let p,d=l[1](l[28])+"",h,y;return{c(){p=Nt(l[5]),h=Nt(d),y=Nt(l[6])},l(v){p=Ut(v,l[5]),h=Ut(v,d),y=Ut(v,l[6])},m(v,a){Me(v,p,a),Me(v,h,a),Me(v,y,a)},p(v,a){a&32&&Si(p,v[5]),a&262146&&d!==(d=v[1](v[28])+"")&&Si(h,d),a&64&&Si(y,v[6])},d(v){v&&(oe(p),oe(h),oe(y))}}}function em(l){let p,d,h,y,v,a,T,S=l[0]!==!1&&$d(l);function D(R,X){return R[30]==R[18].length-1?M0:C0}let P=D(l),O=P(l);return{c(){p=Hr("g"),S&&S.c(),d=Hr("text"),O.c(),this.h()},l(R){p=Wr(R,"g",{class:!0,transform:!0});var X=Ge(p);S&&S.l(X),d=Wr(X,"text",{x:!0,y:!0,dx:!0,dy:!0,"text-anchor":!0,fill:!0,class:!0});var $=Ge(d);O.l($),$.forEach(oe),X.forEach(oe),this.h()},h(){re(d,"x",h=l[7]||l[16]?l[17].bandwidth()/2:0),re(d,"y",y=l[3]?l[20]*-1-6:l[14]&&l[30]%2==0?l[8]+15:l[8]),re(d,"dx",v=l[24](l[30])=="start"?l[9]-2:l[24](l[30])=="end"?l[9]+2:l[9]),re(d,"dy",l[10]),re(d,"text-anchor",l[24](l[30])),re(d,"fill",l[12]),re(d,"class","svelte-fwjh80"),as(d,"bold",l[15]&&Array.isArray(l[4])&&l[30]==Math.floor(l[4].length/2)),re(p,"class",a="tick tick-"+l[28]+" svelte-fwjh80"),re(p,"transform",T="translate("+l[17](l[28])+","+l[19][0]+")")},m(R,X){Me(R,p,X),S&&S.m(p,null),Ae(p,d),O.m(d,null)},p(R,X){R[0]!==!1?S?S.p(R,X):(S=$d(R),S.c(),S.m(p,d)):S&&(S.d(1),S=null),P===(P=D(R))&&O?O.p(R,X):(O.d(1),O=P(R),O&&(O.c(),O.m(d,null))),X&196736&&h!==(h=R[7]||R[16]?R[17].bandwidth()/2:0)&&re(d,"x",h),X&1065224&&y!==(y=R[3]?R[20]*-1-6:R[14]&&R[30]%2==0?R[8]+15:R[8])&&re(d,"y",y),X&512&&v!==(v=R[24](R[30])=="start"?R[9]-2:R[24](R[30])=="end"?R[9]+2:R[9])&&re(d,"dx",v),X&1024&&re(d,"dy",R[10]),X&4096&&re(d,"fill",R[12]),X&32784&&as(d,"bold",R[15]&&Array.isArray(R[4])&&R[30]==Math.floor(R[4].length/2)),X&262144&&a!==(a="tick tick-"+R[28]+" svelte-fwjh80")&&re(p,"class",a),X&917504&&T!==(T="translate("+R[17](R[28])+","+R[19][0]+")")&&re(p,"transform",T)},d(R){R&&oe(p),S&&S.d(),O.d()}}}function tm(l){let p,d,h;return{c(){p=Hr("line"),this.h()},l(y){p=Wr(y,"line",{class:!0,y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"class","baseline svelte-fwjh80"),re(p,"y1",l[20]),re(p,"y2","0"),re(p,"x1",d=l[17](0)),re(p,"x2",h=l[17](0)),re(p,"stroke",l[11])},m(y,v){Me(y,p,v)},p(y,v){v&1048576&&re(p,"y1",y[20]),v&131072&&d!==(d=y[17](0))&&re(p,"x1",d),v&131072&&h!==(h=y[17](0))&&re(p,"x2",h),v&2048&&re(p,"stroke",y[11])},d(y){y&&oe(p)}}}function D0(l){let p,d,h=wi(l[18]),y=[];for(let a=0;a<h.length;a+=1)y[a]=em(Qd(l,h,a));let v=l[2]===!0&&tm(l);return{c(){p=Hr("g");for(let a=0;a<y.length;a+=1)y[a].c();d=ri(),v&&v.c(),this.h()},l(a){p=Wr(a,"g",{class:!0});var T=Ge(p);for(let S=0;S<y.length;S+=1)y[S].l(T);d=ri(),v&&v.l(T),T.forEach(oe),this.h()},h(){re(p,"class","axis x-axis")},m(a,T){Me(a,p,T);for(let S=0;S<y.length;S+=1)y[S]&&y[S].m(p,null);Ae(p,d),v&&v.m(p,null)},p(a,[T]){if(T&18874363){h=wi(a[18]);let S;for(S=0;S<h.length;S+=1){const D=Qd(a,h,S);y[S]?y[S].p(D,T):(y[S]=em(D),y[S].c(),y[S].m(p,d))}for(;S<y.length;S+=1)y[S].d(1);y.length=h.length}a[2]===!0?v?v.p(a,T):(v=tm(a),v.c(),v.m(p,null)):v&&(v.d(1),v=null)},i:tn,o:tn,d(a){a&&oe(p),or(y,a),v&&v.d()}}}function L0(l,p,d){let h,y,v,a,T;const{width:S,height:D,xScale:P,yScale:O,yRange:R}=Hu("LayerCake");Kt(l,D,Be=>d(20,T=Be)),Kt(l,P,Be=>d(17,v=Be)),Kt(l,R,Be=>d(19,a=Be));let{gridlines:X=!0}=p,{formatTick:$=Be=>Be}=p,{baseline:pe=!1}=p,{flipped:le=!1}=p,{snapTicks:me=!1}=p,{ticks:ve=void 0}=p,{prefix:nt=""}=p,{suffix:Ve=""}=p,{xTick:Ue=void 0}=p,{yTick:tt=15}=p,{dxTick:Vt=0}=p,{dyTick:qt=0}=p,{lineColor:Ze="#999"}=p,{textColor:Xe="#555"}=p,{solid:wt=!1}=p,{stagger:jt=!1}=p,{median:we=!0}=p;function qe(Be){if(me===!0){if(Be===0)return"start";if(Be===y.length-1)return"end"}return"middle"}return l.$$set=Be=>{"gridlines"in Be&&d(0,X=Be.gridlines),"formatTick"in Be&&d(1,$=Be.formatTick),"baseline"in Be&&d(2,pe=Be.baseline),"flipped"in Be&&d(3,le=Be.flipped),"snapTicks"in Be&&d(25,me=Be.snapTicks),"ticks"in Be&&d(4,ve=Be.ticks),"prefix"in Be&&d(5,nt=Be.prefix),"suffix"in Be&&d(6,Ve=Be.suffix),"xTick"in Be&&d(7,Ue=Be.xTick),"yTick"in Be&&d(8,tt=Be.yTick),"dxTick"in Be&&d(9,Vt=Be.dxTick),"dyTick"in Be&&d(10,qt=Be.dyTick),"lineColor"in Be&&d(11,Ze=Be.lineColor),"textColor"in Be&&d(12,Xe=Be.textColor),"solid"in Be&&d(13,wt=Be.solid),"stagger"in Be&&d(14,jt=Be.stagger),"median"in Be&&d(15,we=Be.median)},l.$$.update=()=>{l.$$.dirty&131072&&d(16,h=typeof v.bandwidth=="function"),l.$$.dirty&196624&&d(18,y=Array.isArray(ve)?ve:h?v.domain():v.ticks(ve))},[X,$,pe,le,ve,nt,Ve,Ue,tt,Vt,qt,Ze,Xe,wt,jt,we,h,v,y,a,T,D,P,R,qe,me]}class R0 extends lr{constructor(p){super(),ur(this,p,L0,D0,sr,{gridlines:0,formatTick:1,baseline:2,flipped:3,snapTicks:25,ticks:4,prefix:5,suffix:6,xTick:7,yTick:8,dxTick:9,dyTick:10,lineColor:11,textColor:12,solid:13,stagger:14,median:15})}}function B0(l){let p,d,h,y;return p=new P0({props:{fill:l[1],formatVal:l[5]}}),h=new R0({props:{gridlines:!1}}),{c(){ui(p.$$.fragment),d=kt(),ui(h.$$.fragment)},l(v){ci(p.$$.fragment,v),d=Et(v),ci(h.$$.fragment,v)},m(v,a){pi(p,v,a),Me(v,d,a),pi(h,v,a),y=!0},p(v,a){const T={};a&2&&(T.fill=v[1]),a&32&&(T.formatVal=v[5]),p.$set(T)},i(v){y||(ct(p.$$.fragment,v),ct(h.$$.fragment,v),y=!0)},o(v){_t(p.$$.fragment,v),_t(h.$$.fragment,v),y=!1},d(v){v&&oe(d),hi(p,v),hi(h,v)}}}function F0(l){let p,d;return p=new T0({props:{$$slots:{default:[B0]},$$scope:{ctx:l}}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&1058&&(v.$$scope={dirty:y,ctx:h}),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function O0(l){let p,d,h;return d=new w0({props:{padding:{top:15,right:0,bottom:20,left:0},x:l[2],y:l[3],z:l[4],xScale:mg().paddingInner([.02]).round(!0),xDomain:l[7],yDomain:l[6],zDomain:l[6],data:l[0],$$slots:{default:[F0]},$$scope:{ctx:l}}}),{c(){p=Oe("div"),ui(d.$$.fragment),this.h()},l(y){p=Ne(y,"DIV",{class:!0});var v=Ge(p);ci(d.$$.fragment,v),v.forEach(oe),this.h()},h(){re(p,"class","chart-container svelte-1i1qsul")},m(y,v){Me(y,p,v),pi(d,p,null),h=!0},p(y,[v]){const a={};v&4&&(a.x=y[2]),v&8&&(a.y=y[3]),v&16&&(a.z=y[4]),v&128&&(a.xDomain=y[7]),v&64&&(a.yDomain=y[6]),v&64&&(a.zDomain=y[6]),v&1&&(a.data=y[0]),v&1058&&(a.$$scope={dirty:v,ctx:y}),d.$set(a)},i(y){h||(ct(d.$$.fragment,y),h=!0)},o(y){_t(d.$$.fragment,y),h=!1},d(y){y&&oe(p),hi(d)}}}function N0(l,p,d){let h,y,v,{data:a}=p,{suffix:T="%"}=p,{decimals:S=null}=p,{fill:D="#00205B"}=p,{xKey:P="x"}=p,{yKey:O="y"}=p,{zKey:R=null}=p;return l.$$set=X=>{"data"in X&&d(0,a=X.data),"suffix"in X&&d(8,T=X.suffix),"decimals"in X&&d(9,S=X.decimals),"fill"in X&&d(1,D=X.fill),"xKey"in X&&d(2,P=X.xKey),"yKey"in X&&d(3,O=X.yKey),"zKey"in X&&d(4,R=X.zKey)},l.$$.update=()=>{l.$$.dirty&5&&d(7,h=a.map(X=>X[P])),l.$$.dirty&9&&d(6,y=[0,Math.max(...a.map(X=>X[O]))]),l.$$.dirty&768&&d(5,v=X=>X.toFixed(S)+T)},[a,D,P,O,R,v,y,h,T,S]}class Kh extends lr{constructor(p){super(),ur(this,p,N0,O0,sr,{data:0,suffix:8,decimals:9,fill:1,xKey:2,yKey:3,zKey:4})}}function im(l,p,d){const h=l.slice();return h[6]=p[d],h[8]=d,h}function nm(l){let p,d=wi(l[0]),h=[];for(let y=0;y<d.length;y+=1)h[y]=rm(im(l,d,y));return{c(){p=Hr("svg");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Wr(y,"svg",{class:!0});var v=Ge(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(oe),this.h()},h(){re(p,"class","stack svelte-pzvhwz")},m(y,v){Me(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,v){if(v&31){d=wi(y[0]);let a;for(a=0;a<d.length;a+=1){const T=im(y,d,a);h[a]?h[a].p(T,v):(h[a]=rm(T),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&oe(p),or(h,y)}}}function rm(l){let p,d;return{c(){p=Hr("rect"),this.h()},l(h){p=Wr(h,"rect",{class:!0,x:!0,style:!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"class","cell svelte-pzvhwz"),re(p,"x",d=l[4][l[8]]/l[3]*100+"%"),$e(p,"width",l[6][l[1]]/l[3]*100+"%"),$e(p,"fill",l[2][l[8]])},m(h,y){Me(h,p,y)},p(h,y){y&24&&d!==(d=h[4][h[8]]/h[3]*100+"%")&&re(p,"x",d),y&11&&$e(p,"width",h[6][h[1]]/h[3]*100+"%"),y&4&&$e(p,"fill",h[2][h[8]])},d(h){h&&oe(p)}}}function U0(l){let p,d=l[3]&&l[4]&&nm(l);return{c(){d&&d.c(),p=ri()},l(h){d&&d.l(h),p=ri()},m(h,y){d&&d.m(h,y),Me(h,p,y)},p(h,[y]){h[3]&&h[4]?d?d.p(h,y):(d=nm(h),d.c(),d.m(p.parentNode,p)):d&&(d.d(1),d=null)},i:tn,o:tn,d(h){h&&oe(p),d&&d.d(h)}}}function V0(l,p,d){let{data:h}=p,{yKey:y="y"}=p,{colors:v=["#308182","#3878c5","#002417","#BD00BD","lightgrey"]}=p,a,T;function S(){d(3,a=h.map(P=>P[y]).reduce((P,O)=>P+O,0));let D=[0];h.forEach(P=>D.push(D[D.length-1]+P[y])),d(4,T=D)}return l.$$set=D=>{"data"in D&&d(0,h=D.data),"yKey"in D&&d(1,y=D.yKey),"colors"in D&&d(2,v=D.colors)},l.$$.update=()=>{l.$$.dirty&3&&(h||y)&&S()},[h,y,v,a,T]}class Hh extends lr{constructor(p){super(),ur(this,p,V0,U0,sr,{data:0,yKey:1,colors:2})}}function am(l,p,d){const h=l.slice();return h[10]=p[d],h[12]=d,h}function q0(l){let p,d,h=l[6](l[10][l[3]])+"",y,v;return{c(){p=Oe("span"),d=Nt("(NI "),y=Nt(h),v=Nt(")"),this.h()},l(a){p=Ne(a,"SPAN",{class:!0,style:!0});var T=Ge(p);d=Ut(T,"(NI "),y=Ut(T,h),v=Ut(T,")"),T.forEach(oe),this.h()},h(){re(p,"class",""),$e(p,"color","#1460aa")},m(a,T){Me(a,p,T),Ae(p,d),Ae(p,y),Ae(p,v)},p(a,T){T&9&&h!==(h=a[6](a[10][a[3]])+"")&&Si(y,h)},d(a){a&&oe(p)}}}function j0(l){let p;return{c(){p=Oe("span"),this.h()},l(d){p=Ne(d,"SPAN",{class:!0,style:!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"class",""),$e(p,"color","#1460aa")},m(d,h){Me(d,p,h)},p:tn,d(d){d&&oe(p)}}}function G0(l){let p,d,h=_d(Math.round(l[10][l[3]]),"%)")+"",y;return{c(){p=Oe("span"),d=Nt("(2011 "),y=Nt(h),this.h()},l(v){p=Ne(v,"SPAN",{class:!0,style:!0});var a=Ge(p);d=Ut(a,"(2011 "),y=Ut(a,h),a.forEach(oe),this.h()},h(){re(p,"class",""),$e(p,"color","#1460aa")},m(v,a){Me(v,p,a),Ae(p,d),Ae(p,y)},p(v,a){a&9&&h!==(h=_d(Math.round(v[10][v[3]]),"%)")+"")&&Si(y,h)},d(v){v&&oe(p)}}}function om(l){let p,d,h,y,v,a=l[10][l[1]]+"",T,S,D,P=l[6](l[10][l[2]])+"",O,R,X;function $(me,ve){if(me[3]=="prev"&&me[4])return G0;if(me[3]=="prev"&&!me[4])return j0;if(me[3])return q0}let pe=$(l),le=pe&&pe(l);return{c(){p=Oe("tr"),d=Oe("td"),h=Hr("svg"),y=Hr("rect"),v=kt(),T=Nt(a),S=kt(),D=Oe("td"),O=Nt(P),R=kt(),le&&le.c(),X=kt(),this.h()},l(me){p=Ne(me,"TR",{});var ve=Ge(p);d=Ne(ve,"TD",{class:!0});var nt=Ge(d);h=Wr(nt,"svg",{width:!0,height:!0,class:!0});var Ve=Ge(h);y=Wr(Ve,"rect",{width:!0,height:!0,style:!0}),Ge(y).forEach(oe),Ve.forEach(oe),v=Et(nt),T=Ut(nt,a),nt.forEach(oe),S=Et(ve),D=Ne(ve,"TD",{class:!0,style:!0});var Ue=Ge(D);O=Ut(Ue,P),R=Et(Ue),le&&le.l(Ue),Ue.forEach(oe),X=Et(ve),ve.forEach(oe),this.h()},h(){re(y,"width","20"),re(y,"height","30"),$e(y,"fill",l[5][l[12]]),re(h,"width","20"),re(h,"height","30"),re(h,"class","bullet svelte-1gvovsq"),re(d,"class","svelte-1gvovsq"),re(D,"class","cell-right svelte-1gvovsq"),$e(D,"vertical-align","top")},m(me,ve){Me(me,p,ve),Ae(p,d),Ae(d,h),Ae(h,y),Ae(d,v),Ae(d,T),Ae(p,S),Ae(p,D),Ae(D,O),Ae(D,R),le&&le.m(D,null),Ae(p,X)},p(me,ve){ve&32&&$e(y,"fill",me[5][me[12]]),ve&3&&a!==(a=me[10][me[1]]+"")&&Si(T,a),ve&5&&P!==(P=me[6](me[10][me[2]])+"")&&Si(O,P),pe===(pe=$(me))&&le?le.p(me,ve):(le&&le.d(1),le=pe&&pe(me),le&&(le.c(),le.m(D,null)))},d(me){me&&oe(p),le&&le.d()}}}function Z0(l){let p,d,h=wi(l[0]),y=[];for(let v=0;v<h.length;v+=1)y[v]=om(am(l,h,v));return{c(){p=Oe("table"),d=Oe("tbody");for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){p=Ne(v,"TABLE",{class:!0});var a=Ge(p);d=Ne(a,"TBODY",{});var T=Ge(d);for(let S=0;S<y.length;S+=1)y[S].l(T);T.forEach(oe),a.forEach(oe),this.h()},h(){re(p,"class","legend svelte-1gvovsq")},m(v,a){Me(v,p,a),Ae(p,d);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(d,null)},p(v,[a]){if(a&127){h=wi(v[0]);let T;for(T=0;T<h.length;T+=1){const S=am(v,h,T);y[T]?y[T].p(S,a):(y[T]=om(S),y[T].c(),y[T].m(d,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=h.length}},i:tn,o:tn,d(v){v&&oe(p),or(y,v)}}}function K0(l,p,d){let h,{data:y}=p,{xKey:v="x"}=p,{yKey:a="y"}=p,{zKey:T="ni"}=p,{topic_prev_available:S=!0}=p,{colors:D=["#3878c5","#00205B","#308182","#002417","#BD00BD","lightgrey"]}=p,{decimals:P=null}=p;function O(R){let X;return P?X=(R/h*100).toFixed(P)+"%":R/h*100<1?X="<1%":X=(R/h*100).toFixed(0)+"%",X}return l.$$set=R=>{"data"in R&&d(0,y=R.data),"xKey"in R&&d(1,v=R.xKey),"yKey"in R&&d(2,a=R.yKey),"zKey"in R&&d(3,T=R.zKey),"topic_prev_available"in R&&d(4,S=R.topic_prev_available),"colors"in R&&d(5,D=R.colors),"decimals"in R&&d(7,P=R.decimals)},l.$$.update=()=>{l.$$.dirty&5&&(h=y.map(R=>R[a]).reduce((R,X)=>R+X,0)),l.$$.dirty&9&&y.map(R=>R[T]).reduce((R,X)=>R+X,0)},[y,v,a,T,S,D,O,P]}class H0 extends lr{constructor(p){super(),ur(this,p,K0,Z0,sr,{data:0,xKey:1,yKey:2,zKey:3,topic_prev_available:4,colors:5,decimals:7})}}function sm(l){let p,d,h,y;d=new Hh({props:{data:l[0],yKey:l[4],colors:l[6]}});let v=l[8]&&lm(l);return{c(){p=Oe("div"),ui(d.$$.fragment),h=kt(),v&&v.c(),this.h()},l(a){p=Ne(a,"DIV",{class:!0,style:!0});var T=Ge(p);ci(d.$$.fragment,T),h=Et(T),v&&v.l(T),T.forEach(oe),this.h()},h(){re(p,"class","chart svelte-1tebgpk"),$e(p,"height",l[1]*.28+"px")},m(a,T){Me(a,p,T),pi(d,p,null),Ae(p,h),v&&v.m(p,null),y=!0},p(a,T){const S={};T&1&&(S.data=a[0]),T&16&&(S.yKey=a[4]),T&64&&(S.colors=a[6]),d.$set(S),a[8]?v?v.p(a,T):(v=lm(a),v.c(),v.m(p,null)):v&&(v.d(1),v=null),(!y||T&2)&&$e(p,"height",a[1]*.28+"px")},i(a){y||(ct(d.$$.fragment,a),y=!0)},o(a){_t(d.$$.fragment,a),y=!1},d(a){a&&oe(p),hi(d),v&&v.d()}}}function lm(l){let p,d;return{c(){p=Oe("div"),d=Nt(l[8]),this.h()},l(h){p=Ne(h,"DIV",{class:!0});var y=Ge(p);d=Ut(y,l[8]),y.forEach(oe),this.h()},h(){re(p,"class","label svelte-1tebgpk")},m(h,y){Me(h,p,y),Ae(p,d)},p(h,y){y&256&&Si(d,h[8])},d(h){h&&oe(p)}}}function um(l){let p,d,h,y,v="2011 comparison not available",a;return d=new Hh({props:{data:l[0],yKey:l[4],colors:l[6]}}),{c(){p=Oe("div"),ui(d.$$.fragment),h=kt(),y=Oe("div"),y.textContent=v,this.h()},l(T){p=Ne(T,"DIV",{class:!0,style:!0});var S=Ge(p);ci(d.$$.fragment,S),h=Et(S),y=Ne(S,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),lo(y)!=="svelte-sfzs3m"&&(y.textContent=v),S.forEach(oe),this.h()},h(){re(y,"class","label svelte-1tebgpk"),$e(y,"background-color","#d8d8d8 "),$e(y,"color","#000000"),re(p,"class","chart svelte-1tebgpk"),$e(p,"height",l[1]*.28+"px")},m(T,S){Me(T,p,S),pi(d,p,null),Ae(p,h),Ae(p,y),a=!0},p(T,S){const D={};S&1&&(D.data=T[0]),S&16&&(D.yKey=T[4]),S&64&&(D.colors=T[6]),d.$set(D),(!a||S&2)&&$e(p,"height",T[1]*.28+"px")},i(T){a||(ct(d.$$.fragment,T),a=!0)},o(T){_t(d.$$.fragment,T),a=!1},d(T){T&&oe(p),hi(d)}}}function W0(l){let p,d,h,y,v,a,T,S;d=new Hh({props:{data:l[0],yKey:l[3],colors:l[6]}});let D=(l[4]&&l[5]||l[4]=="ni")&&sm(l),P=l[4]=="prev"&&!l[5]&&um(l);return T=new H0({props:{data:l[0],xKey:l[2],yKey:l[3],zKey:l[4],topic_prev_available:l[5],decimals:l[7],colors:l[6]}}),{c(){p=Oe("div"),ui(d.$$.fragment),h=kt(),D&&D.c(),y=kt(),P&&P.c(),v=kt(),a=Oe("div"),ui(T.$$.fragment),this.h()},l(O){p=Ne(O,"DIV",{class:!0,style:!0});var R=Ge(p);ci(d.$$.fragment,R),R.forEach(oe),h=Et(O),D&&D.l(O),y=Et(O),P&&P.l(O),v=Et(O),a=Ne(O,"DIV",{class:!0});var X=Ge(a);ci(T.$$.fragment,X),X.forEach(oe),this.h()},h(){re(p,"class","chart svelte-1tebgpk"),$e(p,"padding-top","3px"),$e(p,"height",(l[4]?l[1]*.72:l[1])+"px"),re(a,"class","legend svelte-1tebgpk")},m(O,R){Me(O,p,R),pi(d,p,null),Me(O,h,R),D&&D.m(O,R),Me(O,y,R),P&&P.m(O,R),Me(O,v,R),Me(O,a,R),pi(T,a,null),S=!0},p(O,[R]){const X={};R&1&&(X.data=O[0]),R&8&&(X.yKey=O[3]),R&64&&(X.colors=O[6]),d.$set(X),(!S||R&18)&&$e(p,"height",(O[4]?O[1]*.72:O[1])+"px"),O[4]&&O[5]||O[4]=="ni"?D?(D.p(O,R),R&48&&ct(D,1)):(D=sm(O),D.c(),ct(D,1),D.m(y.parentNode,y)):D&&(Xr(),_t(D,1,1,()=>{D=null}),Yr()),O[4]=="prev"&&!O[5]?P?(P.p(O,R),R&48&&ct(P,1)):(P=um(O),P.c(),ct(P,1),P.m(v.parentNode,v)):P&&(Xr(),_t(P,1,1,()=>{P=null}),Yr());const $={};R&1&&($.data=O[0]),R&4&&($.xKey=O[2]),R&8&&($.yKey=O[3]),R&16&&($.zKey=O[4]),R&32&&($.topic_prev_available=O[5]),R&128&&($.decimals=O[7]),R&64&&($.colors=O[6]),T.$set($)},i(O){S||(ct(d.$$.fragment,O),ct(D),ct(P),ct(T.$$.fragment,O),S=!0)},o(O){_t(d.$$.fragment,O),_t(D),_t(P),_t(T.$$.fragment,O),S=!1},d(O){O&&(oe(p),oe(h),oe(y),oe(v),oe(a)),hi(d),D&&D.d(O),P&&P.d(O),hi(T)}}}function X0(l,p,d){let{data:h}=p,{height:y=80}=p,{xKey:v="x"}=p,{yKey:a="y"}=p,{zKey:T="ni"}=p,{topic_prev_available:S=!0}=p,{colors:D=["#00205B","#3878c5","#002417","#BD00BD","lightgrey"]}=p,{decimals:P=null}=p,{label:O=null}=p;return l.$$set=R=>{"data"in R&&d(0,h=R.data),"height"in R&&d(1,y=R.height),"xKey"in R&&d(2,v=R.xKey),"yKey"in R&&d(3,a=R.yKey),"zKey"in R&&d(4,T=R.zKey),"topic_prev_available"in R&&d(5,S=R.topic_prev_available),"colors"in R&&d(6,D=R.colors),"decimals"in R&&d(7,P=R.decimals),"label"in R&&d(8,O=R.label)},[h,y,v,a,T,S,D,P,O]}class Wh extends lr{constructor(p){super(),ur(this,p,X0,W0,sr,{data:0,height:1,xKey:2,yKey:3,zKey:4,topic_prev_available:5,colors:6,decimals:7,label:8})}}function cm(l,p,d){const h=l.slice();return h[15]=p[d],h}function pm(l,p,d){const h=l.slice();return h[18]=p[d],h[19]=p,h[20]=d,h}function hm(l,p,d){const h=l.slice();return h[15]=p[d],h[20]=d,h}function fm(l){let p,d=wi(l[5]),h=[];for(let y=0;y<d.length;y+=1)h[y]=dm(hm(l,d,y));return{c(){p=Oe("ul");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Ne(y,"UL",{class:!0});var v=Ge(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(oe),this.h()},h(){re(p,"class","legend-block svelte-ezava7")},m(y,v){Me(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,v){if(v&32){d=wi(y[5]);let a;for(a=0;a<d.length;a+=1){const T=hm(y,d,a);h[a]?h[a].p(T,v):(h[a]=dm(T),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&oe(p),or(h,y)}}}function dm(l){let p,d,h,y,v=l[15]+"",a,T;return{c(){p=Oe("li"),d=Oe("div"),h=kt(),y=Oe("span"),a=Nt(v),T=kt(),this.h()},l(S){p=Ne(S,"LI",{class:!0});var D=Ge(p);d=Ne(D,"DIV",{class:!0}),Ge(d).forEach(oe),h=Et(D),y=Ne(D,"SPAN",{});var P=Ge(y);a=Ut(P,v),P.forEach(oe),T=Et(D),D.forEach(oe),this.h()},h(){re(d,"class","legend-vis "+(l[20]==0?"bar":"bar2")+" svelte-ezava7"),re(p,"class","svelte-ezava7")},m(S,D){Me(S,p,D),Ae(p,d),Ae(p,h),Ae(p,y),Ae(y,a),Ae(p,T)},p(S,D){D&32&&v!==(v=S[15]+"")&&Si(a,v)},d(S){S&&oe(p)}}}function mm(l){let p,d=`${l[4](l[18][l[0]])}%`,h,y,v=ym(l[18][l[0]])+"",a,T,S=`calc(${l[4](l[18][l[0]])}% + 2px)`;function D(){l[12].call(y,l[19],l[20])}return{c(){p=Oe("div"),h=kt(),y=Oe("div"),a=Nt(v),this.h()},l(P){p=Ne(P,"DIV",{class:!0}),Ge(p).forEach(oe),h=Et(P),y=Ne(P,"DIV",{class:!0});var O=Ge(y);a=Ut(O,v),O.forEach(oe),this.h()},h(){re(p,"class",Pp(l[20]==0?"bar":"bar2")+" svelte-ezava7"),$e(p,"left","0"),$e(p,"width",d),$e(p,"top",l[20]==0?"0":"50%"),$e(p,"height",l[5][1]?"50%":"100%"),re(y,"class","label svelte-ezava7"),Zu(()=>D.call(y)),$e(y,"left",S),$e(y,"top",l[20]==0?"0":"50%"),$e(y,"height","50%")},m(P,O){Me(P,p,O),Me(P,h,O),Me(P,y,O),Ae(y,a),T=Ku(y,D.bind(y))},p(P,O){l=P,O&25&&d!==(d=`${l[4](l[18][l[0]])}%`)&&$e(p,"width",d),O&32&&$e(p,"height",l[5][1]?"50%":"100%"),O&9&&v!==(v=ym(l[18][l[0]])+"")&&Si(a,v),O&25&&S!==(S=`calc(${l[4](l[18][l[0]])}% + 2px)`)&&$e(y,"left",S)},d(P){P&&(oe(p),oe(h),oe(y)),T()}}}function gm(l){let p,d=l[15].label+"",h,y,v,a,T=`${l[5][1]?l[1]*2:l[1]}px`,S=`calc(100% - ${l[2]}px)`,D=wi(l[15].values),P=[];for(let O=0;O<D.length;O+=1)P[O]=mm(pm(l,D,O));return{c(){p=Oe("div"),h=Nt(d),y=kt(),v=Oe("div");for(let O=0;O<P.length;O+=1)P[O].c();a=kt(),this.h()},l(O){p=Ne(O,"DIV",{class:!0});var R=Ge(p);h=Ut(R,d),R.forEach(oe),y=Et(O),v=Ne(O,"DIV",{class:!0});var X=Ge(v);for(let $=0;$<P.length;$+=1)P[$].l(X);a=Et(X),X.forEach(oe),this.h()},h(){re(p,"class","label-group svelte-ezava7"),re(v,"class","bar-group svelte-ezava7"),$e(v,"height",T),$e(v,"width",S)},m(O,R){Me(O,p,R),Ae(p,h),Me(O,y,R),Me(O,v,R);for(let X=0;X<P.length;X+=1)P[X]&&P[X].m(v,null);Ae(v,a)},p(O,R){if(R&8&&d!==(d=O[15].label+"")&&Si(h,d),R&57){D=wi(O[15].values);let X;for(X=0;X<D.length;X+=1){const $=pm(O,D,X);P[X]?P[X].p($,R):(P[X]=mm($),P[X].c(),P[X].m(v,a))}for(;X<P.length;X+=1)P[X].d(1);P.length=D.length}R&34&&T!==(T=`${O[5][1]?O[1]*2:O[1]}px`)&&$e(v,"height",T),R&4&&S!==(S=`calc(100% - ${O[2]}px)`)&&$e(v,"width",S)},d(O){O&&(oe(p),oe(y),oe(v)),or(P,O)}}}function Y0(l){let p,d,h=l[5][1]&&fm(l),y=wi(l[3]),v=[];for(let a=0;a<y.length;a+=1)v[a]=gm(cm(l,y,a));return{c(){h&&h.c(),p=kt();for(let a=0;a<v.length;a+=1)v[a].c();d=ri()},l(a){h&&h.l(a),p=Et(a);for(let T=0;T<v.length;T+=1)v[T].l(a);d=ri()},m(a,T){h&&h.m(a,T),Me(a,p,T);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(a,T);Me(a,d,T)},p(a,[T]){if(a[5][1]?h?h.p(a,T):(h=fm(a),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null),T&63){y=wi(a[3]);let S;for(S=0;S<y.length;S+=1){const D=cm(a,y,S);v[S]?v[S].p(D,T):(v[S]=gm(D),v[S].c(),v[S].m(d.parentNode,d))}for(;S<v.length;S+=1)v[S].d(1);v.length=y.length}},i:tn,o:tn,d(a){a&&(oe(p),oe(d)),h&&h.d(a),or(v,a)}}}function ym(l){let p;return l==null?p="Not available":l<1?p="<1%":p=l.toFixed(0)+"%",p}function J0(l,p,d){let h,y,v,a,{data:T}=p,{xKey:S="perc"}=p,{yKey:D="category"}=p,{zKey:P="ni"}=p,{formatTick:O=me=>Math.round(me)}=p,{suffix:R="%"}=p,{barHeight:X=20}=p,{margin:$=30}=p;function pe(me,ve){let nt={};for(const Ue of me)nt[Ue[ve]]||(nt[Ue[ve]]={label:Ue[ve],values:[]}),nt[Ue[ve]].values.push(Ue);let Ve=[];for(const Ue in nt)Ve.push(nt[Ue]);return Ve}function le(me,ve){me[ve].width=this.clientWidth,d(3,a),d(6,T),d(7,D)}return l.$$set=me=>{"data"in me&&d(6,T=me.data),"xKey"in me&&d(0,S=me.xKey),"yKey"in me&&d(7,D=me.yKey),"zKey"in me&&d(8,P=me.zKey),"formatTick"in me&&d(9,O=me.formatTick),"suffix"in me&&d(10,R=me.suffix),"barHeight"in me&&d(1,X=me.barHeight),"margin"in me&&d(2,$=me.margin)},l.$$.update=()=>{l.$$.dirty&65&&d(11,h=[0,Math.max(...T.map(me=>me[S]))]),l.$$.dirty&192&&T.map(me=>me[D]).filter((me,ve,nt)=>nt.indexOf(me)===ve),l.$$.dirty&320&&d(5,y=T.map(me=>me[P]).filter((me,ve,nt)=>nt.indexOf(me)===ve)),l.$$.dirty&2048&&d(4,v=me=>me/h[1]*100),l.$$.dirty&192&&d(3,a=pe(T,D))},[S,X,$,a,v,y,T,D,P,O,R,h,le]}class Q0 extends lr{constructor(p){super(),ur(this,p,J0,Y0,sr,{data:6,xKey:0,yKey:7,zKey:8,formatTick:9,suffix:10,barHeight:1,margin:2})}}function _m(l,p,d){const h=l.slice();return h[14]=p[d],h}function vm(l,p,d){const h=l.slice();return h[17]=p[d],h[19]=d,h}function bm(l,p,d){const h=l.slice();return h[17]=p[d],h[19]=d,h}function xm(l,p,d){const h=l.slice();return h[14]=p[d],h[19]=d,h}function wm(l){let p,d=wi(l[7]),h=[];for(let y=0;y<d.length;y+=1)h[y]=Sm(xm(l,d,y));return{c(){p=Oe("ul");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Ne(y,"UL",{class:!0});var v=Ge(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(oe),this.h()},h(){re(p,"class","legend svelte-1hk4284")},m(y,v){Me(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,v){if(v&144){d=wi(y[7]);let a;for(a=0;a<d.length;a+=1){const T=xm(y,d,a);h[a]?h[a].p(T,v):(h[a]=Sm(T),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&oe(p),or(h,y)}}}function Sm(l){let p,d,h,y,v=l[14]+"",a,T;return{c(){p=Oe("li"),d=Oe("div"),h=kt(),y=Oe("span"),a=Nt(v),T=kt(),this.h()},l(S){p=Ne(S,"LI",{class:!0});var D=Ge(p);d=Ne(D,"DIV",{class:!0}),Ge(d).forEach(oe),h=Et(D),y=Ne(D,"SPAN",{class:!0});var P=Ge(y);a=Ut(P,v),P.forEach(oe),T=Et(D),D.forEach(oe),this.h()},h(){re(d,"class","legend-vis "+(l[19]==0?"bar":"marker")+" svelte-1hk4284"),$e(d,"height","1rem"),$e(d,"width",l[19]==0?"1rem":l[4]+"px"),re(y,"class",Pp(l[19]==0?"bold":"brackets")+" svelte-1hk4284"),re(p,"class","svelte-1hk4284")},m(S,D){Me(S,p,D),Ae(p,d),Ae(p,h),Ae(p,y),Ae(y,a),Ae(p,T)},p(S,D){D&16&&$e(d,"width",S[19]==0?"1rem":S[4]+"px"),D&128&&v!==(v=S[14]+"")&&Si(a,v)},d(S){S&&oe(p)}}}function km(l){let p,d=l[1](l[17].perc/100)+"",h,y;return{c(){p=Oe("span"),h=Nt(d),y=Nt(l[2]),this.h()},l(v){p=Ne(v,"SPAN",{class:!0,style:!0});var a=Ge(p);h=Ut(a,d),y=Ut(a,l[2]),a.forEach(oe),this.h()},h(){re(p,"class",Pp(l[19]==0?"bold":"sml brackets")+" svelte-1hk4284"),$e(p,"color",l[19]==0?"#000000":"#1460aa")},m(v,a){Me(v,p,a),Ae(p,h),Ae(p,y)},p(v,a){a&34&&d!==(d=v[1](v[17].perc/100)+"")&&Si(h,d),a&4&&Si(y,v[2])},d(v){v&&oe(p)}}}function $0(l){let p,d=`calc(${l[6](l[17][l[0]])}% - ${l[4]/2}px)`,h=`${l[4]}px`;return{c(){p=Oe("div"),this.h()},l(y){p=Ne(y,"DIV",{class:!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"class","marker svelte-1hk4284"),$e(p,"left",d),$e(p,"border-left-width",h)},m(y,v){Me(y,p,v)},p(y,v){v&113&&d!==(d=`calc(${y[6](y[17][y[0]])}% - ${y[4]/2}px)`)&&$e(p,"left",d),v&16&&h!==(h=`${y[4]}px`)&&$e(p,"border-left-width",h)},d(y){y&&oe(p)}}}function e1(l){let p,d=`${l[6](l[17][l[0]])}%`;return{c(){p=Oe("div"),this.h()},l(h){p=Ne(h,"DIV",{class:!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"class","bar svelte-1hk4284"),$e(p,"left","0"),$e(p,"width",d)},m(h,y){Me(h,p,y)},p(h,y){y&97&&d!==(d=`${h[6](h[17][h[0]])}%`)&&$e(p,"width",d)},d(h){h&&oe(p)}}}function Em(l){let p;function d(v,a){return v[19]==0?e1:$0}let y=d(l)(l);return{c(){y.c(),p=ri()},l(v){y.l(v),p=ri()},m(v,a){y.m(v,a),Me(v,p,a)},p(v,a){y.p(v,a)},d(v){v&&oe(p),y.d(v)}}}function zm(l){let p,d=l[14].label+"",h,y,v,a,T,S=`${l[3]}px`,D=wi(l[14].values),P=[];for(let X=0;X<D.length;X+=1)P[X]=km(bm(l,D,X));let O=wi(l[14].values),R=[];for(let X=0;X<O.length;X+=1)R[X]=Em(vm(l,O,X));return{c(){p=Oe("div"),h=Nt(d),y=kt();for(let X=0;X<P.length;X+=1)P[X].c();v=kt(),a=Oe("div");for(let X=0;X<R.length;X+=1)R[X].c();T=kt(),this.h()},l(X){p=Ne(X,"DIV",{class:!0});var $=Ge(p);h=Ut($,d),y=Et($);for(let le=0;le<P.length;le+=1)P[le].l($);$.forEach(oe),v=Et(X),a=Ne(X,"DIV",{class:!0});var pe=Ge(a);for(let le=0;le<R.length;le+=1)R[le].l(pe);T=Et(pe),pe.forEach(oe),this.h()},h(){re(p,"class","label-group svelte-1hk4284"),re(a,"class","bar-group svelte-1hk4284"),$e(a,"height",S)},m(X,$){Me(X,p,$),Ae(p,h),Ae(p,y);for(let pe=0;pe<P.length;pe+=1)P[pe]&&P[pe].m(p,null);Me(X,v,$),Me(X,a,$);for(let pe=0;pe<R.length;pe+=1)R[pe]&&R[pe].m(a,null);Ae(a,T)},p(X,$){if($&32&&d!==(d=X[14].label+"")&&Si(h,d),$&38){D=wi(X[14].values);let pe;for(pe=0;pe<D.length;pe+=1){const le=bm(X,D,pe);P[pe]?P[pe].p(le,$):(P[pe]=km(le),P[pe].c(),P[pe].m(p,null))}for(;pe<P.length;pe+=1)P[pe].d(1);P.length=D.length}if($&113){O=wi(X[14].values);let pe;for(pe=0;pe<O.length;pe+=1){const le=vm(X,O,pe);R[pe]?R[pe].p(le,$):(R[pe]=Em(le),R[pe].c(),R[pe].m(a,T))}for(;pe<R.length;pe+=1)R[pe].d(1);R.length=O.length}$&8&&S!==(S=`${X[3]}px`)&&$e(a,"height",S)},d(X){X&&(oe(p),oe(v),oe(a)),or(P,X),or(R,X)}}}function t1(l){let p,d,h=l[7][1]&&wm(l),y=wi(l[5]),v=[];for(let a=0;a<y.length;a+=1)v[a]=zm(_m(l,y,a));return{c(){h&&h.c(),p=kt();for(let a=0;a<v.length;a+=1)v[a].c();d=ri()},l(a){h&&h.l(a),p=Et(a);for(let T=0;T<v.length;T+=1)v[T].l(a);d=ri()},m(a,T){h&&h.m(a,T),Me(a,p,T);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(a,T);Me(a,d,T)},p(a,[T]){if(a[7][1]?h?h.p(a,T):(h=wm(a),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null),T&127){y=wi(a[5]);let S;for(S=0;S<y.length;S+=1){const D=_m(a,y,S);v[S]?v[S].p(D,T):(v[S]=zm(D),v[S].c(),v[S].m(d.parentNode,d))}for(;S<v.length;S+=1)v[S].d(1);v.length=y.length}},i:tn,o:tn,d(a){a&&(oe(p),oe(d)),h&&h.d(a),or(v,a)}}}function i1(l,p,d){let h,y,v,a,{data:T}=p,{xKey:S="perc"}=p,{yKey:D="category"}=p,{zKey:P="group"}=p,{formatTick:O=le=>Math.round(100*le)}=p,{suffix:R="%"}=p,{barHeight:X=25}=p,{markerWidth:$=3}=p;function pe(le,me){let ve={};for(const Ve of le)ve[Ve[me]]||(ve[Ve[me]]={label:Ve[me],values:[]}),ve[Ve[me]].values.push(Ve);let nt=[];for(const Ve in ve)nt.push(ve[Ve]);return nt}return l.$$set=le=>{"data"in le&&d(8,T=le.data),"xKey"in le&&d(0,S=le.xKey),"yKey"in le&&d(9,D=le.yKey),"zKey"in le&&d(10,P=le.zKey),"formatTick"in le&&d(1,O=le.formatTick),"suffix"in le&&d(2,R=le.suffix),"barHeight"in le&&d(3,X=le.barHeight),"markerWidth"in le&&d(4,$=le.markerWidth)},l.$$.update=()=>{l.$$.dirty&257&&d(11,h=[0,Math.max(...T.map(le=>le[S]))]),l.$$.dirty&768&&T.map(le=>le[D]).filter((le,me,ve)=>ve.indexOf(le)===me),l.$$.dirty&1280&&d(7,y=T.map(le=>le[P]).filter((le,me,ve)=>ve.indexOf(le)===me)),l.$$.dirty&2048&&d(6,v=le=>le/h[1]*100),l.$$.dirty&768&&d(5,a=pe(T,D))},[S,O,R,X,$,a,v,y,T,D,P,h]}class Xh extends lr{constructor(p){super(),ur(this,p,i1,t1,sr,{data:8,xKey:0,yKey:9,zKey:10,formatTick:1,suffix:2,barHeight:3,markerWidth:4})}}function Tm(l,p,d){const h=l.slice();return h[12]=p[d],h[14]=d,h}function Im(l,p,d){const h=l.slice();return h[15]=p[d],h[17]=d,h}function Am(l,p,d){const h=l.slice();return h[15]=p[d],h[17]=d,h}function Pm(l,p,d){const h=l.slice();return h[19]=p[d],h[14]=d,h}function Cm(l){let p,d=wi(l[5]),h=[];for(let y=0;y<d.length;y+=1)h[y]=Mm(Pm(l,d,y));return{c(){p=Oe("ul");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){p=Ne(y,"UL",{class:!0});var v=Ge(p);for(let a=0;a<h.length;a+=1)h[a].l(v);v.forEach(oe),this.h()},h(){re(p,"class","legend svelte-pmaxst")},m(y,v){Me(y,p,v);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(p,null)},p(y,v){if(v&36){d=wi(y[5]);let a;for(a=0;a<d.length;a+=1){const T=Pm(y,d,a);h[a]?h[a].p(T,v):(h[a]=Mm(T),h[a].c(),h[a].m(p,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&oe(p),or(h,y)}}}function Mm(l){let p,d,h,y,v=l[19]+"",a,T;return{c(){p=Oe("li"),d=Oe("div"),h=kt(),y=Oe("span"),a=Nt(v),T=kt(),this.h()},l(S){p=Ne(S,"LI",{class:!0});var D=Ge(p);d=Ne(D,"DIV",{class:!0}),Ge(d).forEach(oe),h=Et(D),y=Ne(D,"SPAN",{class:!0});var P=Ge(y);a=Ut(P,v),P.forEach(oe),T=Et(D),D.forEach(oe),this.h()},h(){re(d,"class","legend-vis "+(l[14]==0?"bar":"markerSmall")+" svelte-pmaxst"),$e(d,"height","1rem"),$e(d,"width",l[14]==0?"1rem":l[2]+"px"),re(y,"class",Pp(l[14]==0?"bold":"brackets")+" svelte-pmaxst"),re(p,"class","svelte-pmaxst")},m(S,D){Me(S,p,D),Ae(p,d),Ae(p,h),Ae(p,y),Ae(y,a),Ae(p,T)},p(S,D){D&4&&$e(d,"width",S[14]==0?"1rem":S[2]+"px"),D&32&&v!==(v=S[19]+"")&&Si(a,v)},d(S){S&&oe(p)}}}function n1(l){let p,d=wi(l[12].values),h=[];for(let y=0;y<d.length;y+=1)h[y]=Dm(Im(l,d,y));return{c(){for(let y=0;y<h.length;y+=1)h[y].c();p=ri()},l(y){for(let v=0;v<h.length;v+=1)h[v].l(y);p=ri()},m(y,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(y,v);Me(y,p,v)},p(y,v){if(v&89){d=wi(y[12].values);let a;for(a=0;a<d.length;a+=1){const T=Im(y,d,a);h[a]?h[a].p(T,v):(h[a]=Dm(T),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&oe(p),or(h,y)}}}function r1(l){let p,d=wi(l[12].values),h=[];for(let y=0;y<d.length;y+=1)h[y]=Lm(Am(l,d,y));return{c(){for(let y=0;y<h.length;y+=1)h[y].c();p=ri()},l(y){for(let v=0;v<h.length;v+=1)h[v].l(y);p=ri()},m(y,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(y,v);Me(y,p,v)},p(y,v){if(v&89){d=wi(y[12].values);let a;for(a=0;a<d.length;a+=1){const T=Am(y,d,a);h[a]?h[a].p(T,v):(h[a]=Lm(T),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&oe(p),or(h,y)}}}function Dm(l){let p,d,h=`calc(100% - ${l[15].offset<0?l[4](l[15][l[0]]-l[15].offset):l[4](l[15][l[0]])}%)`,y=`${l[4](l[15].offset)}%`,v=`${l[17]/l[6].length*100}%`,a=`${1/l[6].length*100}%`;return{c(){p=Oe("div"),this.h()},l(T){p=Ne(T,"DIV",{class:!0,style:!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"class","marker svelte-pmaxst"),re(p,"style",d="border-"+(l[15].offset<0?"top":"bottom")+": none"),$e(p,"top",h),$e(p,"height",y),$e(p,"left",v),$e(p,"width",a)},m(T,S){Me(T,p,S)},p(T,S){S&8&&d!==(d="border-"+(T[15].offset<0?"top":"bottom")+": none")&&re(p,"style",d);const D=S&8;(S&25&&h!==(h=`calc(100% - ${T[15].offset<0?T[4](T[15][T[0]]-T[15].offset):T[4](T[15][T[0]])}%)`)||D)&&$e(p,"top",h),(S&24&&y!==(y=`${T[4](T[15].offset)}%`)||D)&&$e(p,"height",y),(S&72&&v!==(v=`${T[17]/T[6].length*100}%`)||D)&&$e(p,"left",v),(S&72&&a!==(a=`${1/T[6].length*100}%`)||D)&&$e(p,"width",a)},d(T){T&&oe(p)}}}function Lm(l){let p,d=`${100-l[4](l[15][l[0]])}%`,h=`${l[4](l[15][l[0]])}%`,y=`${l[17]/l[6].length*100}%`,v=`calc(${1/l[6].length*100}% - 2px)`;return{c(){p=Oe("div"),this.h()},l(a){p=Ne(a,"DIV",{class:!0}),Ge(p).forEach(oe),this.h()},h(){re(p,"class","bar svelte-pmaxst"),$e(p,"top",d),$e(p,"height",h),$e(p,"left",y),$e(p,"width",v)},m(a,T){Me(a,p,T)},p(a,T){T&25&&d!==(d=`${100-a[4](a[15][a[0]])}%`)&&$e(p,"top",d),T&25&&h!==(h=`${a[4](a[15][a[0]])}%`)&&$e(p,"height",h),T&64&&y!==(y=`${a[17]/a[6].length*100}%`)&&$e(p,"left",y),T&64&&v!==(v=`calc(${1/a[6].length*100}% - 2px)`)&&$e(p,"width",v)},d(a){a&&oe(p)}}}function Rm(l){let p;function d(v,a){return v[14]==0?r1:n1}let y=d(l)(l);return{c(){y.c(),p=ri()},l(v){y.l(v),p=ri()},m(v,a){y.m(v,a),Me(v,p,a)},p(v,a){y.p(v,a)},d(v){v&&oe(p),y.d(v)}}}function a1(l){let p,d,h=`${l[1]}px`,y,v,a,T='<div class="column svelte-pmaxst">0-14</div> <div class="column svelte-pmaxst">15-39</div> <div class="column svelte-pmaxst">40-64</div> <div class="column svelte-pmaxst">65+</div>',S=l[5][1]&&Cm(l),D=wi(l[3]),P=[];for(let O=0;O<D.length;O+=1)P[O]=Rm(Tm(l,D,O));return{c(){S&&S.c(),p=kt(),d=Oe("div");for(let O=0;O<P.length;O+=1)P[O].c();y=kt(),v=Oe("div"),a=Oe("div"),a.innerHTML=T,this.h()},l(O){S&&S.l(O),p=Et(O),d=Ne(O,"DIV",{class:!0});var R=Ge(d);for(let $=0;$<P.length;$+=1)P[$].l(R);R.forEach(oe),y=Et(O),v=Ne(O,"DIV",{class:!0});var X=Ge(v);a=Ne(X,"DIV",{class:!0,"data-svelte-h":!0}),lo(a)!=="svelte-47v26m"&&(a.innerHTML=T),X.forEach(oe),this.h()},h(){re(d,"class","bar-group svelte-pmaxst"),$e(d,"height",h),re(a,"class","row svelte-pmaxst"),$e(a,"width","100%"),re(v,"class","x-scale svelte-pmaxst")},m(O,R){S&&S.m(O,R),Me(O,p,R),Me(O,d,R);for(let X=0;X<P.length;X+=1)P[X]&&P[X].m(d,null);Me(O,y,R),Me(O,v,R),Ae(v,a)},p(O,[R]){if(O[5][1]?S?S.p(O,R):(S=Cm(O),S.c(),S.m(p.parentNode,p)):S&&(S.d(1),S=null),R&89){D=wi(O[3]);let X;for(X=0;X<D.length;X+=1){const $=Tm(O,D,X);P[X]?P[X].p($,R):(P[X]=Rm($),P[X].c(),P[X].m(d,null))}for(;X<P.length;X+=1)P[X].d(1);P.length=D.length}R&2&&h!==(h=`${O[1]}px`)&&$e(d,"height",h)},i:tn,o:tn,d(O){O&&(oe(p),oe(d),oe(y),oe(v)),S&&S.d(O),or(P,O)}}}function o1(l,p,d){let h,y,v,a,T,{data:S}=p,{xKey:D="category"}=p,{yKey:P="perc"}=p,{zKey:O="group"}=p,{height:R=100}=p,{markerWidth:X=3}=p;function $(pe,le){let me={};for(const nt of pe){me[nt[le]]||(me[nt[le]]={label:nt[le],values:[]});let Ve=me[nt[le]].values.length,Ue=Ve==0?0:nt[P]-me[nt[le]].values[Ve-1][P];me[nt[le]].values.push({...nt,offset:Ue})}let ve=[];for(const nt in me)ve.push(me[nt]);return console.log(ve),ve}return l.$$set=pe=>{"data"in pe&&d(7,S=pe.data),"xKey"in pe&&d(8,D=pe.xKey),"yKey"in pe&&d(0,P=pe.yKey),"zKey"in pe&&d(9,O=pe.zKey),"height"in pe&&d(1,R=pe.height),"markerWidth"in pe&&d(2,X=pe.markerWidth)},l.$$.update=()=>{l.$$.dirty&384&&d(6,h=S.map(pe=>pe[D]).filter((pe,le,me)=>me.indexOf(pe)===le)),l.$$.dirty&129&&d(10,y=[0,Math.max(...S.map(pe=>pe[P]))]),l.$$.dirty&640&&d(5,v=S.map(pe=>pe[O]).filter((pe,le,me)=>me.indexOf(pe)===le)),l.$$.dirty&1024&&d(4,a=pe=>Math.abs(pe/y[1])*100),l.$$.dirty&640&&d(3,T=$(S,O))},[P,R,X,T,a,v,h,S,D,O,y]}class Yh extends lr{constructor(p){super(),ur(this,p,o1,a1,sr,{data:7,xKey:8,yKey:0,zKey:9,height:1,markerWidth:2})}}function s1(l){let p,d='<a href="#" tabindex="0" class="svelte-4glskh">Back to top</a>',h,y;return{c(){p=Oe("div"),p.innerHTML=d,this.h()},l(v){p=Ne(v,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),lo(p)!=="svelte-86r4eh"&&(p.innerHTML=d),this.h()},h(){re(p,"role","region"),re(p,"class","back_to_start svelte-4glskh"),as(p,"hidden",l[0])},m(v,a){Me(v,p,a),h||(y=[Sp(window,"scroll",l[2]),Sp(p,"click",l[1])],h=!0)},p(v,[a]){a&1&&as(p,"hidden",v[0])},i:tn,o:tn,d(v){v&&oe(p),h=!1,f_(y)}}}function l1(l,p,d){let{buttonVisibleOnPX:h=200}=p,y=!0;const v=()=>{document.body.scrollIntoView()},a=()=>document.documentElement||document.body,T=()=>{a().scrollTop>h?d(0,y=!1):d(0,y=!0)};return l.$$set=S=>{"buttonVisibleOnPX"in S&&d(3,h=S.buttonVisibleOnPX)},[y,v,T,h]}class u1 extends lr{constructor(p){super(),ur(this,p,l1,s1,sr,{buttonVisibleOnPX:3})}}function c1(l){let p,d,h=l[3][l[0]].title+"",y,v,a,T,S,D,P,O,R,X,$=l[3][l[0]].info+"",pe,le,me;return{c(){p=Oe("div"),d=Oe("div"),y=Nt(h),v=kt(),a=Oe("img"),P=kt(),O=Oe("div"),R=Oe("div"),X=new po(!1),this.h()},l(ve){p=Ne(ve,"DIV",{class:!0,style:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var nt=Ge(p);d=Ne(nt,"DIV",{class:!0});var Ve=Ge(d);y=Ut(Ve,h),v=Et(Ve),a=Ne(Ve,"IMG",{class:!0,src:!0,alt:!0}),Ve.forEach(oe),nt.forEach(oe),P=Et(ve),O=Ne(ve,"DIV",{class:!0,id:!0});var Ue=Ge(O);R=Ne(Ue,"DIV",{class:!0,"aria-hidden":!0});var tt=Ge(R);X=ho(tt,!1),tt.forEach(oe),Ue.forEach(oe),this.h()},h(){re(a,"class","i-button"),Ah(a.src,T=ni+"\\img\\i-button.svg")||re(a,"src",T),re(a,"alt","Information button"),re(d,"class","blocktitle"),re(p,"class","row"),$e(p,"display","flex"),$e(p,"cursor","pointer"),re(p,"data-bs-toggle","collapse"),re(p,"data-bs-target",S="#"+l[0]+"-info"),re(p,"aria-expanded","false"),re(p,"aria-controls",D=l[0]+"-info"),X.a=null,re(R,"class","card card-body svelte-1qrf6oz"),re(R,"aria-hidden","true"),re(O,"class","collapse svelte-1qrf6oz"),re(O,"id",pe=l[0]+"-info")},m(ve,nt){Me(ve,p,nt),Ae(p,d),Ae(d,y),Ae(d,v),Ae(d,a),l[6](p),Me(ve,P,nt),Me(ve,O,nt),Ae(O,R),X.m($,R),l[7](R),le||(me=Sp(d,"click",l[4]),le=!0)},p(ve,[nt]){nt&9&&h!==(h=ve[3][ve[0]].title+"")&&Si(y,h),nt&1&&S!==(S="#"+ve[0]+"-info")&&re(p,"data-bs-target",S),nt&1&&D!==(D=ve[0]+"-info")&&re(p,"aria-controls",D),nt&9&&$!==($=ve[3][ve[0]].info+"")&&X.p($),nt&1&&pe!==(pe=ve[0]+"-info")&&re(O,"id",pe)},i:tn,o:tn,d(ve){ve&&(oe(p),oe(P),oe(O)),l[6](null),l[7](null),le=!1,me()}}}function p1(l,p,d){let{id:h}=p,{place:y}=p,v,a,T={};function S(X){let pe=X.replaceAll("[",".").replaceAll("]","").split("."),le=y.meta_data;for(let me=0;me<pe.length;me++)if(le.hasOwnProperty(pe[me])&&(le=le[pe[me]],pe[me]=="last_updated")){let ve=le.split("-");le=ve[2]+"/"+ve[1]+"/"+ve[0]}return le}function D(){d(1,v.ariaHidden=!a.ariaExpanded,v)}function P(){return{popden:{title:"Population density",info:"Population density is the number of usual residents per square kilometer. A square kilometer is approximately equivalent to the floor space of 8 Titanics. It is rounded to 1 decimal place. <p class = 'pibutton'>Access data at: <a href='"+S("MYETotal[0].dataset_url")+"'>"+S("MYETotal[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("MYETotal[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("MYETotal[0].email")+"'>Email for more information</a> </p>"},pop:{title:"Population",info:"Population is based on the number of usual residents at 30th June in the mid-year population estimates.  <p class = 'pibutton'>Access data at: <a href='"+S("MYETotal[0].dataset_url")+"'>"+S("MYETotal[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("MYETotal[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("MYETotal[0].email")+"'>Email for more information</a> </p>"},generalhealth:{title:"General health",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>General health is a self-assessment of a person's general state of health. It is not based over any specified period of time. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},wellbeing:{title:"Personal wellbeing",info:"<p>Average Happiness score out of 10 for people aged 16+.  Average Life satisfaction score out of 10 for people aged 16+.<p>Average score out of 10 where 0 is ‘not at all’ and 10 is ‘completely’.</p></p><p class = 'pibutton'>Access data at: <a href='"+S("wellbeing[0].dataset_url")+"'>"+S("wellbeing[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("wellbeing[0].last_updated")+"</p> <p>Loneliness is the percentage of people aged 16+ who were lonely 'often/always' or 'some of the time'.</p><p class = 'pibutton'>Access data at: <a href='"+S("lonely[0].dataset_url")+"'>"+S("lonely[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("lonely[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("lonely[0].email")+"'>Email for more information</a> </p>"},lifeexpectancy:{title:"Life expectancy at birth",info:"<p class = 'pibutton'>Life expectancy at birth is the average number of years a person born in the current period could expect to live if the current mortality patterns remain constant.  Further information on definitions is available on the <a href = 'https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health Inequalities webpage</a></p><p class = 'pibutton'>Access data at: <a href='"+S("LE[0].dataset_url")+"'>"+S("LE[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("LE[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("LE[0].email")+"'>Email for more information</a> </p>"},env_problem:{title:"Environmental problems",info:" <p class = 'pibutton'>Access data at: <a href='"+S("Env_problem[0].dataset_url")+"'>"+S("Env_problem[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Env_problem[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("Env_problem[0].email")+"'>Email for more information</a> </p>"},renewable:{title:"Household renewable energy systems",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Renewable energy systems used to generate heat or energy for a household. Examples include: solar panels for electricity; solar panels for heating water; biomass and wind turbines.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},cars:{title:"Car or van availability",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The number of cars or vans that are owned, or available for use, by members of a household. It includes company cars and vans that are available for private use.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},active:{title:"Active and substainable travel",info:"<p class = 'pibutton'>Access data at: <a href='"+S("Env_active[0].dataset_url")+"'>"+S("Env_active[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Env_active[0].last_updated")+"</p> <p>Publications and associated documentation available at: <a href = 'https://www.infrastructure-ni.gov.uk/topics/statistics-and-research/travel-survey-tsni'>Travel Survey for Northern Ireland</a></p><p class = 'pibutton'><a href='mailto:"+S("Env_active[0].email")+"'>Email for more information</a> </p>"},crime:{title:"Police recorded crimes",info:"<p class = 'pibutton'>Access data at: <a href='"+S("crime[0].dataset_url")+"'>"+S("crime[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("crime[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("crime[0].email")+"'>Email for more information</a> </p>"},burglary:{title:"Police recorded burglaries",info:"<p class = 'pibutton'>Access data at: <a href='"+S("crime[0].dataset_url")+"'>"+S("crime[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("crime[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("crime[0].email")+"'>Email for more information</a> </p>"},crimetype:{title:"Types of crime",info:"<p class = 'pibutton'>Access data at: <a href='"+S("crime[0].dataset_url")+"'>"+S("crime[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("crime[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("crime[0].email")+"'>Email for more information</a> </p><p class = 'pibutton'>Crime per 1,000 population based on mid-year population estimate</p>"},crimeworry:{title:"Worry about crime",info:"<p class = 'pibutton'>Access data at: <a href='"+S("crimeworry[0].dataset_url")+"'>"+S("crimeworry[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("crimeworry[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("crimeworry[0].email")+"'>Email for more information</a> </p>"},crimeperception:{title:"Views on antisocial behaviour",info:"<p class = 'pibutton'>Access data at: <a href='"+S("crimeperception[0].dataset_url")+"'>"+S("crimeperception[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("crimeperception[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("crimeperception[0].email")+"'>Email for more information</a> </p>"},carers:{title:"Unpaid care giving",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Unpaid care covers looking after giving help or support to anyone because they have long-term physical or mental health conditions or illnesses, or problems related to old age. It does not include any activities as part of paid employment. All unpaid care statistics are restricted to persons aged 5 and over. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},hospitalactivity:{title:"Annual admissions to hospital",info:"<p class = 'pibutton'>Access data at: <a href='"+S("Admiss[0].dataset_url")+"'>"+S("Admiss[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Admiss[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("Admiss[0].email")+"'>Email for more information</a> </p>"},primarycare:{title:"Primary care providers",info:"<p class = 'pibutton'>Access data at: <a href='"+S("GP[0].dataset_url")+"'>"+S("GP[0].title")+"</a>, <a href='"+S("DEN[0].dataset_url")+"'>"+S("DEN[0].title")+"</a> and <a href='"+S("DEN_REG[0].dataset_url")+"'>"+S("DEN_REG[0].title")+"</a></p>"},employmentrates:{title:"Work status of adults",info:"<p class = 'pibutton'>Access data at: <a href='"+S("LMS[0].dataset_url")+"'>"+S("LMS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("LMS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("LMS[0].email")+"'>Email for more information</a> </p><p>Unemployed rates are based on those aged 16 and over, while both Employed and Inactive rates are based on those aged 16 to 64. Inactive includes students, early retirees, or people looking after a home, who are long-term sick or disabled. </p>"},employed:{title:"Work and wages",info:"<p class = 'pibutton'>Access data on number employed at: <a href='"+S("LMS[0].dataset_url")+"'>"+S("LMS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("LMS[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+S("LMS[0].email")+"'>Email for more information</a> </p><p >Access wages data at: <a href='"+S("ASHE_weekly[0].dataset_url")+"'>"+S("ASHE_weekly[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("ASHE_weekly[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("ASHE_weekly[0].email")+"'>Email for more information</a> </p><p>Median salary is the median gross weekly earnings for full-time employees.  The Median measures the amount earned by the average individual, that is the level of earnings at which half the population are above and half the population are below</p>"},wages:{title:"Average annual wage",info:"<p class = 'pibutton'>Access data at: <a href='"+S("ASHE[0].dataset_url")+"'>"+S("ASHE[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("ASHE[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("ASHE[0].email")+"'>Email for more information</a> </p><p>Median is the ..... </p>"},bres:{title:"Type of work",info:"<p class = 'pibutton'>Access data at: <a href='"+S("BRES[0].dataset_url")+"'>"+S("BRES[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("BRES[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+S("BRES[0].email")+"'>Email for more information</a> </p>"},pensionagebenefits:{title:"State Pension",info:"<p class = 'pibutton'>Access data at: <a href='"+S("BS[0].dataset_url")+"'>"+S("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("BS[0].email")+"'>Email for more information</a> </p>"},ucbenefits:{title:"Universal Credit",info:"<p class = 'pibutton'>Access data at: <a href='"+S("BS[0].dataset_url")+"'>"+S("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("BS[0].email")+"'>Email for more information</a> </p>"},pipbenefits:{title:"Personal Independence Payment",info:"<p class = 'pibutton'>Access data at:  <a href='"+S("BS[0].dataset_url")+"'>"+S("BS[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("BS[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("BS[0].email")+"'>Email for more information</a> </p>"},enrollments:{title:"People in education",info:"<p class = 'pibutton'>Access data at: <a href='"+S("Primary[0].dataset_url")+"'>"+S("Primary[0].title")+"</a>, <a href='"+S("PostPrimary[0].dataset_url")+"'>"+S("PostPrimary[0].title")+"</a>,  <a href='"+S("FE[0].dataset_url")+"'>"+S("FE[0].title")+"</a> and <a href='"+S("HE[0].dataset_url")+"'>"+S("HE[0].title")+"</a></p>"},fsme:{title:"Pupils entitled to free school meals",info:"<p class = 'pibutton'>Access data at: <a href='"+S("Primary[0].dataset_url")+"'>"+S("Primary[0].title")+"</a> and <a href='"+S("PostPrimary[0].dataset_url")+"'>"+S("PostPrimary[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Primary[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("Primary[0].email")+"'>Email for more information</a>.  Definitions are available on the <a href = 'https://www.education-ni.gov.uk/articles/school-enrolments-overview'>statistical publication page</a>. </p>"},teachers:{title:"School class size",info:"<p class = 'pibutton'>Access data at: <a href='"+S("ClassSize[0].dataset_url")+"'>"+S("ClassSize[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("ClassSize[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("ClassSize[0].email")+"'>Email for more information</a> </p>"},qualifications:{title:"Highest level of qualifications in the population",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The highest level of qualification categories are as follows:<p>No qualifications;</p><p>Level 1: 1 to 4 GCSEs, O levels, CSEs (any grades); 1 AS Level; NVQ level 1; or equivalent;</p><p>Level 2: 5 or more GCSEs (A*-C or 9-4), O levels (passes) CSEs (grade 1); 1 A level, 2-3 AS Levels; NVQ level 2, BTEC General, City and Guilds Craft; or equivalent;</p><p>Apprenticeship;</p><p>Level 3: 2 or more A Levels, 4 or more AS Levels; NVQ Level 3, BTEC National, OND, ONC, City and Guilds Advanced Craft; or equivalent;</p><p>Level 4 and above: Degree (BA, BSc), foundation degree, NVQ Level 4 and above, HND, HNC, professional qualifications (teaching or nursing, for example), or equivalent; and</p><p>Other: Other qualifications, equivalent unknown.</p><p>Highest level of qualification is derived from the question asking people aged 16 years and over to indicate all qualifications held. For qualifications gained outside Northern Ireland, respondents were directed to select the nearest equivalent.</p>"},attainment:{title:"Attainment of school leavers",info:" <p class = 'pibutton'>Access data at: <a href='"+S("Attainment[0].dataset_url")+"'>"+S("Attainment[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Attainment[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+S("Attainment[0].email")+"'>Email for more information</a> </p>"},houseprices:{title:"Average house price",info:" <p class = 'pibutton'>Access data at: <a href='"+S("houseprices[0].dataset_url")+"'>"+S("houseprices[0].title")+"</a></p><p class = 'pibutton'>Last updated:"+S("houseprices[0].last_updated")+".</p><p class = 'pibutton'><a href='mailto:"+S("houseprices[0].email")+"'>Email for more information</a> </p>"},concern:{title:"Concern about the environment",info:" <p class = 'pibutton'>Access data at: <a href='"+S("Env_concern[0].dataset_url")+"'>"+S("Env_concern[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Env_concern[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+S("Env_concern[0].email")+"'>Email for more information</a> </p>"},waste:{title:"Household waste",info:" <p class = 'pibutton'>Access data at: <a href='"+S("Env_waste[0].dataset_url")+"'>"+S("Env_waste[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Env_waste[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+S("Env_waste[0].email")+"'>Email for more information</a> </p>"},ghg:{title:"Greenhouse gas",info:" <p class = 'pibutton'>Access data at: <a href='"+S("Env_ghg[0].dataset_url")+"'>"+S("Env_ghg[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Env_ghg[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+S("Env_ghg[0].email")+"'>Email for more information</a> </p>"},empty:{title:"",info:""},destination:{title:"Next steps for school leavers",info:" <p class = 'pibutton'>Access data at: <a href='"+S("Destination[0].dataset_url")+"'>"+S("Destination[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("Destination[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("Destination[0].email")+"'>Email for more information</a> </p>"},popchange:{title:"Population change",info:" <p class = 'pibutton'>Access data at: <a href='"+S("PopChange[0].dataset_url")+"'>"+S("PopChange[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("PopChange[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("PopChange[0].email")+"'>Email for more information</a> </p>"},broadage:{title:"Age",info:" <p class = 'pibutton'> Age bands used at LGD, DEA and SDZ are different than those at the smaller data zones.  Access data at: <a href='"+S("BroadAge[0].dataset_url")+"'>"+S("BroadAge[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("BroadAge[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("BroadAge[0].email")+"'>Email for more information</a> </p>"},age:{title:"Age",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>A grouping of ages where a person’s age is their age at their last birthday on or prior to census day.  Age bands used at data zone are different than those at LGD, DEA and SDZ<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},hhsize:{title:"Household size",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The number of usual residents in the household.      <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},religion:{title:"Religion, Religion brought up in",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>The religious group the person belongs to or for people with no current religion their religious group of upbringing.People with no current religion and no religion of upbringing are labelled 'None'.<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},language:{title:"Main language",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>Person's main language as declared in the Census.Statistics for all language questions are restrictedto persons aged 3 and over. <ahref='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},households:{title:"Households - box with numbers",info:"<p>From Census 2021 data - <a href='https://explore.nisra.gov.uk/area-explorer-2021/'><strong>Census Area Explorer</strong></a></p>A household is either one person living alone or a group of people living at the same address who share cooking facilities and share a living room, sitting room or dining area. <a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'><strong>Statistical bulletins</strong></a>"},SEN:{title:"Special educational needs (SEN)",info:" <p class = 'pibutton'>Access data at:</p><p class = 'pibutton'><a href='"+S("SEN[0].dataset_url")+"'>"+S("SEN[0].title")+"</a></p><p class = 'pibutton'><a href='"+S("Primary[0].dataset_url")+"'>"+S("Primary[0].title")+"</a></p><p class = 'pibutton'><a href='"+S("PostPrimary[0].dataset_url")+"'>"+S("PostPrimary[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("SEN[0].last_updated")+"</p><p class = 'pibutton'><a href='mailto:"+S("SEN[0].email")+"'>Email for more information</a> </p><p class = 'pibutton'>These figures include SEN pupils enrolled in Special Education Schools, Primary Schools and Post-Primary Schools and include Statemented and Non Statemented pupils.  Definitions are available on the <a href = 'https://www.education-ni.gov.uk/articles/school-enrolments-overview'>statistical publication page</a>.</p>"},no_bus:{title:"Business and trade",info:" <p class = 'pibutton'>Access data at: <a href='"+S("business[0].dataset_url")+"'>"+S("business[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("business[0].last_updated")+"</p>  <p class = 'pibutton'>Access data at: <a href='"+S("niets_sales[0].dataset_url")+"'>"+S("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("niets_sales[0].email")+"'>Email for more information</a> </p>"},type_bus:{title:"Type of businesses",info:" <p class = 'pibutton'>Access data at: <a href='"+S("business[0].dataset_url")+"'>"+S("business[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("business[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("business[0].email")+"'>Email for more information</a> </p>"},size_bus:{title:"Employees in businesses",info:" <p class = 'pibutton'>Access data at: <a href='"+S("businessband[0].dataset_url")+"'>"+S("businessband[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("businessband[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("businessband[0].email")+"'>Email for more information</a> </p>"},sector:{title:"Selected business sectors",info:" <p class = 'pibutton'>Access farms data at: <a href='"+S("farms[0].dataset_url")+"'>"+S("farms[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("farms[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("farms[0].email")+"'>Email for more information</a> </p> <p class = 'pibutton'>Access tourism jobs data at: <a href='"+S("tourism[0].dataset_url")+"'>"+S("tourism[0].title")+"</a></p> <p class = 'pibutton'>Access tourism accomodation data at: <a href='"+S("tourism_estab[0].dataset_url")+"'>"+S("tourism_estab[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("tourism_estab[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("tourism[0].email")+"'>Email for more information</a> </p>"},niets_sales:{title:"Places businesses sell to (sales partners)",info:"<p class = 'pibutton'>Access data at: <a href='"+S("niets_sales[0].dataset_url")+"'>"+S("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("niets_sales[0].email")+"'>Email for more information</a> </p>"},niets_purch:{title:"Places businesses buy from (purchases partners)",info:"<p class = 'pibutton'>Access data at: <a href='"+S("niets_sales[0].dataset_url")+"'>"+S("niets_sales[0].title")+"</a></p><p class = 'pibutton'>Last updated: "+S("niets_sales[0].last_updated")+"</p> <p class = 'pibutton'><a href='mailto:"+S("niets_sales[0].email")+"'>Email for more information</a> </p>"}}}Ap(()=>{d(3,T=P())}),a_(()=>{d(3,T=P())});function O(X){Ns[X?"unshift":"push"](()=>{a=X,d(2,a)})}function R(X){Ns[X?"unshift":"push"](()=>{v=X,d(1,v)})}return l.$$set=X=>{"id"in X&&d(0,h=X.id),"place"in X&&d(5,y=X.place)},d(3,T=P()),[h,v,a,T,D,y,O,R]}class h1 extends lr{constructor(p){super(),ur(this,p,p1,c1,sr,{id:0,place:5})}}function f1(l){let p,d;return{c(){p=Oe("h3"),d=new po(!1),this.h()},l(h){p=Ne(h,"H3",{style:!0});var y=Ge(p);d=ho(y,!1),y.forEach(oe),this.h()},h(){d.a=null,$e(p,"margin","0 0 10px 0")},m(h,y){Me(h,p,y),d.m(l[9],p)},p(h,y){y&512&&d.p(h[9])},i:tn,o:tn,d(h){h&&oe(p)}}}function d1(l){let p,d;return p=new h1({props:{id:l[0],place:l[2]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&1&&(v.id=h[0]),y&4&&(v.place=h[2]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function Bm(l){let p,d;return{c(){p=Oe("div"),d=Nt(l[12]),this.h()},l(h){p=Ne(h,"DIV",{class:!0});var y=Ge(p);d=Ut(y,l[12]),y.forEach(oe),this.h()},h(){re(p,"class","text-small")},m(h,y){Me(h,p,y),Ae(p,d)},p(h,y){y&4096&&Si(d,h[12])},d(h){h&&oe(p)}}}function m1(l){let p,d;return{c(){p=new po(!1),d=ri(),this.h()},l(h){p=ho(h,!1),d=ri(),this.h()},h(){p.a=d},m(h,y){p.m(l[3],h,y),Me(h,d,y)},p(h,y){y&8&&p.p(h[3])},i:tn,o:tn,d(h){h&&(oe(d),p.d())}}}function g1(l){let p,d=l[3][l[2].type]+"",h;return{c(){p=new po(!1),h=ri(),this.h()},l(y){p=ho(y,!1),h=ri(),this.h()},h(){p.a=h},m(y,v){p.m(d,y,v),Me(y,h,v)},p(y,v){v&12&&d!==(d=y[3][y[2].type]+"")&&p.p(d)},i:tn,o:tn,d(y){y&&(oe(h),p.d())}}}function y1(l){let p,d,h,y,v,a;const T=[k1,S1,w1],S=[];function D(P,O){return O&1040&&(p=null),O&1040&&(d=null),p==null&&(p=!!(P[4].hasOwnProperty("none")&P[10]==null)),p?0:(d==null&&(d=!!(P[4].hasOwnProperty("ni")&P[10]=="ni")),d?1:2)}return h=D(l,-1),y=S[h]=T[h](l),{c(){y.c(),v=ri()},l(P){y.l(P),v=ri()},m(P,O){S[h].m(P,O),Me(P,v,O),a=!0},p(P,O){let R=h;h=D(P,O),h===R?S[h].p(P,O):(Xr(),_t(S[R],1,1,()=>{S[R]=null}),Yr(),y=S[h],y?y.p(P,O):(y=S[h]=T[h](P),y.c()),ct(y,1),y.m(v.parentNode,v))},i(P){a||(ct(y),a=!0)},o(P){_t(y),a=!1},d(P){P&&oe(v),S[h].d(P)}}}function _1(l){let p,d,h,y,v,a;const T=[T1,z1,E1],S=[];function D(P,O){return O&1040&&(p=null),O&1040&&(d=null),p==null&&(p=!!(P[4].hasOwnProperty("none")&P[10]==null)),p?0:(d==null&&(d=!!(P[4].hasOwnProperty("ni")&P[10]=="ni")),d?1:2)}return h=D(l,-1),y=S[h]=T[h](l),{c(){y.c(),v=ri()},l(P){y.l(P),v=ri()},m(P,O){S[h].m(P,O),Me(P,v,O),a=!0},p(P,O){let R=h;h=D(P,O),h===R?S[h].p(P,O):(Xr(),_t(S[R],1,1,()=>{S[R]=null}),Yr(),y=S[h],y?y.p(P,O):(y=S[h]=T[h](P),y.c()),ct(y,1),y.m(v.parentNode,v))},i(P){a||(ct(y),a=!0)},o(P){_t(y),a=!1},d(P){P&&oe(v),S[h].d(P)}}}function v1(l){let p,d,h,y,v,a;const T=[P1,A1,I1],S=[];function D(P,O){return O&1040&&(p=null),O&1040&&(d=null),p==null&&(p=!!(P[4].hasOwnProperty("none")&P[10]==null)),p?0:(d==null&&(d=!!(P[4].hasOwnProperty("ni")&P[10]=="ni")),d?1:2)}return h=D(l,-1),y=S[h]=T[h](l),{c(){y.c(),v=ri()},l(P){y.l(P),v=ri()},m(P,O){S[h].m(P,O),Me(P,v,O),a=!0},p(P,O){let R=h;h=D(P,O),h===R?S[h].p(P,O):(Xr(),_t(S[R],1,1,()=>{S[R]=null}),Yr(),y=S[h],y?y.p(P,O):(y=S[h]=T[h](P),y.c()),ct(y,1),y.m(v.parentNode,v))},i(P){a||(ct(y),a=!0)},o(P){_t(y),a=!1},d(P){P&&oe(v),S[h].d(P)}}}function b1(l){let p,d;return p=new Q0({props:{data:l[4],zKey:"group"}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function x1(l){let p,d,h,y,v,a;const T=[D1,M1,C1],S=[];function D(P,O){return O&1040&&(p=null),O&1040&&(d=null),p==null&&(p=!!(P[4].hasOwnProperty("none")&P[10]==null)),p?0:(d==null&&(d=!!(P[4].hasOwnProperty("ni")&P[10]=="ni")),d?1:2)}return h=D(l,-1),y=S[h]=T[h](l),{c(){y.c(),v=ri()},l(P){y.l(P),v=ri()},m(P,O){S[h].m(P,O),Me(P,v,O),a=!0},p(P,O){let R=h;h=D(P,O),h===R?S[h].p(P,O):(Xr(),_t(S[R],1,1,()=>{S[R]=null}),Yr(),y=S[h],y?y.p(P,O):(y=S[h]=T[h](P),y.c()),ct(y,1),y.m(v.parentNode,v))},i(P){a||(ct(y),a=!0)},o(P){_t(y),a=!1},d(P){P&&oe(v),S[h].d(P)}}}function w1(l){let p,d;return p=new Kh({props:{data:l[4],zKey:l[5]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),y&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function S1(l){let p,d;return p=new Kh({props:{data:l[4].ni,zKey:l[5]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].ni),y&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function k1(l){let p,d;return p=new Kh({props:{data:l[4].none,zKey:l[5]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].none),y&32&&(v.zKey=h[5]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function E1(l){let p,d;return p=new Xh({props:{data:l[4],zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function z1(l){let p,d;return p=new Xh({props:{data:l[4].ni,zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].ni),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function T1(l){let p,d;return p=new Xh({props:{data:l[4].none,zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].none),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function I1(l){let p,d;return p=new Yh({props:{data:l[4],zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function A1(l){let p,d;return p=new Yh({props:{data:l[4].ni,zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].ni),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function P1(l){let p,d;return p=new Yh({props:{data:l[4].none,zKey:l[5],label:l[6]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].none),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function C1(l){let p,d;return p=new Wh({props:{data:l[4],zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4]),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),y&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function M1(l){let p,d;return p=new Wh({props:{data:l[4].ni,zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].ni),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),y&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function D1(l){let p,d;return p=new Wh({props:{data:l[4].none,zKey:l[5],label:l[6],topic_prev_available:l[7]}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&16&&(v.data=h[4].none),y&32&&(v.zKey=h[5]),y&64&&(v.label=h[6]),y&128&&(v.topic_prev_available=h[7]),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function Fm(l){let p,d,h,y,v=l[11][l[2].type]+"";return{c(){p=Oe("br"),d=kt(),h=Oe("span"),y=new po(!1),this.h()},l(a){p=Ne(a,"BR",{}),d=Et(a),h=Ne(a,"SPAN",{class:!0});var T=Ge(h);y=ho(T,!1),T.forEach(oe),this.h()},h(){y.a=null,re(h,"class","text-small")},m(a,T){Me(a,p,T),Me(a,d,T),Me(a,h,T),y.m(v,h)},p(a,T){T&2052&&v!==(v=a[11][a[2].type]+"")&&y.p(v)},d(a){a&&(oe(p),oe(d),oe(h))}}}function L1(l){let p,d,h,y,v,a,T,S,D,P,O,R,X,$,pe,le;const me=[d1,f1],ve=[];function nt(Ze,Xe){return Ze[8]==!0|Ze[8]==null?0:1}d=nt(l),h=ve[d]=me[d](l);let Ve=l[12]!=null&&Bm(l);const Ue=[x1,b1,v1,_1,y1,g1,m1],tt=[];function Vt(Ze,Xe){return Xe&12&&(a=null),Xe&12&&(T=null),Xe&12&&(S=null),Xe&12&&(D=null),Xe&12&&(P=null),Xe&12&&(O=null),a==null&&(a=!!(Ze[3]=="StackedBarChart"|Ze[3].hasOwnProperty(Ze[2].type)&Ze[3][Ze[2].type]=="StackedBarChart")),a?0:(T==null&&(T=!!(Ze[3]=="GroupChart"|Ze[3].hasOwnProperty(Ze[2].type)&Ze[3][Ze[2].type]=="GroupChart")),T?1:(S==null&&(S=!!(Ze[3]=="ProfileChart"|Ze[3].hasOwnProperty(Ze[2].type)&Ze[3][Ze[2].type]=="ProfileChart")),S?2:(D==null&&(D=!!(Ze[3]=="BarChart"|Ze[3].hasOwnProperty(Ze[2].type)&Ze[3][Ze[2].type]=="BarChart")),D?3:(P==null&&(P=!!(Ze[3]=="ColChart"|Ze[3].hasOwnProperty(Ze[2].type)&Ze[3][Ze[2].type]=="ColChart")),P?4:(O==null&&(O=!!Ze[3].hasOwnProperty(Ze[2].type)),O?5:6)))))}R=Vt(l,-1),X=tt[R]=Ue[R](l);let qt=l[11]!=null&l[10]!=null&&Fm(l);return{c(){p=Oe("div"),h.c(),y=kt(),Ve&&Ve.c(),v=kt(),X.c(),$=kt(),qt&&qt.c(),this.h()},l(Ze){p=Ne(Ze,"DIV",{class:!0,style:!0});var Xe=Ge(p);h.l(Xe),y=Et(Xe),Ve&&Ve.l(Xe),v=Et(Xe),X.l(Xe),$=Et(Xe),qt&&qt.l(Xe),Xe.forEach(oe),this.h()},h(){re(p,"class",pe=Om(l[0])),re(p,"style",l[1])},m(Ze,Xe){Me(Ze,p,Xe),ve[d].m(p,null),Ae(p,y),Ve&&Ve.m(p,null),Ae(p,v),tt[R].m(p,null),Ae(p,$),qt&&qt.m(p,null),le=!0},p(Ze,[Xe]){let wt=d;d=nt(Ze),d===wt?ve[d].p(Ze,Xe):(Xr(),_t(ve[wt],1,1,()=>{ve[wt]=null}),Yr(),h=ve[d],h?h.p(Ze,Xe):(h=ve[d]=me[d](Ze),h.c()),ct(h,1),h.m(p,y)),Ze[12]!=null?Ve?Ve.p(Ze,Xe):(Ve=Bm(Ze),Ve.c(),Ve.m(p,v)):Ve&&(Ve.d(1),Ve=null);let jt=R;R=Vt(Ze,Xe),R===jt?tt[R].p(Ze,Xe):(Xr(),_t(tt[jt],1,1,()=>{tt[jt]=null}),Yr(),X=tt[R],X?X.p(Ze,Xe):(X=tt[R]=Ue[R](Ze),X.c()),ct(X,1),X.m(p,$)),Ze[11]!=null&Ze[10]!=null?qt?qt.p(Ze,Xe):(qt=Fm(Ze),qt.c(),qt.m(p,null)):qt&&(qt.d(1),qt=null),(!le||Xe&1&&pe!==(pe=Om(Ze[0])))&&re(p,"class",pe),(!le||Xe&2)&&re(p,"style",Ze[1])},i(Ze){le||(ct(h),ct(X),le=!0)},o(Ze){_t(h),_t(X),le=!1},d(Ze){Ze&&oe(p),ve[d].d(),Ve&&Ve.d(),tt[R].d(),qt&&qt.d()}}}function Om(l){return l=="empty"?"":"div-grey-box"}function R1(l,p,d){let{id:h}=p,{style:y=""}=p,{place:v}=p,{content:a}=p,{chart_data:T=null}=p,{zKey:S="ni"}=p,{label:D=null}=p,{topic_prev_available:P=!0}=p,{i_button:O=!0}=p,{heading:R=null}=p,{chart_compare_type:X}=p,{compare_content:$=null}=p,{year:pe=null}=p;return l.$$set=le=>{"id"in le&&d(0,h=le.id),"style"in le&&d(1,y=le.style),"place"in le&&d(2,v=le.place),"content"in le&&d(3,a=le.content),"chart_data"in le&&d(4,T=le.chart_data),"zKey"in le&&d(5,S=le.zKey),"label"in le&&d(6,D=le.label),"topic_prev_available"in le&&d(7,P=le.topic_prev_available),"i_button"in le&&d(8,O=le.i_button),"heading"in le&&d(9,R=le.heading),"chart_compare_type"in le&&d(10,X=le.chart_compare_type),"compare_content"in le&&d(11,$=le.compare_content),"year"in le&&d(12,pe=le.year)},[h,y,v,a,T,S,D,P,O,R,X,$,pe]}class Fu extends lr{constructor(p){super(),ur(this,p,R1,L1,sr,{id:0,style:1,place:2,content:3,chart_data:4,zKey:5,label:6,topic_prev_available:7,i_button:8,heading:9,chart_compare_type:10,compare_content:11,year:12})}}function Nm(l,p,d){const h=l.slice();return h[15]=p[d],h[17]=d,h}function Um(l){let p,d;return p=new Fu({props:{id:l[6][l[11][l[17]]].id,style:l[6][l[11][l[17]]].style,place:l[3],year:l[6][l[11][l[17]]].year,content:l[6][l[11][l[17]]].content,chart_data:l[6][l[11][l[17]]].chart_data,zKey:l[6][l[11][l[17]]].zKey,label:l[6][l[11][l[17]]].label,topic_prev_available:l[6][l[11][l[17]]].topic_prev_available,chart_compare_type:l[8],i_button:l[6][l[11][l[17]]].i_button,heading:l[6][l[11][l[17]]].title,compare_content:l[6][l[11][l[17]]].compare_content}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&64&&(v.id=h[6][h[11][h[17]]].id),y&64&&(v.style=h[6][h[11][h[17]]].style),y&8&&(v.place=h[3]),y&64&&(v.year=h[6][h[11][h[17]]].year),y&64&&(v.content=h[6][h[11][h[17]]].content),y&64&&(v.chart_data=h[6][h[11][h[17]]].chart_data),y&64&&(v.zKey=h[6][h[11][h[17]]].zKey),y&64&&(v.label=h[6][h[11][h[17]]].label),y&64&&(v.topic_prev_available=h[6][h[11][h[17]]].topic_prev_available),y&256&&(v.chart_compare_type=h[8]),y&64&&(v.i_button=h[6][h[11][h[17]]].i_button),y&64&&(v.heading=h[6][h[11][h[17]]].title),y&64&&(v.compare_content=h[6][h[11][h[17]]].compare_content),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function Vm(l){let p,d;return p=new Fu({props:{id:l[6][l[11][l[17]]].id,style:l[6][l[11][l[17]]].style,place:l[3],year:l[6][l[11][l[17]]].year,content:l[6][l[11][l[17]]].content,chart_data:l[6][l[11][l[17]]].chart_data,zKey:l[6][l[11][l[17]]].zKey,label:l[6][l[11][l[17]]].label,topic_prev_available:l[6][l[11][l[17]]].topic_prev_available,chart_compare_type:l[8],i_button:l[6][l[11][l[17]]].i_button,compare_content:l[6][l[11][l[17]]].compare_content}}),{c(){ui(p.$$.fragment)},l(h){ci(p.$$.fragment,h)},m(h,y){pi(p,h,y),d=!0},p(h,y){const v={};y&64&&(v.id=h[6][h[11][h[17]]].id),y&64&&(v.style=h[6][h[11][h[17]]].style),y&8&&(v.place=h[3]),y&64&&(v.year=h[6][h[11][h[17]]].year),y&64&&(v.content=h[6][h[11][h[17]]].content),y&64&&(v.chart_data=h[6][h[11][h[17]]].chart_data),y&64&&(v.zKey=h[6][h[11][h[17]]].zKey),y&64&&(v.label=h[6][h[11][h[17]]].label),y&64&&(v.topic_prev_available=h[6][h[11][h[17]]].topic_prev_available),y&256&&(v.chart_compare_type=h[8]),y&64&&(v.i_button=h[6][h[11][h[17]]].i_button),y&64&&(v.compare_content=h[6][h[11][h[17]]].compare_content),p.$set(v)},i(h){d||(ct(p.$$.fragment,h),d=!0)},o(h){_t(p.$$.fragment,h),d=!1},d(h){hi(p,h)}}}function qm(l){let p=l[6][l[11][l[17]]].hasOwnProperty("show")&&l[6][l[11][l[17]]].show.includes(l[3].type),d,h=!l[6][l[11][l[17]]].hasOwnProperty("show"),y,v,a=p&&Um(l),T=h&&Vm(l);return{c(){a&&a.c(),d=kt(),T&&T.c(),y=ri()},l(S){a&&a.l(S),d=Et(S),T&&T.l(S),y=ri()},m(S,D){a&&a.m(S,D),Me(S,d,D),T&&T.m(S,D),Me(S,y,D),v=!0},p(S,D){D&72&&(p=S[6][S[11][S[17]]].hasOwnProperty("show")&&S[6][S[11][S[17]]].show.includes(S[3].type)),p?a?(a.p(S,D),D&72&&ct(a,1)):(a=Um(S),a.c(),ct(a,1),a.m(d.parentNode,d)):a&&(Xr(),_t(a,1,1,()=>{a=null}),Yr()),D&64&&(h=!S[6][S[11][S[17]]].hasOwnProperty("show")),h?T?(T.p(S,D),D&64&&ct(T,1)):(T=Vm(S),T.c(),ct(T,1),T.m(y.parentNode,y)):T&&(Xr(),_t(T,1,1,()=>{T=null}),Yr())},i(S){v||(ct(a),ct(T),v=!0)},o(S){_t(a),_t(T),v=!1},d(S){S&&(oe(d),oe(y)),a&&a.d(S),T&&T.d(S)}}}function jm(l){let p,d,h=l[2].toLocaleLowerCase()+"",y,v,a,T,S=l[10]?"- Click to hide":"+ Click to expand",D,P,O,R,X,$=l[10]&&Gm(l);return{c(){p=Oe("h3"),d=Nt("More "),y=Nt(h),v=Nt(` statistics\r
                    `),a=Oe("button"),T=Oe("span"),D=Nt(S),P=kt(),$&&$.c(),O=ri(),this.h()},l(pe){p=Ne(pe,"H3",{});var le=Ge(p);d=Ut(le,"More "),y=Ut(le,h),v=Ut(le,` statistics\r
                    `),a=Ne(le,"BUTTON",{class:!0});var me=Ge(a);T=Ne(me,"SPAN",{class:!0});var ve=Ge(T);D=Ut(ve,S),ve.forEach(oe),me.forEach(oe),le.forEach(oe),P=Et(pe),$&&$.l(pe),O=ri(),this.h()},h(){re(T,"class","text-small"),re(a,"class","btn-toggle-more-stats svelte-bh1v5l")},m(pe,le){Me(pe,p,le),Ae(p,d),Ae(p,y),Ae(p,v),Ae(p,a),Ae(a,T),Ae(T,D),Me(pe,P,le),$&&$.m(pe,le),Me(pe,O,le),R||(X=Sp(a,"click",l[12]),R=!0)},p(pe,le){le&4&&h!==(h=pe[2].toLocaleLowerCase()+"")&&Si(y,h),le&1024&&S!==(S=pe[10]?"- Click to hide":"+ Click to expand")&&Si(D,S),pe[10]?$?$.p(pe,le):($=Gm(pe),$.c(),$.m(O.parentNode,O)):$&&($.d(1),$=null)},d(pe){pe&&(oe(p),oe(P),oe(O)),$&&$.d(pe),R=!1,X()}}}function Gm(l){let p,d;return{c(){p=Oe("div"),d=new po(!1),this.h()},l(h){p=Ne(h,"DIV",{class:!0});var y=Ge(p);d=ho(y,!1),y.forEach(oe),this.h()},h(){d.a=null,re(p,"class","accordion-more svelte-bh1v5l")},m(h,y){Me(h,p,y),d.m(l[7],p)},p(h,y){y&128&&d.p(h[7])},d(h){h&&oe(p)}}}function B1(l){let p,d,h,y,v,a,T,S,D,P,O,R,X,$,pe=l[3].name+"",le,me,ve,nt,Ve,Ue,tt,Vt,qt,Ze,Xe,wt,jt,we=wi({length:l[11].length}),qe=[];for(let ht=0;ht<we.length;ht+=1)qe[ht]=qm(Nm(l,we,ht));const Be=ht=>_t(qe[ht],1,1,()=>{qe[ht]=null});let Ye=l[7]!=""&&jm(l);return{c(){p=Oe("div"),d=Oe("h2"),h=Oe("button"),y=Oe("span"),v=Oe("img"),T=kt(),S=Nt(l[2]),R=kt(),X=Oe("div"),$=Oe("div"),le=Nt(pe),me=Nt(". "),ve=new po(!1),nt=kt(),Ve=Oe("span"),Ue=Nt(l[5]),tt=kt(),Vt=Oe("div");for(let ht=0;ht<qe.length;ht+=1)qe[ht].c();Ze=kt(),Ye&&Ye.c(),this.h()},l(ht){p=Ne(ht,"DIV",{class:!0});var mt=Ge(p);d=Ne(mt,"H2",{class:!0,id:!0});var Mt=Ge(d);h=Ne(Mt,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var ki=Ge(h);y=Ne(ki,"SPAN",{class:!0});var Je=Ge(y);v=Ne(Je,"IMG",{src:!0,alt:!0,height:!0,class:!0}),T=Et(Je),S=Ut(Je,l[2]),Je.forEach(oe),ki.forEach(oe),Mt.forEach(oe),R=Et(mt),X=Ne(mt,"DIV",{id:!0,class:!0,"aria-labelledby":!0});var vt=Ge(X);$=Ne(vt,"DIV",{class:!0});var vi=Ge($);le=Ut(vi,pe),me=Ut(vi,". "),ve=ho(vi,!1),nt=Et(vi),Ve=Ne(vi,"SPAN",{class:!0});var vn=Ge(Ve);Ue=Ut(vn,l[5]),vn.forEach(oe),tt=Et(vi),Vt=Ne(vi,"DIV",{class:!0});var $n=Ge(Vt);for(let zn=0;zn<qe.length;zn+=1)qe[zn].l($n);$n.forEach(oe),Ze=Et(vi),Ye&&Ye.l(vi),vi.forEach(oe),vt.forEach(oe),mt.forEach(oe),this.h()},h(){Ah(v.src,a=ni+"/img/"+l[1])||re(v,"src",a),re(v,"alt","logo"),re(v,"height","40"),re(v,"class","accordion-dept-logo"),re(y,"class","accordion-button-title"),re(h,"class","accordion-button collapsed"),re(h,"type","button"),re(h,"data-bs-toggle","collapse"),re(h,"data-bs-target",D="#panelsStayOpen-collapse"+l[0]),re(h,"aria-expanded","false"),re(h,"aria-controls",P="panelsStayOpen-collapse"+l[0]),re(d,"class","accordion-header"),re(d,"id",O="panelsStayOpen-heading"+l[0]),ve.a=nt,re(Ve,"class","accordion-button-title-sub"),re(Vt,"class","grid mt svelte-bh1v5l"),Zu(()=>l[13].call(Vt)),re($,"class","accordion-body"),re(X,"id",Xe="panelsStayOpen-collapse"+l[0]),re(X,"class","accordion-collapse collapse"),re(X,"aria-labelledby",wt="panelsStayOpen-heading"+l[0]),re(p,"class","accordion-item")},m(ht,mt){Me(ht,p,mt),Ae(p,d),Ae(d,h),Ae(h,y),Ae(y,v),Ae(y,T),Ae(y,S),Ae(p,R),Ae(p,X),Ae(X,$),Ae($,le),Ae($,me),ve.m(l[4],$),Ae($,nt),Ae($,Ve),Ae(Ve,Ue),Ae($,tt),Ae($,Vt);for(let Mt=0;Mt<qe.length;Mt+=1)qe[Mt]&&qe[Mt].m(Vt,null);qt=Ku(Vt,l[13].bind(Vt)),Ae($,Ze),Ye&&Ye.m($,null),jt=!0},p(ht,[mt]){if((!jt||mt&2&&!Ah(v.src,a=ni+"/img/"+ht[1]))&&re(v,"src",a),(!jt||mt&4)&&Si(S,ht[2]),(!jt||mt&1&&D!==(D="#panelsStayOpen-collapse"+ht[0]))&&re(h,"data-bs-target",D),(!jt||mt&1&&P!==(P="panelsStayOpen-collapse"+ht[0]))&&re(h,"aria-controls",P),(!jt||mt&1&&O!==(O="panelsStayOpen-heading"+ht[0]))&&re(d,"id",O),(!jt||mt&8)&&pe!==(pe=ht[3].name+"")&&Si(le,pe),(!jt||mt&16)&&ve.p(ht[4]),(!jt||mt&32)&&Si(Ue,ht[5]),mt&2376){we=wi({length:ht[11].length});let Mt;for(Mt=0;Mt<we.length;Mt+=1){const ki=Nm(ht,we,Mt);qe[Mt]?(qe[Mt].p(ki,mt),ct(qe[Mt],1)):(qe[Mt]=qm(ki),qe[Mt].c(),ct(qe[Mt],1),qe[Mt].m(Vt,null))}for(Xr(),Mt=we.length;Mt<qe.length;Mt+=1)Be(Mt);Yr()}ht[7]!=""?Ye?Ye.p(ht,mt):(Ye=jm(ht),Ye.c(),Ye.m($,null)):Ye&&(Ye.d(1),Ye=null),(!jt||mt&1&&Xe!==(Xe="panelsStayOpen-collapse"+ht[0]))&&re(X,"id",Xe),(!jt||mt&1&&wt!==(wt="panelsStayOpen-heading"+ht[0]))&&re(X,"aria-labelledby",wt)},i(ht){if(!jt){for(let mt=0;mt<we.length;mt+=1)ct(qe[mt]);jt=!0}},o(ht){qe=qe.filter(Boolean);for(let mt=0;mt<qe.length;mt+=1)_t(qe[mt]);jt=!1},d(ht){ht&&oe(p),or(qe,ht),qt(),Ye&&Ye.d()}}}function F1(l,p,d){let{id:h}=p,{img:y}=p,{heading:v}=p,{place:a}=p,{sub_heading:T}=p,{description:S}=p,{boxes:D}=p,{more:P}=p,{chart_compare_type:O}=p,R=Object.keys(D),X,$=!1;const pe=()=>{d(10,$=!$)};function le(){X=this.clientWidth,d(9,X)}return l.$$set=me=>{"id"in me&&d(0,h=me.id),"img"in me&&d(1,y=me.img),"heading"in me&&d(2,v=me.heading),"place"in me&&d(3,a=me.place),"sub_heading"in me&&d(4,T=me.sub_heading),"description"in me&&d(5,S=me.description),"boxes"in me&&d(6,D=me.boxes),"more"in me&&d(7,P=me.more),"chart_compare_type"in me&&d(8,O=me.chart_compare_type)},[h,y,v,a,T,S,D,P,O,X,$,R,pe,le]}class Bs extends lr{constructor(p){super(),ur(this,p,F1,B1,sr,{id:0,img:1,heading:2,place:3,sub_heading:4,description:5,boxes:6,more:7,chart_compare_type:8})}}function Zm(l){let p,d,h,y,v,a,T,S=l[2].substr(0,2).toUpperCase()=="BT"&l[9](l[2]),D=S&&Km(l);return{c(){p=Oe("div"),d=Oe("div"),h=Nt("You searched for "),y=Oe("strong"),v=Nt(l[2]),a=Nt("."),T=kt(),D&&D.c(),this.h()},l(P){p=Ne(P,"DIV",{id:!0,class:!0});var O=Ge(p);d=Ne(O,"DIV",{});var R=Ge(d);h=Ut(R,"You searched for "),y=Ne(R,"STRONG",{});var X=Ge(y);v=Ut(X,l[2]),X.forEach(oe),a=Ut(R,"."),R.forEach(oe),T=Et(O),D&&D.l(O),O.forEach(oe),this.h()},h(){re(p,"id","search-result"),re(p,"class","svelte-19iexfz")},m(P,O){Me(P,p,O),Ae(p,d),Ae(d,h),Ae(d,y),Ae(y,v),Ae(d,a),Ae(p,T),D&&D.m(p,null)},p(P,O){O&4&&Si(v,P[2]),O&4&&(S=P[2].substr(0,2).toUpperCase()=="BT"&P[9](P[2])),S?D?D.p(P,O):(D=Km(P),D.c(),D.m(p,null)):D&&(D.d(1),D=null)},d(P){P&&oe(p),D&&D.d()}}}function Km(l){let p,d,h,y=l[0].name+"",v,a,T,S,D,P,O,R,X,$,pe,le,me,ve,nt;return{c(){p=Oe("div"),d=Nt("This postcode is located within the "),h=Oe("strong"),v=Nt(y),a=Nt(" District Electoral Area."),T=kt(),S=Oe("div"),D=Nt("You can view more localised information for this postcode at Super Data Zone level by selecting "),P=Oe("strong"),O=Oe("a"),R=Nt(l[3]),$=Nt(" or at Data Zone level by selecting "),pe=Oe("strong"),le=Oe("a"),me=Nt(l[5]),nt=Nt(". Note that many of the statistics produced are not broken down to these smaller geography levels."),this.h()},l(Ve){p=Ne(Ve,"DIV",{style:!0});var Ue=Ge(p);d=Ut(Ue,"This postcode is located within the "),h=Ne(Ue,"STRONG",{});var tt=Ge(h);v=Ut(tt,y),tt.forEach(oe),a=Ut(Ue," District Electoral Area."),Ue.forEach(oe),T=Et(Ve),S=Ne(Ve,"DIV",{style:!0});var Vt=Ge(S);D=Ut(Vt,"You can view more localised information for this postcode at Super Data Zone level by selecting "),P=Ne(Vt,"STRONG",{});var qt=Ge(P);O=Ne(qt,"A",{href:!0});var Ze=Ge(O);R=Ut(Ze,l[3]),Ze.forEach(oe),qt.forEach(oe),$=Ut(Vt," or at Data Zone level by selecting "),pe=Ne(Vt,"STRONG",{});var Xe=Ge(pe);le=Ne(Xe,"A",{href:!0});var wt=Ge(le);me=Ut(wt,l[5]),wt.forEach(oe),Xe.forEach(oe),nt=Ut(Vt,". Note that many of the statistics produced are not broken down to these smaller geography levels."),Vt.forEach(oe),this.h()},h(){$e(p,"margin-left","1em"),re(O,"href",X=ni+"/"+l[4]),re(le,"href",ve=ni+"/"+l[6]),$e(S,"margin-left","1em")},m(Ve,Ue){Me(Ve,p,Ue),Ae(p,d),Ae(p,h),Ae(h,v),Ae(p,a),Me(Ve,T,Ue),Me(Ve,S,Ue),Ae(S,D),Ae(S,P),Ae(P,O),Ae(O,R),Ae(S,$),Ae(S,pe),Ae(pe,le),Ae(le,me),Ae(S,nt)},p(Ve,Ue){Ue&1&&y!==(y=Ve[0].name+"")&&Si(v,y),Ue&8&&Si(R,Ve[3]),Ue&16&&X!==(X=ni+"/"+Ve[4])&&re(O,"href",X),Ue&32&&Si(me,Ve[5]),Ue&64&&ve!==(ve=ni+"/"+Ve[6])&&re(le,"href",ve)},d(Ve){Ve&&(oe(p),oe(T),oe(S))}}}function O1(l){let p=l[7]()&l[1].search_code==l[0].code&l[8](),d,h=p&&Zm(l);return{c(){h&&h.c(),d=ri()},l(y){h&&h.l(y),d=ri()},m(y,v){h&&h.m(y,v),Me(y,d,v)},p(y,[v]){v&3&&(p=y[7]()&y[1].search_code==y[0].code&y[8]()),p?h?h.p(y,v):(h=Zm(y),h.c(),h.m(d.parentNode,d)):h&&(h.d(1),h=null)},i:tn,o:tn,d(y){y&&oe(d),h&&h.d(y)}}}function N1(l,p,d){let{place:h}=p,{storage:y=localStorage}=p,v;function a(){return y.hasOwnProperty("search_name")}function T(){return d(2,v=y.search_name),y.removeItem("search_name"),!0}let S,D,P,O;Ap(()=>{setInterval(function(){a()&y.search_code==h.code&&(d(2,v=y.search_name),T())},500)});function R(X){let $=X.replaceAll(" ","");return fetch("https://raw.githubusercontent.com/nisra-explore/local-stats/main/search_data/CPD_LIGHT_JULY_2024.csv").then(pe=>pe.text()).then(pe=>{const le=pe.split(`
`);let me;for(let ve=0;ve<le.length;ve++){let nt=le[ve].split(",");if(nt[0]==$){me=nt;break}}d(3,S=me[21]),d(4,D=me[20]),d(5,P=me[19]),d(6,O=me[18])}),!0}return l.$$set=X=>{"place"in X&&d(0,h=X.place),"storage"in X&&d(1,y=X.storage)},[h,y,v,S,D,P,O,a,T,R]}class U1 extends lr{constructor(p){super(),ur(this,p,N1,O1,sr,{place:0,storage:1})}}function Hm(l,p,d){const h=l.slice();return h[32]=p[d],h[34]=d,h}function Wm(l,p,d){const h=l.slice();return h[35]=p[d],h[34]=d,h}function Xm(l,p,d){const h=l.slice();return h[37]=p[d],h}function Ym(l,p,d){const h=l.slice();return h[35]=p[d],h[34]=d,h}function Jm(l){let p,d,h,y,v,a="Home",T,S=" &gt; ",D,P,O,R,X=l[0].place.name.replace(/_/g," ")+"",$,pe,le,me,ve,nt="Search for your area:",Ve,Ue,tt,Vt,qt=`// Share button\r
						// Possible tooltip: https://stackoverflow.com/questions/37798967/tooltip-on-click-of-a-button\r
\r
						function copyToClipboard(text) {\r
							var inputc = document.body.appendChild(\r
								document.createElement("input"),\r
							);\r
							inputc.value = window.location.href;\r
							inputc.select();\r
							document.execCommand("copy");\r
							inputc.parentNode.removeChild(inputc);\r
							alert("URL Copied.");\r
						}\r
\r
						(function (win, doc) {\r
							const testButton = doc.createElement("button");\r
							testButton.setAttribute("type", "share");\r
							if (testButton.type != "share") {\r
								win.addEventListener("click", function (ev) {\r
									ev = ev || win.event;\r
									let target = ev.target;\r
									let button = target.closest(\r
										'button[type="share"]',\r
									);\r
									if (button) {\r
										const title = "Share URL";\r
										const url = win.location.href;\r
										if (navigator.share) {\r
											navigator.share({\r
												title: title,\r
												url: url,\r
											});\r
										} else {\r
											copyToClipboard();\r
										}\r
									}\r
								});\r
							}\r
						})(this, this.document);`,Ze,Xe,wt=`<button class="btn svelte-lx8mb2" style="width: 33%" alt="Opens the About page" onclick="window.location.href=&#39;${ni}/about&#39;;">About</button> <button class="btn svelte-lx8mb2" style="width: 33%" title="Click to print this page to pdf or printer" onclick="window.print();return false;">Print / PDF</button> <button class="btn svelte-lx8mb2" style="width: 30%" type="share" alt="Share this page">Share</button>`,jt,we,qe,Be,Ye,ht,mt,Mt,ki,Je,vt,vi,vn,$n,zn,Fi,zr,bi,Tn,Jr,bn,Xt,cr,fi,qi,Dr,nn,yr,ji,er,xn,hn,Gi,tr,Wi,Tr,ir,jn,Xi=l[0].place.type!="ni"&&Qm(l);Ue=new u_({props:{search_data:l[0].search_data,group:"typestr",search:!0}}),Ue.$on("select",l[9]),we=new U1({props:{place:l[0].place}}),Ye=new Fu({props:{id:"overview",i_button:!1,heading:"About "+l[0].place.name.replace(/_/g," "),place:l[0].place,style:"line-height: 1.3;",content:{ni:"Northern Ireland has 11 Councils or Local Government Districts (LGDs),  which can be subdivided into electoral areas (District Electoral Areas DEAs), then further into Super Data Zones and Data Zones. Statistics can be viewed for these smaller areas.",lgd:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+Er[l[0].place.type].pl+".  It includes the larger settlements of "+l[0].place.lgd_location_description+".",dea:l[0].place.name+" is one of "+l[0].place.count.toLocaleString()+" "+Er[l[0].place.type].pl+" in Northern Ireland.  It is within <a href = '"+ni+"/"+l[0].place.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+l[0].place.parents[0].name+" </a> and covers "+l[0].place.dea_location_description+".",sdz:l[0].place.name.replace(/_/g," ")+" is one of "+l[0].place.count.toLocaleString()+" "+Er[l[0].place.type].pl+". Super Data Zones are new statistical areas developed for census. They are broadly similar in population size and housing type.",dz:l[0].place.name.replace(/_/g," ")+" is one of "+l[0].place.count.toLocaleString()+" "+Er[l[0].place.type].pl+".  Data Zones are smaller divisions of Super Data Zones. There are on average 4 in each Super Data Zone."},chart_compare_type:l[6]}}),mt=new Fu({props:{id:"pop",place:l[0].place,year:"Population estimates "+Ke("MYETotal",l[0].place),content:'<span class="text-big" style="font-size: 2.8em;">'+l[0].place.data.MYETotal.value.toLocaleString()+"</span>",chart_compare_type:l[6],compare_content:{ni:"",lgd:'<span class = "em" style = "background-color: lightgrey">'+yp(l[0].place.data.population.value[2021].all/l[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population<br>The "+l[10](l[0].place.data.population.value_rank[2021].all)+" population of 11 Councils",dea:'<span class = "em" style = "background-color: lightgrey">'+yp(l[0].place.data.population.value[2021].all/l[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population",sdz:"Data not available for area comparison",dz:" Data not available for area comparison"}}}),ki=new Fu({props:{id:"popden",place:l[0].place,year:"Population estimates "+Ke("MYETotal",l[0].place),content:'<div class = "row" style = "display: flex; align-items: center"><div style="font-weight: bold; font-size: 2.8em;">'+rg(l[0].place)+'</div><div style = "margin-left: 10px; line-height: 1.25em;"> people per square kilometer</div></div>',chart_compare_type:l[6],compare_content:{ni:"",lgd:l[18](l[0].place),dea:l[18](l[0].place),sdz:l[18](l[0].place),dz:l[18](l[0].place)}}});function Lr(N,st){return N[0].place.type!="ni"?q1:V1}let Rr=Lr(l),fn=Rr(l);function ra(N){l[20](N)}let Ir={location:{bounds:l[0].place.bounds},options:{fitBoundsOptions:{padding:20}},style:c_,$$slots:{default:[G1]},$$scope:{ctx:l}};l[3]!==void 0&&(Ir.map=l[3]),Fi=new Q_({props:Ir}),Ns.push(()=>g_(Fi,"map",ra));let Yi=l[0].place.type!="ni"&&tg(l);function Qr(N,st){return N[0].place.children[0]?K1:Z1}let Br=Qr(l),In=Br(l);return qi=new Bs({props:{id:"people",img:"nisra-taxonomy-icon-census.png",heading:"People and communities",place:l[0].place,sub_heading:l[16]("People and communities",l[0].place),description:"",chart_compare_type:l[6],boxes:{box_1:{id:"popchange",year:"Population Estimates "+Ke("BroadAge",l[0].place),content:l[11](l[0].place),show:["ni","lgd"]},box_1a:{id:"popchange",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Population change</span>"},box_2:{id:"broadage",year:"Population Estimates "+Ke("BroadAge",l[0].place),content:"GroupChart",chart_data:l[7]("BroadAge"),show:["ni","lgd","dea","sdz"]},box_2a:{id:"age",year:l[15]("age"),content:"GroupChart",chart_data:l[7]("age"),show:["dz"]},box_3:{id:"hhsize",year:l[15]("hh_size"),content:"GroupChart",chart_data:l[7]("hh_size")},box_4:{id:"religion",year:l[15]("religion_or_religion_brought_up_in"),content:"GroupChart",chart_data:l[7]("religion_or_religion_brought_up_in")},box_5:{id:"language",year:l[15]("mainlang"),content:"GroupChart",chart_data:l[7]("mainlang")},box_6:{id:"houseprices",year:Ke("houseprices",l[0].place),content:"<span class='text-big'>£"+l[12]("houseprices.value.SP").toLocaleString(void 0,{maximumFractionDigits:0})+"</span><p><span class='text-big'>"+(l[12]("houseprices.value.HPI")-100).toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> higher than Q1 2015</p>",show:["ni"]},box_6a:{id:"houseprices",year:Ke("houseprices",l[0].place),content:"<p><span class='text-big'>£"+l[12]("houseprices.value.SP").toLocaleString(void 0,{maximumFractionDigits:0})+"</span><span style='color: #1460aa'> (NI £"+l[0].ni.data.houseprices.value.SP.toLocaleString(void 0,{maximumFractionDigits:0})+") </span></p><p><span class='text-big'>"+(l[12]("houseprices.value.HPI")-100).toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> higher than in quarter 1 2015<span style='color: #1460aa'> (NI "+(l[0].ni.data.houseprices.value.HPI-100).toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_6b:{id:"houseprices",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Average house price</span>"}},more:`More information on the size of the population is available in the latest <a href='https://www.nisra.gov.uk/publications/2022-mid-year-population-estimates-northern-ireland'>mid-year estimates release</a>, \r
					which includes an <a href='https://www.nisra.gov.uk/system/files/statistics/MYE22-summary.pdf'>infographic</a>, \r
					<a href='https://www.nisra.gov.uk/system/files/statistics/MYE22-Factsheets.pdf'>Fact Sheets</a>, \r
					a <a href='https://www.nisra.gov.uk/system/files/statistics/Statistical%20Bulletin%20-%202022%20Mid-year%20Population%20Estimates%20for%20Northern%20Ireland.pdf'>publication</a> \r
					and statistical tables. Population characteristics are from the census data which can be explored further in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a>, \r
					bespoke tables can be created using the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a> and the NISRA website has \r
					<a href='https://www.nisra.gov.uk/publications/census-2021-statistical-bulletins'>statistical bulletins</a> providing commentary on a range of census population characteristics.`}}),nn=new Bs({props:{id:"health",img:"nisra-taxonomy-icon-health.png",heading:"Health and social care",place:l[0].place,sub_heading:l[16]("Health and social care",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_0:{id:"generalhealth",year:l[15]("general_health"),content:"GroupChart",chart_data:l[7]("general_health")},box_2a:{id:"wellbeing",year:Ke("wellbeing",l[0].place),content:"<p>Happiness</p><span class='text-big'>"+l[12]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy. </span><p>Life Satisfaction</p><span class='text-big'>"+l[12]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><p>Loneliness</p><span class='text-big'>"+l[12]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'>  of people who feel lonely at least some of the time. </span>",show:["ni"]},box_2b:{id:"wellbeing",year:Ke("wellbeing",l[0].place),content:"<p>Happiness</p><span class='text-big'>"+l[12]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy.</span><span style='color: #1460aa'> (NI "+l[0].ni.data.Happy.value+"/10) </span></p><p>Life Satisfaction</p><span class='text-big'>"+l[12]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><span style='color: #1460aa'> (NI "+l[0].ni.data.Satisfy.value+"/10) </span></p><p>Loneliness</p><span class='text-big'>"+l[12]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'> of people who feel lonely at least some of the time. </span> <span style='color: #1460aa'> (NI "+l[0].ni.data.Lonely.value+"%) </span></p>",show:["lgd"]},box_2c:{id:"wellbeing",content:"Data on happiness, life satisfaction and loneliness is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Personal wellbeing</span>"},box_3a:{id:"lifeexpectancy",year:Ke("LE",l[0].place),content:"<p>Male</p> <span class='text-big'>"+l[12]("LE.value.Males").toLocaleString()+"</span> years<p>Female</p> <span class='text-big'>"+l[12]("LE.value.Females").toLocaleString()+"</span> years",show:["ni"]},box_3b:{id:"lifeexpectancy",year:Ke("LE",l[0].place),content:"<p>Male</p> <span class='text-big'>"+l[12]("LE.value.Males").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+l[0].ni.data.LE.value.Males+") </span></p><p>Female</p> <span class='text-big'>"+l[12]("LE.value.Females").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+l[0].ni.data.LE.value.Females+") </span></p>",show:["lgd","dea"]},box_3c:{id:"lifeexpectancy",content:"Data is available for "+l[17](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Life expectancy at birth</span>"},box_4:{id:"carers",content:"GroupChart",year:l[15]("provision_care"),chart_data:l[7]("provision_care")},box_5:{id:"hospitalactivity",year:Ke("Admiss",l[0].place),content:"<p><span class='text-big'>"+l[12]("Admiss.value").toLocaleString()+"</span> hospital admissions</p><p>The most frequent primary reason was for <span class='text-bold' >"+l[12]("Admiss.text")+"</span>.</p>",show:["ni","dea"]},box_5a:{id:"hospitalactivity",content:"Data is available for "+l[17](l[0].place,"ni, dea")+" and electoral areas.",show:["lgd","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Annual admissions to hospital</span>"},box_6:{id:"primarycare",year:Ke("GP",l[0].place),content:l[14]("GP.value.PRACS",l[0].place)+"<p><span class='text-big'>"+l[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.  </span> <span class='text-big'>"+(l[12]("DEN_REG.value.Dental_Registrations")/l[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0,minimumFractionDigits:0})+"%</span> of the population are registered with a health service dentist.</p>",show:["ni"]},box_6a:{id:"primarycare",year:Ke("GP",l[0].place),content:l[14]("GP.value.PRACS",l[0].place)+"<p><span class='text-big'>"+l[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(l[12]("DEN_REG.value.Dental_Registrations")/l[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0,minimumFractionDigits:0})+"%</span> of the population are registered with a health service dentist. <span style='color: #1460aa'> (NI "+(l[0].ni.data.DEN_REG.value.Dental_Registrations/l[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["lgd","dea"]},box_6c:{id:"primarycare",content:"Data is available for "+l[17](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Primary care providers</span>"}},more:`<p>Significant volumes of information are prepared by the <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research'>Department of Health</a> \r
				and the <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/'>\r
				Business Services Organisation</a>, including statistics on <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health inequalities</a>, \r
				Primary care (including <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/1776-2/'>Medical</a>, \r
				<a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-dental-services-statistics/'>Dental</a>, \r
				<a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-pharmaceutical-services-and-prescribing-statistics/'>\r
				Pharmaceutical</a> and <a href='https://bso.hscni.net/directorates/operations/family-practitioner-services/directorates-operations-family-practitioner-services-information-unit/general-ophthalmic-services-statistics/'>\r
				Ophthalmic</a>), <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/family-health-services-statistics'>\r
				Family health services</a>, <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research/hospital-waiting-times-statistics'>\r
				Hospital waiting times statistics</a>, <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research-mental-health-and-learning-disabilities/mental-health-learning-disability-and-autism-statistics'>\r
				Mental health, learning disability and autism</a>, <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research-social-services/social-care-statistics'>\r
				Social care</a>, <a href='https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/workforce-statistics'>Workforce</a>, and COVID-19.\r
				DoH also have information on 				<a href = 'https://www.health-ni.gov.uk/topics/dhssps-statistics-and-research/health-inequalities-statistics'>Health Inequalities</a>\r
				and <a href='https://www.health-ni.gov.uk/topics/doh-statistics-and-research/doh-commissioned-surveys'> Commissioned Surveys</a> which includes the Health Survey Northern Ireland.\r
\r
				A number of <a href='https://visual.nisra.gov.uk/?body=entity/health'>interactive dashboards</a> are available and a compendium dashboard for <a href='https://visual.nisra.gov.uk/?body=entity/las'>\r
				Making Life Better</a>.\r
				\r
				The <a href='https://www.nisra.gov.uk/statistics/census/2021-census'>2021 census</a> collected data on general health, long-term conditions and carers which can \r
				be explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p><p></p>`}}),ji=new Bs({props:{id:"work",img:"nisra-taxonomy-icon-labour-market.png",heading:"Work, pay and benefits",place:l[0].place,sub_heading:l[16]("Work, pay and benefits",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"employmentrates",year:Ke("LMS",l[0].place),content:"GroupChart",chart_data:l[7]("LMS"),show:["ni","lgd"]},box_1b:{id:"employmentrates",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work status of adults</span>"},box_2a:{id:"employed",year:Ke("LMS",l[0].place),content:"<p>People employed</p> <span class='text-big'>"+l[12]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">£'+l[12]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"</span> ",show:["ni"]},box_2b:{id:"employed",year:Ke("LMS",l[0].place),content:"<p>People employed</p> <span class='text-big'>"+l[12]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">£'+l[12]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"</span> <span style='color: #1460aa'> (NI £"+l[0].ni.data.ASHE_weekly.value.toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+") </span></p>",show:["lgd"]},box_2c:{id:"employed",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work and wages</span>"},box_3b:{id:"bres",year:Ke("BRES",l[0].place),content:"GroupChart",chart_data:l[7]("BRES"),show:["ni","lgd"]},box_3c:{id:"bres",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of work</span>"},box_4:{id:"ucbenefits",year:Ke("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.UC.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.UC/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.UC/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_5:{id:"pipbenefits",year:Ke("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.PIP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.PIP/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.PIP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_6:{id:"pensionagebenefits",year:Ke("BS",l[0].place),content:'<span class="text-big">'+l[0].place.data.BS.value.RP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(l[0].place.data.BS.value.RP/l[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(l[0].ni.data.BS.value.RP/l[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}}},more:`<p>The monthly <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/labour-market-overview'>Labour Market Report</a>\r
				contains the most up to date labour market statistics. The <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/annual-survey-hours-and-earnings'>\r
				Annual Survey of Hours and Earnings</a> provides data on hourly, weekly and annual earnings. The <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/quarterly-employment-survey'>\r
				Quarterly Employment Survey</a> provides short-term employee jobs estimates for NI. Further information is available for the \r
				unemployed <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/claimant-count'>Claimant Count</a>, \r
				claimant numbers for <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/disability-benefits'>Disability Benefits</a>, \r
				and <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/work-related-benefits'>Work Related Benefits</a>. \r
				Statistics on <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/redundancies'>Redundancies</a> \r
				and <a href='https://www.nisra.gov.uk/statistics/labour-market-and-social-welfare/job-vacancies'>Job Vacancies</a> are also available. \r
				A number of <a href='https://visual.nisra.gov.uk/?body=entity/lm'>interactive dashboards</a> are available. \r
				The <a href='https://www.nisra.gov.uk/statistics/census/2021-census'>2021 census</a> collected data on occupations, industry and number of hours worked which can be \r
				explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>`}}),xn=new Bs({props:{id:"education",img:"nisra-taxonomy-icon-child-education-skills.png",heading:"Education and skills",place:l[0].place,sub_heading:l[16]("Education and skills",l[0].place),description:"",chart_compare_type:l[6],boxes:{box_1:{id:"enrollments",content:"<p style='margin:0'>Primary school <span class='text-big'>"+l[12]("Primary.value.All").toLocaleString()+"</span> <p style='margin:0'>Post primary school <span class='text-big'>"+l[12]("PostPrimary.value.All").toLocaleString()+" </span><p style='margin:0'>NI Further education colleges <span class='text-big'>"+l[12]("FE.value").toLocaleString()+"</span><p style='margin:0'>UK Higher education institutions <span class='text-big'>"+l[12]("HE.value").toLocaleString()+" </span>",year:"School:"+Ke("Primary",l[0].place)+", FE:"+Ke("FE",l[0].place)+", HE:"+Ke("HE",l[0].place),show:["ni","lgd","dea"]},box_1b:{id:"enrollments",content:"Data is available for "+l[17](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>People in education</span>"},box_2a:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(l[12]("Primary.perc.FSME")).toFixed(1)+"% </span><p style='margin:0'>Post primary school <span class='text-big'>"+Number(l[12]("PostPrimary.perc.FSME")).toFixed(1)+"% </span>",year:Ke("Primary",l[0].place),show:["ni"]},box_2b:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(l[12]("Primary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+l[0].ni.data.Primary.perc.FSME.toFixed(1)+"%) </span></p><p style='margin:0'>Post primary school <span class='text-big'>"+Number(l[12]("PostPrimary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+l[0].ni.data.PostPrimary.perc.FSME.toFixed(1)+"%) </span></p>",year:Ke("Primary",l[0].place),show:["lgd","dea"]},box_2c:{id:"fsme",content:"Data is available for "+l[17](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Pupils entitled to free school meals</span>"},box_3a:{id:"SEN",year:Ke("SEN",l[0].place),content:"<p> <span class='text-big'>"+l[12]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(l[12]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils",show:["ni"]},box_3b:{id:"SEN",year:Ke("SEN",l[0].place),content:"<p> <span class='text-big'>"+l[12]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(l[12]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils<span style='color: #1460aa'> (NI "+l[0].ni.data.AllSchools.perc.SEN.toFixed(1)+"%) </span></p>",show:["lgd","dea"]},box_3c:{id:"SEN",content:"Data is available for "+l[17](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Special educational needs (SEN)</span>"},box_4:{id:"qualifications",content:"GroupChart",year:l[15]("highest_level_of_qualifications"),chart_data:l[7]("highest_level_of_qualifications")},box_5a:{id:"attainment",year:Ke("Attainment",l[0].place),content:"<span class='text-big'>"+l[12]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C, including GCSE English and maths.</span> <span class='text-big'>",show:["ni"]},box_5b:{id:"attainment",year:Ke("Attainment",l[0].place),content:"<span class='text-big'>"+l[12]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C, including GCSE English and maths.</span>"+l[13]("Attainment.value").toLocaleString()+"<span style='color: #1460aa'>(NI "+l[0].ni.data.Attainment.value.toLocaleString(void 0,{minimumFractionDigits:1})+"%) </span>",show:["lgd"]},box_5c:{id:"attainment",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Attainment of school leavers</span>"},box_6:{id:"destination",year:Ke("Destination",l[0].place),content:"GroupChart",chart_data:l[7]("Destination"),show:["ni","lgd","dea"]},box_6b:{id:"destination",content:"Data is available for "+l[17](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Next steps for school leavers</span>"}},more:"<p>The <a href='https://www.nisra.gov.uk/statistics/children-education-and-skills/school-education-statistics'>Department of Education</a> publishes statistics on <a href='https://www.education-ni.gov.uk/articles/school-enrolments-overview'>school enrolments</a>, <a href='https://www.education-ni.gov.uk/articles/school-performance'>school performance</a>, <a href='https://www.education-ni.gov.uk/articles/school-leavers'>school leavers</a>, qualifications and destinations, <a href='https://www.education-ni.gov.uk/articles/pupil-attendance'>pupil attendance</a>, suspensions and expulsions, school meals and <a href='https://www.education-ni.gov.uk/articles/education-workforce'>education workforce</a>. The <a href='https://www.nisra.gov.uk/statistics/children-education-and-skills/higher-and-further-education-and-training-statistics'>Department for the Economy</a> publishes <a href='https://www.economy-ni.gov.uk/topics/statistics-and-economic-research/higher-education-statistics-and-research'>Higher</a> and <a href='https://www.economy-ni.gov.uk/topics/statistics-and-economic-research/further-education-statistics-and-research'>Further</a> education and <a href='https://www.economy-ni.gov.uk/articles/training-success-statistics'>training</a> statistics. The <a href='https://www.nisra.gov.uk/statistics/census/2021-census'>2021 census</a> collected data on qualifications which can be explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a> and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>"}}),Gi=new Bs({props:{id:"environment",img:"nisra-taxonomy-icon-summary-stats.png",heading:"Transport, environment and climate change",place:l[0].place,sub_heading:l[16]("Transport, environment and climate change",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"concern",year:Ke("Env_concern",l[0].place),content:"GroupChart",chart_data:l[7]("Env_concern"),show:["ni","lgd"]},box_1b:{id:"concern",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Concern about the environment</span>"},box_2:{id:"env_problem",year:Ke("Env_problem",l[0].place),content:"<p>The most important environment problems in Northern Ireland were: <span class='text-bold' 'text-big'>"+l[12]("env_problem.text")+"</span>.</p>",show:["ni"]},box_2b:{id:"env_problem",year:Ke("Env_problem",l[0].place),content:"<p>The most important environment problems in this area were: </p><p><span class='text-bold' >"+l[12]("env_problem.text")+"</span>.</p><p><span style='color: #1460aa'>(NI: "+l[0].ni.data.env_problem.text+")</span>.</p>",show:["lgd"]},box_2c:{id:"env_problem",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Environmental problems</span>"},box_3:{id:"ghg",year:Ke("Env_ghg",l[0].place),content:"<p><span class='text-big'>"+l[12]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((l[12]("Env_ghg.value.GHGALL")/l[12]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"%</span> reduction since 2005.</p>",show:["ni"]},box_3a:{id:"ghg",year:Ke("Env_ghg",l[0].place),content:"<p><span class='text-big'>"+l[12]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((l[12]("Env_ghg.value.GHGALL")/l[12]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> reduction since 2005.</p><span style='color: #1460aa'>(NI "+((l[0].ni.data.Env_ghg.value.GHGALL/l[0].ni.data.Env_ghg.value.GHGALL_BASE-1)*-100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%) </span>",show:["lgd"]},box_3c:{id:"ghg",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Greenhouse gas</span>"},box_4:{id:"active",year:Ke("Env_active",l[0].place),content:"<span class='text-big'>"+l[12]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"%</span><p>of all journeys were made by walking, cycling and public transport.</p>",show:["ni"]},box_4a:{id:"active",year:Ke("Env_active",l[0].place),content:"<span class='text-big'>"+l[12]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"%</span><p>of all journeys were made by walking, cycling and public transport.<span style='color: #1460aa'> (NI "+l[0].ni.data.Env_active.value.JWCPT+"%) </span></p>",show:["lgd"]},box_4b:{id:"active",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Active and substainable travel</span>"},box_5:{id:"waste",year:Ke("Env_waste",l[0].place),content:"GroupChart",chart_data:l[7]("Env_waste"),show:["ni","lgd"]},box_5a:{id:"waste",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Household waste</span>"},box_6:{id:"renewable",year:l[15]("renewable_energy"),content:"GroupChart",chart_data:l[7]("renewable_energy")}},more:`<p>The <a href='https://www.daera-ni.gov.uk/landing-pages/statistics'>Department of Agriculture, Environment and Rural Affairs (DAERA)</a>\r
				publishes statistics on the Environment from a range of sources, including \r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-greenhouse-gas-inventory'>greenhouse gas inventory</a>,\r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-local-authority-collected-municipal-waste-management-statistics'>\r
				local authority collected municipal waste management statistics</a>, \r
				<a href='https://www.daera-ni.gov.uk/articles/northern-ireland-environmental-statistics-report'>environmental statistics report</a>, \r
				<a href='https://www.daera-ni.gov.uk/topics/water/bathing-water-quality'>bathing water quality</a> and <a href = 'https://www.daera-ni.gov.uk/articles/air-pollution-northern-ireland'>air pollution</a>.  \r
\r
\r
	\r
\r
				The <a href='https://www.nisra.gov.uk/statistics/census/2021-census'>2021 census</a> \r
				collected data on renewable energy systems which can be\r
				explored in the <a href='https://explore.nisra.gov.uk/area-explorer-2021/'>Census Area Explorer</a> \r
				and the <a href='https://build.nisra.gov.uk/en/'>Flexible Table Builder</a>.</p>\r
				\r
				\r
			\r
				`}}),Wi=new Bs({props:{id:"crime",img:"nisra-taxonomy-icon-crime-justice.png",heading:"Crime and justice",place:l[0].place,sub_heading:l[16]("Crime and justice",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"crime",year:Ke("crime",l[0].place),content:"<p><span class='text-big'>"+l[12]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(l[12]("crime.value.allcrime")/l[12]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span> crimes recorded per 1,000 population.</p>",show:["ni"]},box_1a:{id:"crime",year:Ke("crime",l[0].place),content:"<p><span class='text-big'>"+l[12]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(l[12]("crime.value.allcrime")/l[12]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span> crimes recorded per 1,000 population.<span style='color: #1460aa'> (NI "+(l[0].ni.data.crime.value.allcrime/l[0].ni.data.MYETotal.value*1e3).toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+")</span></p>",show:["lgd","dea"]},box_1b:{id:"crime",content:"Data is available for "+l[17](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Police recorded crimes</span>"},box_2:{id:"crimetype",year:Ke("crime",l[0].place),content:"GroupChart",chart_data:l[7]("crime"),show:["ni","lgd","dea"]},box_2a:{id:"crimetype",content:"Data is available for "+l[17](l[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Types of crime</span>"},box_4:{id:"crimeworry",year:Ke("crimeworry",l[0].place),content:"<p> <span class='text-big' >"+l[12]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> of people are highly worried about crime.</p>",show:["ni"]},box_4a:{id:"crimeworry",year:Ke("crimeworry",l[0].place),content:"<p> <span class='text-big' >"+l[12]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> of people are highly worried about crime.<span style='color: #1460aa'> (NI "+l[0].ni.data.crimeworry.value.WorryC2.toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_4b:{id:"crimeworry",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Worry about crime</span>"},box_5:{id:"crimeperception",year:Ke("crimeperception",l[0].place),content:"<p> <span class='text-big' >"+l[12]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.</p>",show:["ni"]},box_5a:{id:"crimeperception",year:Ke("crimeperception",l[0].place),content:"<p> <span class='text-big' >"+l[12]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.<span style='color: #1460aa'> (NI "+l[0].ni.data.crimeperception.value.ASB8.toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_5b:{id:"crimeperception",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Views on antisocial behaviour</span>"}},more:`<p>Police Service of Northern Ireland (PSNI) crime statistics are published by \r
		NISRA statisticians within the\r
		<a href='https://www.psni.police.uk/inside-psni/Statistics/'>Police Service of Northern Ireland</a>.\r
		 Statistical information is available on \r
		 <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/police-recorded-crime-statistics'>Police Recorded Crime Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/anti-social-behaviour-statistics'>Anti-Social Behaviour Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/domestic-abuse-statistics'>Domestic Abuse Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/hate-motivation-statistics'>Hate Motivation Statistics</a>, <a href='https://www.psni.police.uk/official-statistics/drug-seizure-statistics'>Drug Seizure Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/road-traffic-collision-statistics'>Road Traffic Collision Statistics</a>, <a href='https://www.psni.police.uk/official-statistics/security-situation-statistics'>Security Situation Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/stop-and-search-statistics'>Stop and Search Statistics</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/statistics-police-use-force'>Statistics on Police Use of Force</a>, <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/motoring-offence-statistics'>Motoring Offence Statistics</a> and <a href='https://www.psni.police.uk/about-us/our-publications-and-reports/official-statistics/police-and-criminal-evidence-pace-order'>Police and Criminal Evidence (PACE) Order Statistics</a>.  Statistics on the <a href='https://www.nisra.gov.uk/statistics/ni-road-safety-partnership/ni-road-safety-partnership-statistics'>Road Safety Partnership (RSP)</a> detections for speeding or red light running are also published by NISRA PSNI statisticians.</p>\r
\r
		 <p>Statistics on the police complaints system are published by\r
<a href='https://www.policeombudsman.org/Statistics-and-Research'>\r
Police Ombudsmans Office for Northern Ireland</a>.</p>\r
<p><a href='https://www.justice-ni.gov.uk/topics/doj-statistics-and-research'>Department of Justice statistics</a> include reoffending, victims and witnesses, prosecutions and convictions.; Statistics are also available from the <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/ni-prison-service-statistics'>Northern Ireland Prison Service</a>, <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/ni-courts-and-tribunals-service-statistics'>Northern Ireland Courts and Tribunals Service</a>, <a href='https://www.justice-ni.gov.uk/topics/statistics-and-research/youth-justice-statistics'>Youth Justice Agency statistics and </a>, <a href='https://www.justice-ni.gov.uk/topics/legal-aid/legal-services-agency-northern-ireland'>Legal Services Agency</a> and <a href='https://www.ppsni.gov.uk/statistics-and-research'>Public Prosecutions Service for Northern Ireland (PPSNI)</a>.</p>\r
<p><a href='https://www.pbni.org.uk/statistics-and-research'>Probation Board for Northern Ireland (PBNI)</a> publish statistical information on their Caseload, Stakeholder Survey Reports, and other statistical reports.</p>\r
\r
`}}),ir=new Bs({props:{id:"business",img:"nisra-taxonomy-icon-business-energy.png",heading:"Business, economy and trade",place:l[0].place,sub_heading:l[16]("Business, economy and trade",l[0].place),description:" ",chart_compare_type:l[6],boxes:{box_1:{id:"no_bus",year:Ke("business",l[0].place),content:"<span class='text-big'>"+l[12]("business.value.BCOUNTS").toLocaleString()+" </span> businesses, with a total of <span class='text-big'>£"+l[12]("niets_sales.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span>million in sales and <span class='text-big'>£"+l[12]("niets_purch.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span>million in purchases.",show:["ni","lgd"]},box_1a:{id:"no_bus",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Business and trade</span>"},box_2:{id:"niets_sales",year:Ke("niets_sales",l[0].place),content:"GroupChart",chart_data:l[7]("niets_sales"),show:["ni","lgd"]},box_2a:{id:"niets_sales",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Places businesses sell to (sales partners)</span>"},box_3:{id:"niets_purch",year:Ke("niets_purch",l[0].place),content:"GroupChart",chart_data:l[7]("niets_purch"),show:["ni","lgd"]},box_3a:{id:"niets_purch",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Places businesses buy from (purchases partners)</span>"},box_4:{id:"type_bus",year:Ke("business",l[0].place),content:"GroupChart",chart_data:l[7]("businesstype"),show:["ni","lgd"]},box_4a:{id:"type_bus",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of businesses</span>"},box_5:{id:"size_bus",year:Ke("businessband",l[0].place),content:"GroupChart",chart_data:l[7]("businessband"),show:["ni","lgd"]},box_5a:{id:"size_bus",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Employees in businesses</span>"},box_6:{id:"sector",year:"Agriculture "+Ke("farms",l[0].place)+", Tourism "+Ke("tourism",l[0].place),content:"<p><strong>Agriculture</strong></p><span class='text-big'>"+l[12]("farms.value.F").toLocaleString()+" </span> farms with <span class='text-big'>"+l[12]("farms.value.FA").toLocaleString()+" </span> farmers.<p><strong>Tourism</strong></p><span class='text-big'>"+l[12]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs and <span class='text-big'>"+l[12]("tourism_estab.value.estab").toLocaleString()+" </span> accommodation establishments.",show:["ni"]},box_6a:{id:"sector",year:"Agriculture "+Ke("farms",l[0].place)+", Tourism "+Ke("tourism",l[0].place),content:"<strong>Agriculture</strong><p><span class='text-big'>"+l[12]("farms.value.F").toLocaleString()+" </span> farms <span style='color: #1460aa'>("+(l[12]("farms.value.F")/l[0].ni.data.farms.value.F*100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"% of NI)</span>.</p><span class='text-big'>"+l[12]("farms.value.FA").toLocaleString()+" </span> farmers <span style='color: #1460aa'>("+(l[12]("farms.value.FA")/l[0].ni.data.farms.value.FA*100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"% of NI)</span>.<p><strong>Tourism</strong></p><span class='text-big'>"+l[12]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs <span style='color: #1460aa'>("+(l[12]("tourism.value.TourismJobs")/l[0].ni.data.tourism.value.TourismJobs*100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"% of NI)</span>.<p><span class='text-big'>"+l[12]("tourism_estab.value.estab").toLocaleString()+" </span> accommodation establishments <span style='color: #1460aa'>("+(l[12]("tourism_estab.value.estab")/l[0].ni.data.tourism_estab.value.estab*100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"% of NI)</span>.</p>",show:["lgd"]},box_6b:{id:"sector",content:"Data is available for "+l[17](l[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Selected business sectors</span>"}},more:`<strong>Business statistics</strong>\r
		<p>Further statistics are available on number, type and size of businesses, collected through the\r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/annual-business-inquiry'>Annual Business Inquiry</a>,\r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/research-and-development'>Research and Development</a>\r
		Survey and the <a href='https://www.nisra.gov.uk/statistics/business-statistics/inter-departmental-business-register'>Inter Departmental Business Register</a>.</p>\r
		<p>Statistics for specific business sectors include: the <a href='https://www.daera-ni.gov.uk/publications/size-and-performance-ni-food-and-drinks-processing-sector'>\r
		Food and Drinks Processing Sector</a> \r
		and the \r
		<a href='https://www.daera-ni.gov.uk/articles/agricultural-statistics'>Agriculture sector</a> \r
		both produced by DAERA; \r
		and \r
		<a href='https://www.nisra.gov.uk/statistics/tourism/annual-and-quarterly-tourism-statistics-publications'>Tourism sector</a>\r
		published by \r
		<a href='https://www.nisra.gov.uk/statistics/economy/nisra-economic-and-labour-market-statistics-elms'>Economic and Labour Market Statistics (ELMS)</a>. Interactive dashboards are available for \r
		<a href='https://datavis.nisra.gov.uk/tourism/alternative_sources.html'>Tourism statistics</a> and \r
		<a href='https://datavis.nisra.gov.uk/daera/food-drink-processing-sector.html'>Food and Drink Processing Sector Statistics</a>.</p>\r
		<p><strong>Economy and trade statistics</strong></p>\r
		<p>Other economy and trade statistics are published by \r
		<a href='https://www.nisra.gov.uk/statistics/economy/nisra-economic-and-labour-market-statistics-elms'>Economic and Labour Market Statistics (ELMS)</a> NISRA, including \r
		<a href='https://www.nisra.gov.uk/statistics/economy/economic-output-statistics'>Economic Output Statistics</a> (which includes the Index of Services, Index of Production and;Construction Output Statistics), \r
		<a href='https://www.nisra.gov.uk/statistics/economy/economic-accounts-project'>Economic Accounts</a> (including Supply-Use Tables and Input-Output tables), \r
		<a href='https://www.nisra.gov.uk/statistics/economy/eu-exit-analysis'>research and analysis on EU Exit</a>, and \r
		<a href='https://www.nisra.gov.uk/statistics/business-statistics/broad-economy-sales-and-exports-statistics'>Economic Trade Statistics</a> (NIETS) (formerly known as Broad Economy Sales and Exports Statistics). Interactive dashboards are available for the \r
		<a href='https://datavis.nisra.gov.uk/economy-and-labour-market/economic-output-quarterly.html'>quarterly economic outputs</a> and NI \r
		<a href='https://visual.nisra.gov.uk/?body=entity/niets'>Economic Trade</a> statistics.</p>`}}),{c(){p=Oe("div"),d=Oe("div"),h=Oe("p"),y=Oe("span"),v=Oe("a"),v.textContent=a,T=new po(!1),D=kt(),Xi&&Xi.c(),P=kt(),O=Oe("br"),R=Oe("span"),$=Nt(X),pe=kt(),le=Oe("div"),me=Oe("div"),ve=Oe("p"),ve.textContent=nt,Ve=kt(),ui(Ue.$$.fragment),tt=kt(),Vt=Oe("script"),Vt.textContent=qt,Ze=kt(),Xe=Oe("div"),Xe.innerHTML=wt,jt=kt(),ui(we.$$.fragment),qe=kt(),Be=Oe("div"),ui(Ye.$$.fragment),ht=kt(),ui(mt.$$.fragment),Mt=kt(),ui(ki.$$.fragment),Je=kt(),vt=Oe("div"),vi=Oe("div"),vn=Oe("h3"),fn.c(),$n=kt(),zn=Oe("div"),ui(Fi.$$.fragment),bi=kt(),Tn=Oe("div"),Yi&&Yi.c(),Jr=kt(),bn=Oe("div"),In.c(),cr=kt(),fi=Oe("div"),ui(qi.$$.fragment),Dr=kt(),ui(nn.$$.fragment),yr=kt(),ui(ji.$$.fragment),er=kt(),ui(xn.$$.fragment),hn=kt(),ui(Gi.$$.fragment),tr=kt(),ui(Wi.$$.fragment),Tr=kt(),ui(ir.$$.fragment),this.h()},l(N){p=Ne(N,"DIV",{class:!0});var st=Ge(p);d=Ne(st,"DIV",{class:!0});var dn=Ge(d);h=Ne(dn,"P",{class:!0});var pr=Ge(h);y=Ne(pr,"SPAN",{class:!0});var on=Ge(y);v=Ne(on,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0,"data-svelte-h":!0}),lo(v)!=="svelte-7bn769"&&(v.textContent=a),T=ho(on,!1),D=Et(on),Xi&&Xi.l(on),on.forEach(oe),pr.forEach(oe),P=Et(dn),O=Ne(dn,"BR",{class:!0}),R=Ne(dn,"SPAN",{class:!0,style:!0});var di=Ge(R);$=Ut(di,X),di.forEach(oe),dn.forEach(oe),pe=Et(st),le=Ne(st,"DIV",{class:!0});var L=Ge(le);me=Ne(L,"DIV",{style:!0,class:!0});var U=Ge(me);ve=Ne(U,"P",{class:!0,"data-svelte-h":!0}),lo(ve)!=="svelte-1wccmen"&&(ve.textContent=nt),Ve=Et(U),ci(Ue.$$.fragment,U),tt=Et(U),Vt=Ne(U,"SCRIPT",{class:!0,"data-svelte-h":!0}),lo(Vt)!=="svelte-cb3i93"&&(Vt.textContent=qt),Ze=Et(U),Xe=Ne(U,"DIV",{width:!0,class:!0,"data-svelte-h":!0}),lo(Xe)!=="svelte-4t6luz"&&(Xe.innerHTML=wt),U.forEach(oe),L.forEach(oe),st.forEach(oe),jt=Et(N),ci(we.$$.fragment,N),qe=Et(N),Be=Ne(N,"DIV",{id:!0,class:!0});var q=Ge(Be);ci(Ye.$$.fragment,q),ht=Et(q),ci(mt.$$.fragment,q),Mt=Et(q),ci(ki.$$.fragment,q),q.forEach(oe),Je=Et(N),vt=Ne(N,"DIV",{class:!0});var H=Ge(vt);vi=Ne(H,"DIV",{style:!0,class:!0});var Y=Ge(vi);vn=Ne(Y,"H3",{class:!0});var ue=Ge(vn);fn.l(ue),ue.forEach(oe),Y.forEach(oe),$n=Et(H),zn=Ne(H,"DIV",{id:!0,style:!0,class:!0});var fe=Ge(zn);ci(Fi.$$.fragment,fe),fe.forEach(oe),bi=Et(H),Tn=Ne(H,"DIV",{class:!0});var j=Ge(Tn);Yi&&Yi.l(j),j.forEach(oe),Jr=Et(H),bn=Ne(H,"DIV",{class:!0});var ee=Ge(bn);In.l(ee),ee.forEach(oe),H.forEach(oe),cr=Et(N),fi=Ne(N,"DIV",{class:!0,id:!0});var ge=Ge(fi);ci(qi.$$.fragment,ge),Dr=Et(ge),ci(nn.$$.fragment,ge),yr=Et(ge),ci(ji.$$.fragment,ge),er=Et(ge),ci(xn.$$.fragment,ge),hn=Et(ge),ci(Gi.$$.fragment,ge),tr=Et(ge),ci(Wi.$$.fragment,ge),Tr=Et(ge),ci(ir.$$.fragment,ge),ge.forEach(oe),this.h()},h(){re(v,"href",ni+"/"),re(v,"data-sveltekit-noscroll",""),re(v,"data-sveltekit-keepfocus",""),re(v,"class","svelte-lx8mb2"),T.a=D,re(y,"class","svelte-lx8mb2"),re(h,"class","svelte-lx8mb2"),re(O,"class","svelte-lx8mb2"),re(R,"class","text-big title svelte-lx8mb2"),$e(R,"font-size","2.5em"),$e(R,"line-height","1em"),re(d,"class","svelte-lx8mb2"),re(ve,"class","svelte-lx8mb2"),re(Vt,"class","svelte-lx8mb2"),re(Xe,"width","100%"),re(Xe,"class","svelte-lx8mb2"),$e(me,"width","350px"),$e(me,"padding-top","5px"),re(me,"class","svelte-lx8mb2"),as(me,"float-right",l[2]>1),re(le,"class","svelte-lx8mb2"),re(p,"class","grid mtl svelte-lx8mb2"),re(Be,"id","grid"),re(Be,"class","grid mt svelte-lx8mb2"),re(vn,"class","svelte-lx8mb2"),$e(vi,"grid-column","span "+l[2]),re(vi,"class","svelte-lx8mb2"),re(zn,"id","map"),$e(zn,"padding-right","45px"),$e(zn,"grid-column","span "+(l[2]==2?2:l[2]&&l[2]>2?l[2]-1:1)),re(zn,"class","svelte-lx8mb2"),re(Tn,"class","svelte-lx8mb2"),re(bn,"class","svelte-lx8mb2"),re(vt,"class","grid mt svelte-lx8mb2"),Zu(()=>l[21].call(vt)),re(fi,"class","accordion svelte-lx8mb2"),re(fi,"id","accordionPanelsStayOpenExample")},m(N,st){Me(N,p,st),Ae(p,d),Ae(d,h),Ae(h,y),Ae(y,v),T.m(S,y),Ae(y,D),Xi&&Xi.m(y,null),Ae(d,P),Ae(d,O),Ae(d,R),Ae(R,$),Ae(p,pe),Ae(p,le),Ae(le,me),Ae(me,ve),Ae(me,Ve),pi(Ue,me,null),Ae(me,tt),Ae(me,Vt),Ae(me,Ze),Ae(me,Xe),Me(N,jt,st),pi(we,N,st),Me(N,qe,st),Me(N,Be,st),pi(Ye,Be,null),Ae(Be,ht),pi(mt,Be,null),Ae(Be,Mt),pi(ki,Be,null),Me(N,Je,st),Me(N,vt,st),Ae(vt,vi),Ae(vi,vn),fn.m(vn,null),Ae(vt,$n),Ae(vt,zn),pi(Fi,zn,null),Ae(vt,bi),Ae(vt,Tn),Yi&&Yi.m(Tn,null),Ae(vt,Jr),Ae(vt,bn),In.m(bn,null),Xt=Ku(vt,l[21].bind(vt)),Me(N,cr,st),Me(N,fi,st),pi(qi,fi,null),Ae(fi,Dr),pi(nn,fi,null),Ae(fi,yr),pi(ji,fi,null),Ae(fi,er),pi(xn,fi,null),Ae(fi,hn),pi(Gi,fi,null),Ae(fi,tr),pi(Wi,fi,null),Ae(fi,Tr),pi(ir,fi,null),jn=!0},p(N,st){N[0].place.type!="ni"?Xi?Xi.p(N,st):(Xi=Qm(N),Xi.c(),Xi.m(y,null)):Xi&&(Xi.d(1),Xi=null),(!jn||st[0]&1)&&X!==(X=N[0].place.name.replace(/_/g," ")+"")&&Si($,X);const dn={};st[0]&1&&(dn.search_data=N[0].search_data),Ue.$set(dn),(!jn||st[0]&4)&&as(me,"float-right",N[2]>1);const pr={};st[0]&1&&(pr.place=N[0].place),we.$set(pr);const on={};st[0]&1&&(on.heading="About "+N[0].place.name.replace(/_/g," ")),st[0]&1&&(on.place=N[0].place),st[0]&1&&(on.content={ni:"Northern Ireland has 11 Councils or Local Government Districts (LGDs),  which can be subdivided into electoral areas (District Electoral Areas DEAs), then further into Super Data Zones and Data Zones. Statistics can be viewed for these smaller areas.",lgd:N[0].place.name+" is one of "+N[0].place.count.toLocaleString()+" "+Er[N[0].place.type].pl+".  It includes the larger settlements of "+N[0].place.lgd_location_description+".",dea:N[0].place.name+" is one of "+N[0].place.count.toLocaleString()+" "+Er[N[0].place.type].pl+" in Northern Ireland.  It is within <a href = '"+ni+"/"+N[0].place.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+N[0].place.parents[0].name+" </a> and covers "+N[0].place.dea_location_description+".",sdz:N[0].place.name.replace(/_/g," ")+" is one of "+N[0].place.count.toLocaleString()+" "+Er[N[0].place.type].pl+". Super Data Zones are new statistical areas developed for census. They are broadly similar in population size and housing type.",dz:N[0].place.name.replace(/_/g," ")+" is one of "+N[0].place.count.toLocaleString()+" "+Er[N[0].place.type].pl+".  Data Zones are smaller divisions of Super Data Zones. There are on average 4 in each Super Data Zone."}),st[0]&64&&(on.chart_compare_type=N[6]),Ye.$set(on);const di={};st[0]&1&&(di.place=N[0].place),st[0]&1&&(di.year="Population estimates "+Ke("MYETotal",N[0].place)),st[0]&1&&(di.content='<span class="text-big" style="font-size: 2.8em;">'+N[0].place.data.MYETotal.value.toLocaleString()+"</span>"),st[0]&64&&(di.chart_compare_type=N[6]),st[0]&1&&(di.compare_content={ni:"",lgd:'<span class = "em" style = "background-color: lightgrey">'+yp(N[0].place.data.population.value[2021].all/N[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population<br>The "+N[10](N[0].place.data.population.value_rank[2021].all)+" population of 11 Councils",dea:'<span class = "em" style = "background-color: lightgrey">'+yp(N[0].place.data.population.value[2021].all/N[0].ni.data.population.value[2021].all)+"</span> of Northern Ireland population",sdz:"Data not available for area comparison",dz:" Data not available for area comparison"}),mt.$set(di);const L={};st[0]&1&&(L.place=N[0].place),st[0]&1&&(L.year="Population estimates "+Ke("MYETotal",N[0].place)),st[0]&1&&(L.content='<div class = "row" style = "display: flex; align-items: center"><div style="font-weight: bold; font-size: 2.8em;">'+rg(N[0].place)+'</div><div style = "margin-left: 10px; line-height: 1.25em;"> people per square kilometer</div></div>'),st[0]&64&&(L.chart_compare_type=N[6]),st[0]&1&&(L.compare_content={ni:"",lgd:N[18](N[0].place),dea:N[18](N[0].place),sdz:N[18](N[0].place),dz:N[18](N[0].place)}),ki.$set(L),Rr===(Rr=Lr(N))&&fn?fn.p(N,st):(fn.d(1),fn=Rr(N),fn&&(fn.c(),fn.m(vn,null))),(!jn||st[0]&4)&&$e(vi,"grid-column","span "+N[2]);const U={};st[0]&1&&(U.location={bounds:N[0].place.bounds}),st[0]&48|st[1]&1024&&(U.$$scope={dirty:st,ctx:N}),!zr&&st[0]&8&&(zr=!0,U.map=N[3],m_(()=>zr=!1)),Fi.$set(U),(!jn||st[0]&4)&&$e(zn,"grid-column","span "+(N[2]==2?2:N[2]&&N[2]>2?N[2]-1:1)),N[0].place.type!="ni"?Yi?Yi.p(N,st):(Yi=tg(N),Yi.c(),Yi.m(Tn,null)):Yi&&(Yi.d(1),Yi=null),Br===(Br=Qr(N))&&In?In.p(N,st):(In.d(1),In=Br(N),In&&(In.c(),In.m(bn,null)));const q={};st[0]&1&&(q.place=N[0].place),st[0]&1&&(q.sub_heading=N[16]("People and communities",N[0].place)),st[0]&64&&(q.chart_compare_type=N[6]),st[0]&1&&(q.boxes={box_1:{id:"popchange",year:"Population Estimates "+Ke("BroadAge",N[0].place),content:N[11](N[0].place),show:["ni","lgd"]},box_1a:{id:"popchange",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Population change</span>"},box_2:{id:"broadage",year:"Population Estimates "+Ke("BroadAge",N[0].place),content:"GroupChart",chart_data:N[7]("BroadAge"),show:["ni","lgd","dea","sdz"]},box_2a:{id:"age",year:N[15]("age"),content:"GroupChart",chart_data:N[7]("age"),show:["dz"]},box_3:{id:"hhsize",year:N[15]("hh_size"),content:"GroupChart",chart_data:N[7]("hh_size")},box_4:{id:"religion",year:N[15]("religion_or_religion_brought_up_in"),content:"GroupChart",chart_data:N[7]("religion_or_religion_brought_up_in")},box_5:{id:"language",year:N[15]("mainlang"),content:"GroupChart",chart_data:N[7]("mainlang")},box_6:{id:"houseprices",year:Ke("houseprices",N[0].place),content:"<span class='text-big'>£"+N[12]("houseprices.value.SP").toLocaleString(void 0,{maximumFractionDigits:0})+"</span><p><span class='text-big'>"+(N[12]("houseprices.value.HPI")-100).toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> higher than Q1 2015</p>",show:["ni"]},box_6a:{id:"houseprices",year:Ke("houseprices",N[0].place),content:"<p><span class='text-big'>£"+N[12]("houseprices.value.SP").toLocaleString(void 0,{maximumFractionDigits:0})+"</span><span style='color: #1460aa'> (NI £"+N[0].ni.data.houseprices.value.SP.toLocaleString(void 0,{maximumFractionDigits:0})+") </span></p><p><span class='text-big'>"+(N[12]("houseprices.value.HPI")-100).toLocaleString(void 0,{maximumFractionDigits:1})+"%</span> higher than in quarter 1 2015<span style='color: #1460aa'> (NI "+(N[0].ni.data.houseprices.value.HPI-100).toLocaleString(void 0,{maximumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_6b:{id:"houseprices",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Average house price</span>"}}),qi.$set(q);const H={};st[0]&1&&(H.place=N[0].place),st[0]&1&&(H.sub_heading=N[16]("Health and social care",N[0].place)),st[0]&64&&(H.chart_compare_type=N[6]),st[0]&1&&(H.boxes={box_0:{id:"generalhealth",year:N[15]("general_health"),content:"GroupChart",chart_data:N[7]("general_health")},box_2a:{id:"wellbeing",year:Ke("wellbeing",N[0].place),content:"<p>Happiness</p><span class='text-big'>"+N[12]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy. </span><p>Life Satisfaction</p><span class='text-big'>"+N[12]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><p>Loneliness</p><span class='text-big'>"+N[12]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'>  of people who feel lonely at least some of the time. </span>",show:["ni"]},box_2b:{id:"wellbeing",year:Ke("wellbeing",N[0].place),content:"<p>Happiness</p><span class='text-big'>"+N[12]("Happy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely happy.</span><span style='color: #1460aa'> (NI "+N[0].ni.data.Happy.value+"/10) </span></p><p>Life Satisfaction</p><span class='text-big'>"+N[12]("Satisfy.value").toLocaleString()+"</span>/ 10, <span class = 'text-small'>where 10 is completely satisfied. </span><span style='color: #1460aa'> (NI "+N[0].ni.data.Satisfy.value+"/10) </span></p><p>Loneliness</p><span class='text-big'>"+N[12]("Lonely.value").toLocaleString(void 0,{minimumFractionDigits:1})+"%</span><span class = 'text-small'> of people who feel lonely at least some of the time. </span> <span style='color: #1460aa'> (NI "+N[0].ni.data.Lonely.value+"%) </span></p>",show:["lgd"]},box_2c:{id:"wellbeing",content:"Data on happiness, life satisfaction and loneliness is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Personal wellbeing</span>"},box_3a:{id:"lifeexpectancy",year:Ke("LE",N[0].place),content:"<p>Male</p> <span class='text-big'>"+N[12]("LE.value.Males").toLocaleString()+"</span> years<p>Female</p> <span class='text-big'>"+N[12]("LE.value.Females").toLocaleString()+"</span> years",show:["ni"]},box_3b:{id:"lifeexpectancy",year:Ke("LE",N[0].place),content:"<p>Male</p> <span class='text-big'>"+N[12]("LE.value.Males").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+N[0].ni.data.LE.value.Males+") </span></p><p>Female</p> <span class='text-big'>"+N[12]("LE.value.Females").toLocaleString()+"</span> years<span style='color: #1460aa'> (NI "+N[0].ni.data.LE.value.Females+") </span></p>",show:["lgd","dea"]},box_3c:{id:"lifeexpectancy",content:"Data is available for "+N[17](N[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Life expectancy at birth</span>"},box_4:{id:"carers",content:"GroupChart",year:N[15]("provision_care"),chart_data:N[7]("provision_care")},box_5:{id:"hospitalactivity",year:Ke("Admiss",N[0].place),content:"<p><span class='text-big'>"+N[12]("Admiss.value").toLocaleString()+"</span> hospital admissions</p><p>The most frequent primary reason was for <span class='text-bold' >"+N[12]("Admiss.text")+"</span>.</p>",show:["ni","dea"]},box_5a:{id:"hospitalactivity",content:"Data is available for "+N[17](N[0].place,"ni, dea")+" and electoral areas.",show:["lgd","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Annual admissions to hospital</span>"},box_6:{id:"primarycare",year:Ke("GP",N[0].place),content:N[14]("GP.value.PRACS",N[0].place)+"<p><span class='text-big'>"+N[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.  </span> <span class='text-big'>"+(N[12]("DEN_REG.value.Dental_Registrations")/N[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0,minimumFractionDigits:0})+"%</span> of the population are registered with a health service dentist.</p>",show:["ni"]},box_6a:{id:"primarycare",year:Ke("GP",N[0].place),content:N[14]("GP.value.PRACS",N[0].place)+"<p><span class='text-big'>"+N[12]("DEN.value.GDSDSSurgeries").toLocaleString()+"</span> dental surgeries.</span>  <span class='text-big'>"+(N[12]("DEN_REG.value.Dental_Registrations")/N[12]("MYETotal.value")*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0,minimumFractionDigits:0})+"%</span> of the population are registered with a health service dentist. <span style='color: #1460aa'> (NI "+(N[0].ni.data.DEN_REG.value.Dental_Registrations/N[0].ni.data.MYETotal.value*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})+"%)</span></p>",show:["lgd","dea"]},box_6c:{id:"primarycare",content:"Data is available for "+N[17](N[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Primary care providers</span>"}}),nn.$set(H);const Y={};st[0]&1&&(Y.place=N[0].place),st[0]&1&&(Y.sub_heading=N[16]("Work, pay and benefits",N[0].place)),st[0]&64&&(Y.chart_compare_type=N[6]),st[0]&1&&(Y.boxes={box_1:{id:"employmentrates",year:Ke("LMS",N[0].place),content:"GroupChart",chart_data:N[7]("LMS"),show:["ni","lgd"]},box_1b:{id:"employmentrates",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work status of adults</span>"},box_2a:{id:"employed",year:Ke("LMS",N[0].place),content:"<p>People employed</p> <span class='text-big'>"+N[12]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">£'+N[12]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"</span> ",show:["ni"]},box_2b:{id:"employed",year:Ke("LMS",N[0].place),content:"<p>People employed</p> <span class='text-big'>"+N[12]("LMS.value.EMPN").toLocaleString()+'</span> </p><p>Median weekly salary</p> <span class="text-big">£'+N[12]("ASHE_weekly.value").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"</span> <span style='color: #1460aa'> (NI £"+N[0].ni.data.ASHE_weekly.value.toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+") </span></p>",show:["lgd"]},box_2c:{id:"employed",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Work and wages</span>"},box_3b:{id:"bres",year:Ke("BRES",N[0].place),content:"GroupChart",chart_data:N[7]("BRES"),show:["ni","lgd"]},box_3c:{id:"bres",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of work</span>"},box_4:{id:"ucbenefits",year:Ke("BS",N[0].place),content:'<span class="text-big">'+N[0].place.data.BS.value.UC.toLocaleString()+'</span> claimants<br><span class="text-big">'+(N[0].place.data.BS.value.UC/N[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.UC/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.UC/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.UC/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.UC/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_5:{id:"pipbenefits",year:Ke("BS",N[0].place),content:'<span class="text-big">'+N[0].place.data.BS.value.PIP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(N[0].place.data.BS.value.PIP/N[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.PIP/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.PIP/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.PIP/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.PIP/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}},box_6:{id:"pensionagebenefits",year:Ke("BS",N[0].place),content:'<span class="text-big">'+N[0].place.data.BS.value.RP.toLocaleString()+'</span> claimants<br><span class="text-big">'+(N[0].place.data.BS.value.RP/N[0].place.data.MYETotal.value*100).toFixed(1)+"%</span> of population",compare_content:{ni:"",lgd:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.RP/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dea:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.RP/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",sdz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.RP/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>",dz:"<span style='color: #1460aa; font-size: 12pt;'>(NI "+(N[0].ni.data.BS.value.RP/N[0].ni.data.MYETotal.value*100).toFixed(1)+"%)</span>"}}}),ji.$set(Y);const ue={};st[0]&1&&(ue.place=N[0].place),st[0]&1&&(ue.sub_heading=N[16]("Education and skills",N[0].place)),st[0]&64&&(ue.chart_compare_type=N[6]),st[0]&1&&(ue.boxes={box_1:{id:"enrollments",content:"<p style='margin:0'>Primary school <span class='text-big'>"+N[12]("Primary.value.All").toLocaleString()+"</span> <p style='margin:0'>Post primary school <span class='text-big'>"+N[12]("PostPrimary.value.All").toLocaleString()+" </span><p style='margin:0'>NI Further education colleges <span class='text-big'>"+N[12]("FE.value").toLocaleString()+"</span><p style='margin:0'>UK Higher education institutions <span class='text-big'>"+N[12]("HE.value").toLocaleString()+" </span>",year:"School:"+Ke("Primary",N[0].place)+", FE:"+Ke("FE",N[0].place)+", HE:"+Ke("HE",N[0].place),show:["ni","lgd","dea"]},box_1b:{id:"enrollments",content:"Data is available for "+N[17](N[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>People in education</span>"},box_2a:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(N[12]("Primary.perc.FSME")).toFixed(1)+"% </span><p style='margin:0'>Post primary school <span class='text-big'>"+Number(N[12]("PostPrimary.perc.FSME")).toFixed(1)+"% </span>",year:Ke("Primary",N[0].place),show:["ni"]},box_2b:{id:"fsme",content:"<p style='margin:0'>Primary school <span class='text-big'> "+Number(N[12]("Primary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+N[0].ni.data.Primary.perc.FSME.toFixed(1)+"%) </span></p><p style='margin:0'>Post primary school <span class='text-big'>"+Number(N[12]("PostPrimary.perc.FSME")).toFixed(1)+"% </span><span style='color: #1460aa'> (NI "+N[0].ni.data.PostPrimary.perc.FSME.toFixed(1)+"%) </span></p>",year:Ke("Primary",N[0].place),show:["lgd","dea"]},box_2c:{id:"fsme",content:"Data is available for "+N[17](N[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Pupils entitled to free school meals</span>"},box_3a:{id:"SEN",year:Ke("SEN",N[0].place),content:"<p> <span class='text-big'>"+N[12]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(N[12]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils",show:["ni"]},box_3b:{id:"SEN",year:Ke("SEN",N[0].place),content:"<p> <span class='text-big'>"+N[12]("AllSchools.value.SEN").toLocaleString()+"</span> pupils with SEN <br><span class = 'text-small'>(statemented and non statemented)</span></p><p><span class='text-big'>"+Number(N[12]("AllSchools.perc.SEN")).toFixed(1)+"%</span> of all pupils<span style='color: #1460aa'> (NI "+N[0].ni.data.AllSchools.perc.SEN.toFixed(1)+"%) </span></p>",show:["lgd","dea"]},box_3c:{id:"SEN",content:"Data is available for "+N[17](N[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Special educational needs (SEN)</span>"},box_4:{id:"qualifications",content:"GroupChart",year:N[15]("highest_level_of_qualifications"),chart_data:N[7]("highest_level_of_qualifications")},box_5a:{id:"attainment",year:Ke("Attainment",N[0].place),content:"<span class='text-big'>"+N[12]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C, including GCSE English and maths.</span> <span class='text-big'>",show:["ni"]},box_5b:{id:"attainment",year:Ke("Attainment",N[0].place),content:"<span class='text-big'>"+N[12]("Attainment.value").toLocaleString()+"%</span> <p>of pupils left school with 5 or more GCSEs (including equivalents) at grades A*-C, including GCSE English and maths.</span>"+N[13]("Attainment.value").toLocaleString()+"<span style='color: #1460aa'>(NI "+N[0].ni.data.Attainment.value.toLocaleString(void 0,{minimumFractionDigits:1})+"%) </span>",show:["lgd"]},box_5c:{id:"attainment",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Attainment of school leavers</span>"},box_6:{id:"destination",year:Ke("Destination",N[0].place),content:"GroupChart",chart_data:N[7]("Destination"),show:["ni","lgd","dea"]},box_6b:{id:"destination",content:"Data is available for "+N[17](N[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Next steps for school leavers</span>"}}),xn.$set(ue);const fe={};st[0]&1&&(fe.place=N[0].place),st[0]&1&&(fe.sub_heading=N[16]("Transport, environment and climate change",N[0].place)),st[0]&64&&(fe.chart_compare_type=N[6]),st[0]&1&&(fe.boxes={box_1:{id:"concern",year:Ke("Env_concern",N[0].place),content:"GroupChart",chart_data:N[7]("Env_concern"),show:["ni","lgd"]},box_1b:{id:"concern",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Concern about the environment</span>"},box_2:{id:"env_problem",year:Ke("Env_problem",N[0].place),content:"<p>The most important environment problems in Northern Ireland were: <span class='text-bold' 'text-big'>"+N[12]("env_problem.text")+"</span>.</p>",show:["ni"]},box_2b:{id:"env_problem",year:Ke("Env_problem",N[0].place),content:"<p>The most important environment problems in this area were: </p><p><span class='text-bold' >"+N[12]("env_problem.text")+"</span>.</p><p><span style='color: #1460aa'>(NI: "+N[0].ni.data.env_problem.text+")</span>.</p>",show:["lgd"]},box_2c:{id:"env_problem",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Environmental problems</span>"},box_3:{id:"ghg",year:Ke("Env_ghg",N[0].place),content:"<p><span class='text-big'>"+N[12]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((N[12]("Env_ghg.value.GHGALL")/N[12]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"%</span> reduction since 2005.</p>",show:["ni"]},box_3a:{id:"ghg",year:Ke("Env_ghg",N[0].place),content:"<p><span class='text-big'>"+N[12]("Env_ghg.value.GHGALL").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"</span> kilotonnes of carbon dioxide equivalent (KtCO2e).</p><p><span class='text-big'>"+((N[12]("Env_ghg.value.GHGALL")/N[12]("Env_ghg.value.GHGALL_BASE")-1)*-100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> reduction since 2005.</p><span style='color: #1460aa'>(NI "+((N[0].ni.data.Env_ghg.value.GHGALL/N[0].ni.data.Env_ghg.value.GHGALL_BASE-1)*-100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%) </span>",show:["lgd"]},box_3c:{id:"ghg",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Greenhouse gas</span>"},box_4:{id:"active",year:Ke("Env_active",N[0].place),content:"<span class='text-big'>"+N[12]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"%</span><p>of all journeys were made by walking, cycling and public transport.</p>",show:["ni"]},box_4a:{id:"active",year:Ke("Env_active",N[0].place),content:"<span class='text-big'>"+N[12]("Env_active.value.JWCPT").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+"%</span><p>of all journeys were made by walking, cycling and public transport.<span style='color: #1460aa'> (NI "+N[0].ni.data.Env_active.value.JWCPT+"%) </span></p>",show:["lgd"]},box_4b:{id:"active",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Active and substainable travel</span>"},box_5:{id:"waste",year:Ke("Env_waste",N[0].place),content:"GroupChart",chart_data:N[7]("Env_waste"),show:["ni","lgd"]},box_5a:{id:"waste",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Household waste</span>"},box_6:{id:"renewable",year:N[15]("renewable_energy"),content:"GroupChart",chart_data:N[7]("renewable_energy")}}),Gi.$set(fe);const j={};st[0]&1&&(j.place=N[0].place),st[0]&1&&(j.sub_heading=N[16]("Crime and justice",N[0].place)),st[0]&64&&(j.chart_compare_type=N[6]),st[0]&1&&(j.boxes={box_1:{id:"crime",year:Ke("crime",N[0].place),content:"<p><span class='text-big'>"+N[12]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(N[12]("crime.value.allcrime")/N[12]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span> crimes recorded per 1,000 population.</p>",show:["ni"]},box_1a:{id:"crime",year:Ke("crime",N[0].place),content:"<p><span class='text-big'>"+N[12]("crime.value.allcrime").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span>crimes recorded</p><p><span class='text-big'>"+(N[12]("crime.value.allcrime")/N[12]("MYETotal.value")*1e3).toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span> crimes recorded per 1,000 population.<span style='color: #1460aa'> (NI "+(N[0].ni.data.crime.value.allcrime/N[0].ni.data.MYETotal.value*1e3).toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+")</span></p>",show:["lgd","dea"]},box_1b:{id:"crime",content:"Data is available for "+N[17](N[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Police recorded crimes</span>"},box_2:{id:"crimetype",year:Ke("crime",N[0].place),content:"GroupChart",chart_data:N[7]("crime"),show:["ni","lgd","dea"]},box_2a:{id:"crimetype",content:"Data is available for "+N[17](N[0].place,"ni, lgd, dea"),show:["sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Types of crime</span>"},box_4:{id:"crimeworry",year:Ke("crimeworry",N[0].place),content:"<p> <span class='text-big' >"+N[12]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> of people are highly worried about crime.</p>",show:["ni"]},box_4a:{id:"crimeworry",year:Ke("crimeworry",N[0].place),content:"<p> <span class='text-big' >"+N[12]("crimeworry.value.WorryC2").toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> of people are highly worried about crime.<span style='color: #1460aa'> (NI "+N[0].ni.data.crimeworry.value.WorryC2.toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_4b:{id:"crimeworry",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Worry about crime</span>"},box_5:{id:"crimeperception",year:Ke("crimeperception",N[0].place),content:"<p> <span class='text-big' >"+N[12]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.</p>",show:["ni"]},box_5a:{id:"crimeperception",year:Ke("crimeperception",N[0].place),content:"<p> <span class='text-big' >"+N[12]("crimeperception.value.ASB8").toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%</span> think there is a high level of antisocial behaviour in the area.<span style='color: #1460aa'> (NI "+N[0].ni.data.crimeperception.value.ASB8.toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"%)</span></p>",show:["lgd"]},box_5b:{id:"crimeperception",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Views on antisocial behaviour</span>"}}),Wi.$set(j);const ee={};st[0]&1&&(ee.place=N[0].place),st[0]&1&&(ee.sub_heading=N[16]("Business, economy and trade",N[0].place)),st[0]&64&&(ee.chart_compare_type=N[6]),st[0]&1&&(ee.boxes={box_1:{id:"no_bus",year:Ke("business",N[0].place),content:"<span class='text-big'>"+N[12]("business.value.BCOUNTS").toLocaleString()+" </span> businesses, with a total of <span class='text-big'>£"+N[12]("niets_sales.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span>million in sales and <span class='text-big'>£"+N[12]("niets_purch.value.ALL").toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})+" </span>million in purchases.",show:["ni","lgd"]},box_1a:{id:"no_bus",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Business and trade</span>"},box_2:{id:"niets_sales",year:Ke("niets_sales",N[0].place),content:"GroupChart",chart_data:N[7]("niets_sales"),show:["ni","lgd"]},box_2a:{id:"niets_sales",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Places businesses sell to (sales partners)</span>"},box_3:{id:"niets_purch",year:Ke("niets_purch",N[0].place),content:"GroupChart",chart_data:N[7]("niets_purch"),show:["ni","lgd"]},box_3a:{id:"niets_purch",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Places businesses buy from (purchases partners)</span>"},box_4:{id:"type_bus",year:Ke("business",N[0].place),content:"GroupChart",chart_data:N[7]("businesstype"),show:["ni","lgd"]},box_4a:{id:"type_bus",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Type of businesses</span>"},box_5:{id:"size_bus",year:Ke("businessband",N[0].place),content:"GroupChart",chart_data:N[7]("businessband"),show:["ni","lgd"]},box_5a:{id:"size_bus",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Employees in businesses</span>"},box_6:{id:"sector",year:"Agriculture "+Ke("farms",N[0].place)+", Tourism "+Ke("tourism",N[0].place),content:"<p><strong>Agriculture</strong></p><span class='text-big'>"+N[12]("farms.value.F").toLocaleString()+" </span> farms with <span class='text-big'>"+N[12]("farms.value.FA").toLocaleString()+" </span> farmers.<p><strong>Tourism</strong></p><span class='text-big'>"+N[12]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs and <span class='text-big'>"+N[12]("tourism_estab.value.estab").toLocaleString()+" </span> accommodation establishments.",show:["ni"]},box_6a:{id:"sector",year:"Agriculture "+Ke("farms",N[0].place)+", Tourism "+Ke("tourism",N[0].place),content:"<strong>Agriculture</strong><p><span class='text-big'>"+N[12]("farms.value.F").toLocaleString()+" </span> farms <span style='color: #1460aa'>("+(N[12]("farms.value.F")/N[0].ni.data.farms.value.F*100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"% of NI)</span>.</p><span class='text-big'>"+N[12]("farms.value.FA").toLocaleString()+" </span> farmers <span style='color: #1460aa'>("+(N[12]("farms.value.FA")/N[0].ni.data.farms.value.FA*100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"% of NI)</span>.<p><strong>Tourism</strong></p><span class='text-big'>"+N[12]("tourism.value.TourismJobs").toLocaleString()+" </span> jobs <span style='color: #1460aa'>("+(N[12]("tourism.value.TourismJobs")/N[0].ni.data.tourism.value.TourismJobs*100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"% of NI)</span>.<p><span class='text-big'>"+N[12]("tourism_estab.value.estab").toLocaleString()+" </span> accommodation establishments <span style='color: #1460aa'>("+(N[12]("tourism_estab.value.estab")/N[0].ni.data.tourism_estab.value.estab*100).toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1})+"% of NI)</span>.</p>",show:["lgd"]},box_6b:{id:"sector",content:"Data is available for "+N[17](N[0].place,"ni, lgd"),show:["dea","sdz","dz"],i_button:!1,title:"<span style='font-size: 0.88em'>Selected business sectors</span>"}}),ir.$set(ee)},i(N){jn||(ct(Ue.$$.fragment,N),ct(we.$$.fragment,N),ct(Ye.$$.fragment,N),ct(mt.$$.fragment,N),ct(ki.$$.fragment,N),ct(Fi.$$.fragment,N),ct(qi.$$.fragment,N),ct(nn.$$.fragment,N),ct(ji.$$.fragment,N),ct(xn.$$.fragment,N),ct(Gi.$$.fragment,N),ct(Wi.$$.fragment,N),ct(ir.$$.fragment,N),jn=!0)},o(N){_t(Ue.$$.fragment,N),_t(we.$$.fragment,N),_t(Ye.$$.fragment,N),_t(mt.$$.fragment,N),_t(ki.$$.fragment,N),_t(Fi.$$.fragment,N),_t(qi.$$.fragment,N),_t(nn.$$.fragment,N),_t(ji.$$.fragment,N),_t(xn.$$.fragment,N),_t(Gi.$$.fragment,N),_t(Wi.$$.fragment,N),_t(ir.$$.fragment,N),jn=!1},d(N){N&&(oe(p),oe(jt),oe(qe),oe(Be),oe(Je),oe(vt),oe(cr),oe(fi)),Xi&&Xi.d(),hi(Ue),hi(we,N),hi(Ye),hi(mt),hi(ki),fn.d(),hi(Fi),Yi&&Yi.d(),In.d(),Xt(),hi(qi),hi(nn),hi(ji),hi(xn),hi(Gi),hi(Wi),hi(ir)}}}function Qm(l){let p,d=wi([...l[0].place.parents].reverse()),h=[];for(let y=0;y<d.length;y+=1)h[y]=$m(Ym(l,d,y));return{c(){for(let y=0;y<h.length;y+=1)h[y].c();p=ri()},l(y){for(let v=0;v<h.length;v+=1)h[v].l(y);p=ri()},m(y,v){for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(y,v);Me(y,p,v)},p(y,v){if(v[0]&1){d=wi([...y[0].place.parents].reverse());let a;for(a=0;a<d.length;a+=1){const T=Ym(y,d,a);h[a]?h[a].p(T,v):(h[a]=$m(T),h[a].c(),h[a].m(p.parentNode,p))}for(;a<h.length;a+=1)h[a].d(1);h.length=d.length}},d(y){y&&oe(p),or(h,y)}}}function $m(l){let p,d=l[35].name+"",h,y,v,a=" &gt; ",T;return{c(){p=Oe("a"),h=Nt(d),v=new po(!1),T=ri(),this.h()},l(S){p=Ne(S,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var D=Ge(p);h=Ut(D,d),D.forEach(oe),v=ho(S,!1),T=ri(),this.h()},h(){re(p,"href",y=ni+"/"+l[35].code+"/"),re(p,"data-sveltekit-noscroll",""),re(p,"data-sveltekit-keepfocus",""),re(p,"class","svelte-lx8mb2"),v.a=T},m(S,D){Me(S,p,D),Ae(p,h),v.m(a,S,D),Me(S,T,D)},p(S,D){D[0]&1&&d!==(d=S[35].name+"")&&Si(h,d),D[0]&1&&y!==(y=ni+"/"+S[35].code+"/")&&re(p,"href",y)},d(S){S&&(oe(p),oe(T),v.d())}}}function V1(l){let p,d="Zoom and click on map to explore other areas";return{c(){p=Oe("p"),p.textContent=d,this.h()},l(h){p=Ne(h,"P",{class:!0,"data-svelte-h":!0}),lo(p)!=="svelte-2jr00x"&&(p.textContent=d),this.h()},h(){re(p,"class","text-bold svelte-lx8mb2")},m(h,y){Me(h,p,y)},p:tn,d(h){h&&oe(p)}}}function q1(l){let p,d,h=l[0].place.name+"",y,v,a=Er[l[0].place.type].name+"",T,S,D,P="",O,R,X='<span class="text-bold svelte-lx8mb2">Zoom and click on map to explore other areas</span>';return{c(){p=Nt("You are currently viewing "),d=Oe("span"),y=Nt(h),v=kt(),T=Nt(a),S=kt(),D=Oe("span"),D.innerHTML=P,O=kt(),R=Oe("p"),R.innerHTML=X,this.h()},l($){p=Ut($,"You are currently viewing "),d=Ne($,"SPAN",{style:!0,class:!0});var pe=Ge(d);y=Ut(pe,h),pe.forEach(oe),v=Et($),T=Ut($,a),S=Et($),D=Ne($,"SPAN",{style:!0,class:!0,"data-svelte-h":!0}),lo(D)!=="svelte-1p4e1wj"&&(D.innerHTML=P),O=Et($),R=Ne($,"P",{class:!0,"data-svelte-h":!0}),lo(R)!=="svelte-13ivmis"&&(R.innerHTML=X),this.h()},h(){$e(d,"color","#3878c5"),re(d,"class","svelte-lx8mb2"),$e(D,"color","#00205b"),re(D,"class","svelte-lx8mb2"),re(R,"class","svelte-lx8mb2")},m($,pe){Me($,p,pe),Me($,d,pe),Ae(d,y),Me($,v,pe),Me($,T,pe),Me($,S,pe),Me($,D,pe),Me($,O,pe),Me($,R,pe)},p($,pe){pe[0]&1&&h!==(h=$[0].place.name+"")&&Si(y,h),pe[0]&1&&a!==(a=Er[$[0].place.type].name+"")&&Si(T,a)},d($){$&&(oe(p),oe(d),oe(v),oe(T),oe(S),oe(D),oe(O),oe(R))}}}function j1(l){let p,d,h,y,v,a,T;const S=[Bu[l[37]],{id:l[37]+"-fill"},{type:"fill"},{isChild:l[5][l[37]]},{click:!0},{selected:l[4].selected},{highlight:!0},{highlighted:l[4].highlighted},{hover:!0},{hovered:l[4].hovered},{layout:{visibility:l[4].type==l[37]||l[4].childType==l[37]?"visible":"none"}},{paint:l[4].type==l[37]?Qn["fill-self"]:l[4].childType==l[37]?Qn["fill-child"]:Qn.fill}];let D={};for(let $=0;$<S.length;$+=1)D=_p(D,S[$]);p=new Eh({props:D}),p.$on("select",l[8]);const P=[Bu[l[37]],{id:l[37]+"-bounds"},{type:"line"},{selected:l[4].selected},{highlight:!0},{highlighted:l[4].highlighted},{layout:{visibility:l[4].type==l[37]||l[4].childType==l[37]?"visible":"none"}},{paint:l[4].type==l[37]?Qn["line-active"]:l[4].childType==l[37]?Qn["line-child"]:Qn.line}];let O={};for(let $=0;$<P.length;$+=1)O=_p(O,P[$]);h=new Eh({props:O});const R=[Bu[l[37]],{id:l[37]+"-self"},{type:"line"},{selected:l[4].selected},{layout:{visibility:l[4].type==l[37]?"visible":"none"}},{paint:l[4].type==l[37]?Qn["line-self"]:Qn.line}];let X={};for(let $=0;$<R.length;$+=1)X=_p(X,R[$]);return v=new Eh({props:X}),{c(){ui(p.$$.fragment),d=kt(),ui(h.$$.fragment),y=kt(),ui(v.$$.fragment),a=kt()},l($){ci(p.$$.fragment,$),d=Et($),ci(h.$$.fragment,$),y=Et($),ci(v.$$.fragment,$),a=Et($)},m($,pe){pi(p,$,pe),Me($,d,pe),pi(h,$,pe),Me($,y,pe),pi(v,$,pe),Me($,a,pe),T=!0},p($,pe){const le=pe[0]&48?wh(S,[S[0],S[1],S[2],pe[0]&32&&{isChild:$[5][$[37]]},S[4],pe[0]&16&&{selected:$[4].selected},S[6],pe[0]&16&&{highlighted:$[4].highlighted},S[8],pe[0]&16&&{hovered:$[4].hovered},pe[0]&16&&{layout:{visibility:$[4].type==$[37]||$[4].childType==$[37]?"visible":"none"}},pe[0]&16&&{paint:$[4].type==$[37]?Qn["fill-self"]:$[4].childType==$[37]?Qn["fill-child"]:Qn.fill}]):{};p.$set(le);const me=pe[0]&16?wh(P,[P[0],P[1],P[2],{selected:$[4].selected},P[4],{highlighted:$[4].highlighted},{layout:{visibility:$[4].type==$[37]||$[4].childType==$[37]?"visible":"none"}},{paint:$[4].type==$[37]?Qn["line-active"]:$[4].childType==$[37]?Qn["line-child"]:Qn.line}]):{};h.$set(me);const ve=pe[0]&16?wh(R,[R[0],R[1],R[2],{selected:$[4].selected},{layout:{visibility:$[4].type==$[37]?"visible":"none"}},{paint:$[4].type==$[37]?Qn["line-self"]:Qn.line}]):{};v.$set(ve)},i($){T||(ct(p.$$.fragment,$),ct(h.$$.fragment,$),ct(v.$$.fragment,$),T=!0)},o($){_t(p.$$.fragment,$),_t(h.$$.fragment,$),_t(v.$$.fragment,$),T=!1},d($){$&&(oe(d),oe(y),oe(a)),hi(p,$),hi(h,$),hi(v,$)}}}function eg(l){let p,d;const h=[p_[l[37]]];let y={$$slots:{default:[j1]},$$scope:{ctx:l}};for(let v=0;v<h.length;v+=1)y=_p(y,h[v]);return p=new tv({props:y}),{c(){ui(p.$$.fragment)},l(v){ci(p.$$.fragment,v)},m(v,a){pi(p,v,a),d=!0},p(v,a){const T={};a[0]&48|a[1]&1024&&(T.$$scope={dirty:a,ctx:v}),p.$set(T)},i(v){d||(ct(p.$$.fragment,v),d=!0)},o(v){_t(p.$$.fragment,v),d=!1},d(v){hi(p,v)}}}function G1(l){let p,d,h=wi(["dz","sdz","dea","lgd"]),y=[];for(let a=0;a<4;a+=1)y[a]=eg(Xm(l,h,a));const v=a=>_t(y[a],1,1,()=>{y[a]=null});return{c(){for(let a=0;a<4;a+=1)y[a].c();p=ri()},l(a){for(let T=0;T<4;T+=1)y[T].l(a);p=ri()},m(a,T){for(let S=0;S<4;S+=1)y[S]&&y[S].m(a,T);Me(a,p,T),d=!0},p(a,T){if(T[0]&304){h=wi(["dz","sdz","dea","lgd"]);let S;for(S=0;S<4;S+=1){const D=Xm(a,h,S);y[S]?(y[S].p(D,T),ct(y[S],1)):(y[S]=eg(D),y[S].c(),ct(y[S],1),y[S].m(p.parentNode,p))}for(Xr(),S=4;S<4;S+=1)v(S);Yr()}},i(a){if(!d){for(let T=0;T<4;T+=1)ct(y[T]);d=!0}},o(a){y=y.filter(Boolean);for(let T=0;T<4;T+=1)_t(y[T]);d=!1},d(a){a&&oe(p),or(y,a)}}}function tg(l){let p,d,h=l[0].place.name+"",y,v,a,T=wi([...l[0].place.parents].reverse()),S=[];for(let D=0;D<T.length;D+=1)S[D]=ig(Wm(l,T,D));return{c(){p=Oe("span"),d=Nt("Select a larger area containing "),y=Nt(h),v=kt(),a=Oe("span");for(let D=0;D<S.length;D+=1)S[D].c();this.h()},l(D){p=Ne(D,"SPAN",{class:!0});var P=Ge(p);d=Ut(P,"Select a larger area containing "),y=Ut(P,h),P.forEach(oe),v=Et(D),a=Ne(D,"SPAN",{class:!0});var O=Ge(a);for(let R=0;R<S.length;R+=1)S[R].l(O);O.forEach(oe),this.h()},h(){re(p,"class","text-bold svelte-lx8mb2"),re(a,"class","text-small svelte-lx8mb2")},m(D,P){Me(D,p,P),Ae(p,d),Ae(p,y),Me(D,v,P),Me(D,a,P);for(let O=0;O<S.length;O+=1)S[O]&&S[O].m(a,null)},p(D,P){if(P[0]&1&&h!==(h=D[0].place.name+"")&&Si(y,h),P[0]&1){T=wi([...D[0].place.parents].reverse());let O;for(O=0;O<T.length;O+=1){const R=Wm(D,T,O);S[O]?S[O].p(R,P):(S[O]=ig(R),S[O].c(),S[O].m(a,null))}for(;O<S.length;O+=1)S[O].d(1);S.length=T.length}},d(D){D&&(oe(p),oe(v),oe(a)),or(S,D)}}}function ig(l){let p,d,h=l[34]>0?"↳ ":"",y,v=l[35].name+"",a,T;return{c(){p=Oe("span"),d=new po(!1),y=Oe("a"),a=Nt(v),this.h()},l(S){p=Ne(S,"SPAN",{style:!0,class:!0});var D=Ge(p);d=ho(D,!1),y=Ne(D,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var P=Ge(y);a=Ut(P,v),P.forEach(oe),D.forEach(oe),this.h()},h(){d.a=y,re(y,"href",T=ni+"/"+l[35].code),re(y,"data-sveltekit-noscroll",""),re(y,"data-sveltekit-keepfocus",""),re(y,"class","svelte-lx8mb2"),$e(p,"display","block"),$e(p,"margin-left",(l[34]>0?(l[34]-1)*15:0)+"px"),re(p,"class","svelte-lx8mb2")},m(S,D){Me(S,p,D),d.m(h,p),Ae(p,y),Ae(y,a)},p(S,D){D[0]&1&&v!==(v=S[35].name+"")&&Si(a,v),D[0]&1&&T!==(T=ni+"/"+S[35].code)&&re(y,"href",T)},d(S){S&&oe(p)}}}function Z1(l){let p,d,h=l[0].place.name+"",y,v,a=Er[l[0].place.type].name+"",T;return{c(){p=Oe("span"),d=Nt("No areas below "),y=Nt(h),v=kt(),T=Nt(a),this.h()},l(S){p=Ne(S,"SPAN",{class:!0});var D=Ge(p);d=Ut(D,"No areas below "),y=Ut(D,h),v=Et(D),T=Ut(D,a),D.forEach(oe),this.h()},h(){re(p,"class","muted svelte-lx8mb2")},m(S,D){Me(S,p,D),Ae(p,d),Ae(p,y),Ae(p,v),Ae(p,T)},p(S,D){D[0]&1&&h!==(h=S[0].place.name+"")&&Si(y,h),D[0]&1&&a!==(a=Er[S[0].place.type].name+"")&&Si(T,a)},d(S){S&&oe(p)}}}function K1(l){let p,d,h=(l[0].place.children[0]?Er[l[0].place.children[0].type].name:"Areas")+"",y,v,a=l[0].place.name+"",T,S,D,P,O=wi(l[0].place.children),R=[];for(let X=0;X<O.length;X+=1)R[X]=ng(Hm(l,O,X));return{c(){p=Oe("span"),d=Nt("Select a "),y=Nt(h),v=Nt(" within "),T=Nt(a),S=Oe("br"),D=kt(),P=Oe("span");for(let X=0;X<R.length;X+=1)R[X].c();this.h()},l(X){p=Ne(X,"SPAN",{class:!0});var $=Ge(p);d=Ut($,"Select a "),y=Ut($,h),v=Ut($," within "),T=Ut($,a),$.forEach(oe),S=Ne(X,"BR",{class:!0}),D=Et(X),P=Ne(X,"SPAN",{class:!0});var pe=Ge(P);for(let le=0;le<R.length;le+=1)R[le].l(pe);pe.forEach(oe),this.h()},h(){re(p,"class","text-bold svelte-lx8mb2"),re(S,"class","svelte-lx8mb2"),re(P,"class","text-small svelte-lx8mb2")},m(X,$){Me(X,p,$),Ae(p,d),Ae(p,y),Ae(p,v),Ae(p,T),Me(X,S,$),Me(X,D,$),Me(X,P,$);for(let pe=0;pe<R.length;pe+=1)R[pe]&&R[pe].m(P,null)},p(X,$){if($[0]&1&&h!==(h=(X[0].place.children[0]?Er[X[0].place.children[0].type].name:"Areas")+"")&&Si(y,h),$[0]&1&&a!==(a=X[0].place.name+"")&&Si(T,a),$[0]&1){O=wi(X[0].place.children);let pe;for(pe=0;pe<O.length;pe+=1){const le=Hm(X,O,pe);R[pe]?R[pe].p(le,$):(R[pe]=ng(le),R[pe].c(),R[pe].m(P,null))}for(;pe<R.length;pe+=1)R[pe].d(1);R.length=O.length}},d(X){X&&(oe(p),oe(S),oe(D),oe(P)),or(R,X)}}}function ng(l){let p,d=l[32].name+"",h,y,v=l[34]<l[0].place.children.length-1?", ":"",a;return{c(){p=Oe("a"),h=Nt(d),a=Nt(v),this.h()},l(T){p=Ne(T,"A",{href:!0,"data-sveltekit-noscroll":!0,"data-sveltekit-keepfocus":!0,class:!0});var S=Ge(p);h=Ut(S,d),S.forEach(oe),a=Ut(T,v),this.h()},h(){re(p,"href",y=ni+"/"+l[32].code),re(p,"data-sveltekit-noscroll",""),re(p,"data-sveltekit-keepfocus",""),re(p,"class","svelte-lx8mb2")},m(T,S){Me(T,p,S),Ae(p,h),Me(T,a,S)},p(T,S){S[0]&1&&d!==(d=T[32].name+"")&&Si(h,d),S[0]&1&&y!==(y=ni+"/"+T[32].code)&&re(p,"href",y),S[0]&1&&v!==(v=T[34]<T[0].place.children.length-1?", ":"")&&Si(a,v)},d(T){T&&(oe(p),oe(a))}}}function H1(l){let p,d,h=l[0].place&&l[0].ni&&Jm(l);return{c(){h&&h.c(),p=ri()},l(y){h&&h.l(y),p=ri()},m(y,v){h&&h.m(y,v),Me(y,p,v),d=!0},p(y,v){y[0].place&&y[0].ni?h?(h.p(y,v),v[0]&1&&ct(h,1)):(h=Jm(y),h.c(),ct(h,1),h.m(p.parentNode,p)):h&&(Xr(),_t(h,1,1,()=>{h=null}),Yr())},i(y){d||(ct(h),d=!0)},o(y){_t(h),d=!1},d(y){y&&oe(p),h&&h.d(y)}}}function W1(l){let p,d,h,y,v,a,T,S,D,P,O,R,X,$,pe,le;return document.title=p=l[0].place.name+" Local Statistics Explorer",X=new u1({}),pe=new y_({props:{column:"wide",$$slots:{default:[H1]},$$scope:{ctx:l}}}),{c(){d=Oe("meta"),h=Oe("meta"),v=Oe("meta"),a=Oe("meta"),S=Oe("meta"),P=Oe("meta"),R=kt(),ui(X.$$.fragment),$=kt(),ui(pe.$$.fragment),this.h()},l(me){const ve=d_("svelte-ovl3z1",document.head);d=Ne(ve,"META",{name:!0,content:!0,class:!0}),h=Ne(ve,"META",{property:!0,content:!0,class:!0}),v=Ne(ve,"META",{property:!0,content:!0,class:!0}),a=Ne(ve,"META",{property:!0,content:!0,class:!0}),S=Ne(ve,"META",{property:!0,content:!0,class:!0}),P=Ne(ve,"META",{name:!0,content:!0,class:!0}),ve.forEach(oe),R=Et(me),ci(X.$$.fragment,me),$=Et(me),ci(pe.$$.fragment,me),this.h()},h(){re(d,"name","description"),re(d,"content",""),re(d,"class","svelte-lx8mb2"),re(h,"property","og:title"),re(h,"content",y=l[0].place.name+" Local Statistics"),re(h,"class","svelte-lx8mb2"),re(v,"property","og:type"),re(v,"content","website"),re(v,"class","svelte-lx8mb2"),re(a,"property","og:url"),re(a,"content",T=wp.base+"/"+l[0].place.code+"/"),re(a,"class","svelte-lx8mb2"),re(S,"property","og:description"),re(S,"content",D="Explore NISRA Statistics for "+l[0].place.name+"."),re(S,"class","svelte-lx8mb2"),re(P,"name","description"),re(P,"content",O="Explore NISRA Statistics for "+l[0].place.name+"."),re(P,"class","svelte-lx8mb2")},m(me,ve){Ae(document.head,d),Ae(document.head,h),Ae(document.head,v),Ae(document.head,a),Ae(document.head,S),Ae(document.head,P),Me(me,R,ve),pi(X,me,ve),Me(me,$,ve),pi(pe,me,ve),le=!0},p(me,ve){(!le||ve[0]&1)&&p!==(p=me[0].place.name+" Local Statistics Explorer")&&(document.title=p),(!le||ve[0]&1&&y!==(y=me[0].place.name+" Local Statistics"))&&re(h,"content",y),(!le||ve[0]&1&&T!==(T=wp.base+"/"+me[0].place.code+"/"))&&re(a,"content",T),(!le||ve[0]&1&&D!==(D="Explore NISRA Statistics for "+me[0].place.name+"."))&&re(S,"content",D),(!le||ve[0]&1&&O!==(O="Explore NISRA Statistics for "+me[0].place.name+"."))&&re(P,"content",O);const nt={};ve[0]&127|ve[1]&1024&&(nt.$$scope={dirty:ve,ctx:me}),pe.$set(nt)},i(me){le||(ct(X.$$.fragment,me),ct(pe.$$.fragment,me),le=!0)},o(me){_t(X.$$.fragment,me),_t(pe.$$.fragment,me),le=!1},d(me){me&&(oe(R),oe($)),oe(d),oe(h),oe(v),oe(a),oe(S),oe(P),hi(X,me),hi(pe,me)}}}function yp(l){let p=(l*100).toFixed(1);return p<.1?"<0.1%":p+"%"}function Ke(l,p){return p.meta_data.hasOwnProperty(l)?p.meta_data[l][0].year:null}function rg(l){let p=l.data.MYETotal.value/(l.hectares/100);return p<10?p="<10":p=(Math.round(p*10)/10).toLocaleString(void 0,{minimumFractionDigits:1}),p}function X1(l,p,d){let h,y,{data:v}=p,a,T,S=null,D={selected:null,type:null,childType:null,highlighted:[],hovered:null},P={};Object.keys(Bu).forEach(we=>d(5,P[we]=!1,P));function O(we){let qe=[];if(v.place.data.hasOwnProperty(we)){let Be=v.place.data[we].perc,Ye,ht;Be.hasOwnProperty("2021")?(Ye=Be[2021],ht=v.ni.data[we].perc[2021]):(Ye=Be,ht=v.ni.data[we].perc);let mt,Mt,ki=Object.keys(sp[we]);for(let Je=0;Je<ki.length;Je++){for(let vt=0;vt<Object.keys(Ye).length;vt++)if(sp[we][ki[Je]].category==Object.keys(Ye)[vt]){mt=sp[we][ki[Je]].category,Mt=sp[we][ki[Je]].label;break}Ye[mt]<=100&&(qe.push({group:"Northern Ireland",category:Mt,perc:ht[mt],width:0}),v.place.name!="Northern Ireland"&&qe.push({group:v.place.name,category:Mt,perc:Ye[mt],width:0}))}}return qe}function R(we){S&&S.fitBounds(we,{padding:20})}function X(we){let qe=JSON.parse(JSON.stringify(D)),Be=v.place.code,Ye=v.place.type,ht=v.place.children[0]?v.place.children.map(vt=>vt.code):[],mt=v.place.type=="rgn"?"cty":ht[0]?v.place.children[0].type:null;d(4,D.selected=Be,D),d(4,D.type=Ye,D),d(4,D.childType=mt,D),d(4,D.highlighted=ht,D);let Mt=Object.keys(Bu),ki=["fill-color","fill-opacity"],Je=["line-color","line-width","line-opacity"];S&&(D.type!=qe.type||D.childType!=qe.childType)&&(Mt.forEach(vt=>{let vi=vt==Ye||mt&&vt==mt?"visible":"none";S.setLayoutProperty(vt+"-fill","visibility",vi),S.setLayoutProperty(vt+"-bounds","visibility",vi),v.place.type!="ni"&&S.setLayoutProperty(vt+"-self","visibility",vi),d(5,P[vt]=vt==mt,P)}),v.place.type!="ni"&&(ki.forEach(vt=>S.setPaintProperty(Ye+"-fill",vt,Qn[ht[0]?"fill-active":"fill-self"][vt])),Je.forEach(vt=>{S.setPaintProperty(Ye+"-bounds",vt,Qn["line-active"][vt]),S.setPaintProperty(Ye+"-self",vt,Qn["line-self"][vt])})),mt&&(ki.forEach(vt=>S.setPaintProperty(mt+"-fill",vt,Qn["fill-child"][vt])),Je.forEach(vt=>S.setPaintProperty(mt+"-bounds",vt,Qn["line-child"][vt]))))}function $(we){X(),R(v.place.bounds)}function pe(we){vd(`${ni}/${we.detail.code}/`,{noScroll:!0,keepFocus:!0})}function le(we){vd(`${ni}/${we.detail.value}/`,{noScroll:!0,keepFocus:!0})}function me(){d(2,T=a<575?1:window.getComputedStyle(grid).getPropertyValue("grid-template-columns").split(" ").length)}function ve(we){return we==1?"largest":we==v.place.count?"smallest":we+o_(we)+" largest"}function nt(we){let qe="";if(we.data.hasOwnProperty("PopChange")){let Be=we.data.PopChange.value,Ye=Object.keys(Be).slice(-1),ht=Ye-10,mt=(Be[Ye]-Be[ht])/Be[ht]*100,Mt;mt<0?Mt="Down":mt>0&&(Mt="Up"),qe="<p>The population of "+we.name+" in "+ht+' was <span class="text-big">'+Be[ht].toLocaleString()+"</span> and in "+Ye+' was <span class="text-big">'+Be[Ye].toLocaleString()+'</span><p><span class="em '+s_(mt)+'">'+Mt+" "+l_(mt,"%",1)+"</span> since "+ht+" Mid-Year Population Estimate</p>"}return qe}function Ve(we){let Be=we.replaceAll("[",".").replaceAll("]","").split("."),Ye=v.place.data;for(let ht=0;ht<Be.length;ht++)Ye.hasOwnProperty(Be[ht])?Ye=Ye[Be[ht]]:Ye=[];return Ye}function Ue(we){let Be=we.replaceAll("[",".").replaceAll("]","").split("."),Ye=v.ni.data,ht=Ve(we);Be[0]=="grouped_data_nocompare"|Be[0]=="grouped_data_areacompare"&&(Ye=v.ni);for(let mt=0;mt<Be.length;mt++)Ye.hasOwnProperty(Be[mt])?Ye=Ye[Be[mt]]:Ye=[];return ht>Ye+2?Ye="<p>This is higher than the NI value</p>":ht<Ye-2?Ye="<p>This is lower than the NI value</p>":Ye="<p>This is similar to the NI value</p>",Ye}function tt(we,qe){return Ve(we)>0&&qe.name=="Northern Ireland"?"<p><span class='text-big'>"+Ve("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+Ve("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p>":Ve(we)>0&&qe.name!="Northern Ireland"?"<p><span class='text-big'>"+Ve("GP.value.PRACS").toLocaleString()+"</span> GP practices with an average of <span class='text-big'>"+Ve("GP.value.PRACLIST").toLocaleString()+"</span> patients per practice.</p><p>"+Ue("GP.value.PRACLIST").toLocaleString()+"<span style='color: #1460aa'> (NI "+v.ni.data.GP.value.PRACLIST.toLocaleString()+" patients per practice) </span></p>":"<p><span class='text-big'>0</span> GP practices.</p>"}function Vt(we){return v.place.data.hasOwnProperty(we)?Object.keys(v.place.data[we].perc).slice(-1)+" Census":null}function qt(we,qe){if(qe.type=="ni")return"";if(qe.type=="lgd")return"You can also explore "+we+" data for <a href = '"+ni+"/"+qe.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[0].name+"</a>";if(qe.type=="dea")return"You can also explore "+we+" data for <a href = '"+ni+"/"+qe.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[0].name+"</a> and <a href = '"+ni+"/"+qe.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[1].name+"</a>";if(qe.type=="sdz")return"You can also explore "+we+" data for <a href = '"+ni+"/"+qe.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[0].name+"</a>, <a href = '"+ni+"/"+qe.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[1].name+"</a> and <a href = '"+ni+"/"+qe.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[2].name+"</a>";if(qe.type=="dz")return"You can also explore "+we+" data for <a href = '"+ni+"/"+qe.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[0].name+"</a>, <a href = '"+ni+"/"+qe.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[1].name+"</a>, <a href = '"+ni+"/"+qe.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[2].name+"</a> and <a href = '"+ni+"/"+qe.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+qe.parents[3].name+"</a>"}function Ze(we,qe){if(we.type=="ni")return"";if(we.type=="dea"&qe=="ni, lgd")return"<a href = '"+ni+"/"+we.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[0].name+"</a> and <a href = '"+ni+"/"+we.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[1].name+"</a>";if(we.type=="sdz"&qe=="ni, lgd")return"<a href = '"+ni+"/"+we.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[1].name+"</a> and <a href = '"+ni+"/"+we.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[2].name+"</a>";if(we.type=="dz"&qe=="ni, lgd")return"<a href = '"+ni+"/"+we.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[2].name+"</a> and <a href = '"+ni+"/"+we.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[3].name+"</a>";if(we.type=="lgd"&qe=="ni, dea")return"<a href = '"+ni+"/"+we.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[0].name+"</a>";if(we.type=="sdz"&qe=="ni, dea")return"<a href = '"+ni+"/"+we.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[0].name+"</a> and <a href = '"+ni+"/"+we.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[2].name+"</a>";if(we.type=="dz"&qe=="ni, dea")return"<a href = '"+ni+"/"+we.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[2].name+"</a> and <a href = '"+ni+"/"+we.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[3].name+"</a>";if(we.type=="sdz"&qe=="ni, lgd, dea")return"<a href = '"+ni+"/"+we.parents[0].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[0].name+"</a>, <a href = '"+ni+"/"+we.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[1].name+"</a> and <a href = '"+ni+"/"+we.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[2].name+"</a>";if(we.type=="dz"&qe=="ni, lgd, dea")return"<a href = '"+ni+"/"+we.parents[1].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[1].name+"</a>, <a href = '"+ni+"/"+we.parents[2].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[2].name+"</a> and <a href = '"+ni+"/"+we.parents[3].code+"/' data-sveltekit-noscroll data-sveltekit-keepfocus>"+we.parents[3].name+"</a>"}function Xe(we){let qe=we.data.MYETotal.value/(we.hectares/100),Be=v.ni.data.MYETotal.value/(v.ni.hectares/100),Ye=qe/Be;return Ye<.8?Ye="Lower than the Northern Ireland average":Ye.toFixed(0)>1?Ye='Approximately <span class = "em" style = "background-color: lightgrey">'+Ye.toFixed(0)+" times </span> the Northern Ireland average":Ye.toFixed(0)==1?Ye='Approximately <span class = "em" style = "background-color: lightgrey">the same density level</span> as the Northern Ireland average':Ye='Approximately <span class = "em" style = "background-color: lightgrey">1/'+(1/Ye).toFixed(0)+" </span> of the Northern Ireland average",Ye}function wt(we){S=we,d(3,S)}function jt(){a=this.clientWidth,d(1,a)}return l.$$set=we=>{"data"in we&&d(0,v=we.data)},l.$$.update=()=>{l.$$.dirty[0]&2&&a&&me(),l.$$.dirty[0]&1&&v.place&&v.place.type!="ni",l.$$.dirty[0]&524289&&d(6,h=y?null:v.place.type!="ni"?"ni":null),l.$$.dirty[0]&1&&v.place&&$(v.place)},d(19,y=!1),[v,a,T,S,D,P,h,O,pe,le,ve,nt,Ve,Ue,tt,Vt,qt,Ze,Xe,y,wt,jt]}class ab extends lr{constructor(p){super(),ur(this,p,X1,W1,sr,{data:0},null,[-1,-1])}}export{ab as component,rb as universal};
